/*! SublimeVideo app 2.6.5 | (c) 2014 Jilion SA | http://sublimevideo.net
*/(function(){ (function(){var Module,ModuleManager,api,indexOf,isString,moduleManager;return indexOf=function(e,t){var i;if(i=0,e.indexOf)return e.indexOf(t);for(;e.length>i;){if(e[i]===t)return i;i++}return-1},isString=function(e){return"string"==typeof e||e instanceof String},Module=function(){function Module(e,t,i){this.name=e,this.deps=t,this.body=i,this.object_=null}return Module.className="Module",Module.prototype.isLoaded=function(){return this.loaded_},Module.prototype.load=function(context,args){if(!this.loaded_){if(this.loaded_=!0,isString(this.body))try{this.body=eval(this.body)}catch(e){}return this.object_=this.body.apply(context,args)}},Module.prototype.object=function(){return this.object_},Module}(),ModuleManager=function(){function e(){this._context={},this._registeredModules={},this._pendingModules={},this._pendingCalls=[]}return e.className="ModuleManager",e.prototype.registerModule=function(e){return this._hasModules(e.deps)?(this._registeredModules[e.name]=e,this._isSkinModule(e.name)&&this._unsafeModuleObjects([e.name]),this._updatePendingModules(),this._updatePendingCalls()):this._pendingModules[e.name]=e},e.prototype._isSkinModule=function(e){return/skin/.test(e)},e.prototype.moduleObjects=function(e,t){return null!=t?this._hasModules(e)?t.apply(this,this._unsafeModuleObjects(e)):this._pendingCalls.push({moduleNames:e,callback:t}):void 0},e.prototype._hasModules=function(e){var t,i,n;for(i=0,n=e.length;n>i;i++)if(t=e[i],null==this._registeredModules[t])return!1;return!0},e.prototype._unsafeModuleObjects=function(e){var t,i,n,o,r;if(n=[],1>e.length)return n;for(o=0,r=e.length;r>o;o++)i=e[o],t=this._registeredModules[i],t.isLoaded()||t.load(this._context,this._unsafeModuleObjects(t.deps)),n.push(t.object());return n},e.prototype._unloadedModules=function(){var e,t,i;i=this._registeredModules;for(t in i)e=i[t],e.loaded_||console.log(t);return void 0},e.prototype._updatePendingModules=function(){var e,t,i,n,o,r,s;t=[],s=this._pendingModules;for(n in s)i=s[n],this._hasModules(i.deps)&&(this._registeredModules[i.name]=i,this._isSkinModule(i.name)&&this._unsafeModuleObjects([i.name]),t.push(i.name));if(t.length>0){for(o=0,r=t.length;r>o;o++)e=t[o],delete this._pendingModules[e];return this._updatePendingModules()}},e.prototype._updatePendingCalls=function(){var e,t,i,n,o,r,s;for(n=this._pendingCalls.slice(),s=[],o=0,r=n.length;r>o;o++)e=n[o],i=e.moduleNames,this._hasModules(i)?(t=indexOf(this._pendingCalls,e),this._pendingCalls.splice(t,1),s.push(e.callback.apply(this,this._unsafeModuleObjects(i)))):s.push(void 0);return s},e}(),moduleManager=new ModuleManager,window.sublime_||(window.sublime_={}),api=window.sublime_,api.define=function(e,t,i){return moduleManager.registerModule(new Module(e,t,i))},api.require=function(e,t){return moduleManager.moduleObjects(e,t)},api.m=moduleManager})();var require;require=function(e,t){return window.sublime_.require(e,t)},sublime_.define("animations/abstract_style_animation",[],function(){var e,t,i;return i={},t={},e=function(){function e(e,t,i){null==i&&(i={}),this.view_=e,this._element_=this.view_._element(),this.animatingProperties_=t,this.duration_=i.duration||0,this.callback_=i.callback}return e.className="AbstractStyleAnimation",e.prototype.start=function(){},e.prototype.cancel=function(){},e.prototype.dispose_=function(){},e}(),i.exports=e,i.exports||t}),sublime_.define("animations/animation_scheduler",[],function(){var e,t;t={},e={};var i,n;return function(){function t(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var i=Object.prototype.toString.call(e);if("[object Window]"==i)return"object";if("[object Array]"==i||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==i||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function o(e){return e.call.apply(e.bind,arguments)}function r(e,t){if(!e)throw Error();if(arguments.length>2){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function s(){return s=Function.prototype.bind&&-1!=(""+Function.prototype.bind).indexOf("native code")?o:r,s.apply(null,arguments)}function a(){}function l(){return w.navigator?w.navigator.userAgent:null}function u(e){var t;if(!(t=I[e])){t=0;for(var i=(""+z).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),n=(""+e).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),o=Math.max(i.length,n.length),r=0;0==t&&o>r;r++){var s=i[r]||"",a=n[r]||"",l=RegExp("(\\d*)(\\D*)","g"),u=RegExp("(\\d*)(\\D*)","g");do{var h=l.exec(s)||["","",""],p=u.exec(a)||["","",""];if(0==h[0].length&&0==p[0].length)break;t=((0==h[1].length?0:parseInt(h[1],10))<(0==p[1].length?0:parseInt(p[1],10))?-1:(0==h[1].length?0:parseInt(h[1],10))>(0==p[1].length?0:parseInt(p[1],10))?1:0)||((0==h[2].length)<(0==p[2].length)?-1:(0==h[2].length)>(0==p[2].length)?1:0)||(h[2]<p[2]?-1:h[2]>p[2]?1:0)}while(0==t)}t=I[e]=t>=0}return t}function h(){D[9]||(D[9]=F&&!!document.documentMode&&document.documentMode>=9)}function p(e){var t,i=U;for(t in i)e.call(void 0,i[t],t,i)}function c(){var e,t=U;for(e in t)return!1;return!0}function d(e,t,i){this.listener_=e,this.interval_=t||0,this.handler_=i,this.callback_=s(this.doAction_,this)}function _(){N||(N=new d(function(){y()},20));var e=N;0!=e.id_||e.start()}function y(){var e=x();p(function(t){t.onAnimationFrame(e)}),c()||_()}var g,f,m,v,w=this,b="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),T=0,x=Date.now||function(){return+new Date};v=m=f=g=!1;var P;if(P=l()){var k=w.navigator;g=0==P.indexOf("Opera"),f=!g&&-1!=P.indexOf("MSIE"),m=!g&&-1!=P.indexOf("WebKit"),v=!g&&!m&&"Gecko"==k.product}var z,S=g,F=f,M=v,A=m;e:{var C,B="";if(S&&w.opera)var V=w.opera.version,B="function"==typeof V?V():V;else if(M?C=/rv\:([^\);]+)(\)|;)/:F?C=/MSIE\s+([^\);]+)(\)|;)/:A&&(C=/WebKit\/(\S+)/),C)var E=C.exec(l()),B=E?E[1]:"";if(F){var L,O=w.document;if(L=O?O.documentMode:void 0,L>parseFloat(B)){z=""+L;break e}}z=B}var I={},D={};!F||h(),!F||h(),F&&u("8"),!A||u("528"),M&&u("1.9b")||F&&u("8")||S&&u("9.5")||A&&u("528"),M&&!u("8")||F&&u("9");var R=window;(function(){function e(){}e.prototype=a.prototype,d.superClass_=a.prototype,d.prototype=new e})(),d.prototype.id_=0,d.prototype.start=function(e){this.stop();var i=this.callback_,e=void 0!==e?e:this.interval_;if("function"!=t(i)){if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=s(i.handleEvent,i)}this.id_=e>2147483647?-1:R.setTimeout(i,e||0)},d.prototype.stop=function(){0!=this.id_&&R.clearTimeout(this.id_),this.id_=0},d.prototype.doAction_=function(){this.id_=0,this.listener_&&this.listener_.call(this.handler_)};var U={},N=null;i=function(e){var t=e[b]||(e[b]=++T);t in U||(U[t]=e),_()},n=function(e){e=e[b]||(e[b]=++T),delete U[e],c()&&N&&N.stop()},e.AnimationSchedule=i,e.AnimationUnschedule=n}(),t.exports||e});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("animations/css_animation",["animations/abstract_style_animation","core/util","core/events","animations/timer_animation"],function(e,t,i,n){var o,r,s,a;return a=t._,s={},r={},o=function(e){function t(e,i,n){var o,r,s;null==n&&(n={}),t.__super__.constructor.apply(this,arguments),this.timingFunction_=n.timingFunction||"ease",o={alpha:"opacity",backgroundColor:"background-color",color:"color",width:"width",height:"height"},this.endProperties_={},this.bindedOnTransitionFinished_=a.bind(this,this.onTransitionFinished_),this.transitionPrefix_=t.transitionInfo().prefix,this.transitionEndEvent_=t.transitionInfo().endEvent;for(r in i)s=i[r],this.endProperties_[o[r]]=s;this.endProperties_[this.transitionPrefix_+"transition-property"]=a.keys(this.endProperties_).join(", "),this.endProperties_[this.transitionPrefix_+"transition-duration"]=this.duration_+"s",this.endProperties_[this.transitionPrefix_+"transition-timing-function"]=this.timingFunction_,this.transitionPropertiesToReset_=[this.transitionPrefix_+"transition-property",this.transitionPrefix_+"transition-duration",this.transitionPrefix_+"transition-timing-function"],this.started_=!1}return __extends(t,e),t.className="CssAnimation",t.isSupported=function(){return null!==t.transitionInfo().prefix},t.transitionInfo=function(){var e,i,n,o,r,s,a;if(!t.transitionInfo_){n=null,i=null,s={Webkit:"webkit",Moz:"",O:"o",ms:"MS"},a=document.createElement("div");for(r in s)o=s[r],void 0===a.style[r+"TransitionProperty"]||(n="-"+r.toLowerCase()+"-",i=o);e=i?i+"TransitionEnd":"transitionend",t.transitionInfo_={prefix:n,endEvent:e}}return t.transitionInfo_},t.prototype.cleanTransitionProperties_=function(){return this.view_.css(null,this.transitionPropertiesToReset_)},t.prototype.cleanTransitionListener_=function(){return i.unlisten(this._element_,this.transitionEndEvent_,this.bindedOnTransitionFinished_)},t.prototype.dispose_=function(){return this.disposed_=!0,this.cleanTransitionListener_(),this.cleanTransitionProperties_()},t.prototype.setViewStyleWithCurranteStateOfAnimatingProperties_=function(){var e;return this.animatingProperties_.alpha?(e=parseFloat(a.computedStyle(this._element_,"opacity")),this.view_.internalSetAlpha_(e)):void 0},t.prototype.onTransitionFinished_=function(e){return e.stopPropagation(),this.complete_()},t.prototype.complete_=function(){return!this.disposed_&&(this.dispose_(),this.callback_)?this.callback_(!0):void 0},t.prototype.cancel=function(){return this.canceled_=!0,!this.disposed_&&(this.setViewStyleWithCurranteStateOfAnimatingProperties_(),this.dispose_(),this.callback_)?this.callback_(!1):void 0},t.prototype.setTimeout_=function(e,t){var i;return null==t&&(t=0),a.iOS&&a.compareVersions(a.OSVersion,"6")>=0?(i=new n,i.startValue=0,i.endValue=1,i.duration=t||.1,i.onChangeValue=function(){},i.onEnd=e,i.start()):setTimeout(e,t)},t.prototype.start=function(){var e;return this.started_?void 0:(this.started_=!0,0===this.duration_?(this.view_.css(this.endProperties_),this.onTransitionFinished_()):(e=a.Firefox?20:0,this.setTimeout_(a.bind(this,function(){return this.canceled_?void 0:(this.view_.css(this.endProperties_),i.listen(this._element_,this.transitionEndEvent_,this.bindedOnTransitionFinished_),this.setTimeout_(a.bind(this,function(){return this.complete_()}),1e3*this.duration_+1))}),e)))},t}(e),s.exports=o,s.exports||r});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("animations/js_animation",["animations/abstract_style_animation","animations/timer_animation","core/util"],function(e,t,i){var n,o,r,s;return s=i._,r={},o={},n=function(e){function i(e,t,n){var o,r,s;null==n&&(n={}),i.__super__.constructor.apply(this,arguments),o={alpha:"opacity"},this.endProperties_={};for(r in t)s=t[r],this.endProperties_[o[r]]=s}return __extends(i,e),i.className="JsAnimation",i.prototype.start=function(){var e;return this.started_?void 0:(this.started_=!0,this.timerAnimation_=new t,e=parseFloat(s.style(this._element_,"opacity")),isNaN(e)&&(e=1),this.timerAnimation_.startValue=e,this.timerAnimation_.endValue=this.endProperties_.opacity,this.timerAnimation_.duration=this.duration_,this.timerAnimation_.onChangeValue=s.bind(this,function(e){return this.view_.internalSetAlpha_(e)}),this.timerAnimation_.onEnd=s.bind(this,this.onEnd_),this.timerAnimation_.start())},i.prototype.onEnd_=function(e){return this.dispose_(),this.callback_?this.callback_(e):void 0},i.prototype.dispose_=function(){return this.disposed_=!0,this.timerAnimation_.onChangeValue=null,this.timerAnimation_.onEnd=null,this.timerAnimation_=null},i.prototype.cancel=function(){return this.timerAnimation_?this.timerAnimation_.cancel():void 0},i}(e),r.exports=n,r.exports||o}),sublime_.define("animations/style_animation",["animations/js_animation","animations/css_animation"],function(e,t){var i,n,o;return o={},n={},i=t.isSupported()?t:e,o.exports=i,o.exports||n}),sublime_.define("animations/timer_animation",["core/util","core/time","animations/animation_scheduler","animations/timing_function"],function(e,t,i,n){var o,r,s,a,l,u,h,p;return p=e._,s=t.TimeNow,o=i.AnimationSchedule,r=i.AnimationUnschedule,l=n.TimingFunctionDefault,h={},u={},a=function(){function e(){this.startValue=0,this.endValue=0,this.duration=0,this.repeatCount=0,this.delegate=null,this.timingFunction=l(),this.started_=!1,this.startTime_=null,this.repeatedCount_=0}return e.className="TimerAnimation",e.prototype.start=function(){return this.started_?void 0:(this.started_=!0,this.repeatedCount_=0,this.startTime_=s(),o(this),this.update_(this.startTime_))},e.prototype.cancel=function(){return 1>this.progress&&this.onEnd&&this.onEnd(!1),this.started_?r(this):void 0},e.prototype.onAnimationFrame=function(e){return this.update_(e)},e.prototype.update_=function(e){var t,i;return p.isNumber(t)||(t=0),0>=this.duration?i=this.startValue+1*t:(t=this.endValue-this.startValue,this.progress=Math.min((e-this.startTime_)/(1e3*this.duration),1),i=this.startValue+t*this.timingFunction.yValue(this.progress)),this.onChangeValue?this.onChangeValue(i):this.delegate&&this.delegate.animationDidChangeValue(this,i),this.progress>=1?(this.onEnd?this.onEnd(!0):this.delegate&&this.delegate.animationDidEnd&&this.delegate.animationDidEnd(this,this.endValue),this.repeatedCount_+=1,this.repeatCount>1&&this.repeatCount>this.repeatedCount_?this.startTime_=s():this.cancel()):void 0},e}(),h.exports=a,h.exports||u}),sublime_.define("animations/timing_function",[],function(){var e,t,i,n,o;return o={},n={},e=function(){function e(e,t,i,n,o,r,s,a){this.x0=e,this.y0=t,this.x1=i,this.y1=n,this.x2=o,this.y2=r,this.x3=s,this.y3=a}return e.className="TimingFunction",e.prototype.point=function(e){return{x:this.value_(e,this.x0,this.x1,this.x2,this.x3),y:this.value_(e,this.y0,this.y1,this.y2,this.y3)}},e.prototype.value_=function(e,t,i,n,o){return Math.pow(1-e,3)*t+3*Math.pow(1-e,2)*e*i+3*(1-e)*e*e*n+Math.pow(e,3)*o},e.prototype.tValue=function(e){var t,i,n,o,r,s,a;if(i=1e-6,o=(e-this.x0)/(this.x3-this.x0),0>=o)return 0;if(o>=1)return 1;for(s=0,r=1,n=0;8>n;){if(a=this.point(o).x,t=(this.point(o+i).x-a)/i,i>Math.abs(a-e))return o;if(i>Math.abs(t))break;e>a?s=o:r=o,o-=(a-e)/t,n++}for(n=0;Math.abs(a-e)>i&&8>n;)e>a?(s=o,o=(o+r)/2):(r=o,o=(o+s)/2),a=this.point(o).x,n++;return o},e.prototype.yValue=function(e){var t;return t=this.point(this.tValue(e)),t.y},e}(),t=function(){return new e(0,0,.25,.1,.25,1,1,1)},i=function(){return new e(0,0,0,0,1,1,1,1)},n.TimingFunction=e,n.TimingFunctionDefault=t,n.TimingFunctionLinear=i,o.exports||n}),sublime_.define("core/ajax",["core/util"],function(e){var t,i,n,o,r;return r=e._,o={},n={},i=function(){function e(t,i){var n,o;this.method=t,this.url=i,n=this.isCrossDomain_(this.url),o=null,n&&e.supportsCORS()?(o=new XMLHttpRequest,"withCredentials"in o||"undefined"!=typeof XDomainRequest&&(o=new XDomainRequest)):n||(window.XMLHttpRequest?o=new XMLHttpRequest:window.ActiveXObject&&(o=new ActiveXObject("MSXML2.XMLHTTP.3.0"))),this._xhr_=o}return e.className="AjaxRequest",e.ReadyState={Unitialized:0,Opened:1,Sent:2,Loading:3,Complete:4},e.supportsCORS=function(){var t;return null==e.supportsCORS_&&(t=new XMLHttpRequest,e.supportsCORS_=t&&"withCredentials"in t||"undefined"!=typeof XDomainRequest),e.supportsCORS_},e.prototype.differentProtocol_=function(e,t){var i;return i=/http(s)?/,i.test(e)||(e=null),i.test(t)||(t=null),null!=e&&null!=t&&e!==t},e.prototype.differentPort_=function(e,t){var i;return i=/[0-9]+/,i.test(e)||(e=null),i.test(t)||(t=null),null!=e&&null!=t&&e!==t},e.prototype.isCrossDomain_=function(e){var t,i;return i=window.location,t=document.createElement("a"),t.href=e,t.hostname!==i.hostname?!0:this.differentPort_(t.port,i.port)?!0:this.differentProtocol_(t.protocol,i.protocol)?!0:!1},e.prototype.send=function(e,t){var i,n,o;return this.callback_=t,(n=this._xhr_)?(n.open(this.method,this.url,!0),n.onreadystatechange=r.bind(this,this.onUpdate_),n.onload=r.bind(this,this.onUpdate_),n.onprogress=function(){},n.ontimeout=r.bind(this,this.didFailWithError),n.onerror=r.bind(this,this.didFailWithError),o=this._xhr_,i=r.ltIE10?500:10,setTimeout(function(){return o.send(e)},i)):this.didFailWithError(Error("Ajax not supported"))},e.prototype.onUpdate_=function(){var t,i,n;return n=this._xhr_,n&&this.callback_&&"unknown"!=typeof n.status&&(i=n.status,t="undefined"!=typeof XDomainRequest&&n instanceof XDomainRequest,t||n.readyState===e.ReadyState.Complete)?(n.onload=null,n.onerror=null,n.onprogress=null,n.onreadystatechange=null,t||i>=200&&300>i||304===i?this.callback_(null,n.responseText):this.callback_(Error("Ajax request failed"))):void 0},e.prototype.didFailWithError=function(e){return e||(e=Error("Unknown Error")),this.callback_?this.callback_(e):void 0},e}(),t=function(){function e(){}return e.className="Ajax",e.post=function(e,t,n){var o;try{return o=new i("POST",e),o.send(t,function(e,t){if(n){if(e)return n(e,null);try{return n(null,t)}catch(i){return n(i,null)}}})}catch(r){return n(r,null)}},e.postJSON=function(e,t,n){var o;if(null==window.JSON)return n("No JSON",null);try{return o=new i("POST",e),o.send(r.JSON.stringify(t),function(e,i){if(n){if(e)return n(e,null);try{return t=r.JSON.parse(i),n(null,t)}catch(o){return console.log("ERROR 1"+o),n(o,null)}}})}catch(s){return console.log("ERROR 2"+s),n(s,null)}},e.get=function(e,t){var n;try{return n=new i("GET",e),n.send(null,function(e,i){return t?e?t(e,null):t(null,i):void 0})}catch(o){return t(o,null)}},e}(),n.AjaxRequest=i,n.Ajax=t,o.exports||n}),sublime_.define("core/browser",["core/util"],function(e){var t,i,n;return n=e._,i={},t={},i.exports={lang:null!=navigator.language?navigator.language:navigator.userLanguage,flashVersion:n.flash?n.flashVersion:void 0},i.exports||t}),sublime_.define("core/dom",["core/util"],function(e){var t,i,n;n=e._,i={},t={};var o;return function(){function e(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var i=Object.prototype.toString.call(e);if("[object Window]"==i)return"object";if("[object Array]"==i||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==i||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function t(t){var i=e(t);return"array"==i||"object"==i&&"number"==typeof t.length}function r(e){return"string"==typeof e}function s(e){var t=typeof e;return"object"==t&&e!=z||"function"==t}function a(e){return V.test(e)?(-1!=e.indexOf("&")&&(e=e.replace(M,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(A,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(C,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(B,"&quot;")),e):e}function l(e){for(var t=0,i=(""+U).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=(""+e).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),n=Math.max(i.length,e.length),o=0;0==t&&n>o;o++){var r=i[o]||"",s=e[o]||"",a=RegExp("(\\d*)(\\D*)","g"),l=RegExp("(\\d*)(\\D*)","g");do{var u=a.exec(r)||["","",""],h=l.exec(s)||["","",""];if(0==u[0].length&&0==h[0].length)break;t=((0==u[1].length?0:parseInt(u[1],10))<(0==h[1].length?0:parseInt(h[1],10))?-1:(0==u[1].length?0:parseInt(u[1],10))>(0==h[1].length?0:parseInt(h[1],10))?1:0)||((0==u[2].length)<(0==h[2].length)?-1:(0==u[2].length)>(0==h[2].length)?1:0)||(u[2]<h[2]?-1:u[2]>h[2]?1:0)}while(0==t)}return t}function u(e){var t=e.length;if(t>0){for(var i=Array(t),n=0;t>n;n++)i[n]=e[n];return i}return[]}function h(e,t,i){return 2>=arguments.length?E.slice.call(e,t):E.slice.call(e,t,i)}function p(){return F.navigator?F.navigator.userAgent:z}function c(){return Z[9]||(Z[9]=N&&!!document.documentMode&&document.documentMode>=9)}function d(e){return e=e.className,r(e)&&e.match(/\S+/g)||[]}function _(e){for(var t=d(e),i=h(arguments,1),n=t.length+i.length,o=t,r=0;i.length>r;r++)L(o,i[r])>=0||o.push(i[r]);return e.className=t.join(" "),t.length==n}function y(e,t){return I(e,function(e){return!(L(t,e)>=0)})}function g(e,t){for(var i in e)t.call(void 0,e[i],i,e)}function f(e){for(var t,i,n=1;arguments.length>n;n++){i=arguments[n];for(t in i)e[t]=i[t];for(var o=0;et.length>o;o++)t=et[o],Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}}function m(e,t){var i=document,n=e&&"*"!=e?e.toUpperCase():"";if(i.querySelectorAll&&i.querySelector&&(n||t))return i.querySelectorAll(n+(t?"."+t:""));if(t&&i.getElementsByClassName){if(i=i.getElementsByClassName(t),n){for(var o,r={},s=0,a=0;o=i[a];a++)n==o.nodeName&&(r[s++]=o);return r.length=s,r}return i}if(i=i.getElementsByTagName(n||"*"),t){for(r={},a=s=0;o=i[a];a++)n=o.className,"function"==typeof n.split&&L(n.split(/\s+/),t)>=0&&(r[s++]=o);return r.length=s,r}return i}function v(e,t){g(t,function(t,i){"style"==i?e.style.cssText=t:"class"==i?e.className=t:"for"==i?e.htmlFor=t:i in tt?e.setAttribute(tt[i],t):0==i.lastIndexOf("aria-",0)?e.setAttribute(i,t):e[i]=t})}function w(i,n,o){function a(e){e&&n.appendChild(r(e)?i.createTextNode(e):e)}for(var l=2;o.length>l;l++){var h=o[l];if(!t(h)||s(h)&&h.nodeType>0)a(h);else{var p;e:{if(h&&"number"==typeof h.length){if(s(h)){p="function"==typeof h.item||"string"==typeof h.item;break e}if("function"==e(h)){p="function"==typeof h.item;break e}}p=S}O(p?u(h):h,a)}}}function b(e,t){for(;e&&1!=e.nodeType;)e=t?e.nextSibling:e.previousSibling;return e}var T,x,P,k,z=null,S=!1,F=this,M=/&/g,A=/</g,C=/>/g,B=/\"/g,V=/[&<>\"]/,E=Array.prototype,L=E.indexOf?function(e,t,i){return E.indexOf.call(e,t,i)}:function(e,t,i){if(i=i==z?0:0>i?Math.max(0,e.length+i):i,r(e))return r(t)&&1==t.length?e.indexOf(t,i):-1;for(;e.length>i;i++)if(i in e&&e[i]===t)return i;return-1},O=E.forEach?function(e,t,i){E.forEach.call(e,t,i)}:function(e,t,i){for(var n=e.length,o=r(e)?e.split(""):e,s=0;n>s;s++)s in o&&t.call(i,o[s],s,e)},I=E.filter?function(e,t,i){return E.filter.call(e,t,i)}:function(e,t,i){for(var n=e.length,o=[],s=0,a=r(e)?e.split(""):e,l=0;n>l;l++)if(l in a){var u=a[l];t.call(i,u,l,e)&&(o[s++]=u)}return o};k=P=x=T=S;var D;if(D=p()){var R=F.navigator;T=0==D.indexOf("Opera"),x=!T&&-1!=D.indexOf("MSIE"),P=!T&&-1!=D.indexOf("WebKit"),k=!T&&!P&&"Gecko"==R.product}var U,N=x,W=k,H=P;e:{var j,G="";if(T&&F.opera)var q=F.opera.version,G="function"==typeof q?q():q;else if(W?j=/rv\:([^\);]+)(\)|;)/:N?j=/MSIE\s+([^\);]+)(\)|;)/:H&&(j=/WebKit\/(\S+)/),j)var Q=j.exec(p()),G=Q?Q[1]:"";if(N){var K,Y=F.document;if(K=Y?Y.documentMode:void 0,K>parseFloat(G)){U=""+K;break e}}U=G}var X={},Z={},J=!N||c(),$=!W&&!N||N&&c()||W&&(X["1.9.1"]||(X["1.9.1"]=l("1.9.1")>=0));N&&(X["9"]||(X["9"]=l("9")>=0));var et="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),tt={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};o={addClass:_,hasClass:function(e,t){var i=d(e);return L(i,t)>=0},removeClass:function(e){var t=d(e),i=h(arguments,1),n=y(t,i);return e.className=n.join(" "),n.length==t.length-i.length},previousElementSibling:function(e){return void 0!=e.previousElementSibling?e.previousElementSibling:b(e.previousSibling,S)},nextElementSibling:function(e){return void 0!=e.nextElementSibling?e.nextElementSibling:b(e.nextSibling,!0)},insertSiblingAfter:function(e,t){t.parentNode&&t.parentNode.insertBefore(e,t.nextSibling)},appendChild:function(e,t){e.appendChild(t)},create:function(){var t=arguments,i=document,n=t[0],o=t[1];if(!J&&o&&(o.name||o.type)){if(n=["<",n],o.name&&n.push(' name="',a(o.name),'"'),o.type){n.push(' type="',a(o.type),'"');var s={};f(s,o),o=s,delete o.type}n.push(">"),n=n.join("")}return n=i.createElement(n),o&&(r(o)?n.className=o:"array"==e(o)?_.apply(z,[n].concat(o)):v(n,o)),t.length>2&&w(i,n,t),n},contains:function(e,t){if(e.contains&&1==t.nodeType)return e==t||e.contains(t);if(void 0!==e.compareDocumentPosition)return e==t||Boolean(16&e.compareDocumentPosition(t));for(;t&&e!=t;)t=t.parentNode;return t==e},insertChildAt:function(e,t,i){e.insertBefore(t,e.childNodes[i]||z)},removeNode:function(e){return e&&e.parentNode?e.parentNode.removeChild(e):z},children:function(e){return $&&e.children!=z?e.children:I(u(e.childNodes),function(e){return 1===e.nodeType})},isNode:function(e){return e===window||e&&e.nodeType&&1===e.nodeType},attribute:function(e,t){return e[t]||e.getAttribute(t)},elementsByTagNameAndClass:function(e,t){if(e==z&&(e=""),t==z&&(t=""),void 0===window.Prototype)return m(e,t);try{return window.Prototype.Selector.select(""+e+"."+t)}catch(i){return m(e,t)}},isInDom:function(e){for(var t;e;)t=e,e=e.parentNode;return t===document},elementById:function(e){return document.getElementById(e)},element:function(e){return n.isString(e)?o.elementById(e):o.isNode(e)?e:void 0},nodeName:function(e){return e.nodeName.toUpperCase()},data:function(e){var t,i,o,r,s,a,l,u,h,p;if(e){for(i={},a=["settings","sublime-settings"],o=function(e){return n.indexOf(a,e)>=0},l=0,h=a.length;h>l;l++)if(t=a[l],t=e.getAttribute("data-"+t)||z)for(s=t.split(";"),u=0,p=s.length;p>u;u++)t=s[u],(t=t.split(":"))&&t.length>1&&(r=n.trim(t.shift()),t=t.join(":"),r!=z&&r.length>0&&(i[n.camelCase(r)]=n.trim(t)));if(e.dataset)for(r in e=e.dataset)t=e[r],r&&n.isString(t)&&(o(r)||(i[n.camelCase(r)]=t));else if(e.attributes)for(h=e.attributes,e=0,l=h.length;l>e;e++)t=h[e],r=t.name||t.nodeName,(r=r.match(/^data-(.+)/))&&(r=r[1],o(r)||(t=t.nodeValue,i[n.camelCase(r)]=t))}return i},nextFlashId:1,setFlashObject:function(e,t,i){var r;return i==z&&(i="id"),r=o.nextFlashId++,setTimeout(function(){return e.innerHTML=n.IE?'<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" id="sublimevideo-flash'+r+'" style="width: 100% !important; height: 100% !important;" width="100%" height="100%"><param name="movie" value="'+t+'" /><param name="wmode" value="transparent" /><param name="quality" value="high" /><param name="AllowScriptAccess" value="always" /><param name="allowFullScreen" value="true" /><param name="SeamlessTabbing" value="false" /><param name="flashvars" value="'+i+"="+r+'" /></object>':'<embed quality="high" name="sublimevideo-flash'+r+'" width="100%" style="width: 100% !important; height: 100% !important;" height="100%" wmode="transparent" src="'+t+'" AllowScriptAccess="always" allowFullScreen="true" SeamlessTabbing="false" type="application/x-shockwave-flash" pluginspage="http:#www.macromedia.com/go/getflashplayer" flashvars="'+i+"="+r+'" ></embed>'},0),r}},i.exports=o}(),i.exports||t}),sublime_.define("core/error",[],function(){var e,t,i;return i={},t={},e=function(){function e(e,t){this.message=e,this.action=t}return e.className="Error",e}(),i.exports=e,i.exports||t});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("core/event_emitter",["core/util"],function(e){var t,i,n,o,r;return r=e._,o={},n={},i=function(){function e(){}return e.className="Object_",e.use=function(){var e,t,i,n,o,r;for(r=[],n=0,o=arguments.length;o>n;n++){e=arguments[n];for(t in e)i=e[t],"className"!==t&&"prototype"!==t&&(this[t]=i);r.push(function(){var n,o;n=e.prototype,o=[];for(t in n)i=n[t],o.push(this.prototype[t]=i);return o}.call(this))}return r},e}(),t=function(e){function t(){this.observers_={}}return __extends(t,e),t.className="EventEmitter",t.invalidCall_=function(e){return"Method '"+e+"' called with invalid arguments (http://sublimevideo.net/api#events)."},t.prototype.on=function(e){var t,i,n;n=[];for(t in e)i=e[t],n.push(this.addObserver(t.toLowerCase(),i));return n},t.prototype.once=function(e){var t,i,n;n=[];for(t in e)i=e[t],n.push(this.addObserver(t.toLowerCase(),i,{once:!0}));return n},t.prototype.emit=function(e){var t,i,n,o,r;r=[];for(i in e)t=e[i],t||(t=[]),i?(i=i.toLowerCase(),this.observers_[i]?r.push(function(){var e,r,s,a;for(s=this.observers_[i],a=[],e=0,r=s.length;r>e;e++)n=s[e],o=n.observer,o.apply(this,t),n.once?a.push(this.removeObserver(i,o)):a.push(void 0);return a}.call(this)):r.push(void 0)):r.push(void 0);return r},t.prototype.addObserver=function(e,i,n){var o;return null==n&&(n={}),e&&r.isString(e)&&r.isFunction(i)||console.error(t.invalidCall_("addObserver")),o=this.observers_[e],o||(o=[],this.observers_[e]=o),o.push({observer:i,options:n}),this.didAddObserverForEvent(e)},t.prototype.removeObserver=function(e,t){var i,n,o,s,a,l;if(s=this.observers_[e]){for(o=-1,i=a=0,l=s.length;l>a;i=++a)if(n=s[i],n.observer===t){o=n;break}if(o>=0)return r.remove(s,n),this.didRemoveObserverForEvent(e)}},t.prototype.didAddObserverForEvent=function(){},t.prototype.didRemoveObserverForEvent=function(){},t}(i),n.Object_=i,n.EventEmitter=t,o.exports||n}),sublime_.define("core/events",["core/util","core/log"],function(e){var t,i,n,o;return o=e._,n={},i={},t={EventTypes:{MouseDown:"mousedown",MouseMove:"mousemove",MouseUp:"mouseup",MouseOver:"mouseover",MouseOut:"mouseout",Click:"click",ContextMenu:"contextmenu",Resize:"resize",TouchStart:"touchstart",TouchMove:"touchmove",TouchEnd:"touchend",TouchCancel:"touchcancel",GestureStart:"gesturestart",GestureChange:"gesturechange",GestureEnd:"gestureend",Load:"load",Error:"error",Abort:"abort",KeyDown:"keydown",KeyPress:"keypress",KeyUp:"keyup",Scroll:"scroll"},Keys:{Esc:27,Shift:16,SpaceBar:32,LeftArrow:37,UpArrow:38,RightArrow:39,DownArrow:40,Control:17,M:77,F:70,H:72,A:65,B:66,Y:89,Zero:48,One:49,Two:50,Three:51,Four:52,Five:53,Six:54,Seven:55,Eight:56,Nine:57},listenMouseWheel:function(e,t){var i;return i="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",this.listen(e,i,t)},listenKeyUp:function(e){return this.listeningKeyUp_||(this.keyUpListeners_||(this.keyUpListeners_=[]),this.listeningKeyUp_=!0,this.bindedKeyUp_=o.bind(this,this.keyUp_),this.listen(document,t.EventTypes.KeyUp,this.bindedKeyUp_)),o.contains(this.keyUpListeners_,e)?void 0:this.keyUpListeners_.push(e)},unlistenKeyUp:function(e){return this.keyUpListeners_&&(o.remove(this.keyUpListeners_,e),1>this.keyUpListeners_.length)?(this.listeningKeyUp_=!1,this.unlisten(document,t.EventTypes.KeyUp,this.bindedKeyUp_)):void 0},keyUp_:function(e){var i,n,r,s,a,l,u,h;e||(e=window.event),r=e.keyCode,a=o.clone(this.keyUpListeners_),h=t.Keys;for(n in h)if(i=h[n],r===i){for(l=0,u=a.length;u>l;l++)s=a[l],s(r,e);return}},listenKeyDown:function(e){var i;return this.listeningKeyDown_||(this.keyDownListeners_||(this.keyDownListeners_=[]),this.listeningKeyDown_=!0,this.bindedKeyDown_=o.bind(this,this.keyDown_),i=o.ltOperaNext?t.EventTypes.KeyPress:t.EventTypes.KeyDown,this.listen(document,i,this.bindedKeyDown_)),o.contains(this.keyDownListeners_,e)?void 0:this.keyDownListeners_.push(e)},unlistenKeyDown:function(e){var i;return this.keyDownListeners_&&(o.remove(this.keyDownListeners_,e),1>this.keyDownListeners_.length)?(this.listeningKeyDown_=!1,i=o.ltOperaNext?t.EventTypes.KeyPress:t.EventTypes.KeyDown,this.unlisten(document,i,this.bindedKeyDown_)):void 0},keyDown_:function(e){var i,n,r,s,a,l,u,h;e||(e=window.event),r=e.keyCode,a=o.clone(this.keyDownListeners_),h=t.Keys;for(n in h)if(i=h[n],r===i){for(l=0,u=a.length;u>l;l++)s=a[l],s(r,e);return}},listen:function(e,t,i){var n,o;return i?(n=this.listeners_[e],o=this.proxy_(i,e),i.proxyListener_=o,e.addEventListener?(e.addEventListener(t,o,!1),this.addListener_(e,t,i)):e.attachEvent?(e.attachEvent("on"+t,o),this.addListener_(e,t,i)):void 0):void 0
},proxy_:function(e,t){return function(i){return i._element=t,e(i)}},hasListeners:function(e){var t;return t=this.listeners_[e],t&&o.keys(t).length>0},unlisten:function(e,t,i){var n;return e.removeEventListener?(e.removeEventListener(t,i.proxyListener_,!1),this.removeListener_(e,t,i)):e.detachEvent&&(n=this.removeListener_(e,t,i))?e.detachEvent("on"+t,i.proxyListener_):void 0},unlistenAll:function(e,t){var i,n,r,s,a,l,u,h,p,c;if(i=this.listeners_[e]){if(!t){for(h=o.keys(i),c=[],a=0,u=h.length;u>a;a++)t=h[a],c.push(this.unlistenAll(e,t));return c}if(i[t]){for(r=o.clone(i[t]),p=[],s=0,l=r.length;l>s;s++)n=r[s],p.push(this.unlisten(e,t,n));return p}}},listeners_:{},addListener_:function(e,t,i){var n,r;return n=this.listeners_[e],n||(n={},this.listeners_[e]=n),r=n[t],r||(r=[],n[t]=r),o.contains(r,i),r.push(i)},removeListener_:function(e,t,i){var n,r;return n=this.listeners_[e],n&&(r=n[t],r&&(o.contains(r,i)&&o.remove(r,i),1>r.length))?(delete n[t],!0):!1}},n.exports=t,n.exports||i}),sublime_.define("core/exporter",["core/util"],function(e){var t,i,n,o;return o=e._,n={},i={},t=function(e,t,i){var n,r,s,a,l,u;for(a=e.split("."),s=a.pop(),r=window,l=0,u=a.length;u>l;l++)n=a[l],r[n]||(r[n]={}),r=r[n];return r[s]=o.isFunction(i)?function(){return i.apply(t,arguments)}:i,r},n.exports=t,n.exports||i});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("core/image_importer",["core/util","core/event_emitter","core/events"],function(e,t,i){var n,o,r,s,a;return a=e._,n=t.EventEmitter,s={},r={},o=function(e){function t(e,n){t.__super__.constructor.apply(this,arguments),this.imageURL_=e,this._imageElement_=new Image,this.sizeDetection_=n===!0,i.listen(this._imageElement_,i.EventTypes.Load,a.bind(this,this.didFinishLoading_)),i.listen(this._imageElement_,i.EventTypes.Error,a.bind(this,this.didFail_)),i.listen(this._imageElement_,i.EventTypes.Abort,a.bind(this,this.didAbort_))}return __extends(t,e),t.className="ImageImporter",t.prototype._image=function(){return this._imageElement_},t.prototype.start=function(){return this._imageElement_.src=this.imageURL_,this.sizeDetection_?this.startCheckSizeTimer_():void 0},t.prototype.removeObservers_=function(){var e,t,n,o,r;for(o=[i.EventTypes.Load,i.EventTypes.Error,i.EventTypes.Abort],r=[],t=0,n=o.length;n>t;t++)e=o[t],r.push(i.unlistenAll(this._imageElement_,e));return r},t.prototype.didFinishLoading_=function(){return this.removeObservers_(),this.sizeDetection_&&this.didDetectSize_(this._imageElement_.width,this._imageElement_.height,!0),this.emit({end:[null,this._image()]})},t.prototype.didFail_=function(e){return this.removeObservers_(),this.emit({end:[e,null]})},t.prototype.didAbort_=function(){return this.removeObservers_(),this.emit({end:[null,null]})},t.prototype.didDetectSize_=function(e,t,i){return this.stopCheckSizeTimer_(),this.sizeDetected_?void 0:(this.sizeDetected_=!0,this.emit({size:[e,t,i===!0]}))},t.prototype.checkForSize_=function(){return this.attempsToTimeout_-=1,this._imageElement_.width>0&&this._imageElement_.height>0&&this.didDetectSize_(this._imageElement_.width,this._imageElement_.height),1>this.attempsToTimeout_?this.stopCheckSizeTimer_():void 0},t.prototype.startCheckSizeTimer_=function(){var e;return this.stopCheckSizeTimer_(),e=10,this.attempsToTimeout_=parseInt(2e3/e,10),this.sizeCheckTimer_=setInterval(a.bind(this,this.checkForSize_),e)},t.prototype.stopCheckSizeTimer_=function(){return this.sizeCheckTimer_?(clearInterval(this.sizeCheckTimer_),this.sizeCheckTimer_=null):void 0},t}(n),s.exports=o,s.exports||r}),sublime_.define("core/log",["core/util"],function(e){var t,i,n,o,r;return o=e._,n={},t={},r=function(e,t){null==t&&(t="log");try{if(console)return console[t](o.sliceArgs(e).join(" "))}catch(i){throw i}},i=function(){return r(arguments)},i.warn=function(){return r(arguments,"warn")},i.error=function(){return r(arguments,"error")},n.exports=i,n.exports||t});var __indexOf=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};sublime_.define("core/options",["core/util","core/log"],function(e){var t,i,n,o;return o=e._,n={},i={},t=function(){function e(e){this.allowedOptions_=e,this.options_={},this.dataSettings_={}}return e.className="Options",e.OptionType={String:"string",Integer:"integer",Float:"float",Boolean:"boolean",Color:"color",Url:"url",Array:"array"},e.OptionRange={Strings:0,Integers:1,Floats0_1:2,URLs:3},e.prototype.clone=function(){var t;return t=new e(this.allowedOptions_),t.extend(o.clone(this.options_)),t.extendWithDataSettings(this.dataSettings_),t},e.prototype.extend=function(e,t){var i,n,r,s;if(null==e&&(e={}),null==t&&(t={}),this.areValidOptions_(e)){if(t.verify){i={};for(n in e)s=e[n],r=this.allowedOptions_[n],r&&this.isValidValue_(s,r)&&(i[n]=s)}else i=e;return o.extend(this.options_,i),o.extend(this,i)}},e.prototype.extendWithDataSettings=function(e,t){var i,n,r,s,a;null==e&&(e={}),null==t&&(t={}),e=o.clone(e),this.parseCompoundDataSettings_(e,t),o.extend(this.dataSettings_,e),s=this.allowedOptions_,a=[];for(i in s)n=s[i],r=e[n.name],t[n.name]&&(r="none"===r?"0":"1"),null!=r?(r=this.parseValue_(r,n),this.isValidValue_(r,n)?a.push(this[i]=r):a.push(void 0)):a.push(void 0);return a},e.prototype.parseCompoundDataSettings_=function(e,t){var i,n,o,r,s,a,l,u,h;h=[];for(r in t)a=t[r],i=e[r],i?(u=i.split(" "),n=a.length,h.push(function(){var t,i,r;for(r=[],o=t=0,i=u.length;i>t;o=++t)l=u[o],n>o?(s=a[o],e[s.name]?r.push(void 0):r.push(e[s.name]=l)):r.push(void 0);return r}())):h.push(void 0);return h},e.prototype.parseValue_=function(t,i){var n,r,s,a,l,u;switch(i.type){case e.OptionType.String:case e.OptionType.Color:case e.OptionType.Url:return""+t;case e.OptionType.Integer:return parseInt(t);case e.OptionType.Float:return parseFloat(t);case e.OptionType.Array:for(n=t.split(i.separator||/d+/),a=[],l=0,u=n.length;u>l;l++)s=n[l],r=this.parseValue_(s,i.item),this.isValidValue_(r,i.item)&&a.push(r);return a;case e.OptionType.Boolean:return o.parseBoolean(t);default:return null}},e.prototype.isValidValue_=function(t,i){var n,o,r;return(r=i.type)!==e.OptionType.Integer&&r!==e.OptionType.Float||!(n=i.range)?(o=i.values)?__indexOf.call(o,t)>=0:!0:n.length>0&&n[0]>t?!1:n.length>1&&t>n[1]?!1:!0},e.prototype.isValidOption_=function(){return this.areValidOptions_({key:!0})},e.prototype.areValidOptions_=function(e){return null==e&&(e={}),null!=e.extend||null!=e.areValidOptions_||null!=e.isValidValue_||null!=e.parseValue_||null!=e.clone||null!=e.parseCompoundDataSettings_||null!=e.extendWithDataSettings?!1:!0},e}(),n.exports=t,n.exports||i}),sublime_.define("core/page",["core/util"],function(e){var t,i,n,o;return o=e._,i={},t={},n={embedded:o.embed,url:document.location.href,referrerUrl:document.referrer,ssl:/^https/.test(document.location.href)},i.exports=n,i.exports||t}),sublime_.define("core/plugin_manager",["core/util"],function(e){var t,i,n,o;return o=e._,n={},i={},t=function(){function e(e){this.delegate_=e||null,this.plugins_={},this.pluginsInfo_={}}return e.className="PluginManager",e.prototype.pluginForKind=function(e){var t,i,n,o,r,s;r=this.pluginsInfo_;for(i in r)if(o=r[i],e===o.kind){s=this.plugins_;for(n in s)if(t=s[n],i===n)return t}},e.prototype.plugins=function(){return this.plugins_},e.prototype.registerPlugins=function(e,t){var i,n,o,r,s,a,l,u,h;for(r=[],s=0,l=e.length;l>s;s++)o=e[s],this.pluginsInfo_[o["class"]]=o,this.delegate_.shouldImportPlugin(o)&&r.push(o);if(!(1>r.length)){for(n=0,i=null,h=[],a=0,u=r.length;u>a;a++)o=r[a],h.push(this.importPlugin_(o,function(e){return null!=e&&(i=e),n++,n===r.length&&t?t(i):void 0}));return h}return t?t():void 0},e.prototype.loadPlugin=function(e,t){var i,n;return n=this.plugins_[e],n?t?t(null,n):void 0:(i=this.pluginsInfo_[e],i?this.importPlugin_(i,o.bind(this,function(i){return i?t(i):this.loadPlugin(e,t)})):t("Can't find plugin info for class "+e))},e.prototype.uninstallAllPlugins=function(){var e,t,i,n;i=this.plugins_,n=[];for(t in i)e=i[t],delete this.plugins_[t],n.push(e.unload());return n},e.prototype.makePerform=function(e){var t,i,n,o;n=this.plugins_,o=[];for(i in n)t=n[i],o.push(e(t,i));return o},e.prototype.importPlugin_=function(e,t){return require([e.module],o.bind(this,function(i){var n,r,s,a,l,u;if(/\//.test(e.module))n=i;else{for(n=null,l=0,u=arguments.length;u>l;l++)r=arguments[l],r.className===e["class"]&&(n=r);if(!n)return t("Can't find plugin "+e["class"]),void 0}return s=new n,e.kind=n.kind,!o.isFunction(this.delegate_.shouldLoadPlugin)||this.delegate_.shouldLoadPlugin(n,e)?(a=s.tag,a&&this.unistallPluginForTag_(a),this.plugins_[e["class"]]=s,this.delegate_.willLoadPlugin(s,e["class"]),this.delegate_&&s.setDelegate(this.delegate_),s.load(e.allowedSettings,e.settings,o.bind(this,function(){return t(),this.delegate_.didLoadPlugin(s,e["class"])}))):t?t():void 0}))},e.prototype.unistallPluginForTag_=function(e){var t,i,n,o;n=this.plugins_,o=[];for(i in n){if(t=n[i],t.tag===e){t.unload(),delete this.plugins_[i];break}o.push(void 0)}return o},e}(),n.exports=t,n.exports||i}),sublime_.define("core/range",[],function(){var e,t,i;return i={},t={},e=function(){function e(e,t){this.start=e,this.end=t}return e.className="Range",e.percentRange=function(){return new e(0,1)},e.prototype.boundsValue=function(e){return this.contains(e)?e:Math.min(this.end,Math.max(this.start,e))},e.prototype.contains=function(e,t){return null==t&&(t=0),e>=this.start-t&&this.end+t>=e},e.prototype.width=function(){return this.end-this.start},e}(),i.exports=e,i.exports||t}),sublime_.define("core/time",[],function(){var e,t,i,n,o,r,s;return r={},o={},t=60,e=3600,i=Date.now||function(){return+new Date},n=function(i,n){var o,r,a,l,u,h,p;return null==n&&(n={}),o=n.hourDigits||0,u=0>i?"-":"",i=parseInt(Math.abs(i)),0===i?(h="00:00",o&&(h=":"+h,h=s(o+h.length,h)),h):(l=i,r=l>=e?parseInt(l/e):0,l-=r*e,a=l>=t?parseInt(l/t):0,l-=a*t,i=l,p=[],o?p.push(s(o,r)):r>0&&p.push(s(2,r)),p.push(s(2,a)),p.push(s(2,i)),u+p.join(":"))},s=function(e,t){var i;if(null!=t){if(i=""+t,i.length>=e)return i;for(;e>i.length;)i="0"+i;return i}throw"no number"},o.SecondsInMinute=t,o.SecondsInHour=e,o.TimeNow=i,o.TimeStringForSeconds=n,o.zeroFill_=s,r.exports||o}),sublime_.define("core/url",["core/util"],function(e){var t,i,n,o;return o=e._,n={},i={},t=function(){function e(e,t,i,n,o){this.scheme_=e,this.host_=t,this.port_=i,this.path_=n,this.query_=o}return e.className="Url",e.parse=function(t){var i;return null!=t?(i=t.match(/^(http:|https:)\/\/([^\/:]+)(?:\:(\d+))?(\/[^\?]*)?(\?.*)?$/),i?new e(i[1],i[2],i[3],i[4],i[5]):null):void 0},e.isAbsolutePath=function(e){return/(?:^\/\/)|(^[a-zA-Z]+\:\/\/)/.test(e)},e.absolutePath=function(t){var i,n;return e.isAbsolutePath(t)?t:(n=location.protocol+"//"+location.host,i=o.dirPath(location.href),"/"===t.substr(0,1)?"/"===t.substr(1,1)?location.protocol+t:n+t:"."!==t.substr(0,1)&&t.match(/^\s*\w+:\/\//)?t:i+t)},e.prototype.directory=function(){return this.path().replace(/\/(([^\/]+)\.(.*))$/,"")},e.prototype.fileExtension=function(){var e;return e=this.path().match(/\.([^.]*)$/),e?e[1]:null},e.prototype.scheme=function(){return this.scheme_},e.prototype.host=function(){return this.host_},e.prototype.path=function(){return this.path_},e.prototype.query=function(){return this.query_},e.prototype.baseURL=function(){var e;return e=this.scheme()+"//"+this.host(),this.port_&&(e+=":"+this.port_),e},e.prototype.hasSSLScheme=function(){return"https:"===this.scheme_},e}(),n.exports=t,n.exports||i}),sublime_.define("core/user_defaults",[],function(){var e,t,i;return i={},t={},e=function(){function e(e){this.username_=e,this._storage_="undefined"!=typeof localStorage&&null!==localStorage?localStorage:null}return e.className="UserDefaults",e.standardUserDefaults=function(){return new e("shared")},e.prototype.supportsLocalStorage_=function(){var e;try{return e="sublimeVideo",this._storage_.setItem(e,e),this._storage_.removeItem(e),!0}catch(t){return!1}},e.prototype.get=function(e){var t;if(this.supportsLocalStorage_())try{return t=JSON.parse(this._storage_.getItem(this.username_)),t?t[e]:null}catch(i){}},e.prototype.set=function(e,t){var i;if(this.supportsLocalStorage_()){try{i=JSON.parse(this._storage_.getItem(this.username_))||{}}catch(n){i={}}try{return i[e]=t,this._storage_.setItem(this.username_,JSON.stringify(i))}catch(o){}}},e}(),i.exports=e,i.exports||t}),sublime_.define("core/util",[],function(){var exports,module;module={},exports={};var ua,_;return function(){function n(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var i=Object.prototype.toString.call(e);if("[object Window]"==i)return"object";if("[object Array]"==i||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==i||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function o(e){return void 0!==e}function p(e){return"array"==n(e)}function aa(e){var t=n(e);return"array"==t||"object"==t&&"number"==typeof e.length}function q(e){return"string"==typeof e}function r(e){return"function"==n(e)}function s(e){var t=typeof e;return"object"==t&&e!=i||"function"==t}function ba(e){return e.call.apply(e.bind,arguments)}function ca(e,t){if(!e)throw Error();if(arguments.length>2){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function t(){return t=Function.prototype.bind&&-1!=(""+Function.prototype.bind).indexOf("native code")?ba:ca,t.apply(i,arguments)}function da(e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=Array.prototype.slice.call(arguments);return i.unshift.apply(i,t),e.apply(this,i)}}function fa(e,t){return 0==e.lastIndexOf(t,0)}function ga(e){return e.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function ha(e){return ia.test(e)?(-1!=e.indexOf("&")&&(e=e.replace(ja,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(ka,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(la,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(ma,"&quot;")),e):e}function na(e,t){for(var i=0,n=ga(""+e).split("."),o=ga(""+t).split("."),r=Math.max(n.length,o.length),s=0;0==i&&r>s;s++){var a=n[s]||"",l=o[s]||"",u=RegExp("(\\d*)(\\D*)","g"),h=RegExp("(\\d*)(\\D*)","g");do{var p=u.exec(a)||["","",""],c=h.exec(l)||["","",""];if(0==p[0].length&&0==c[0].length)break;i=((0==p[1].length?0:parseInt(p[1],10))<(0==c[1].length?0:parseInt(c[1],10))?-1:(0==p[1].length?0:parseInt(p[1],10))>(0==c[1].length?0:parseInt(c[1],10))?1:0)||((0==p[2].length)<(0==c[2].length)?-1:(0==p[2].length)>(0==c[2].length)?1:0)||(p[2]<c[2]?-1:p[2]>c[2]?1:0)}while(0==i)}return i}function oa(e){return(""+e).replace(/\-([a-z])/g,function(e,t){return t.toUpperCase()})}function pa(e,t){for(var i in e)t.call(void 0,e[i],i,e)}function ra(e){for(var t,i,n=1;arguments.length>n;n++){i=arguments[n];for(t in i)e[t]=i[t];for(var o=0;qa.length>o;o++)t=qa[o],Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}}function va(e,t){return sa(e,t)>=0}function wa(e){var t=e.length;if(t>0){for(var i=Array(t),n=0;t>n;n++)i[n]=e[n];return i}return[]}function xa(e){u.splice.apply(e,ya(arguments,1))}function ya(e,t,i){return 2>=arguments.length?u.slice.call(e,t):u.slice.call(e,t,i)}function Da(){return k.navigator?k.navigator.userAgent:i}function x(){return k.navigator}function J(e){return Ka[e]||(Ka[e]=A&&!!document.documentMode&&document.documentMode>=e)}function N(e){return e=e.match(/[\d]+/g),e.length=3,e.join(".")}function Ua(e){var t;t=e.className,t=q(t)&&t.match(/\S+/g)||[];for(var i=ya(arguments,1),n=t.length+i.length,o=t,r=0;i.length>r;r++)va(o,i[r])||o.push(i[r]);return e.className=t.join(" "),t.length==n}function P(e,t){this.x=o(e)?e:0,this.y=o(t)?t:0}function Q(e,t){this.width=e,this.height=t}function R(e){return e?new S(T(e)):Sa||(Sa=new S)}function Va(e,t){pa(t,function(t,i){"style"==i?e.style.cssText=t:"class"==i?e.className=t:"for"==i?e.htmlFor=t:i in Wa?e.setAttribute(Wa[i],t):fa(i,"aria-")?e.setAttribute(i,t):e[i]=t})}function $a(e){var t=!C&&U(e)?e.documentElement:e.body,e=e.parentWindow||e.defaultView;return new P(e.pageXOffset||t.scrollLeft,e.pageYOffset||t.scrollTop)}function ab(e,t,i){function n(i){i&&t.appendChild(q(i)?e.createTextNode(i):i)}for(var o=2;i.length>o;o++){var a=i[o];if(!aa(a)||s(a)&&a.nodeType>0)n(a);else{var l;e:{if(a&&"number"==typeof a.length){if(s(a)){l="function"==typeof a.item||"string"==typeof a.item;break e}if(r(a)){l="function"==typeof a.item;break e}}l=j}ta(l?wa(a):a,n)}}}function U(e){return"CSS1Compat"==e.compatMode}function T(e){return 9==e.nodeType?e:e.ownerDocument||e.document}function S(e){this.document_=e||k.document||document}function bb(e,t){var i;i=e.document_;var n=t&&"*"!=t?t.toUpperCase():"";return i=i.querySelectorAll&&i.querySelector&&n?i.querySelectorAll(n+""):i.getElementsByTagName(n||"*")}function V(e,t,i,n){this.top=e,this.right=t,this.bottom=i,this.left=n}function cb(e,t,i){e.style[oa(i)]=t}function W(e,t){var n=T(e);return n.defaultView&&n.defaultView.getComputedStyle&&(n=n.defaultView.getComputedStyle(e,i))?n[t]||n.getPropertyValue(t)||"":""}function X(e,t){return W(e,t)||(e.currentStyle?e.currentStyle[t]:i)||e.style&&e.style[t]}function db(e){var t=e.getBoundingClientRect();return A&&(e=e.ownerDocument,t.left-=e.documentElement.clientLeft+e.body.clientLeft,t.top-=e.documentElement.clientTop+e.body.clientTop),t}function eb(e){if(A&&!J(8))return e.offsetParent;for(var t=T(e),n=X(e,"position"),o="fixed"==n||"absolute"==n,e=e.parentNode;e&&e!=t;e=e.parentNode)if(n=X(e,"position"),o=o&&"static"==n&&e!=t.documentElement&&e!=t.body,!o&&(e.scrollWidth>e.clientWidth||e.scrollHeight>e.clientHeight||"fixed"==n||"absolute"==n||"relative"==n))return e;return i}function fb(e){var t,i,n=T(e),o=X(e,"position"),r=B&&n.getBoxObjectFor&&!e.getBoundingClientRect&&"absolute"==o&&(t=n.getBoxObjectFor(e))&&(0>t.screenX||0>t.screenY),s=new P(0,0);if(t=n?T(n):document,(i=A)&&(i=!J(9))&&(i=R(t),i=!U(i.document_)),i=i?t.body:t.documentElement,e==i)return s;if(e.getBoundingClientRect)t=db(e),e=R(n),e=$a(e.document_),s.x=t.left+e.x,s.y=t.top+e.y;else if(n.getBoxObjectFor&&!r)t=n.getBoxObjectFor(e),e=n.getBoxObjectFor(i),s.x=t.screenX-e.screenX,s.y=t.screenY-e.screenY;else{r=e;do{if(s.x+=r.offsetLeft,s.y+=r.offsetTop,r!=e&&(s.x+=r.clientLeft||0,s.y+=r.clientTop||0),C&&"fixed"==X(r,"position")){s.x+=n.body.scrollLeft,s.y+=n.body.scrollTop;break}r=r.offsetParent}while(r&&r!=e);for((z||C&&"absolute"==o)&&(s.y-=n.body.offsetTop),r=e;(r=eb(r))&&r!=n.body&&r!=i;)s.x-=r.scrollLeft,z&&"TR"==r.tagName||(s.y-=r.scrollTop)}return s}function gb(e){var t=e.offsetWidth,i=e.offsetHeight,n=C&&!t&&!i;return o(t)&&!n||!e.getBoundingClientRect?new Q(t,i):(e=db(e),new Q(e.right-e.left,e.bottom-e.top))}function hb(e,t){A?e.cssText=t:e[C?"innerText":"innerHTML"]=t}function Y(e,t,i,n){if(/^\d+px?$/.test(t))return parseInt(t,10);var o=e.style[i],r=e.runtimeStyle[i];return e.runtimeStyle[i]=e.currentStyle[i],e.style[i]=t,t=e.style[n],e.style[i]=o,e.runtimeStyle[i]=r,t}function Z(e,t){return Y(e,e.currentStyle?e.currentStyle[t]:i,"left","pixelLeft")}function $(e,t){if("none"==(e.currentStyle?e.currentStyle[t+"Style"]:i))return 0;var n=e.currentStyle?e.currentStyle[t+"Width"]:i;return n in ib?ib[n]:Y(e,n,"left","pixelLeft")}function jb(e){this.replacer_=e}function kb(e,t,n){switch(typeof t){case"string":lb(t,n);break;case"number":n.push(isFinite(t)&&!isNaN(t)?t:"null");break;case"boolean":n.push(t);break;case"undefined":n.push("null");break;case"object":if(t==i){n.push("null");break}if(p(t)){var o=t.length;n.push("[");for(var r="",s=0;o>s;s++)n.push(r),r=t[s],kb(e,e.replacer_?e.replacer_.call(t,""+s,r):r,n),r=",";n.push("]");break}n.push("{"),o="";for(s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r=t[s],"function"!=typeof r&&(n.push(o),lb(s,n),n.push(":"),kb(e,e.replacer_?e.replacer_.call(t,s,r):r,n),o=","));n.push("}");break;case"function":break;default:throw Error("Unknown type: "+typeof t)}}function lb(e,t){t.push('"',e.replace(nb,function(e){if(e in mb)return mb[e];var t=e.charCodeAt(0),i="\\u";return 16>t?i+="000":256>t?i+="00":4096>t&&(i+="0"),mb[e]=i+t.toString(16)}),'"')}var h=!0,i=null,j=!1,k=this,ea=Date.now||function(){return+new Date},ja=/&/g,ka=/</g,la=/>/g,ma=/\"/g,ia=/[&<>\"]/,qa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),u=Array.prototype,sa=u.indexOf?function(e,t,i){return u.indexOf.call(e,t,i)}:function(e,t,n){if(n=n==i?0:0>n?Math.max(0,e.length+n):n,q(e))return q(t)&&1==t.length?e.indexOf(t,n):-1;for(;e.length>n;n++)if(n in e&&e[n]===t)return n;return-1},ta=u.forEach?function(e,t,i){u.forEach.call(e,t,i)}:function(e,t,i){for(var n=e.length,o=q(e)?e.split(""):e,r=0;n>r;r++)r in o&&t.call(i,o[r],r,e)},v,za,w,Aa,Ba,Ca;Aa=w=za=v=j;var y;if(y=Da()){var Ea=x();v=0==y.indexOf("Opera"),za=!v&&-1!=y.indexOf("MSIE"),(w=!v&&-1!=y.indexOf("WebKit"))&&y.indexOf("Mobile"),Aa=!v&&!w&&"Gecko"==Ea.product}var z=v,A=za,B=Aa,C=w,D,Fa=x();D=Fa&&Fa.platform||"",Ba=-1!=D.indexOf("Mac"),Ca=-1!=D.indexOf("Win"),D.indexOf("Linux"),x()&&(x().appVersion||"").indexOf("X11");var E;e:{var F="",G;if(z&&k.opera)var Ga=k.opera.version,F="function"==typeof Ga?Ga():Ga;else if(B?G=/rv\:([^\);]+)(\)|;)/:A?G=/MSIE\s+([^\);]+)(\)|;)/:C&&(G=/WebKit\/(\S+)/),G)var Ha=G.exec(Da()),F=Ha?Ha[1]:"";if(A){var Ia,Ja=k.document;if(Ia=Ja?Ja.documentMode:void 0,Ia>parseFloat(F)){E=""+Ia;break e}}E=F}var I={},Ka={},L=j,M="";if(navigator.plugins&&navigator.plugins.length){var La=navigator.plugins["Shockwave Flash"];La&&(L=h,La.description&&(M=N(La.description))),navigator.plugins["Shockwave Flash 2.0"]&&(L=h,M="2.0.0.11")}else if(navigator.mimeTypes&&navigator.mimeTypes.length){var Ma=navigator.mimeTypes["application/x-shockwave-flash"];(L=Ma&&Ma.enabledPlugin)&&(M=N(Ma.enabledPlugin.description))}else try{var O=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),L=h,M=N(O.GetVariable("$version"))}catch(Na){try{O=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),L=h,M="6.0.21"}catch(Oa){try{O=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),L=h,M=N(O.GetVariable("$version"))}catch(Pa){}}}var Qa=L,Ra=M,Sa,Ta=!A||J(9);(B||A)&&(A&&J(9)||B&&(I["1.9.1"]||(I["1.9.1"]=na(E,"1.9.1")>=0))),A&&(I["9"]||(I["9"]=na(E,"9")>=0)),P.prototype.clone=function(){return new P(this.x,this.y)},P.prototype.toString=function(){return"("+this.x+", "+this.y+")"},Q.prototype.clone=function(){return new Q(this.width,this.height)},Q.prototype.toString=function(){return"("+this.width+" x "+this.height+")"},Q.prototype.round=function(){return this.width=Math.round(this.width),this.height=Math.round(this.height),this};var Wa={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};S.prototype.createDom=function(){var e=this.document_,t=arguments,n=t[0],o=t[1];if(!Ta&&o&&(o.name||o.type)){if(n=["<",n],o.name&&n.push(' name="',ha(o.name),'"'),o.type){n.push(' type="',ha(o.type),'"');var r={};ra(r,o),o=r,delete o.type}n.push(">"),n=n.join("")}return n=e.createElement(n),o&&(q(o)?n.className=o:p(o)?Ua.apply(i,[n].concat(o)):Va(n,o)),t.length>2&&ab(e,n,t),n},S.prototype.createElement=function(e){return this.document_.createElement(e)},S.prototype.createTextNode=function(e){return this.document_.createTextNode(e)},S.prototype.appendChild=function(e,t){e.appendChild(t)},S.prototype.contains=function(e,t){if(e.contains&&1==t.nodeType)return e==t||e.contains(t);if(void 0!==e.compareDocumentPosition)return e==t||Boolean(16&e.compareDocumentPosition(t));for(;t&&e!=t;)t=t.parentNode;return t==e},V.prototype.clone=function(){return new V(this.top,this.right,this.bottom,this.left)},V.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"},V.prototype.contains=function(e){return this&&e?e instanceof V?e.left>=this.left&&e.right<=this.right&&e.top>=this.top&&e.bottom<=this.bottom:e.x>=this.left&&e.x<=this.right&&e.y>=this.top&&e.y<=this.bottom:j};var ib={thin:2,medium:4,thick:6},mb={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","":"\\u000b"},nb=/\uffff/.test("")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;ua=navigator.userAgent,_={googJSON:{parse:function(a){if(a=""+a,/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a)},stringify:function(e,t){var i=[];return kb(new jb(t),e,i),i.join("")}},embed:top!==self,MAX_INT:4294967295,isString:q,isFunction:r,isObject:s,isArray:p,isDef:o,isDefAndNotNull:function(e){return e!=i},bind:function(e,i){return t(i,e)},now:ea,viewportSize:function(e){return e=(e||window).document,e=U(e)?e.documentElement:e.body,new Q(e.clientWidth,e.clientHeight)},isNumber:function(e){return"number"==typeof e&&isFinite(e)},undef:void 0,warn:function(){var e;try{return e=Array.prototype.slice.call(arguments),console.warn.apply(console,e)}catch(t){}},sliceArgs:function(e){return Array.prototype.slice.call(e)},camelCase:function(e){return oa(""+e)},trim:ga,isEmptyString:function(e){return/^[\s\xa0]*$/.test(e)},compareVersions:na,cloneArray:wa,cloneObject:function(e){var t,i={};for(t in e)i[t]=e[t];return i},urlEncode:function(e){return encodeURIComponent(""+e)},startsWith:fa,parseBoolean:function(e){return e===h||"1"===e||"true"===e||"yes"===e},IE:A,webkit:C,Chrome:-1!==ua.indexOf("Chrome"),Firefox:B,version:E,Opera:z,Mac:Ba,Windows:Ca,iPhone:-1!==ua.indexOf("iPhone"),iPod:-1!==ua.indexOf("iPod"),iPad:-1!==ua.indexOf("iPad"),Android:-1!==ua.indexOf("Android"),Silk:-1!==ua.indexOf("Silk"),WindowsPhone:-1!==ua.indexOf("Windows Phone OS"),flashVersion:Ra,flash:Qa,pageOffset:fb,clientPosition:function(e){var t=new P;if(1==e.nodeType)if(e.getBoundingClientRect)e=db(e),t.x=e.left,t.y=e.top;else{var i;i=R(e),i=$a(i.document_),e=fb(e),t.x=e.x-i.x,t.y=e.y-i.y}else{i=r(e.getBrowserEvent);var n=e;e.targetTouches?n=e.targetTouches[0]:i&&e.getBrowserEvent().targetTouches&&(n=e.getBrowserEvent().targetTouches[0]),t.x=n.clientX,t.y=n.clientY}return t},style:function(e,t){return e.style[oa(t)]||""},selectorCase:function(e){return(""+e).replace(/([A-Z])/g,"-$1").toLowerCase()},computedStyle:W,size:function(e){if("none"!=X(e,"display"))return gb(e);var t=e.style,i=t.display,n=t.visibility,o=t.position;return t.visibility="hidden",t.position="absolute",t.display="inline",e=gb(e),t.display=i,t.position=o,t.visibility=n,e},contentSize:function(e){var t,i=T(e),n=A&&e.currentStyle;if((t=n)&&(i=R(i),t=U(i.document_)&&"auto"!=n.width&&"auto"!=n.height&&!n.boxSizing),t)return i=Y(e,n.width,"width","pixelWidth"),e=Y(e,n.height,"height","pixelHeight"),new Q(i,e);if(n=new Q(e.offsetWidth,e.offsetHeight),A){i=Z(e,"paddingLeft"),t=Z(e,"paddingRight");var o=Z(e,"paddingTop"),r=Z(e,"paddingBottom"),i=new V(o,t,r,i)}else i=W(e,"paddingLeft"),t=W(e,"paddingRight"),o=W(e,"paddingTop"),r=W(e,"paddingBottom"),i=new V(parseFloat(o),parseFloat(t),parseFloat(r),parseFloat(i));return A?(t=$(e,"borderLeft"),o=$(e,"borderRight"),r=$(e,"borderTop"),e=$(e,"borderBottom"),e=new V(r,o,e,t)):(t=W(e,"borderLeftWidth"),o=W(e,"borderRightWidth"),r=W(e,"borderTopWidth"),e=W(e,"borderBottomWidth"),e=new V(parseFloat(r),parseFloat(o),parseFloat(e),parseFloat(t))),new Q(n.width-e.left-i.left-i.right-e.right,n.height-e.top-i.top-i.bottom-e.bottom)},installStyles:function(e,t){var n=R(t),o=i;if(A)o=n.document_.createStyleSheet(),hb(o,e);else{var r=bb(n,"head")[0];r||(o=bb(n,"body")[0],r=n.createDom("head"),o.parentNode.insertBefore(r,o)),o=n.createDom("style"),hb(o,e),n.appendChild(r,o)}return o},uninstallStyles:function(e){(e=e.ownerNode||e.owningElement||e)&&e.parentNode&&e.parentNode.removeChild(e)},computedOverflowX:function(e){return X(e,"overflowX")},computedOverflowY:function(e){return X(e,"overflowY")},computedZIndex:function(e){return X(e,"zIndex")},setStyle:function(e,t,i){q(t)?cb(e,i,t):pa(t,da(cb,e))},keys:function(e){var t,i=[],n=0;for(t in e)i[n++]=t;return i},extend:ra,values:function(e){var t,i=[],n=0;for(t in e)i[n++]=e[t];return i},contains:va,remove:function(e,t){var i,n=sa(e,t);return(i=n>=0)&&u.splice.call(e,n,1),i},isArrayLike:aa,indexOf:sa,toArray:wa,slice:ya,insertAt:function(e,t,i){xa(e,i,0,t)},last:function(e){return e.length>0?e[e.length-1]:void 0},map:function(e,t){var i,n,o,r;for(n=[],o=0,r=e.length;r>o;o++)i=e[o],n.push(t(i));return n},round:function(e,t){var i;return i=Math.pow(10,t),Math.round(e*i)/i},round2:function(e){return _.round(e,2)},round3:function(e){return _.round(e,3)},crc32:function(e){var t,i,n,o;for(o=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],e=unescape(encodeURI(e)),t=-1,n=e.length,i=0;n>i;)t=t>>>8^o[255&(t^e.charCodeAt(i))],i++;
return t^=-1,0>t&&(t+=4294967296),t.toString(16)},dirPath:function(e){return e.split("/").slice(0,-1).join("/")+"/"},baseName:function(e){return e.replace(RegExp("\\\\","g"),"/").replace(/.*\//,"")},stripExtension:function(e){return e.substr(0,e.lastIndexOf("."))||e},isAbsolutePath:function(e){return/(?:^\/\/)|(^[a-zA-Z]+\:\/\/)/.test(e)},makeAbsolutePath:function(e){var t,n,o;return _.isString(e)?_.isAbsolutePath(e)?e:(o=document.getElementsByTagName("base")[0],t=i,o&&(t=o.href),(!_.isString(t)||_.isEmptyString(t))&&(n=location.protocol+"//"+location.host,t=_.dirPath(location.href)),"/"===e.substr(0,1)?"/"===e.substr(1,1)?location.protocol+e:n+e:"."!==e.substr(0,1)&&e.match(/^\s*\w+:\/\//)?e:t+e):i},capitalize:function(e){return e.replace(/^\w/,function(e){return e.toUpperCase()})},humanize:function(e){return _.capitalize(e.replace(/_/g," "))},urlToHumanizedName:function(e){return _.humanize(_.stripExtension(_.baseName(e)))}},function(){var e;if(_.clone=function(e){return _.isArray(e)||_.isArrayLike(e)?_.cloneArray(e):_.cloneObject(e)},_.touch="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,_.Chrome&&!_.mobile&&(_.touch=j),_.iOS=_.iPhone||_.iPod||_.iPad,_.iOS){var t=_;try{e=ua.match(/OS ((?:[\d_\.])+)/)[1].replace(/_/g,".")}catch(n){}t.OSVersion=e}else if(_.Android){e=_;try{t=ua.match(/Android ((?:[\d_\.])+)/)[1]}catch(o){}e.OSVersion=t,_.FirefoxAndroidTablet=_.Firefox&&-1!==ua.indexOf("Tablet")}else if(_.WindowsPhone){e=_;var r;try{r=ua.match(/Windows Phone OS ((?:[\d_\.])+)/)[1]}catch(s){}e.OSVersion=r}return e=/Chrome\/(\S+)/.exec(ua),_.chromeVersion=e!=i?e[1]:"",e=document.documentMode,_.IE8=_.IE&&(8===_.version||8===e),_.IE9=_.IE&&(9===_.version||9===e),_.gtIE8=_.IE&&(_.version>8||e>8),_.gtIE9=_.IE&&(_.version>9||e>9),_.ltIE9=_.IE&&(9>_.version||9>e),_.ltIE10=_.IE&&(10>_.version||10>e),_.ltIE8=_.IE&&(8>_.version||8>e),_.IE6=_.IE&&(7>_.version||7>e),_.gtCH21=_.Chrome&&_.compareVersions(_.version,"537.4")>=0,_.ltOperaNext=_.Opera&&0>_.compareVersions(_.version,"12.10"),_.supportedFlashVersion=_.flash&&_.compareVersions(_.flashVersion,"10.3")>=0,_.deepExtend=function(e,t){var i,n;n=[];for(i in t)t[i]&&t[i].constructor&&t[i].constructor===Object?(e[i]=e[i]||{},n.push(this.deepExtend(e[i],t[i]))):n.push(e[i]=t[i]);return n},e=ua||navigator.vendor||window.opera,_.mobile=_.iOS||_.Android||_.WindowsPhone||/android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)),_.Safari=-1===ua.indexOf("Chrome")&&-1!==ua.indexOf("Safari")&&!_.mobile}(),_.JSON=window.JSON&&[1,2,3]===JSON.parse(JSON.stringify([1,2,3]))?JSON:_.googJSON,exports.ua=ua,exports._=_}(),module.exports||exports}),sublime_.define("graphics/abstract_context",["graphics/color","graphics/rect","graphics/size"],function(e,t,i){var n,o,r;return r={},o={},n=function(){function n(t){this._element_=t,this.defaultColor_=new e("red")}return n.className="AbstractContext",n.prototype._element=function(){return this._element_},n.prototype.clear=function(){},n.prototype.clearCurrentDrawing=function(){return this.clear()},n.prototype.draw=function(e,t){return e&&e.presentationPath()?this.internalDraw_(e,t):void 0},n.prototype.internalDraw_=function(){},n.prototype.frameForClipBounds=function(e,n){var o,r,s,a,l,u,h,p,c;return s=e.clipBounds,o=e.constructor.ClipBounds,u=(s&o.Left)===o.Left,p=(s&o.Top)===o.Top,h=(s&o.Right)===o.Right,r=(s&o.Bottom)===o.Bottom,c=this._element_.getAttribute("width"),h&&(c=u?n.size.width:n.maxX()),l=this._element_.getAttribute("height"),r&&(l=n.maxY()),a=t.zero(),a.origin.x=u?n.origin.x:0,a.origin.y=p?n.origin.y:0,a.size=new i(c,l),a},n.prototype.isFillTransparent=function(e){var t,i,n,o,r;if((t=e.color())&&1===t.alpha)return!1;if(i=e.gradient()){o=!1,r=i.colors;for(n in r)t=r[n],1!==t.alpha&&(o=!0);if(!o)return!1}return(t=e.colorOverlay())&&1===t.alpha?!1:!0},n.prototype.translate=function(){},n.prototype.isImage=function(e){return e instanceof HTMLImageElement},n.prototype.drawImage=function(){},n.prototype.fillWithColor_=function(){},n.prototype.fillWithGradient_=function(){},n.prototype.drawOuterStroke_=function(){},n.prototype.drawDropShadow_=function(){},n.prototype.drawInnerShadow_=function(){},n.prototype.translate_=function(){},n}(),r.exports=n,r.exports||o});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("graphics/abstract_layer",["graphics/point","graphics/size","graphics/rect","graphics/stroke","graphics/context","core/util","core/dom","core/event_emitter","graphics/layer_style"],function(e,t,i,n,o,r,s,a,l){var u,h,p,c,d,_,y,g;return h=o.ContentGravity,p=o.CurrentGraphicsTechnology,d=o.GraphicsTecnology,g=r._,c=a.EventEmitter,y={},_={},u=function(o){function r(){r.__super__.constructor.apply(this,arguments),this.paths_=[],this.path_=null,this.presentationPath_=null,this.sublayers_=[],this.needsDisplay_=!0,this.displayInfo_={},this.superlayer_=null,this.contentGravity_=h.Center,this.initElement_(),this._element_.style.cssText="position:absolute !important; top: 0px !important; left:0px !important; background: transparent !important",this.masks_=[],this.groupStyle_=null,this.style_=new l,this.clipBounds=r.ClipBounds.None}return __extends(r,o),r.className="AbstractLayer",r.ClipBounds={None:0,Left:1,Top:2,Right:4,Bottom:8},r.prototype.appendToElement=function(e){return s.insertChildAt(e,this._element(),0)},r.prototype.parent=function(){return this._element().parentNode},r.prototype.setDelegate=function(e){return this.delegate_=e},r.prototype.addPath=function(e){return this.paths_.push(e)},r.prototype.setGroupStyle=function(e){return this.groupStyle_=e,this.groupStyle_.on({didUpdateStyle:g.bind(this,function(){return this.delegate_?this.delegate_.setNeedsDisplay():void 0})})},r.prototype.setContentGravity=function(e){return this.contentGravity_=e},r.prototype.contentGravity=function(){return this.contentGravity_},r.prototype.setMask=function(e){var t,i,n;for(n=this.masks_,t=0,i=n.length;i>t;t++)e=n[t],e.superlayer_=null;return this.masks_=[],this.masks_.push(e),e.superlayer_=this},r.prototype.masks=function(){return this.masks_},r.prototype.setClippath=function(e){return this.clippath_=e,this.presentationClippath_=e.clone(),this.setNeedsDisplay()},r.prototype.presentationClippath=function(){return this.presentationClippath_},r.prototype.clippath=function(){return this.clippath_},r.prototype.setPath=function(e){var t,i;return t=null===this.path_,this.paths_=[],i=e,i?(this.path_=e,this.presentationPath_=e.clone(),this.paths_.push(e)):(this.path_=null,this.presentationPath_=null),this.emit({didUpdate:null}),!this.pathElements_||this.needsDisplay_&&this.displayInfo_.pathAndStyle===!0?this.setNeedsDisplay():this.setNeedsDisplay({pathOnly:!0})},r.prototype.path=function(){return this.path_},r.prototype.presentationPath=function(){return this.presentationPath_},r.prototype.addPaths=function(e){return this.paths_=this.paths_.concat(e)},r.prototype.paths=function(){return this.paths_},r.prototype.margin=function(){var e,t,i,o,r;for(t=[],this.stroke()&&this.stroke().position===n.Position.Outside&&t.push(Math.round(this.stroke().width)),this.dropShadow()&&t.push(Math.round(this.dropShadow().size+Math.max(this.dropShadow().offset.x,this.dropShadow().offset.y))),this.outerGlow()&&t.push(Math.round(this.outerGlow().size)),i=0,o=0,r=t.length;r>o;o++)e=t[o],e>i&&(i=e);return i},r.prototype.recursiveMargin=function(){var e,t,i,n,o;for(e=this.margin(),o=this.sublayers_,i=0,n=o.length;n>i;i++)t=o[i],t.path_&&(e=Math.max(e,t.recursiveMargin()));return e},r.prototype.setReferenceSize=function(e){var t,i,n,o,r;for(this.referenceSize_=e,o=this.sublayers_,r=[],i=0,n=o.length;n>i;i++)t=o[i],r.push(t.setReferenceSize(e));return r},r.prototype.referenceSize=function(){return this.referenceSize_},r.prototype.minMax=function(){var e,t,i,n,o,r;for(t={minX:g.MAX_INT,maxX:-g.MAX_INT,minY:g.MAX_INT,maxY:-g.MAX_INT},r=[this].concat(this.sublayers_),n=0,o=r.length;o>n;n++)i=r[n],i.path_&&(e=i.clippath_?i.clippath_.boundingBox():i.path_.boundingBox(),e.min.x<t.minX&&(t.minX=e.min.x),e.max.x>t.maxX&&(t.maxX=e.max.x),e.min.y<t.minY&&(t.minY=e.min.y),e.max.y>t.maxY&&(t.maxY=e.max.y));return this.minMax_=t,this.minMax_},r.prototype.minMaxWithDecorations=function(){var e,t,i,n,o,r,s;for(t={minX:g.MAX_INT,maxX:-g.MAX_INT,minY:g.MAX_INT,maxY:-g.MAX_INT},s=[this].concat(this.sublayers_),o=0,r=s.length;r>o;o++)n=s[o],n.path_&&(e=n.clippath_?n.clippath_.boundingBox():n.path_.boundingBox(),i=n.margin(),e.min.x-i<t.minX&&(t.minX=Math.round(e.min.x-i)),e.max.x+i>t.maxX&&(t.maxX=Math.round(e.max.x+i)),e.min.y-i<t.minY&&(t.minY=Math.round(e.min.y-i)),e.max.y+i>t.maxY&&(t.maxY=Math.round(e.max.y+i)));return this.minMaxDecoration_=t,this.minMaxDecoration_},r.prototype.origin=function(){var t;return t=this.minMax(),new e(t.minX,t.minY)},r.prototype.size=function(e){var i;return null==e&&(e={}),i=e.decorations?this.minMaxWithDecorations():this.minMax(),new t(i.maxX-i.minX,i.maxY-i.minY)},r.prototype.contentRect=function(e){var t;return null==e&&(e={}),e.includeDecorations?void 0:(t=new i,t.origin=this.origin(),t.size=this.size(),t)},r.prototype.innerGlow=function(){return this.style_.innerGlow_||this.groupStyle_&&this.groupStyle_.innerGlow()},r.prototype.setInnerGlow=function(e){return this.style_.setInnerGlow(e)},r.prototype.outerGlow=function(){return this.style_.outerGlow()||this.groupStyle_&&this.groupStyle_.outerGlow()},r.prototype.setOuterGlow=function(e){return this.style_.setOuterGlow(e)},r.prototype.color=function(){return this.style_.color()||this.groupStyle_&&this.groupStyle_.color()},r.prototype.setColor=function(e){return this.style_.setColor(e)},r.prototype.colorOverlay=function(){return this.style_.colorOverlay()||this.groupStyle_&&this.groupStyle_.colorOverlay()},r.prototype.setColorOverlay=function(e){return this.style_.setColorOverlay(e)},r.prototype.setGradient=function(e){return this.style_.setGradient(e)},r.prototype.gradient=function(){return this.style_.gradient()||this.groupStyle_&&this.groupStyle_.gradient()},r.prototype.stroke=function(){return this.style_.stroke()||this.groupStyle_&&this.groupStyle_.stroke()},r.prototype.setStroke=function(e){return this.style_.setStroke(e),this.setNeedsDisplay()},r.prototype.setDropShadow=function(e){return this.style_.setDropShadow(e),this.setNeedsDisplay()},r.prototype.dropShadow=function(){return this.style_.dropShadow()||this.groupStyle_&&this.groupStyle_.dropShadow()},r.prototype.setInnerShadow=function(e){return this.style_.setInnerShadow(e)},r.prototype.innerShadow=function(){return this.style_.innerShadow()||this.groupStyle_&&this.groupStyle_.innerShadow()},r.prototype.sublayers=function(){return this.sublayers_},r.prototype.removeAllSublayers=function(){var e,t,i,n;for(n=this.sublayers_,t=0,i=n.length;i>t;t++)e=n[t],e.superlayer_=null,e.delegate_=null;return this.sublayers_=[]},r.prototype.context=function(){},r.prototype.addSublayer=function(e){return this.sublayers_.push(e),e.superlayer_=this},r.prototype.drawInContext=function(e){return e.draw(this,this.viewFrameInLayer())},r.prototype.shouldRedrawOnSizeUpdate=function(){return!0},r.prototype._element=function(){return this._element_},r.prototype.viewFrameInLayer=function(){var t,n;return this.superlayer_?this.superlayer_.viewFrameInLayer():(n=this.delegate_.size(),t=i.zero(),g.isNumber(this.elementOrigin_.x)&&g.isNumber(this.elementOrigin_.y)&&(t.origin=new e(-this.elementOrigin_.x,-this.elementOrigin_.y)),t.size=n,t)},r.prototype.displayIfNeeded=function(){return this.superlayer_?this.superlayer_.displayIfNeeded():this.needsDisplay_&&s.isInDom(this._element_)?this.draw():void 0},r.prototype.setNeedsDisplay=function(e){return null==e&&(e={}),this.superlayer_?this.superlayer_.setNeedsDisplay(e):(e.pathOnly&&e.pathAndStyle!==!0?this.displayInfo_.pathOnly=!0:(this.displayInfo_.pathOnly=!1,this.displayInfo_.pathAndStyle=!0),this.needsDisplay_=!0,setTimeout(g.bind(this,function(){return this.needsDisplay_&&s.isInDom(this._element_)?this.draw():void 0}),0))},r.prototype.draw=function(){var t,i,n,o,r,s,a,l,u,h,c,_,y,g,f,m,v,w,b,T,x,P,k,z,S,F,M,A,C,B,V,E,L,O,I,D,R,U,N,W,H,j,G,q,Q,K,Y,X,Z;if(this.needsDisplay_=!1,p!==d.None){if(!this.path()&&1>this.sublayers_.length)return this.context().clearCurrentDrawing(),void 0;if(h=this.delegate_.size(),a=e.zero(),n=e.zero(),c=h.clone(),o=this.recursiveMargin(),o>0&&(t=!0,a=new e(-o,-o),n=new e(o,o),c.width+=2*o,c.height+=2*o),this.elementOrigin_=a,this._element_.style.cssText="background:transparent !important; pointer-events: none !important; position:absolute !important; top: "+a.y+"px !important; left: "+a.x+"px !important; width: "+c.width+"px !important; height: "+c.height+"px !important",this._element_.width=c.width,this._element_.height=c.height,this._element_.setAttribute("width",c.width),this._element_.setAttribute("height",c.height),t){if(this.path())for(u=this.path().origin(),s=u.sum(n),this.presentationPath_.translateTo(s.x,s.y),this.clippath_&&(u=this.clippath_.origin(),s=u.sum(n),this.presentationClippath_.translateTo(s.x,s.y)),D=this.masks(),g=0,w=D.length;w>g;g++)r=D[g],r.path()&&(u=r.path().origin(),s=u.sum(n),r.presentationPath_.translateTo(s.x,s.y));for(R=this.sublayers_,f=0,b=R.length;b>f;f++)if(y=R[f],y.needsDisplay_=!1,y.displayInfo_={},y.path())for(_=y.path().origin(),s=_.sum(n),y.presentationPath_.translateTo(s.x,s.y),y.clippath_&&(_=y.clippath().origin(),s=_.sum(n),y.presentationClippath_.translateTo(s.x,s.y)),W=y.masks(),m=0,P=W.length;P>m;m++)r=W[m],r.path()&&(u=r.path().origin(),s=u.sum(n),r.presentationPath_.translateTo(s.x,s.y))}else for(this.path_&&(this.presentationPath_=this.path_.clone()),this.clippath_&&(this.presentationClippath_=this.clippath_.clone()),H=this.sublayers_,v=0,k=H.length;k>v;v++)y=H[v],y.needsDisplay_=!1,y.displayInfo_={},y.path_&&(y.presentationPath_=y.path_.clone()),y.clippath_&&(y.presentationClippath_=y.clippath_.clone());if(this.displayInfo_.pathOnly){if(this.pathElements_&&this.presentationPath_)for(j=this.pathElements_,B=0,z=j.length;z>B;B++)l=j[B],l.updatePath(this.presentationPath_);for(G=this.masks(),V=0,S=G.length;S>V;V++)if(r=G[V],r.pathElements_&&r.presentationPath_)for(q=r.pathElements_,E=0,F=q.length;F>E;E++)l=q[E],l.updatePath(r.presentationPath_);for(this.updateClipBounds&&this.updateClipBounds(this.viewFrameInLayer()),Q=this.sublayers_,L=0,M=Q.length;M>L;L++){if(y=Q[L],y.pathElements_&&y.presentationPath_)for(K=y.pathElements_,O=0,A=K.length;A>O;O++)l=K[O],l.updatePath(y.presentationPath_);for(y.updateClipBounds&&y.updateClipBounds(this.viewFrameInLayer()),Y=y.masks(),I=0,C=Y.length;C>I;I++)if(r=Y[I],r.pathElements_&&r.presentationPath_)for(U=r.pathElements_,X=0,T=U.length;T>X;X++)l=U[X],l.updatePath(r.presentationPath_)}}else{for(i=this.context(),i.clear(),i.draw(this,this.viewFrameInLayer()),N=this.sublayers_,Z=0,x=N.length;x>Z;Z++)y=N[Z],y.drawInContext(i);this.fixDrawingIssues()}return this.displayInfo_={}}},r.prototype.fixDrawingIssues=function(){var e,t,i,n;return p===d.SVG&&g.Firefox&&this._element_&&this.elementOrigin_&&this._element_.getScreenCTM&&(n=this._element_.getScreenCTM())&&(t=n.e%1,i=n.f%1,t&&(e=0!==parseFloat(this._element_.style.left)%1?0:.5,this._element_.style.setProperty("left",this.elementOrigin_.x+e+"px","important")),i)?(e=0!==parseFloat(this._element_.style.top)%1?0:.5,this._element_.style.setProperty("top",this.elementOrigin_.y+e+"px","important")):void 0},r}(c),y.exports=u,y.exports||_});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("graphics/arc",["graphics/path_component","graphics/point","graphics/geometry"],function(e,t,i){var n,o,r;return r={},o={},n=function(e){function n(e,t,i,o,r,s,a,l){this.startPoint=e,this.endPoint=t,this.controlPoint=i,this.center=o,this.radius=r,this.startAngle=s,this.endAngle=a,this.counterclockwise=null!=l?l:!1,n.__super__.constructor.apply(this,arguments),this.isArc=!0}return __extends(n,e),n.className="Arc",n.prototype.boundingPoints=function(){var e,i,n,o,r,s,a,l;for(r=[],n=2*Math.PI,l=[0,Math.PI/2,Math.PI,3*Math.PI/2],i=s=0,a=l.length;a>s;i=++s)e=l[i],(e>this.startAngle&&this.endAngle>e||e>this.startAngle-n&&this.endAngle-n>e)&&(o=new t(this.center.x+this.radius*Math.cos(e),this.center.y+this.radius*Math.sin(e)),r.push(o));return[this.startPoint,this.endPoint].concat(r)},n.prototype.translateBy=function(e,t){var i,n,o,r,s;for(r=[this.startPoint,this.endPoint,this.controlPoint,this.center],s=[],n=0,o=r.length;o>n;n++)i=r[n],i.x+=e,s.push(i.y+=t);return s},n.prototype.offset=function(e){var i,o,r,s,a,l,u;return 0>e&&Math.abs(e)>=this.radius?null:(o=this.controlPoint,e=-e,i=this.direction(this.controlPoint.x-this.startPoint.x,this.controlPoint.y-this.startPoint.y),s=parseFloat((e*Math.cos(i+Math.PI/2)).toFixed(4)),a=parseFloat((e*Math.sin(i+Math.PI/2)).toFixed(4)),r=new t(s,a),u=this.startPoint.sum(r),o=o.sum(r),i=this.direction(this.endPoint.x-this.controlPoint.x,this.endPoint.y-this.controlPoint.y),s=parseFloat((e*Math.cos(i+Math.PI/2)).toFixed(4)),a=parseFloat((e*Math.sin(i+Math.PI/2)).toFixed(4)),r=new t(s,a),l=this.endPoint.sum(r),o=o.sum(r),new n(u,l,o,this.center,this.radius-e,this.startAngle,this.endAngle,this.counterclockwise))},n.prototype.rotate=function(e,t){var n,o,r,s,a;for(a=[this.startPoint,this.endPoint,this.controlPoint,this.center],r=0,s=a.length;s>r;r++)o=a[r],n=i.rotate(o,t,e),o.x=n.x,o.y=n.y;return this.startAngle+=e,this.endAngle+=e,this.boundingBox_=null},n}(e),r.exports=n,r.exports||o});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("graphics/bezier_curve",["graphics/vector","graphics/line","graphics/bezier_quad_curve","graphics/range","graphics/geometry","graphics/point","graphics/vertex"],function(e,t,i,n,o,r,s){var a,l,u;return u={},l={},a=function(i){function a(e,t,i,n){this.startPoint=e,this.controlPoint1=t,this.controlPoint2=i,this.endPoint=n}return __extends(a,i),a.className="BezierCurve",a.prototype.toString=function(){return"C"+a.__super__.toString.apply(this,arguments)},a.prototype.roots=function(){var e;return e=[],e=e.concat(this.rootValues_(this.startPoint.x,this.controlPoint1.x,this.controlPoint2.x,this.endPoint.x)),e=e.concat(this.rootValues_(this.startPoint.y,this.controlPoint1.y,this.controlPoint2.y,this.endPoint.y))},a.prototype.rotate=function(e,t){var i,n,r,s,a;for(a=this.points(),r=0,s=a.length;s>r;r++)n=a[r],i=o.rotate(n,t,e),n.x=i.x,n.y=i.y;return this.boundingBox_=null},a.prototype.translateBy=function(e,t){var i,n,o,r,s;for(this.boundingBox_=null,r=this.points(),s=[],n=0,o=r.length;o>n;n++)i=r[n],i.x+=e,s.push(i.y+=t);return s},a.prototype.rootValues_=function(e,t,i,o){var r,s,a,l,u,h;return s=[],u=-e+2*t-i,h=-Math.sqrt(-e*(i-o)+t*t-t*(i+o)+i*i),r=-e+3*t-3*i+o,0!==r&&(a=(u+h)/r,n.contains(0,1,a)&&s.push(a),l=(u-h)/r,n.contains(0,1,l)&&s.push(l)),s},a.prototype.rootPoints=function(){var e,t,i,n;for(n=this.roots(),e=n.length,i=[],t=0;e>t;)i.push(this.point(n[t])),t++;return i},a.prototype.computeCubicBaseValue=function(e,t,i,n,o){var r;return r=1-e,r*r*r*t+3*r*r*e*i+3*r*e*e*n+e*e*e*o},a.prototype.computeCubicTightBoundingBox=function(e,t,i,n,o,s,a,l){var u,h,p,c,d,_,y,g,f,m,v,w,b,T,x,P,k,z,S,F,M,A,C,B,V,E,L,O;for(x=new r(i-e,n-t),P=new r(o-e,s-t),k=new r(a-e,l-t),u=this.direction(k.x,k.y),z=new r(x.x*Math.cos(-u)-x.y*Math.sin(-u),x.x*Math.sin(-u)+x.y*Math.cos(-u)),S=new r(P.x*Math.cos(-u)-P.y*Math.sin(-u),P.x*Math.sin(-u)+P.y*Math.cos(-u)),F=new r(k.x*Math.cos(-u)-k.y*Math.sin(-u),k.x*Math.sin(-u)+k.y*Math.cos(-u)),f=9999,y=-9999,f>0&&(f=0),0>y&&(y=0),f>F.x&&(f=F.x),F.x>y&&(y=F.x),A=this.computeCubicFirstDerivativeRoots(0,z.x,S.x,F.x),V=0,L=A.length;L>V;V++)M=A[V],M>=0&&1>=M&&(C=this.computeCubicBaseValue(M,0,z.x,S.x,F.x),f>C&&(f=C),C>y&&(y=C));for(m=9999,g=-9999,m>0&&(m=0),0>g&&(g=0),A=this.computeCubicFirstDerivativeRoots(0,z.y,S.y,0),E=0,O=A.length;O>E;E++)M=A[E],M>=0&&1>=M&&(B=this.computeCubicBaseValue(M,0,z.y,S.y,0),m>B&&(m=B),B>g&&(g=B));return h=new r(f,m),p=new r(f,g),c=new r(y,g),d=new r(y,m),v=new r(h.x*Math.cos(u)-h.y*Math.sin(u),h.x*Math.sin(u)+h.y*Math.cos(u)),w=new r(p.x*Math.cos(u)-p.y*Math.sin(u),p.x*Math.sin(u)+p.y*Math.cos(u)),b=new r(c.x*Math.cos(u)-c.y*Math.sin(u),c.x*Math.sin(u)+c.y*Math.cos(u)),T=new r(d.x*Math.cos(u)-d.y*Math.sin(u),d.x*Math.sin(u)+d.y*Math.cos(u)),v.x+=e,v.y+=t,w.x+=e,w.y+=t,b.x+=e,b.y+=t,T.x+=e,T.y+=t,_=[v.x,v.y,w.x,w.y,b.x,b.y,T.x,T.y]},a.prototype.computeTightBoundingBox=function(){return this.tightBoundingBox_||(this.tightBoundingBox_=this.computeCubicTightBoundingBox(this.startPoint.x,this.startPoint.y,this.controlPoint1.x,this.controlPoint1.y,this.controlPoint2.x,this.controlPoint2.y,this.endPoint.x,this.endPoint.y)),this.tightBoundingBox_},a.prototype.boundingPoints=function(){var e,t,i,n,o,s;if(!this.boundingBox_){for(o=r.max(),n=r.min(),t=this.rootPoints().concat([this.startPoint,this.endPoint]),e=t.length,s=null,i=0;e>i;)s=t[i],s.x>n.x&&(n.x=s.x),s.x<o.x&&(o.x=s.x),s.y>n.y&&(n.y=s.y),s.y<o.y&&(o.y=s.y),i++;this.boundingBox_=[o,n]}return this.boundingBox_},a.prototype.scaleOrigin=function(e,t,i,n,o,r,s,l){var u,h,p,c,d,_,y,g,f;if(null==this.scaleOrigin_){if(g=this.direction(i-e,n-t)+a.DEG90,d=Math.cos(g),y=Math.sin(g),f=[e,t,e+d,t+y],g=this.direction(s-o,l-r)+a.DEG90,c=Math.cos(g),_=Math.sin(g),u=[s+c,l+_,s,l],p=[0,0],d===c&&y===_)return null;if(d===c||y===_)p[0]=(e+s)/2,p[1]=(t+l)/2;else{if(h=this.intersectsLineLine(f,u),null===h)return null;p[0]=h[0],p[1]=h[1]}this.scaleOrigin_=p}return this.scaleOrigin_},a.prototype.rotateToUniform=function(e){var t,i,n,o,s,a,l,u,h,p,c;for(o=e.length,a=[],h=this.startPoint.x,c=this.startPoint.y,a.push(new r(0,0)),n=1;o>n;)a.push(new r(e[n].x-h,e[n].y-c)),n++;for(t=-this.direction(a[o-1].x,a[o-1].y),i=Math.cos(t),s=Math.sin(t),n=1;o>n;)a.push=new r(e[n].x-h,e[n].y-c),l=a[n],u=l.x,p=l.y,a[n]=new r(u*i-p*s,u*s+p*i),n++;return a},a.prototype.computeQuadraticFirstDerivativeRoot=function(e,t,i){var n,o;return o=-1,n=e-2*t+i,0!==n&&(o=(e-t)/n),o},a.prototype.controlPoints=function(){return[this.controlPoint1,this.controlPoint2]},a.prototype.points=function(){return[this.startPoint,this.controlPoint1,this.controlPoint2,this.endPoint]},a.prototype.computeCubicFirstDerivativeRoots=function(e,t,i,n){var o,r,s,a;return r=[-1,-1],s=-e+2*t-i,a=-Math.sqrt(-e*(i-n)+t*t-t*(i+n)+i*i),o=-e+3*t-3*i+n,0!==o&&(r[0]=(s+a)/o,r[1]=(s-a)/o),r},a.prototype.computeCubicSecondDerivativeRoot=function(e,t,i,n){var o,r,s;return r=-1,s=e-2*t+i,o=e-3*t+3*i-n,0!==o&&(r=s/o),r},a.prototype.swapSort=function(e){var t,i,n,o,r,s;for(o=!1,i=e.length;!o;)for(o=!0,t=r=0,s=e.length;s>r;t=++r)n=e[t],i-1>t&&n>e[t+1]&&(e[t]=e[t+1],e[t+1]=n,o=!1);return e},a.prototype.getCubicSegment=function(e,t,i,n,o,r,s,a,l,u){var h,p,c,d,_;return 0===e?(d=this.splitCubicCurve(t,i,n,o,r,s,a,l,u),d[0].setTValues(e,t),d[0]):1===t?(d=this.splitCubicCurve(e,i,n,o,r,s,a,l,u),d[1].setTValues(e,t),d[1]):(h=this.splitCubicCurve(e,i,n,o,r,s,a,l,u),_=1*(t-e)/(1-e),p=h[1].points(),c=this.splitCubicCurve(_,p[0].x,p[0].y,p[1].x,p[1].y,p[2].x,p[2].y,p[3].x,p[3].y),c[0].setTValues(e,t),c[0])},a.prototype.splitSegment=function(e){var t,i;return i=this.points(),t=this.splitCubicCurve(e,i[0].x,i[0].y,i[1].x,i[1].y,i[2].x,i[2].y,i[3].x,i[3].y),t[0].setTValues(this.startT,this.startT+e*(this.endT-this.startT)),t[1].setTValues(this.startT+e*(this.endT-this.startT),this.endT),t},a.prototype.validate=function(e){var t,i,n,o,r,s,l,u,h,p;return e.isLine?[e]:(s=e.points(),r=this.scaleOrigin(s[0].x,s[0].y,s[1].x,s[1].y,s[2].x,s[2].y,s[3].x,s[3].y),null===r?null:(t=this.direction(s[0].x-r[0],s[0].y-r[1]),i=this.direction(s[3].x-r[0],s[3].y-r[1]),n=i>t?i-t:t-i,n>=a.DEG90?p=[e]:(h=.5,u=e.splitSegment(h),o=e.startT+h*(e.endT-e.startT),u[0].setTValues(e.startT,o),u[1].setTValues(o,e.endT),l=[u[0],u[1]])))},a.prototype.makeSafe=function(){var e,t,i,n,o,r,s,a,l,u,h,p,c,d,_,y,g,f,m,v;for(t=this.points(),a=this.rotateToUniform(t),d=this.computeCubicFirstDerivativeRoots(a[0].x,a[1].x,a[2].x,a[3].x),y=this.computeCubicFirstDerivativeRoots(a[0].y,a[1].y,a[2].y,a[3].y),c=this.computeCubicSecondDerivativeRoot(a[0].x,a[1].x,a[2].x,a[3].x),_=this.computeCubicSecondDerivativeRoot(a[0].y,a[1].y,a[2].y,a[3].y),p=[0,d[0],d[1],c,y[0],y[1],_,1],p=this.swapSort(p),r=0,e=-1,g=0,m=p.length;m>g;g++)h=p[g],h>=0&&1>=h&&h!==e&&(e=h,r++);for(n=[],i=0,e=-1,f=0,v=p.length;v>f;f++)h=p[f],h>=0&&1>=h&&h!==e&&(e=h,n.push(h));for(o=[],l=0;r-1>l;)s=this.getCubicSegment(n[l],n[l+1],t[0].x,t[0].y,t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y),u=this.validate(s),l++,null!==u&&o.push(s);return o},a.prototype.offset=function(e){var t,i,n,o,r,s,a,l,u;for(e=-e,this.safe_||(this.safe_=this.makeSafe()),r=this.safe_,o=[],s=0,l=r.length;l>s;s++)t=r[s],n=t.simpleOffset(e),n&&(n.setTValues(n.startT,n.endT),o.push(n));for(i=a=0,u=o.length;u>a;i=++a)t=o[i],i>0&&(t.startPoint.x=o[i-1].endPoint.x,t.startPoint.y=o[i-1].endPoint.y);return o},a.DEG90=Math.PI/2,a.prototype.simpleOffset=function(t){var i,n,o,s,l,u,h,p,c,d,_,y,g,f,m,v,w,b,T,x,P,k,z,S,F,M,A,C,B,V;return P=this.startPoint.x,M=this.startPoint.y,k=this.controlPoint1.x,A=this.controlPoint1.y,z=this.controlPoint2.x,C=this.controlPoint2.y,S=this.endPoint.x,B=this.endPoint.y,this.angles_||(this.angles_=this.curveDirections(P,M,k,A,z,C,S,B),this.cos0_=Math.cos(this.angles_[0]+a.DEG90),this.sin0_=Math.sin(this.angles_[0]+a.DEG90),this.cos1_=Math.cos(this.angles_[1]+a.DEG90),this.sin1_=Math.sin(this.angles_[1]+a.DEG90)),p=P+t*this.cos0_,y=M+t*this.sin0_,_=S+t*this.cos1_,m=B+t*this.sin1_,b=this.scaleOrigin(P,M,k,A,z,C,S,B),this.scale_origin=b,null===b?null:(F=b[0],V=b[1],i=[p,y,p+(k-P),y+(A-M)],n=[F,V,k,A],l=this.intersectsLineLine(i,n),null===l?null:(u=!1,v=new r(F,V),w=new r(l[0],l[1]),T=e.forPoints(v,this.startPoint),x=e.forPoints(v,w),(0===x.x&&0===T.x||0>=x.x/T.x)&&(0===x.y&&0===T.y||0>=x.y/T.y)&&(u=!0),c=l[0],g=l[1],o=[_,m,_+(z-S),m+(C-B)],s=[F,V,z,C],l=this.intersectsLineLine(o,s),null===l?null:(u=!1,v=new r(F,V),w=new r(l[0],l[1]),T=e.forPoints(v,this.endPoint),x=e.forPoints(v,w),(0===x.x&&0===T.x||0>=x.x/T.x)&&(0===x.y&&0===T.y||0>=x.y/T.y)&&(u=!0),d=l[0],f=l[1],h=new a(new r(p,y),new r(c,g),new r(d,f),new r(_,m)),h.nxa=F,h.nya=V,h.nxd=_,h.nyd=m,h.isInverse=u,h.scale_origin=b,h)))},a.prototype.isCollinearTo=function(e){var i;return i=new t(this.startPoint,this.endPoint),i.isCollinearTo(e)},a.prototype.oppositeExtendStartPointBy=function(t){var i,n,o;return o=e.forPoints(this.startPoint,this.endPoint).perpendicular(),i=Math.sqrt(Math.pow(o.x,2)+Math.pow(o.y,2)),n=t/i,this.startPoint.x=this.startPoint.x+o.x*n,this.startPoint.y=this.startPoint.y+o.y*n},a.prototype.extendStartPointBy=function(t){var i,n,o;return o=e.forPoints(this.startPoint,this.endPoint),i=Math.sqrt(Math.pow(o.x,2)+Math.pow(o.y,2)),n=t/i,this.startPoint.x=this.startPoint.x+o.x*n,this.startPoint.y=this.startPoint.y+o.y*n},a.prototype.oppositeExtendEndPointBy=function(t){var i,n,o;return o=e.forPoints(this.startPoint,this.endPoint).perpendicular(),n=Math.sqrt(Math.pow(o.x,2)+Math.pow(o.y,2)),i=(n+t)/n,this.endPoint.x=this.startPoint.x+o.x*i,this.endPoint.y=this.startPoint.y+o.y*i},a.prototype.extendEndPointBy=function(t){var i,n,o;return o=e.forPoints(this.startPoint,this.endPoint),n=Math.sqrt(Math.pow(o.x,2)+Math.pow(o.y,2)),i=(n+t)/n,this.endPoint.x=this.startPoint.x+o.x*i,this.endPoint.y=this.startPoint.y+o.y*i,this.lines_=null},a.prototype.flatten=function(e){var i,o,r,s,a,l,u;if(!this.lines_){for(l=1/e,r=[],a=this.startPoint,s=null,u=0,u=l,i=0;1>u||i>100;)i++,s=this.point(u),o=new t(a,s),o.tRange=new n(u-l,u),r.push(o),a=s,u+=l;u=1,s=this.point(u),o=new t(a,s),o.tRange=new n(u-l,u),r.push(o),this.lines_=r}return this.lines_},a.prototype.point=function(e){var t,i;return t=this.value_(e,this.startPoint.x,this.controlPoint1.x,this.controlPoint2.x,this.endPoint.x),i=this.value_(e,this.startPoint.y,this.controlPoint1.y,this.controlPoint2.y,this.endPoint.y),new r(t,i)},a.prototype.value_=function(e,t,i,n,o){return Math.pow(1-e,3)*t+3*Math.pow(1-e,2)*e*i+3*(1-e)*e*e*n+Math.pow(e,3)*o},a.prototype.vertexAtAlpha=function(e){var t,i,n;return i=this.value_(e,this.startPoint.x,this.controlPoint1.x,this.controlPoint2.x,this.endPoint.x),n=this.value_(e,this.startPoint.y,this.controlPoint1.y,this.controlPoint2.y,this.endPoint.y),t=new s(i,n),t.alpha=e,t},a.prototype.subComponentForAlphas=function(e,t){var i,n;return i=this,e>0&&(n=i.split(e),i=n[1]),t>0&&1>t&&(n=i.split(t),i=n[0]),i},a.prototype.subComponent=function(e,t){var i,n;return i=this,e.alpha>0&&(n=i.split(e.alpha),i=n[1]),t.alpha>0&&1>t.alpha&&(n=i.split(t.alpha),i=n[0]),i.startPoint=e,i.endPoint=t,i},a.prototype.splitCubicCurve=function(e,t,i,n,o,s,l,u,h){var p,c,d,_,y,g,f,m;return c=[],_=new r((1-e)*t+e*n,(1-e)*i+e*o),y=new r((1-e)*n+e*s,(1-e)*o+e*l),g=new r((1-e)*s+e*u,(1-e)*l+e*h),f=new r((1-e)*_.x+e*y.x,(1-e)*_.y+e*y.y),m=new r((1-e)*y.x+e*g.x,(1-e)*y.y+e*g.y),d=new r((1-e)*f.x+e*m.x,(1-e)*f.y+e*m.y),p=new a(new r(t,i),_,f,d),c.push(p),p=new a(d,m,g,new r(u,h)),c.push(p),c},a.prototype.split=function(e){var t,i,n,o,r,s,a,l;return t=this.startPoint.x,r=this.startPoint.y,i=this.controlPoint1.x,s=this.controlPoint1.y,n=this.controlPoint2.x,a=this.controlPoint2.y,o=this.endPoint.x,l=this.endPoint.y,this.splitCubicCurve(e,t,r,i,s,n,a,o,l)},a}(i),u.exports=a,u.exports||l});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("graphics/bezier_quad_curve",["graphics/path_component","graphics/point"],function(e,t){var i,n,o;return o={},n={},i=function(e){function i(e,t,n){this.controlPoint=t,i.__super__.constructor.call(this,e,n)}return __extends(i,e),i.className="BezierQuadCurve",i.prototype.setTValues=function(e,t){return this.startT=e,this.endT=t
},i.prototype.points=function(){return[this.startPoint,this.controlPoint,this.endPoint]},i.prototype.intersectsLineLine=function(e,t){var i,n,o,r,s,a,l,u,h,p,c,d,_,y,g;return u=e[0],d=e[1],h=e[2],_=e[3],p=t[0],y=t[1],c=t[2],g=t[3],o=(u-h)*(y-g)-(d-_)*(p-c),0===o?null:(i=u*_-d*h,n=p*g-y*c,r=i*(p-c)-(u-h)*n,s=i*(y-g)-(d-_)*n,a=r/o,l=s/o,[a,l])},i.prototype.curveDirections=function(e,t,i,n,o,r,s,a){var l;return l=[0,0],l[0]=this.notEqual(e,t,i,n)?this.direction(i-e,n-t):this.notEqual(e,t,o,r)?this.direction(o-e,r-t):this.notEqual(e,t,s,a)?this.direction(s-e,a-t):-1,l[1]=this.notEqual(s,a,o,r)?this.direction(s-o,a-r):this.notEqual(s,a,i,n)?this.direction(s-i,a-n):this.notEqual(s,a,e,t)?this.direction(s-e,a-t):-1,l},i.prototype.simpleOffset=function(e){var n,o,r,s,a,l,u,h,p,c,d,_,y,g,f,m,v;return d=this.points(),_=d[0].x,f=d[0].y,y=d[1].x,m=d[1].y,g=d[2].x,v=d[2].y,n=this.curveDirections(_,f,y,m,y,m,g,v),a=_+e*Math.cos(n[0]+Math.PI/2),h=f+e*Math.sin(n[0]+Math.PI/2),u=g+e*Math.cos(n[1]+Math.PI/2),c=v+e*Math.sin(n[1]+Math.PI/2),r=[a,h,a+(y-_),h+(m-f)],s=[u,c,u+(g-y),c+(v-m)],o=this.intersectsLineLine(r,s),l=o[0],p=o[1],new i(new t(a,h),new t(l,p),new t(u,c))},i}(e),o.exports=i,o.exports||n});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("graphics/canvas_context",["graphics/abstract_context","core/dom","graphics/path","graphics/stroke","graphics/point"],function(e,t,i,n,o){var r,s,a;return a={},s={},r=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return __extends(r,e),r.className="CanvasContext",r.prototype.translate_=function(e,t,i){var n;return n=i.getContext("2d"),n.translate(e,t)},r.prototype.clear=function(){var e,t;return t=this._element_,e=t.getContext("2d"),e.clearRect(0,0,t.width,t.height),e.setTransform(1,0,0,1,0,0)},r.prototype.internalDraw_=function(e,o){var r,s,a,l,u,h,p,c,d,_,y,g,f,m,v;for(y=t.create("canvas"),y.width=this._element_.width,y.height=this._element_.height,_=this._element_.getContext("2d"),_.save(),e.presentationClippath()&&(this.drawPath_(e.presentationClippath(),_),_.clip()),e.clipBounds!==e.constructor.ClipBounds.None&&(r=this.frameForClipBounds(e,o),s=new i,s.moveTo(r.origin.x,r.origin.y),s.rightBy(r.size.width),s.downBy(r.size.height),s.leftBy(r.size.width),s.upBy(r.size.height),this.drawPath_(s,_),_.clip()),(a=e.dropShadow())&&this.drawDropShadow_(e,a,y),(c=e.outerGlow())&&this.drawOuterGlow_(e,c,y),d=e.stroke(),d&&d.position===n.Position.Outside&&this.drawOuterStroke_(e,d,y),e.color()&&(h=this.isFillTransparent(e),this.fillWithColor_(e,e.color(),y,h)),e.gradient()&&(h=this.isFillTransparent(e)&&!e.colorOverlay(),this.fillWithGradient_(e,e.gradient(),y,h)),e.colorOverlay()&&(h=this.isFillTransparent(e),this.fillWithColor_(e,e.colorOverlay(),y,h)),(l=e.innerGlow())&&this.drawInnerGlow_(e,l,y),(u=e.innerShadow())&&this.drawInnerShadow_(e,u,y),v=e.masks(),g=0,f=v.length;f>g;g++)p=v[g],p.presentationPath()&&(_.globalCompositeOperation="destination-out",p.color()&&this.fillWithColor_(p,p.color(),y,h),p.gradient()&&this.fillWithGradient_(p,p.gradient(),y,h),_.globalCompositeOperation="lighter");return m=this._element_.getContext("2d"),m.drawImage(y,0,0),_.restore()},r.prototype.drawOuterStroke_=function(e,t,i){var n,o;return n=e.presentationPath(),o=i.getContext("2d"),o.save(),o.strokeStyle=t.color.rgba(),this.drawPath_(n,o),o.lineWidth=2*t.width,o.lineJoin="round",o.stroke(),o.restore()},r.prototype.fillWithGradient_=function(e,t,i,n){var o,r,s;return null==n&&(n=!1),o=e.presentationPath(),r=i.getContext("2d"),s=this.canvasGradient_(t,o,r),r.save(),n&&(r.globalCompositeOperation="destination-out",r.fillStyle="black",this.drawPath_(o,r),r.fill(),r.globalCompositeOperation="lighter"),r.fillStyle=s,this.drawPath_(o,r),r.fill(),r.restore()},r.prototype.fillWithColor_=function(e,t,i,n){var o,r;return null==n&&(n=!1),o=e.presentationPath(),r=i.getContext("2d"),r.save(),n&&(r.globalCompositeOperation="destination-out",r.fillStyle="black",this.drawPath_(o,r),r.fill(),r.globalCompositeOperation="lighter"),r.fillStyle=t.rgba(),this.drawPath_(o,r),r.fill(),r.restore()},r.prototype.drawOuterGlow_=function(e,i,n){var o,r,s,a,l,u,h,p,c,d,_,y,g,f;if(l=e.presentationPath(),_=n.getContext("2d"),_.save(),_.lineJoin="round",i.offset.isZero()||_.translate(i.offset.x,i.offset.y),0!==i.size){for(s=Math.max(i.size-1,1),f=t.create("canvas"),f.width=this._element_.width,f.height=this._element_.height,g=f.getContext("2d"),h=s,p=i.spread,d=2+10*p,this.drawPath_(l,g),g.shadowBlur=.95*s,o=i.color,r=parseInt(d),c=y=1;r>=1?r>=y:y>=r;c=r>=1?++y:--y)u=o.rgba(),g.shadowColor=u,g.fillStyle=u,g.fill();a=d-r,a>.1&&(u=o.rgbaWithAlpha(o.alpha*a),g.shadowColor=u,g.fillStyle=u,g.fill()),_.drawImage(f,0,0)}return i.offset.isZero()||_.translate(-i.offset.x,-i.offset.y),_.restore()},r.prototype.drawDropShadow_=function(e,i,n){var r,s,a,l,u,h,p,c,d,_,y,g,f,m;if(u=e.presentationPath(),y=n.getContext("2d"),y.save(),y.lineJoin="round",i.size>1&&(i.offset=o.zero()),i.offset.isZero()||y.translate(i.offset.x,i.offset.y),0!==i.size){for(s=Math.max(i.size-1,1),m=t.create("canvas"),m.width=this._element_.width,m.height=this._element_.height,f=m.getContext("2d"),p=s,c=i.spread,_=1+4.5*c,this.drawPath_(u,f),f.shadowBlur=s,r=i.color,a=parseInt(_),d=g=1;a>=1?a>=g:g>=a;d=a>=1?++g:--g)h=r.rgba(),f.shadowColor=h,f.fillStyle=h,f.fill();l=_-a,l>.1&&(h=r.rgbaWithAlpha(r.alpha*l),f.shadowColor=h,f.fillStyle=h,f.fill()),y.drawImage(m,0,0)}return i.offset.isZero()||y.translate(-i.offset.x,-i.offset.y),y.restore()},r.prototype.drawInnerGlow_=function(e,i,n){var o,r,s,a,l,u,h,p,c,d,_,y,g,f;if(l=e.presentationPath(),_=n.getContext("2d"),_.save(),_.lineJoin="round",f=t.create("canvas"),f.width=this._element_.width,f.height=this._element_.height,g=f.getContext("2d"),o=i.color,1===i.size)this.drawPath_(l,g),g.clip(),this.drawPath_(l,g),g.fillStyle=o.rgbaWithAlpha(.95*o.alpha),g.fill(),i.offset.isZero()||g.translate(i.offset.x,i.offset.y),g.globalCompositeOperation="destination-out",this.drawPath_(l,g),g.fillStyle="black",g.fill(),g.globalCompositeOperation="source-over",this.drawPath_(l,g),g.strokeStyle=o.rgbaWithAlpha(.5*o.alpha),g.lineWidth=2,g.lineJoin="round",g.stroke(),i.offset.isZero()||g.translate(-i.offset.x,-i.offset.y);else if(i.size>1){for(s=Math.max(i.size-1,1),h=s,p=i.spread,d=2+9*p,this.drawPath_(l,g),g.clip(),i.offset.isZero()||g.translate(i.offset.x,i.offset.y),g.beginPath(),g.moveTo(0,0),g.lineTo(0,f.height),g.lineTo(f.width,f.height),g.lineTo(f.width,0),g.lineTo(0,0),this.drawPath_(l,g,!1),g.shadowBlur=Math.max(1.3,.95*s),o=i.color,r=parseInt(d),c=y=1;r>=1?r>=y:y>=r;c=r>=1?++y:--y)u=o.rgba(),g.shadowColor=u,g.fillStyle=u,g.fill();a=d-r,a>.1&&(u=o.rgbaWithAlpha(o.alpha*a),g.shadowBlur=Math.max(1.3,.95*s),g.fillStyle=u,g.fill()),i.offset.isZero()||g.translate(-i.offset.x,-i.offset.y)}else this.drawPath_(l,g),g.fillStyle=i.color.rgba(),g.fill(),i.offset.isZero()||g.translate(i.offset.x,i.offset.y),g.globalCompositeOperation="destination-out",this.drawPath_(l,g),g.fillStyle="black",g.fill(),i.offset.isZero()||g.translate(-i.offset.x,-i.offset.y);return _.drawImage(f,0,0),_.restore()},r.prototype.drawInnerShadow_=function(e,i,n){var r,s,a,l,u,h,p,c,d,_,y,g,f,m;if(u=e.presentationPath(),y=n.getContext("2d"),y.save(),y.lineJoin="round",i.size>1&&(i.offset=o.zero()),m=t.create("canvas"),m.width=this._element_.width,m.height=this._element_.height,f=m.getContext("2d"),r=i.color,1===i.size)this.drawPath_(u,f),f.clip(),this.drawPath_(u,f),f.fillStyle=r.rgbaWithAlpha(.95*r.alpha),f.fill(),i.offset.isZero()||f.translate(i.offset.x,i.offset.y),f.globalCompositeOperation="destination-out",this.drawPath_(u,f),f.fillStyle="black",f.fill(),f.globalCompositeOperation="source-over",this.drawPath_(u,f),f.strokeStyle=r.rgbaWithAlpha(.5*r.alpha),f.lineWidth=2,f.lineJoin="round",f.stroke(),i.offset.isZero()||f.translate(-i.offset.x,-i.offset.y);else if(i.size>1){for(a=Math.max(i.size-1,1),p=a,c=i.spread,_=1+4.5*c,this.drawPath_(u,f),f.clip(),i.offset.isZero()||f.translate(i.offset.x,i.offset.y),f.beginPath(),f.moveTo(0,0),f.lineTo(0,m.height),f.lineTo(m.width,m.height),f.lineTo(m.width,0),f.lineTo(0,0),this.drawPath_(u,f,!1),f.shadowBlur=a,r=i.color,s=parseInt(_),d=g=1;s>=1?s>=g:g>=s;d=s>=1?++g:--g)h=r.rgba(),f.shadowColor=h,f.fillStyle=h,f.fill();l=_-s,l>.1&&(h=r.rgbaWithAlpha(r.alpha*l),f.shadowColor=h,f.fillStyle=h,f.fill()),i.offset.isZero()||f.translate(-i.offset.x,-i.offset.y)}else this.drawPath_(u,f),f.fillStyle=i.color.rgba(),f.fill(),i.offset.isZero()||f.translate(i.offset.x,i.offset.y),f.globalCompositeOperation="destination-out",this.drawPath_(u,f),f.fillStyle="black",f.fill(),i.offset.isZero()||f.translate(-i.offset.x,-i.offset.y);return y.drawImage(m,0,0),y.restore()},r.prototype.drawPath_=function(e,t,i,n){var o,r,s,a,l,u,h,p,c;if(null==i&&(i=!0),null==n&&(n=!0),i&&t.beginPath(),e.components().length>0){for(r=s=0,h=e.numberOfSubpaths()-1;h>=0?h>=s:s>=h;r=h>=0?++s:--s)this.drawSubPathAtId_(t,e,r);for(p=e.clippaths(),a=0,u=p.length;u>a;a++)for(o=p[a],r=l=0,c=o.numberOfSubpaths()-1;c>=0?c>=l:l>=c;r=c>=0?++l:--l)this.drawSubPathAtId_(t,o,r);if(n&&e.isClosedSubpathAtIndex(e.numberOfSubpaths()-1))return t.closePath()}},r.prototype.drawSubPathAtId_=function(e,t,i){var n,o,r,s,a,l,u,h,p,c,d;for(c=t.componentsForSubpathAtIndex(i),d=[],a=h=0,p=c.length;p>h;a=++h)s=c[a],s&&(0===a&&(u=s.startPoint,e.moveTo(u.x,u.y)),s.isLine?(u=s.endPoint,d.push(e.lineTo(u.x,u.y))):s.isArc?(r=s.center,d.push(e.arc(r.x,r.y,s.radius,s.startAngle,s.endAngle,s.counterclockwise))):(n=s.controlPoint1,o=s.controlPoint2,l=s.endPoint,d.push(e.bezierCurveTo(n.x,n.y,o.x,o.y,l.x,l.y))));return d},r.prototype.canvasGradient_=function(e,t,i){var n,o,r,s,a,l,u;r=e.points(t.minPoint(),t.maxPoint()),s=r.startPoint,o=r.endPoint,l=i.createLinearGradient(s.x,s.y,o.x,o.y),u=e.colors;for(a in u)n=u[a],l.addColorStop(a,n.rgba());return l},r}(e),a.exports=r,a.exports||s});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("graphics/canvas_layer",["graphics/abstract_layer","graphics/canvas_context","core/dom"],function(e,t,i){var n,o,r;return r={},o={},n=function(e){function n(){n.__super__.constructor.apply(this,arguments)}return __extends(n,e),n.className="CanvasLayer",n.prototype.initElement_=function(){return this._element_=i.create("canvas")},n.prototype.context=function(){return this.context_||(this.context_=new t(this._element_)),this.context_},n}(e),r.exports=n,r.exports||o}),sublime_.define("graphics/color",["core/util"],function(e){var t,i,n,o;return o=e._,n={},i={},t=function(){function e(e){o.isString(e)?this.parse_(e):(this.red=e.red,this.green=e.green,this.blue=e.blue,this.alpha=e.alpha||1)}return e.className="Color",e.prototype.rgba=function(){return"rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")"},e.prototype.rgb=function(){return"rgb("+this.red+","+this.green+","+this.blue+")"},e.prototype.rgbaWithAlpha=function(e){return"rgba("+this.red+", "+this.green+", "+this.blue+", "+e+")"},e.prototype.colorWithAlpha=function(t){return new e(this.rgbaWithAlpha(t))},e.prototype.colorWithDeltaLightness=function(t){var i,n,o;return n=this.rgbToHsl(this.red,this.green,this.blue),i=n.l,n.l+=.01*t,o=this.hslToRgb(n.h,n.s,n.l),new e({red:o.r,green:o.g,blue:o.b,alpha:this.alpha})},e.prototype.hslToRgb=function(e,t,i){var n,o,r,s,a,l;return l=void 0,o=void 0,n=void 0,0===t?l=o=n=i:(r=function(e,t,i){return 0>i&&(i+=1),i>1&&(i-=1),1/6>i?e+6*(t-e)*i:.5>i?t:2/3>i?e+6*(t-e)*(2/3-i):e},a=.5>i?i*(1+t):i+t-i*t,s=2*i-a,l=r(s,a,e+1/3),o=r(s,a,e),n=r(s,a,e-1/3)),{r:Math.round(255*l),g:Math.round(255*o),b:Math.round(255*n)}},e.prototype.rgbToHsl=function(e,t,i){var n,o,r,s,a,l;if(e/=255,t/=255,i/=255,s=Math.max(e,t,i),a=Math.min(e,t,i),o=void 0,l=void 0,r=(s+a)/2,s===a)o=l=0;else{switch(n=s-a,l=r>.5?n/(2-s-a):n/(s+a),s){case e:o=(t-i)/n+(i>t?6:0);break;case t:o=(i-e)/n+2;break;case i:o=(e-t)/n+4}o/=6}return{h:o,s:l,l:r}},e.Colors={black:"#000",gray:"#888",white:"#fff",red:"#ff0",green:"#00ff00",blue:"#000ff"},e.prototype.parse_=function(t){var i,n,r;if(i=e.Colors[t],o.isDef(i)&&(t=i),r=null,r=t.match(/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d*)\s*\)/))return this.red=parseInt(r[1]),this.green=parseInt(r[2]),this.blue=parseInt(r[3]),this.alpha=parseFloat(r[4]);if(r=t.match(/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*/))return this.red=parseInt(r[1]),this.green=parseInt(r[2]),this.blue=parseInt(r[3]),this.alpha=1;if(r=t.match(/#([0-9A-F]{3,6})/i)){for(i=r[1],n=i.charAt(i.length-1);6>i.length;)i+=n;return this.red=parseInt(i.substring(0,2),16),this.green=parseInt(i.substring(2,4),16),this.blue=parseInt(i.substring(4,6),16),this.alpha=1}},e}(),n.exports=t,n.exports||i}),sublime_.define("graphics/context",["core/util"],function(e){var t,i,n,o,r,s;return s=e._,r={},o={},n={None:0,Canvas:1,SVG:2,Flash:3},t={Center:0,Resize:1},i=n.None,s.mobile?i=s.Silk?n.Canvas:s.iOS&&s.compareVersions(s.OSVersion,"4")>=0||s.WindowsPhone&&s.compareVersions(s.OSVersion,"7.5")>=0?n.SVG:s.Android&&(s.compareVersions(s.OSVersion,"3")>=0||s.Firefox)?s.Chrome?n.SVG:n.Canvas:n.None:s.IE?s.ltIE9?s.supportedFlashVersion&&(i=n.Flash):i=s.IE9?n.Canvas:n.SVG:i=s.Firefox&&0>s.compareVersions(s.version,"2.0")||s.Chrome&&0>s.compareVersions(s.version,"535.2")||s.Opera&&0>s.compareVersions(s.version,"11.64")||s.Safari&&0>s.compareVersions(s.version,"534.50")?n.Canvas:n.SVG,o.GraphicsTecnology=n,o.ContentGravity=t,o.CurrentGraphicsTechnology=i,r.exports||o});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("graphics/flash_context",["graphics/abstract_context","core/util","core/dom"],function(e,t,i){var n,o,r,s;return s=t._,r={},o={},n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.className="FlashContext",t.prototype.clear=function(){return this.cachedDrawCommands_=[],null!=this._flashObject_?i.addClass(this._flashObject_,"sublimevideo-hide-iefix"):void 0},t.prototype.clearCurrentDrawing=function(){return this.cachedDrawCommands_=[],this._flashObject_&&this._flashObject_.draw?this._flashObject_.draw(""):void 0},t.prototype.setFlashObject=function(e){return this._flashObject_=e,this.drawCachedCommands_()},t.prototype.drawCachedCommands_=function(){return setTimeout(s.bind(this,function(){var e;return this.cachedDrawCommands_&&this.cachedDrawCommands_.length>0?(e=this.cachedDrawCommands_,this.cachedDrawCommands_=[],this.executeDrawCommands_(e)):void 0}),0)},t.prototype.internalDraw_=function(e){var t;return t=this.drawCommandForLayer_(e),this.cachedDrawCommands_.push(t),this._flashObject_?this.drawCachedCommands_():void 0},t.prototype.executeDrawCommands_=function(e){return this._flashObject_&&this._flashObject_.draw?this._flashObject_.draw(e.join("|")):void 0},t.prototype.pathCommands_=function(e){var t,i,n,o,r,s,a,l,u,h,p,c,d,_,y,g;for(n=[],a=1,p=c=0,y=e.numberOfSubpaths()-1;y>=0?y>=c:c>=y;p=y>=0?++c:--c)for(g=e.componentsForSubpathAtIndex(p),r=d=0,_=g.length;_>d;r=++d)o=g[r],0===r&&(h=o.startPoint,n.push("M"+h.x.toFixed(a)+" "+h.y.toFixed(a))),o.isLine?(h=o.endPoint,n.push("L"+h.x.toFixed(a)+" "+h.y.toFixed(a))):o.isArc?(s=o.controlPoint,u=o.endPoint,n.push("A"+s.x.toFixed(a)+" "+s.y.toFixed(a)+" "+u.x.toFixed(a)+" "+u.y.toFixed(a)+" "+o.radius.toFixed(a))):(t=o.controlPoint1,i=o.controlPoint2,l=o.endPoint,n.push("C"+t.x.toFixed(a)+" "+t.y.toFixed(a)+" "+i.x.toFixed(a)+" "+i.y.toFixed(a)+" "+l.x.toFixed(a)+" "+l.y.toFixed(a)));return n},t.prototype.drawCommandForLayer_=function(e){var t,i,n,o,r,s,a,l,u,h,p,c,d,_,y,g,f,m,v,w,b,T,x;if(c=e.presentationPath()){for(o=1,n=[],n=n.concat(this.pathCommands_(c)),b=c.clippaths(),f=0,v=b.length;v>f;f++)t=b[f],n=n.concat(this.pathCommands_(t));if((r=e.dropShadow())&&(i=r.color,n.push("d"+r.angle+" "+r.distance+" "+r.size+" "+r.spread+" "+i.red+" "+i.green+" "+i.blue+" "+i.alpha)),(p=e.outerGlow())&&(i=p.color,n.push("o"+p.size+" "+p.spread+" "+i.red+" "+i.green+" "+i.blue+" "+i.alpha)),(i=e.color())&&n.push("c"+i.red+" "+i.green+" "+i.blue+" "+i.alpha),a=e.gradient()){d=a.points(c.minPoint(),c.maxPoint()),_=d.startPoint,s=d.endPoint,n.push("g"+_.x.toFixed(o)+" "+_.y.toFixed(o)+" "+s.x.toFixed(o)+" "+s.y.toFixed(o)),T=a.colors;for(g in T)i=T[g],n.push(" "+g+" "+i.red+" "+i.green+" "+i.blue+" "+i.alpha)}for((i=e.colorOverlay())&&n.push("l"+i.red+" "+i.green+" "+i.blue+" "+i.alpha),(y=e.stroke())&&(i=y.color,n.push("s"+y.width+" "+i.red+" "+i.green+" "+i.blue+" "+i.alpha)),(l=e.innerGlow())&&(i=l.color,n.push("n"+l.size+" "+l.spread+" "+i.red+" "+i.green+" "+i.blue+" "+i.alpha)),(u=e.innerShadow())&&(i=u.color,n.push("i"+u.angle+" "+u.distance+" "+u.size+" "+u.spread+" "+i.red+" "+i.green+" "+i.blue+" "+i.alpha)),n.push("$"),(c=e.presentationClippath())&&(n=n.concat(this.pathCommands_(c))),n.push("@"),x=e.masks(),m=0,w=x.length;w>m;m++)h=x[m],n=n.concat(this.drawCommandForLayer_(h)),n.push("@");return n.join("")}},t}(e),r.exports=n,r.exports||o});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("graphics/flash_layer",["graphics/abstract_layer","graphics/flash_context","core/util","core/dom","core/exporter"],function(e,t,i,n,o){var r,s,a,l;return l=i._,a={},s={},r=function(e){function i(){i.__super__.constructor.apply(this,arguments)}return __extends(i,e),i.className="FlashLayer",i.flashSource=function(){var e;return e=0>l.compareVersions(l.flashVersion,"11")?"svfg10":"svfg",l.HOST+("/c/sa/2.6.5/"+e+".swf")},i.flashObjects={},i.didLoad=function(e){var t;return t=i.flashObjects[e],t?t.flashObjectDidLoad():void 0},i.prototype.initElement_=function(){return this._element_=n.create("span")},i.prototype.removeFromParent=function(){var e=this;return this.needsDisplay_=!1,this.context().clear(),setTimeout(function(){return n.removeNode(e._element_)},500)},i.prototype.appendToElement=function(){return i.__super__.appendToElement.apply(this,arguments),this.flashId_=n.setFlashObject(this._element_,i.flashSource(),"uid"),i.flashObjects[this.flashId_]=this},i.prototype.context=function(){return this.context_||(this.context_=new t(this._element_)),this.context_},i.prototype.flashObjectDidLoad=function(){return this.context().setFlashObject(this._element_.firstChild)},i}(e),o("sublime_.fg.didLoad",r,r.didLoad),a.exports=r,a.exports||s}),sublime_.define("graphics/geometry",["graphics/vector","core/util","graphics/point"],function(e,t,i){var n,o,r,s;return s=t._,r={},o={},n=function(){function t(){}var n;return t.className="Geometry",t.a_=function(e,t){var i,n,o,r;return i=s.round(e.x,8),o=s.round(t.x,8),n=s.round(e.y,8),r=s.round(t.y,8),(r-n)/(o-i)},t.b_=function(e,t){return e.y-t*e.x},t.toRadians=function(e){return e*Math.PI/180},t.toDegrees=function(e){return 180*e/Math.PI},t.rotate=function(t,i,n){var o;return o=e.forPoints(i,t),o.rotate(n),i.sum(o.endPoint())},t.c_=function(e){return e%=360,0>360*e?e+360:e},t.linearEquationForPoints=function(e,i){var n,o;return n=t.a_(e,i),isFinite(n)?o={a:n,b:t.b_(e,n)}:{x:e.x}},t.linearEquationIntersection=function(e,t){var n,o;return s.isDef(e.x)||s.isDef(t.x)?s.isDef(e.x)&&!s.isDef(t.x)?new i(e.x,t.a*e.x+t.b):!s.isDef(e.x)&&s.isDef(t.x)?new i(t.x,e.a*t.x+e.b):null:(n=(t.b-e.b)/(e.a-t.a),o=s.round2(e.a*n+e.b),new i(n,o))},t.angleBetweenLines=function(e,t){var i,n;return i=Math.atan2(e.startPoint.y-e.endPoint.y,e.startPoint.x-e.endPoint.x),n=Math.atan2(t.startPoint.y-t.endPoint.y,t.startPoint.x-t.endPoint.x),i-n},n=function(e){var t;return t=2*Math.PI,e%=t,0>t*e?e+t:e},t.angleBetweenPoints=function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)},t.windingNumber=function(e,i){var n,o,r,s,a,l,u;for(a=0,n=e.length,o=l=0,u=e.length;u>l;o=++l)s=e[o],r=e[(o+1)%n],s.y<=i.y?r.y>i.y&&t.isLeft_(s,r,i)>0&&a++:r.y<=i.y&&0>t.isLeft_(s,r,i)&&a--;return a},t.isLeft_=function(e,t,i){return(t.x-e.x)*(i.y-e.y)-(i.x-e.x)*(t.y-e.y)},t}(),r.exports=n,r.exports||o}),sublime_.define("graphics/gradient",["graphics/color","graphics/point","graphics/geometry","graphics/line"],function(e,t,i,n){var o,r,s;return s={},r={},o=function(){function o(t){var i,n,o;if(this.colors={},t.colors){o=t.colors;for(n in o)i=o[n],n=parseFloat(n),this.colors[n]=i instanceof e?i:new e(i)}for(this.scale=null!=t.scale?t.scale:1,this.style="linear",this.angle=null!=t.angle?t.angle:90;this.angle>360;)this.angle-=360;for(;0>this.angle;)this.angle+=360}return o.className="Gradient",o.prototype.points=function(e,o){var r,s,a,l,u,h,p,c,d,_,y,g,f,m;return l=e.sum(o.difference(e).multiply(.5)),0===this.angle?{startPoint:new t(e.x,l.y),endPoint:new t(o.x,l.y)}:180===this.angle?{startPoint:new t(o.x,l.y),endPoint:new t(e.x,l.y)}:90===this.angle?{startPoint:new t(l.x,o.y),endPoint:new t(l.x,e.y)}:270===this.angle?{startPoint:new t(l.x,e.y),endPoint:new t(l.x,o.y)}:(a=90-this.angle,d=new t(l.x,e.y-5e3),_=new t(l.x,o.y+5e3),p=function(e){return e*Math.PI/180},r=p(a),s=p(a+180),y=i.rotate(d,l,r),g=i.rotate(d,l,s),c=new n(y,g),this.angle>0&&90>this.angle||this.angle>180&&270>this.angle?(u=new t(o.x,e.y),h=new t(e.x,o.y)):(u=new t(e.x,e.y),h=new t(o.x,o.y)),f=c.orthogonalProjection(u),m=c.orthogonalProjection(h),this.angle>180?{startPoint:f,endPoint:m}:{startPoint:m,endPoint:f})},o}(),s.exports=o,s.exports||r}),sublime_.define("graphics/layer",["graphics/abstract_layer","graphics/svg_layer","graphics/canvas_layer","graphics/flash_layer","graphics/context"],function(e,t,i,n,o){var r,s,a,l,u;return r=o.CurrentGraphicsTechnology,s=o.GraphicsTecnology,u={},l={},a=function(){function o(){}return o.className="Layer",o.ClipBounds=e.ClipBounds,o.layer=function(e,o){var a;switch(r){case s.Canvas:a=new i;break;case s.SVG:a=new t;break;case s.Flash:a=new n;break;default:a=new t}return e&&a.setPath(e),o&&a.setGroupStyle(o),a},o}(),u.exports=a,u.exports||l});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("graphics/layer_style",["core/event_emitter","graphics/color","graphics/gradient","graphics/shadow","graphics/stroke"],function(e,t,i,n,o){var r,s,a,l;return r=e.EventEmitter,l={},a={},s=function(e){function r(e){null==e&&(e={}),r.__super__.constructor.apply(this,arguments),this.colorOverlay_=null,this.gradient_=null,e.colorOverlay&&this.setColorOverlay_(e.colorOverlay),e.stroke&&this.setStroke_(e.stroke),e.gradient&&this.setGradient_(e.gradient),e.outerGlow&&this.setOuterGlow_(e.outerGlow),e.dropShadow&&this.setDropShadow_(e.dropShadow),e.innerShadow&&this.setInnerShadow_(e.innerShadow),e.innerGlow&&this.setInnerGlow_(e.innerGlow),e.color&&this.setColor_(e.color),this.changesNotificationEnabled_=!1||e.enableChangesNotification}return __extends(r,e),r.className="LayerStyle",r.prototype.innerGlow=function(){return this.innerGlow_},r.prototype.outerGlow=function(){return this.outerGlow_},r.prototype.color=function(){return this.color_},r.prototype.colorOverlay=function(){return this.colorOverlay_},r.prototype.gradient=function(){return this.gradient_},r.prototype.innerShadow=function(){return this.innerShadow_},r.prototype.dropShadow=function(){return this.dropShadow_},r.prototype.stroke=function(){return this.stroke_},r.prototype.emitChange_=function(){return this.changesNotificationEnabled_?this.emit({didUpdateStyle:null}):void 0},r.prototype.setColor=function(e){return this.setColor_(e),this.emitChange_()},r.prototype.setColor_=function(e){return this.color_=e?e instanceof t?e:new t(e):null},r.prototype.setColorOverlay=function(e){return this.setColorOverlay_(e),this.emitChange_()},r.prototype.setColorOverlay_=function(e){return this.colorOverlay_=e?e instanceof t?e:new t(e):null},r.prototype.setGradient=function(e){return this.setGradient_(e),this.emitChange_()},r.prototype.setGradient_=function(e){return this.gradient_=e?new i(e):null},r.prototype.setInnerGlow=function(e){return this.setInnerGlow_(e),this.emitChange_()},r.prototype.setInnerGlow_=function(e){return this.innerGlow_=new n(e),this.innerGlow_.spread+=this.shadowToGlowSpreadIncreaseFactor_(this.innerGlow_.spread)},r.prototype.setOuterGlow=function(e){return this.setOuterGlow_(e),this.emitChange_()},r.prototype.setOuterGlow_=function(e){return e&&null!=e.size&&e.size>0?(this.outerGlow_=new n(e),this.outerGlow_.spread+=this.shadowToGlowSpreadIncreaseFactor_(this.outerGlow_.spread)):this.outerGlow_=null},r.prototype.setStroke=function(e){return this.setStroke_(e),this.emitChange_()},r.prototype.setStroke_=function(e){var t;return t=new o(e),this.stroke_=t.width>0?t:null},r.prototype.setDropShadow=function(e){return this.setDropShadow_(e),this.emitChange_()},r.prototype.setDropShadow_=function(e){var t;return t=new n(e),this.dropShadow_=t.distance>0||t.size>0?t:null},r.prototype.setInnerShadow=function(e){return this.setInnerShadow_(e),this.emitChange_()},r.prototype.setInnerShadow_=function(e){return this.innerShadow_=new n(e)},r.prototype.shadowToGlowSpreadIncreaseFactor_=function(e){return Math.max(-.5*e+.35,0)},r}(r),l.exports=s,l.exports||a});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("graphics/line",["graphics/path_component","graphics/vector","graphics/vertex","graphics/geometry","graphics/point"],function(e,t,i,n,o){var r,s,a;return a={},s={},r=function(e){function r(){r.__super__.constructor.apply(this,arguments),this.isLine=!0}return __extends(r,e),r.className="Line",r.prototype.toString=function(){return"L"+r.__super__.toString.apply(this,arguments)},r.prototype.translateBy=function(e,t){var i,n,o,r,s;for(r=[this.startPoint,this.endPoint],s=[],n=0,o=r.length;o>n;n++)i=r[n],i.x+=e,s.push(i.y+=t);return s},r.prototype.rotate=function(e,t){var i,o,r,s,a;for(a=[this.startPoint,this.endPoint],r=0,s=a.length;s>r;r++)o=a[r],i=n.rotate(o,t,e),o.x=i.x,o.y=i.y;return this.boundingBox_=null},r.prototype.intersectionPoint=function(e){var t,i,n,r,s,a,l,u,h,p,c,d,_,y,g;return u=this.startPoint.x,d=this.startPoint.y,h=this.endPoint.x,_=this.endPoint.y,p=e.startPoint.x,y=e.startPoint.y,c=e.endPoint.x,g=e.endPoint.y,n=(u-h)*(y-g)-(d-_)*(p-c),0===n?null:(t=u*_-d*h,i=p*g-y*c,r=t*(p-c)-(u-h)*i,s=t*(y-g)-(d-_)*i,a=r/n,l=s/n,new o(a,l))},r.prototype.orthogonalProjection=function(e){var i,n,r;return r=t.forPoints(this.startPoint,e),n=t.forPoints(this.startPoint,this.endPoint),i=r.dotProduct(n)/n.dotProduct(n),new o(this.startPoint.x+n.x*i,this.startPoint.y+n.y*i)},r.prototype.offset=function(e){var t,i,n;return e=-e,t=this.direction(this.endPoint.x-this.startPoint.x,this.endPoint.y-this.startPoint.y),i=e*Math.cos(t+Math.PI/2),n=e*Math.sin(t+Math.PI/2),new r(new o(this.startPoint.x+i,this.startPoint.y+n),new o(this.endPoint.x+i,this.endPoint.y+n))},r.prototype.isCollinearTo=function(e){var i,n;return i=t.forPoints(this.startPoint,this.endPoint),n=t.forPoints(e.startPoint,e.endPoint),0===i.x&&0===n.x||0===i.y&&0===n.y||i.x/n.x===i.y/n.y},r.prototype.oppositeExtendStartPointBy=function(e){var i,n,o;return o=t.forPoints(this.startPoint,this.endPoint).perpendicular(),i=Math.sqrt(Math.pow(o.x,2)+Math.pow(o.y,2)),n=e/i,this.startPoint.x=this.startPoint.x+o.x*n,this.startPoint.y=this.startPoint.y+o.y*n},r.prototype.extendStartPointBy=function(e){var i,n,o;return o=t.forPoints(this.startPoint,this.endPoint),i=Math.sqrt(Math.pow(o.x,2)+Math.pow(o.y,2)),n=e/i,this.startPoint.x=this.startPoint.x+o.x*n,this.startPoint.y=this.startPoint.y+o.y*n},r.prototype.oppositeExtendEndPointBy=function(e){var i,n,o;return o=t.forPoints(this.startPoint,this.endPoint).perpendicular(),n=Math.sqrt(Math.pow(o.x,2)+Math.pow(o.y,2)),i=(n+e)/n,this.endPoint.x=this.startPoint.x+o.x*i,this.endPoint.y=this.startPoint.y+o.y*i},r.prototype.extendEndPointBy=function(e){var i,n,o;return o=t.forPoints(this.startPoint,this.endPoint),n=Math.sqrt(Math.pow(o.x,2)+Math.pow(o.y,2)),i=(n+e)/n,this.endPoint.x=this.startPoint.x+o.x*i,this.endPoint.y=this.startPoint.y+o.y*i},r.prototype.subComponent=function(e,t){return new r(e,t)},r.prototype.subComponentForAlphas=function(e,i){var n,s,a;return a=t.forPoints(this.startPoint,this.endPoint),s=new o(this.startPoint.x+a.x*e,this.startPoint.y+a.y*e),n=new o(this.startPoint.x+a.x*i,this.startPoint.y+a.y*i),new r(s,n)},r.prototype.vertexAtAlpha=function(e){var t,n,o;return t=this.endPoint.x-this.startPoint.x,n=this.endPoint.y-this.startPoint.y,o=new i(this.startPoint.x+t*e,this.startPoint.y+n*e),o.alpha=e,o},r}(e),a.exports=r,a.exports||s}),sublime_.define("graphics/path",["graphics/point","graphics/arc","graphics/line","core/util","graphics/geometry","graphics/bezier_curve","graphics/size","graphics/rect","graphics/vector","graphics/vertex"],function(e,t,i,n,o,r,s,a,l,u){var h,p,c,d;return d=n._,c={},p={},h=function(){function n(){this.cursor_=e.zero(),this.subpaths_=[[]],this.markers_=[],this.clippaths_=[]}return n.className="Path",n.Circle=function(e,t,i){var o;return o=new n,o.moveTo(e,t-i),o.arcTo(e+i,t-i,e+i,t,i),o.arcTo(e+i,t+i,e,t+i,i),o.arcTo(e-i,t+i,e-i,t,i),o.arcTo(e-i,t-i,e,t-i,i),o.closePath(),o},n.Rect=function(e,t,i,o,r){var s;return null==r&&(r=0),s=new n,s.cornerRadius=r,r>0?(s.moveTo(e+r,t),s.arcTo(e+i,t,e+i,t+o,r),s.arcTo(e+i,t+o,e,t+o,r),s.arcTo(e,t+o,e,t,r),s.arcTo(e,t,e+i,t,r)):(s.moveTo(e,t),s.rightBy(i),s.downBy(o),s.leftBy(i),s.upBy(o)),s.closePath(),s.isRect=!0,s},n.Triangle=function(e,t,i,o,r){var s,a,l;return null==r&&(r=0),s=new n,r>0?(a=new n,a.moveTo(e,t+r),l=a.arcTo(e,t,e+i,t+o/2,r),s.moveTo(l.x,l.y),s.arcTo(e+i,t+o/2,e,t+o,r),s.arcTo(e,t+o,e,t,r),s.arcTo(e,t,l.x,l.y,r)):(s.moveTo(e,t),s.lineBy(i,.5*o),s.lineBy(-i,.5*o),s.upBy(o)),s.closePath(),s},n.ObliqueArrow=function(e){var t;return t=new n,t.rightBy(5*e),t.lineBy(-2*e,2*e),t.lineBy(2*e,2*e),t.lineBy(-1*e,1*e),t.lineBy(-2*e,-2*e),t.lineBy(-2*e,2*e),t.closePath(),t},n.HelpIcon=function(e,t,i){var o,r;return null==e&&(e=0),null==t&&(t=0),null==i&&(i=14),o=i/14,r=new n,r.moveTo(e+10.348*o,t+5.582*o),r.curveTo(e+10.23*o,t+5.871*o,e+10.086*o,t+6.118*o,e+9.913*o,t+6.324*o),r.curveTo(e+9.74*o,t+6.529*o,e+9.549*o,t+6.704*o,e+9.34*o,t+6.849*o),r.curveTo(e+9.129*o,t+6.993*o,e+8.931*o,t+7.139*o,e+8.744*o,t+7.283*o),r.curveTo(e+8.557*o,t+7.428*o,e+8.392*o,t+7.593*o,e+8.247*o,t+7.78*o),r.curveTo(e+8.103*o,t+7.967*o,e+8.011*o,t+8.2*o,e+7.974*o,t+8.479*o),r.lineTo(e+7.974*o,t+9.012*o),r.lineTo(e+5.99*o,t+9.012*o),r.lineTo(e+5.99*o,t+8.382*o),r.curveTo(e+6.019*o,t+7.98*o,e+6.095*o,t+7.645*o,e+6.221*o,t+7.374*o),r.curveTo(e+6.347*o,t+7.104*o,e+6.494*o,t+6.872*o,e+6.663*o,t+6.681*o),r.curveTo(e+6.831*o,t+6.489*o,e+7.101*o,t+6.324*o,e+7.288*o,t+6.184*o),r.curveTo(e+7.475*o,t+6.044*o,e+7.647*o,t+5.904*o,e+7.806*o,t+5.764*o),r.curveTo(e+7.965*o,t+5.624*o,e+8.093*o,t+5.47*o,e+8.191*o,t+5.302*o),r.curveTo(e+8.289*o,t+5.134*o,e+8.334*o,t+4.924*o,e+8.324*o,t+4.672*o),r.curveTo(e+8.324*o,t+4.242*o,e+8.219*o,t+3.925*o,e+8.009*o,t+3.72*o),r.curveTo(e+7.799*o,t+3.515*o,e+7.507*o,t+3.412*o,e+7.134*o,t+3.412*o),r.curveTo(e+6.882*o,t+3.412*o,e+6.665*o,t+3.43*o,e+6.483*o,t+3.527*o),r.curveTo(e+6.301*o,t+3.626*o,e+6.152*o,t+3.787*o,e+6.035*o,t+3.951*o),r.curveTo(e+5.918*o,t+4.114*o,e+5.832*o,t+4.149*o,e+5.776*o,t+4.368*o),r.curveTo(e+5.72*o,t+4.588*o,e+5.692*o,t+4.761*o,e+5.692*o,t+5.013*o),r.lineTo(e+3.634*o,t+5.013*o),r.curveTo(e+3.643*o,t+4.509*o,e+3.729*o,t+4.109*o,e+3.893*o,t+3.689*o),r.curveTo(e+4.056*o,t+3.27*o,e+4.285*o,t+2.905*o,e+4.579*o,t+2.598*o),r.curveTo(e+4.873*o,t+2.29*o,e+5.228*o,t+2.144*o,e+5.643*o,t+1.971*o),r.curveTo(e+6.058*o,t+1.798*o,e+6.523*o,t+1.773*o,e+7.036*o,t+1.773*o),r.curveTo(e+7.699*o,t+1.773*o,e+8.251*o,t+1.865*o,e+8.695*o,t+2.047*o),r.curveTo(e+9.139*o,t+2.229*o,e+9.495*o,t+2.455*o,e+9.766*o,t+2.726*o),r.curveTo(e+10.037*o,t+2.997*o,e+10.23*o,t+3.288*o,e+10.348*o,t+3.601*o),r.curveTo(e+10.464*o,t+3.914*o,e+10.521*o,t+4.205*o,e+10.521*o,t+4.476*o),r.curveTo(e+10.521*o,t+4.924*o,e+10.464*o,t+5.293*o,e+10.348*o,t+5.582*o),r.moveTo(e+7.992*o,t+12.008*o),r.lineTo(e+6.013*o,t+12.008*o),r.lineTo(e+6.013*o,t+10.008*o),r.lineTo(e+7.992*o,t+10.008*o),r.lineTo(e+7.992*o,t+12.008*o),r.moveTo(e+7*o,t+0*o),r.curveTo(e+3.134*o,t+0*o,e+0*o,t+3.134*o,e+0*o,t+7*o),r.curveTo(e+0*o,t+10.866*o,e+3.134*o,t+14*o,e+7*o,t+14*o),r.curveTo(e+10.866*o,t+14*o,e+14*o,t+10.866*o,e+14*o,t+7*o),r.curveTo(e+14*o,t+3.134*o,e+10.866*o,t+0*o,e+7*o,t+0*o),r
},n.CrossIcon=function(e,t,i){var o,r;return null==i&&(i=10),o=i/10,r=new n,r.moveTo(e+9.999*o,t+8.457*o),r.lineTo(e+8.456*o,t+9.999*o),r.lineTo(e+4.999*o,t+6.543*o),r.lineTo(e+1.543*o,t+9.999*o),r.lineTo(e+0*o,t+8.457*o),r.lineTo(e+3.456*o,t+5*o),r.lineTo(e+0*o,t+1.543*o),r.lineTo(e+1.543*o,t+0*o),r.lineTo(e+4.999*o,t+3.457*o),r.lineTo(e+8.456*o,t+0*o),r.lineTo(e+9.999*o,t+1.543*o),r.lineTo(e+6.542*o,t+5*o),r.lineTo(e+9.999*o,t+8.457*o),r.lineTo(e+9.999*o,t+8.457*o),r},n.EmbedIcon=function(e,t,i){var o,r;return null==i&&(i=17),o=i/17,r=new n,r.moveTo(e+8.251*o,t+17*o),r.lineTo(e+0*o,t+8.5*o),r.lineTo(e+8.251*o,t+0*o),r.lineTo(e+11.064*o,t+2.897*o),r.lineTo(e+5.625*o,t+8.5*o),r.lineTo(e+11.064*o,t+14.102*o),r.lineTo(e+8.251*o,t+17*o),r.moveTo(e+17.75*o,t+17*o),r.lineTo(e+14.937*o,t+14.102*o),r.lineTo(e+20.376*o,t+8.5*o),r.lineTo(e+16.046*o,t+4.039*o),r.lineTo(e+14.938*o,t+2.897*o),r.lineTo(e+17.75*o,t+0*o),r.lineTo(e+18.858*o,t+1.142*o),r.lineTo(e+26.001*o,t+8.5*o),r.lineTo(e+17.75*o,t+17*o),r},n.FacebookLogo=function(e,t,i){var o,r;return null==i&&(i=163),o=i/163,r=new n,r.moveTo(e+50.5698*o,t+163*o),r.lineTo(e+16.8545*o,t+163*o),r.lineTo(e+16.8545*o,t+81.4971*o),r.lineTo(e+0*o,t+81.4971*o),r.lineTo(e+0*o,t+53.4043*o),r.lineTo(e+16.8545*o,t+53.4043*o),r.lineTo(e+16.8545*o,t+36.543*o),r.curveTo(e+16.8545*o,t+13.6294*o,e+26.3682*o,t+0*o,e+53.3901*o,t+0*o),r.lineTo(e+75.894*o,t+0*o),r.lineTo(e+75.894*o,t+28.0928*o),r.lineTo(e+61.8354*o,t+28.0928*o),r.curveTo(e+51.312*o,t+28.0928*o,e+50.6128*o,t+32.0195*o,e+50.6128*o,t+39.3442*o),r.lineTo(e+50.5698*o,t+53.4043*o),r.lineTo(e+76.0562*o,t+53.4043*o),r.lineTo(e+73.0737*o,t+81.4971*o),r.lineTo(e+50.5698*o,t+81.4971*o),r.lineTo(e+50.5698*o,t+163*o),r.closePath(),r},n.SharingIcon=function(e,t,i){var o,r;return null==i&&(i=50),o=i/50,r=new n,r.moveTo(e+33.975*o,t+15.323*o),r.curveTo(e+28.614*o,t+15.323*o,e+24.267*o,t+19.656*o,e+24.267*o,t+25*o),r.curveTo(e+24.267*o,t+30.344*o,e+28.614*o,t+34.677*o,e+33.975*o,t+34.677*o),r.curveTo(e+39.336*o,t+34.677*o,e+43.682*o,t+30.344*o,e+43.682*o,t+25*o),r.curveTo(e+43.682*o,t+19.656*o,e+39.336*o,t+15.323*o,e+33.975*o,t+15.323*o),r.moveTo(e+54.444*o,t+25.809*o),r.curveTo(e+51.013*o,t+25.809*o,e+50.477*o,t+29.03*o,e+50.477*o,t+29.03*o),r.curveTo(e+48.664*o,t+36.437*o,e+41.964*o,t+41.935*o,e+33.975*o,t+41.935*o),r.curveTo(e+30.529*o,t+41.935*o,e+27.323*o,t+40.911*o,e+24.644*o,t+39.152*o),r.curveTo(e+23.996*o,t+38.711*o,e+23.213*o,t+38.452*o,e+22.368*o,t+38.452*o),r.curveTo(e+20.134*o,t+38.452*o,e+18.324*o,t+40.259*o,e+18.324*o,t+42.485*o),r.curveTo(e+18.324*o,t+43.884*o,e+19.038*o,t+45.116*o,e+20.123*o,t+45.839*o),r.lineTo(e+20.122*o,t+45.84*o),r.curveTo(e+24.091*o,t+48.468*o,e+28.853*o,t+50*o,e+33.975*o,t+50*o),r.curveTo(e+44.69*o,t+50*o,e+53.834*o,t+43.298*o,e+57.423*o,t+33.871*o),r.lineTo(e+67.95*o,t+33.871*o),r.lineTo(e+67.95*o,t+25.807*o),r.lineTo(e+54.444*o,t+25.809*o),r.moveTo(e+33.975*o,t+8.065*o),r.curveTo(e+37.491*o,t+8.065*o,e+40.757*o,t+9.129*o,e+43.468*o,t+10.954*o),r.lineTo(e+43.47*o,t+10.95*o),r.curveTo(e+44.112*o,t+11.378*o,e+44.883*o,t+11.627*o,e+45.713*o,t+11.627*o),r.curveTo(e+47.946*o,t+11.627*o,e+49.757*o,t+9.821*o,e+49.757*o,t+7.595*o),r.curveTo(e+49.757*o,t+6.127*o,e+48.969*o,t+4.842*o,e+47.794*o,t+4.137*o),r.curveTo(e+43.83*o,t+1.523*o,e+39.082*o,t+0*o,e+33.975*o,t+0*o),r.curveTo(e+23.258*o,t+0*o,e+14.116*o,t+6.702*o,e+10.526*o,t+16.128*o),r.lineTo(e+0*o,t+16.128*o),r.lineTo(e+0*o,t+24.194*o),r.lineTo(e+13.576*o,t+24.194*o),r.curveTo(e+16.855*o,t+24.194*o,e+17.475*o,t+20.959*o,e+17.475*o,t+20.959*o),r.curveTo(e+19.293*o,t+13.557*o,e+25.991*o,t+8.065*o,e+33.975*o,t+8.065*o),r},n.SharingIconAlt=function(e,t,i){var o,r;return null==i&&(i=50),o=i/50,r=new n,r.moveTo(e+12.923*o,t+33.596*o),r.curveTo(e+12.923*o,t+33.596*o,e+16.564*o,t+24.86*o,e+30.491*o,t+23.206*o),r.curveTo(e+32.769*o,t+22.934*o,e+36.231*o,t+22.668*o,e+41.716*o,t+22.668*o),r.lineTo(e+41.716*o,t+33.594*o),r.lineTo(e+66.667*o,t+16.797*o),r.lineTo(e+41.707*o,t+0*o),r.lineTo(e+41.707*o,t+10.102*o),r.curveTo(e+41.707*o,t+10.102*o,e+12.923*o,t+12.311*o,e+12.923*o,t+33.596*o),r.moveTo(e+49.989*o,t+41.672*o),r.lineTo(e+8.331*o,t+41.672*o),r.lineTo(e+8.331*o,t+16.686*o),r.lineTo(e+13.829*o,t+16.686*o),r.curveTo(e+16.686*o,t+13.523*o,e+20.443*o,t+10.853*o,e+25.049*o,t+8.797*o),r.curveTo(e+25.396*o,t+8.643*o,e+25.743*o,t+8.5*o,e+26.091*o,t+8.356*o),r.lineTo(e+0*o,t+8.356*o),r.lineTo(e+0*o,t+50*o),r.lineTo(e+58.323*o,t+50*o),r.lineTo(e+58.323*o,t+29.11*o),r.lineTo(e+49.989*o,t+34.717*o),r.lineTo(e+49.989*o,t+41.672*o),r},n.PinterestLogo=function(e,t,i){var o,r;return null==i&&(i=76),o=i/76,r=new n,r.moveTo(e+38*o,t+0*o),r.curveTo(e+58.984*o,t+0*o,e+75.998*o,t+17.013*o,e+75.998*o,t+38*o),r.curveTo(e+75.998*o,t+58.987*o,e+58.984*o,t+76*o,e+38*o,t+76*o),r.curveTo(e+34.259*o,t+76*o,e+30.648*o,t+75.451*o,e+27.231*o,t+74.442*o),r.curveTo(e+28.673*o,t+72.159*o,e+30.25*o,t+69.232*o,e+31.055*o,t+66.302*o),r.curveTo(e+31.523*o,t+64.611*o,e+33.729*o,t+55.856*o,e+33.729*o,t+55.856*o),r.curveTo(e+35.05*o,t+58.374*o,e+38.91*o,t+60.592*o,e+43.012*o,t+60.592*o),r.curveTo(e+55.228*o,t+60.592*o,e+63.515*o,t+49.456*o,e+63.515*o,t+34.549*o),r.curveTo(e+63.515*o,t+23.28*o,e+53.967*o,t+12.781*o,e+39.459*o,t+12.781*o),r.curveTo(e+21.404*o,t+12.781*o,e+12.301*o,t+25.725*o,e+12.301*o,t+36.519*o),r.curveTo(e+12.301*o,t+43.055*o,e+14.774*o,t+48.869*o,e+20.083*o,t+51.036*o),r.curveTo(e+20.952*o,t+51.392*o,e+21.732*o,t+51.048*o,e+21.985*o,t+50.086*o),r.curveTo(e+22.159*o,t+49.418*o,e+22.577*o,t+47.735*o,e+22.759*o,t+47.036*o),r.curveTo(e+23.014*o,t+46.083*o,e+22.916*o,t+45.748*o,e+22.213*o,t+44.918*o),r.curveTo(e+20.684*o,t+43.11*o,e+19.708*o,t+40.775*o,e+19.708*o,t+37.465*o),r.curveTo(e+19.708*o,t+27.863*o,e+26.889*o,t+19.267*o,e+38.416*o,t+19.267*o),r.curveTo(e+48.618*o,t+19.267*o,e+54.228*o,t+25.501*o,e+54.228*o,t+33.829*o),r.curveTo(e+54.228*o,t+44.785*o,e+49.379*o,t+54.032*o,e+42.179*o,t+54.032*o),r.curveTo(e+38.202*o,t+54.032*o,e+35.229*o,t+50.745*o,e+36.181*o,t+46.714*o),r.curveTo(e+37.321*o,t+41.9*o,e+39.537*o,t+36.703*o,e+39.537*o,t+33.228*o),r.curveTo(e+39.537*o,t+30.119*o,e+37.867*o,t+27.523*o,e+34.411*o,t+27.523*o),r.curveTo(e+30.347*o,t+27.523*o,e+27.082*o,t+31.729*o,e+27.082*o,t+37.36*o),r.curveTo(e+27.082*o,t+40.947*o,e+28.297*o,t+43.372*o,e+28.297*o,t+43.372*o),r.curveTo(e+28.297*o,t+43.372*o,e+24.137*o,t+60.993*o,e+23.407*o,t+64.078*o),r.curveTo(e+22.726*o,t+66.965*o,e+22.639*o,t+70.15*o,e+22.746*o,t+72.804*o),r.curveTo(e+9.357*o,t+66.927*o,e+0*o,t+53.56*o,e+0*o,t+38*o),r.curveTo(e+0*o,t+17.013*o,e+17.015*o,t+0*o,e+38*o,t+0*o),r.lineTo(e+38*o,t+0*o),r},n.GooglePlusLogo=function(e,t,i){var o,r;return null==i&&(i=76),o=i/76,r=new n,r.moveTo(e+14.578*o,t+48.526*o),r.curveTo(e+14.578*o,t+46.643*o,e+15.131*o,t+45.533*o,e+15.682*o,t+44.202*o),r.curveTo(e+14.465*o,t+44.31*o,e+13.255*o,t+44.425*o,e+12.148*o,t+44.425*o),r.curveTo(e+7.139*o,t+44.425*o,e+3.026*o,t+42.516*o,e+0*o,t+40*o),r.lineTo(e+0*o,t+59.625*o),r.curveTo(e+5*o,t+55.625*o,e+13.67*o,t+56.343*o,e+17.89*o,t+56.058*o),r.curveTo(e+16.342*o,t+54.06*o,e+14.578*o,t+51.958*o,e+14.578*o,t+48.526*o),r.moveTo(e+25.116*o,t+37.227*o),r.curveTo(e+27.188*o,t+34.855*o,e+28*o,t+31.73*o,e+28*o,t+30.133*o),r.curveTo(e+28*o,t+22.154*o,e+23.375*o,t+9.746*o,e+14.217*o,t+9.746*o),r.curveTo(e+11.344*o,t+9.746*o,e+8.256*o,t+11.187*o,e+6.486*o,t+13.402*o),r.curveTo(e+4.609*o,t+15.73*o,e+4.32*o,t+18.717*o,e+4.32*o,t+21.604*o),r.curveTo(e+4.32*o,t+29.023*o,e+8.218*o,t+40*o,e+17.713*o,t+40*o),r.curveTo(e+20.471*o,t+40*o,e+23.3*o,t+39.298*o,e+25.116*o,t+37.227*o),r.moveTo(e+21.64*o,t+59.274*o),r.curveTo(e+20.76*o,t+59.16*o,e+20.207*o,t+59.16*o,e+19.109*o,t+59.16*o),r.curveTo(e+18.111*o,t+59.16*o,e+12.148*o,t+59.383*o,e+7.513*o,t+60.935*o),r.curveTo(e+5.918*o,t+61.519*o,e+2.278*o,t+62.903*o,e+0*o,t+66*o),r.lineTo(e+0*o,t+71.643*o),r.curveTo(e+0*o,t+75.509*o,e+3.134*o,t+76*o,e+7*o,t+76*o),r.lineTo(e+35.648*o,t+76*o),r.curveTo(e+35.813*o,t+75.438*o,e+36.123*o,t+75.097*o,e+36.111*o,t+74*o),r.curveTo(e+36.049*o,t+68.339*o,e+30.034*o,t+65.26*o,e+21.64*o,t+59.274*o),r.moveTo(e+76*o,t+20*o),r.lineTo(e+76*o,t+7*o),r.curveTo(e+76*o,t+2*o,e+72.866*o,t+0*o,e+69*o,t+0*o),r.lineTo(e+7*o,t+0*o),r.curveTo(e+3.134*o,t+0*o,e+0*o,t+2*o,e+0*o,t+7*o),r.lineTo(e+0*o,t+13*o),r.curveTo(e+.276*o,t+12.734*o,e+.596*o,t+12.44*o,e+.891*o,t+12.185*o),r.curveTo(e+7.184*o,t+6.977*o,e+14.088*o,t+6.107*o,e+19.877*o,t+6*o),r.lineTo(e+43.21*o,t+6*o),r.lineTo(e+37.012*o,t+11*o),r.curveTo(e+37.012*o,t+11*o,e+31.156*o,t+11*o,e+30.247*o,t+11*o),r.curveTo(e+32.957*o,t+13.35*o,e+37*o,t+17.552*o,e+37*o,t+25.035*o),r.curveTo(e+37*o,t+33.232*o,e+32.68*o,t+37.117*o,e+28.043*o,t+40.768*o),r.curveTo(e+26.608*o,t+42.205*o,e+24.953*o,t+43.76*o,e+24.953*o,t+46.201*o),r.curveTo(e+24.953*o,t+48.636*o,e+26.608*o,t+49.965*o,e+27.82*o,t+50.964*o),r.lineTo(e+31.8*o,t+54.06*o),r.curveTo(e+36.654*o,t+58.161*o,e+43*o,t+62.909*o,e+43*o,t+70.556*o),r.curveTo(e+43*o,t+72.605*o,e+42.777*o,t+74.444*o,e+42.111*o,t+76*o),r.lineTo(e+69*o,t+76*o),r.curveTo(e+72.866*o,t+76*o,e+76*o,t+75.509*o,e+76*o,t+71.643*o),r.lineTo(e+76*o,t+25.877*o),r.lineTo(e+62*o,t+25.877*o),r.lineTo(e+62*o,t+40*o),r.lineTo(e+56*o,t+40*o),r.lineTo(e+56*o,t+25.877*o),r.lineTo(e+42*o,t+25.877*o),r.lineTo(e+42*o,t+20*o),r.lineTo(e+56*o,t+20*o),r.lineTo(e+56*o,t+6*o),r.lineTo(e+62*o,t+6*o),r.lineTo(e+62*o,t+20*o),r.lineTo(e+76*o,t+20*o),r},n.LinkIcon=function(e,t,i){var o,r;return null==i&&(i=22),o=i/22,r=new n,r.moveTo(e+5.683*o,t+5.703*o),r.curveTo(e+5.136*o,t+6.249*o,e+5.136*o,t+7.134*o,e+5.682*o,t+7.681*o),r.lineTo(e+14.213*o,t+16.211*o),r.curveTo(e+14.76*o,t+16.758*o,e+15.646*o,t+16.759*o,e+16.191*o,t+16.212*o),r.curveTo(e+16.738*o,t+15.666*o,e+16.737*o,t+14.781*o,e+16.191*o,t+14.234*o),r.lineTo(e+7.66*o,t+5.703*o),r.curveTo(e+7.114*o,t+5.157*o,e+6.229*o,t+5.157*o,e+5.683*o,t+5.703*o),r.moveTo(e+22*o,t+13.863*o),r.lineTo(e+17.831*o,t+9.695*o),r.curveTo(e+16.443*o,t+8.308*o,e+14.239*o,t+8.244*o,e+12.773*o,t+9.498*o),r.lineTo(e+14.777*o,t+11.501*o),r.curveTo(e+15.126*o,t+11.327*o,e+15.561*o,t+11.38*o,e+15.853*o,t+11.672*o),r.lineTo(e+20.022*o,t+15.841*o),r.curveTo(e+20.386*o,t+16.205*o,e+20.386*o,t+16.796*o,e+20.022*o,t+17.159*o),r.lineTo(e+17.159*o,t+20.022*o),r.curveTo(e+16.796*o,t+20.386*o,e+16.203*o,t+20.386*o,e+15.841*o,t+20.022*o),r.lineTo(e+11.671*o,t+15.853*o),r.curveTo(e+11.387*o,t+15.57*o,e+11.328*o,t+15.149*o,e+11.487*o,t+14.804*o),r.lineTo(e+9.479*o,t+12.796*o),r.curveTo(e+8.243*o,t+14.26*o,e+8.314*o,t+16.451*o,e+9.694*o,t+17.831*o),r.lineTo(e+13.863*o,t+22*o),r.curveTo(e+15.318*o,t+23.457*o,e+17.68*o,t+23.457*o,e+19.136*o,t+22*o),r.lineTo(e+22*o,t+19.137*o),r.curveTo(e+23.456*o,t+17.681*o,e+23.456*o,t+15.32*o,e+22*o,t+13.863*o),r.moveTo(e+7.196*o,t+10.512*o),r.curveTo(e+6.851*o,t+10.671*o,e+6.43*o,t+10.612*o,e+6.147*o,t+10.328*o),r.lineTo(e+1.977*o,t+6.16*o),r.curveTo(e+1.614*o,t+5.795*o,e+1.614*o,t+5.204*o,e+1.977*o,t+4.841*o),r.lineTo(e+4.84*o,t+1.978*o),r.curveTo(e+5.204*o,t+1.615*o,e+5.795*o,t+1.615*o,e+6.159*o,t+1.978*o),r.lineTo(e+10.328*o,t+6.147*o),r.curveTo(e+10.619*o,t+6.438*o,e+10.673*o,t+6.873*o,e+10.499*o,t+7.222*o),r.lineTo(e+12.501*o,t+9.226*o),r.curveTo(e+13.756*o,t+7.761*o,e+13.692*o,t+5.556*o,e+12.306*o,t+4.17*o),r.lineTo(e+8.137*o,t+0*o),r.curveTo(e+6.68*o,t+-1.456*o,e+4.319*o,t+-1.456*o,e+2.863*o,t+0*o),r.lineTo(e+0*o,t+2.863*o),r.curveTo(e+-1.457*o,t+4.319*o,e+-1.457*o,t+6.68*o,e+0*o,t+8.137*o),r.lineTo(e+4.169*o,t+12.306*o),r.curveTo(e+5.548*o,t+13.686*o,e+7.739*o,t+13.756*o,e+9.205*o,t+12.521*o),r.lineTo(e+7.196*o,t+10.512*o),r},n.TwitterLogo=function(e,t,i){var o,r;return null==i&&(i=163),o=i/163,r=new n,r.moveTo(e+200*o,t+19.24*o),r.curveTo(e+194.499*o,t+27.469*o,e+187.543*o,t+34.695*o,e+179.525*o,t+40.481*o),r.curveTo(e+179.604*o,t+42.241*o,e+179.645*o,t+44.01*o,e+179.645*o,t+45.789*o),r.curveTo(e+179.645*o,t+100.012*o,e+138.372*o,t+162.536*o,e+62.899*o,t+162.536*o),r.curveTo(e+39.727*o,t+162.536*o,e+18.159*o,t+155.742*o,e+0*o,t+144.1*o),r.curveTo(e+3.21*o,t+144.479*o,e+6.476*o,t+144.674*o,e+9.788*o,t+144.674*o),r.curveTo(e+29.013*o,t+144.674*o,e+46.705*o,t+138.114*o,e+60.748*o,t+127.108*o),r.curveTo(e+42.792*o,t+126.778*o,e+27.639*o,t+114.914*o,e+22.418*o,t+98.613*o),r.curveTo(e+24.923*o,t+99.092*o,e+27.494*o,t+99.35*o,e+30.138*o,t+99.35*o),r.curveTo(e+33.88*o,t+99.35*o,e+37.505*o,t+98.848*o,e+40.948*o,t+97.91*o),r.curveTo(e+22.177*o,t+94.14*o,e+8.033*o,t+77.556*o,e+8.033*o,t+57.676*o),r.curveTo(e+8.033*o,t+57.502*o,e+8.033*o,t+57.331*o,e+8.037*o,t+57.16*o),r.curveTo(e+13.569*o,t+60.233*o,e+19.896*o,t+62.079*o,e+26.622*o,t+62.292*o),r.curveTo(e+15.612*o,t+54.934*o,e+8.368*o,t+42.374*o,e+8.368*o,t+28.139*o),r.curveTo(e+8.368*o,t+20.619*o,e+10.392*o,t+13.57*o,e+13.924*o,t+7.51*o),r.curveTo(e+34.161*o,t+32.335*o,e+64.396*o,t+48.671*o,e+98.498*o,t+50.382*o),r.curveTo(e+97.798*o,t+47.379*o,e+97.435*o,t+44.247*o,e+97.435*o,t+41.031*o),r.curveTo(e+97.435*o,t+18.371*o,e+115.808*o,t+0*o,e+138.468*o,t+0*o),r.curveTo(e+150.27*o,t+0*o,e+160.934*o,t+4.982*o,e+168.418*o,t+12.957*o),r.curveTo(e+177.765*o,t+11.117*o,e+186.546*o,t+7.703*o,e+194.475*o,t+3*o),r.curveTo(e+191.411*o,t+12.582*o,e+184.904*o,t+20.623*o,e+176.434*o,t+25.701*o),r.curveTo(e+184.733*o,t+24.709*o,e+192.642*o,t+22.504*o,e+200*o,t+19.24*o),r.lineTo(e+200*o,t+19.24*o),r},n.prototype.clip=function(e){return this.clippaths_.push(e)},n.prototype.clippaths=function(){return this.clippaths_},n.prototype.moveTo=function(t,i){return this.isRect=!1,this.cursor_=new e(t,i),0!==this.lastSubpath().length?this.subpaths_.push([]):void 0},n.prototype.lineTo=function(t,n){var o;return this.isRect=!1,o=new e(t,n),this.lastSubpath().push(new i(this.cursor(),o)),this.cursor_=o},n.prototype.arcTo=function(n,r,s,a,l){var u,h,p,c,d,_,y,g,f,m,v,w,b,T,x,P;for(this.isRect=!1,h=new e(n,r),P=new e(s,a),w=o.angleBetweenPoints(h,this.cursor()),d=o.angleBetweenPoints(h,P),m=2*Math.PI,0>w&&(w+=m,d+=m),T>_&&(_+=m),c=d-w,v=m-c;v>=m;)v-=m;return b=-1,v>=Math.PI&&(b=1),g=new i(this.cursor(),h),f=new i(h,P),g.isCollinearTo(f)?void 0:(u=g.offset(b*l).intersectionPoint(f.offset(b*l)),x=g.orthogonalProjection(u),y=f.orthogonalProjection(u),x.isEqualTo(this.cursor())||this.lineTo(x.x,x.y),T=o.angleBetweenPoints(u,x),_=o.angleBetweenPoints(u,y),this.addMarker(u),0>T&&(T+=2*Math.PI,_+=2*Math.PI),T>_&&(_+=2*Math.PI),p=_-T>Math.PI,this.lastSubpath().push(new t(x,y,h,u,l,T,_,p)),this.cursor_=y,y)},n.prototype.curveTo=function(t,i,n,o,s,a){var l;return this.isRect=!1,l=new e(s,a),this.lastSubpath().push(new r(this.cursor(),new e(t,i),new e(n,o),l)),this.cursor_=l},n.prototype.moveBy=function(t,i){return this.moveTo(this.cursor_.sum(new e(t,i)))},n.prototype.lineBy=function(t,i){var n;return n=this.cursor_.sum(new e(t,i)),this.lineTo(n.x,n.y)},n.prototype.leftBy=function(e){return this.lineBy(-e,0)},n.prototype.rightBy=function(e){return this.lineBy(e,0)},n.prototype.upBy=function(e){return this.lineBy(0,-e)},n.prototype.downBy=function(e){return this.lineBy(0,e)},n.prototype.isClosedSubpathAtIndex=function(e){var t,i;return t=this.firstPointForSubpathAtIndex(e),i=this.lastPointForSubpathAtIndex(e),t&&i?t.isEqualTo(i):!1},n.prototype.closePath=function(){var e;return e=this.firstPointForSubpathAtIndex(this.numberOfSubpaths()-1),e.isEqualTo(this.cursor_)?void 0:this.lineToPoint_(e)},n.prototype.minPoint=function(){return this.origin()},n.prototype.maxPoint=function(){return this.boundingBox().max.clone()},n.prototype.centerPoint=function(){var e,t;return t=this.minPoint(),e=this.maxPoint(),t.sum(e.difference(t).multiply(.5))},n.prototype.boundingBox=function(){var t,i,n,o,r,s,a,l,u,h,p;if(!this.boundingBox_){if(n=this.components(),1>n.length)t={min:e.zero(),max:e.zero()};else for(t={min:e.max(),max:e.min()},r=function(e){return e.x<t.min.x&&(t.min.x=e.x),e.x>t.max.x&&(t.max.x=e.x),e.y<t.min.y&&(t.min.y=e.y),e.y>t.max.y?t.max.y=e.y:void 0},h=this.components(),s=0,l=h.length;l>s;s++)for(i=h[s],p=i.boundingPoints(),a=0,u=p.length;u>a;a++)o=p[a],r(o);this.boundingBox_=t}return this.boundingBox_},n.prototype.origin=function(){return this.boundingBox().min.clone()},n.prototype.setOrigin=function(e,t){return this.translateTo(e,t)},n.prototype.size=function(){var e;return e=this.boundingBox(),new s(e.max.x-e.min.x,e.max.y-e.min.y)},n.prototype.frame=function(){var e;return e=new a,e.origin=this.origin(),e.size=this.size(),e},n.prototype.repeat=function(e,t,i){var n,o,r,s,a,l,u;if(null==t&&(t=0),null==i&&(i=0),this.isRect=!1,d.isNumber(e)&&e>=1){if(r=this.clone(),t=t>0?t+this.size().width:0,i=i>0?i+this.size().height:0,o=this.origin(),e-=1,e>0){for(s=[],n=a=1;e>=1?e>=a:a>=e;n=e>=1?++a:--a)r=this.clone(),r.translateTo(this.origin().x+t*n,this.origin().y+i*n),s.push(r);for(l=0,u=s.length;u>l;l++)r=s[l],this.subpaths_=this.subpaths_.concat(r.subpaths_)}return this.boundingBox_=null}return this.subpaths_=[]},n.prototype.clone=function(){var e,t,i,o,r,s,a,l,u,h,p,c,d,_,y,g,f,m;for(l=new n,h=p=0,g=this.numberOfSubpaths()-1;g>=0?g>=p:p>=g;h=g>=0?++p:--p)for(f=this.componentsForSubpathAtIndex(h),s=c=0,_=f.length;_>c;s=++c)r=f[s],0===s&&(u=r.startPoint,l.moveTo(u.x,u.y)),r.isLine?(u=r.endPoint,l.lineTo(u.x,u.y)):r.isArc?(i=r.center,l.arcTo(r.controlPoint.x,r.controlPoint.y,r.endPoint.x,r.endPoint.y,r.radius)):(e=r.controlPoint1,t=r.controlPoint2,a=r.endPoint,l.curveTo(e.x,e.y,t.x,t.y,a.x,a.y));for(m=this.clippaths_,d=0,y=m.length;y>d;d++)o=m[d],l.clip(o.clone());return this.isRect&&(l.isRect=!0,l.cornerRadius=this.cornerRadius),l},n.prototype.reversePath=function(){var e,t,i,o,r,s,a,l,u,h,p,c,d,_,y,g,f,m;for(l=new n,h=p=0,g=this.numberOfSubpaths()-1;g>=0?g>=p:p>=g;h=g>=0?++p:--p)for(f=this.componentsForSubpathAtIndex(h).reverse(),s=c=0,_=f.length;_>c;s=++c)r=f[s],0===s&&(u=r.endPoint,l.moveTo(u.x,u.y)),r.isLine?(u=r.startPoint,l.lineTo(u.x,u.y)):r.isArc?(i=r.center,l.arcTo(r.controlPoint.x,r.controlPoint.y,r.startPoint.x,r.startPoint.y,r.radius)):(e=r.controlPoint2,t=r.controlPoint1,a=r.startPoint,l.curveTo(e.x,e.y,t.x,t.y,a.x,a.y));for(m=this.clippaths_,d=0,y=m.length;y>d;d++)o=m[d],l.clip(o.clone());return l},n.prototype.pointForAnchorPoint=function(e){var t,i;return t=this.origin(),i=this.size(),t.x+=i.width*e.x,t.y+=i.height*e.y,t},n.prototype.rotate=function(t,i,n){var r,s,a,l,u,h,p,c,d,_;if(null==i&&(i=.5),null==n&&(n=.5),this.isRect=!1,null!=t){for(r=this.pointForAnchorPoint(new e(i,n)),t=o.toRadians(t),c=this.components(),l=0,h=c.length;h>l;l++)a=c[l],a.rotate(t,r);this.boundingBox_=null}for(d=this.clippaths_,_=[],u=0,p=d.length;p>u;u++)s=d[u],_.push(s.rotate(t,i,n));return _},n.prototype.translateBy=function(e,t){var i,n,o,r,s,a,l,u,h;if(d.isNumber(e)&&d.isNumber(t)){for(this.boundingBox_=null,this.markers_=[],l=this.components(),o=0,s=l.length;s>o;o++)n=l[o],n.translateBy(e,t);for(u=this.clippaths_,h=[],r=0,a=u.length;a>r;r++)i=u[r],h.push(i.translateBy(e,t));return h}},n.prototype.translateTo=function(e,t){var i,n;return d.isNumber(e)&&d.isNumber(t)?(i=e-this.origin().x,n=t-this.origin().y,this.translateBy(i,n)):void 0},n.prototype.center=function(e,t,i){var n,o,r;return null==t&&(t=0),null==i&&(i=0),r=this.size(),n=Math.round((e.width-r.width)/2),o=Math.round((e.height-r.height)/2),this.translateTo(n+t,o+i)},n.prototype.centerVertically=function(e,t,i){var n,o;return null==t&&(t=0),null==i&&(i=0),o=this.size(),n=Math.round((e.height-o.height)/2),this.translateTo(this.origin().x+t,n+i)},n.prototype.centerHorizontally=function(e,t,i){var n,o;return null==t&&(t=0),null==i&&(i=0),o=this.size(),n=Math.round((e.width-o.width)/2),this.translateTo(n+t,this.origin().y+i)},n.prototype.merge=function(e){var t;return t=this.clone(),t.subpaths_=t.subpaths_.concat(e.subpaths_),t.clippaths_=t.clippaths_.concat(e.clippaths_),t.boundingBox_=null,t},n.prototype.numberOfSubpaths=function(){return this.subpaths_.length},n.prototype.firstPointForSubpathAtIndex=function(e){var t;return t=this.componentsForSubpathAtIndex(e),t&&t.length>0?t[0].startPoint:null},n.prototype.lastPointForSubpathAtIndex=function(e){var t;return t=this.componentsForSubpathAtIndex(e),t[t.length-1].endPoint},n.prototype.componentsForSubpathAtIndex=function(e){return e>=0&&this.numberOfSubpaths()>e?this.subpaths_[e]:[]},n.prototype.lastSubpath=function(){return this.subpaths_[this.numberOfSubpaths()-1]},n.prototype.components=function(){var e,t,i,n,o;for(e=[],o=this.subpaths_,i=0,n=o.length;n>i;i++)t=o[i],e=e.concat(t);return e},n.prototype.scale=function(e){var t,i,o,r,s,a,l,u,h,p,c,d,_,y,g,f,m,v;for(0>=e&&(e=1),u=new n,p=c=0,f=this.numberOfSubpaths()-1;f>=0?f>=c:c>=f;p=f>=0?++c:--c)for(m=this.componentsForSubpathAtIndex(p),a=d=0,y=m.length;y>d;a=++d)s=m[a],0===a&&(h=s.startPoint,u.moveTo(h.x*e,h.y*e)),s.isLine?(h=s.endPoint,u.lineTo(h.x*e,h.y*e)):s.isArc?(o=s.center,u.arcTo(s.controlPoint.x*e,s.controlPoint.y*e,s.endPoint.x*e,s.endPoint.y*e,s.radius*e)):(t=s.controlPoint1,i=s.controlPoint2,l=s.endPoint,u.curveTo(t.x*e,t.y*e,i.x*e,i.y*e,l.x*e,l.y*e));for(v=this.clippaths_,_=0,g=v.length;g>_;_++)r=v[_],u.clip(r.scale(e));return this.isRect&&(u.isRect=!0,u.cornerRadius=this.cornerRadius*e),u},n.prototype.isClockwise_=function(){var t,i,n,r,s,a,l,u,h,p,c,d,_;if(1!==this.numberOfSubpaths()||!this.isClosedSubpathAtIndex(0))return!0;for(r=[],_=this.components(),h=0,c=_.length;c>h;h++)t=_[h],r.push(t.startPoint),r.push(t.endPoint);for(i=r.length,n=p=0,d=r.length;d>p;n=++p){if(a=r[n],l=r[(n-1+i)%i],s=r[(n+1)%i],a=new e(a.x+.01,a.y+.01),u=o.windingNumber(r,a),u>0)return!0;if(0>u)return!1}return!1},n.prototype.inversePath=function(){var e,t,i,o,r,s,a,l,u,h,p,c,_,y;for(l=new n,h=p=0,y=this.numberOfSubpaths()-1;y>=0?y>=p:p>=y;h=y>=0?++p:--p){for(s=d.clone(this.componentsForSubpathAtIndex(h)).reverse(),r=c=0,_=s.length;_>c;r=++c)o=s[r],0===r&&(u=o.endPoint,l.moveTo(u.x,u.y)),o.isLine?(u=o.startPoint,l.lineTo(u.x,u.y)):o.isArc?(i=o.center,l.arcTo(o.controlPoint.x,o.controlPoint.y,o.startPoint.x,o.startPoint.y,o.radius)):(e=o.controlPoint2,t=o.controlPoint1,a=o.startPoint,l.curveTo(e.x,e.y,t.x,t.y,a.x,a.y));this.isClosedSubpathAtIndex(h)&&(u=this.firstPointForSubpathAtIndex(h),l.lineTo(u.x,u.y))}return l},n.prototype.offset=function(e,t){var s,a,h,p,c,_,y,g,f,m,v,w,b,T,x,P,k,z,S,F,M,A,C,B,V,E,L,O,I,D,R,U,N,W,H,j,G,q,Q,K,Y,X,Z,J,$,et,tt,it,nt,ot,rt,st,at,lt,ut,ht,pt,ct,dt,_t,yt,gt,ft,mt,vt,wt,bt,Tt,xt,Pt,kt,zt,St,Ft;if(null==t&&(t={}),0===e)return this.clone();for(g=this.clone(),j=(new Date).getTime(),Q=[],w=[],q=Z=0,bt=g.numberOfSubpaths()-1;bt>=0?bt>=Z:Z>=bt;q=bt>=0?++Z:--Z){for(v=d.clone(g.componentsForSubpathAtIndex(q)),M=[],A=J=0,tt=v.length;tt>J;A=++J)if(f=v[A],f.isLine||f.isArc)D=f.offset(e),D&&(D.originComp=f,w.push(D)),M.push([D]);else{for(b=f.offset(e),X=[],$=0,it=b.length;it>$;$++)m=b[$],m.originComp=f,m.isInverse?(V=new i(m.endPoint,m.startPoint),V.originComp=f,X.push(V)):X.push(m);w=w.concat(X),X.length>0&&M.push(X)}M.length>0&&Q.push(M)}for(et=0,at=Q.length;at>et;et++)for(M=Q[et],T=M.length,A=yt=0,lt=M.length;lt>yt;A=++yt)f=M[A],I=(A+1)%T,(0!==I||this.isClosedSubpathAtIndex(this.numberOfSubpaths()-1))&&(L=M[I],B=f[f.length-1],z=L[0],B.endPoint.isEqualTo(z.startPoint)||(V=new i,V.test=!0,x=new r,B.isLine?(P=o.linearEquationForPoints(B.endPoint,B.startPoint),K=l.forPoints(B.startPoint,B.endPoint),H=B.startPoint):(P=o.linearEquationForPoints(B.endPoint,B.controlPoint2),K=l.forPoints(B.controlPoint2,B.endPoint),H=B.controlPoint2),k=z.isLine?o.linearEquationForPoints(z.startPoint,z.endPoint):o.linearEquationForPoints(z.startPoint,z.controlPoint1),R=o.linearEquationIntersection(P,k),Y=l.forPoints(H,R),s=0===K.x||0===Y.x||null!=P.x&&null!=k.x?Y.y/K.y:Y.x/K.x,C=new i,C.p=R,s>=1?(x=new r,x.p=R,x.originComp=B.originComp,a=u.fromVertices(B.endPoint,R,.5522847498),h=u.fromVertices(z.startPoint,R,.5522847498),x.startPoint=B.endPoint,x.endPoint=z.startPoint,x.controlPoint1=a,x.controlPoint2=h,f.push(x)):(E=new i(B.endPoint,z.startPoint),E.move=!0,E.originComp=B.originComp,f.push(E))));if(0>e){for(U=new n,gt=0,ut=Q.length;ut>gt;gt++)for(M=Q[gt],T=M.length,ft=0,ht=M.length;ht>ft;ft++)for(F=M[ft],O=F[(A+1)%T],f=F[0].originComp,U.moveTo(f.endPoint.x,f.endPoint.y),f.isLine?U.lineTo(f.startPoint.x,f.startPoint.y):f.isArc?U.arcTo(f.controlPoint.x,f.controlPoint.y,f.startPoint.x,f.startPoint.y,f.radius):U.curveTo(f.controlPoint2.x,f.controlPoint2.y,f.controlPoint1.x,f.controlPoint1.y,f.startPoint.x,f.startPoint.y),b=F,mt=0,pt=b.length;pt>mt;mt++)G=b[mt],G.isLine?(U.lineTo(G.startPoint.x,G.startPoint.y),U.lineTo(G.endPoint.x,G.endPoint.y)):G.isArc?(U.lineTo(G.startPoint.x,G.startPoint.y),U.arcTo(f.controlPoint.x,f.controlPoint.y,f.endPoint.x,f.endPoint.y,f.radius)):(U.lineTo(G.startPoint.x,G.startPoint.y),U.curveTo(G.controlPoint1.x,G.controlPoint1.y,G.controlPoint2.x,G.controlPoint2.y,G.endPoint.x,G.endPoint.y));for(Tt=g.clippaths(),vt=0,ct=Tt.length;ct>vt;vt++)c=Tt[vt],_=c.offset(-e),U.subpaths_=U.subpaths_.concat(_.subpaths_);return U}for(U=new n,wt=0,dt=Q.length;dt>wt;wt++)for(M=Q[wt],S=M[0][0].startPoint,U.moveTo(S.x,S.y),A=Pt=0,_t=M.length;_t>Pt;A=++Pt)for(w=M[A],kt=0,nt=w.length;nt>kt;kt++)f=w[kt],f.isLine?U.lineTo(f.endPoint.x,f.endPoint.y):f.isArc?U.arcTo(f.controlPoint.x,f.controlPoint.y,f.endPoint.x,f.endPoint.y,f.radius):U.curveTo(f.controlPoint1.x,f.controlPoint1.y,f.controlPoint2.x,f.controlPoint2.y,f.endPoint.x,f.endPoint.y);for(U.clippaths_=g.clippaths(),xt=g.clippaths(),zt=0,ot=xt.length;ot>zt;zt++)for(c=xt[zt],W=c.offset(.5),St=0,rt=W.length;rt>St;St++){for(N=W[St],y=N.offset(-(e+.5)),Ft=0,st=y.length;st>Ft;Ft++)p=y[Ft],p.inversePath_();U.subpaths_=U.subpaths_.concat(y.subpaths_)}return U},n.prototype.cursor=function(){return this.cursor_.clone()},n.prototype.addMarker=function(e){return e?this.markers_.push(e):void 0},n.prototype.markers=function(){return this.markers_},n.prototype.lineToPoint_=function(e){return this.lineTo(e.x,e.y)},n.prototype.serialize=function(e){var t,i,n,o,r,s,a,l,u,h,p,c,d,_;for(null==e&&(e={}),a=[],e.resizable&&(a=a.concat(["x = 0","y = 0","f = 1"])),a.push("path =  new Path"),u=h=0,d=this.numberOfSubpaths()-1;d>=0?d>=h:h>=d;u=d>=0?++h:--h)for(_=this.componentsForSubpathAtIndex(u),r=p=0,c=_.length;c>p;r=++p)o=_[r],0===r&&(l=o.startPoint,e.resizable?a.push("path.moveTo f * "+l.x.toFixed(3)+", f * "+l.y.toFixed(3)):a.push("path.moveTo "+l.x.toFixed(3)+", "+l.y.toFixed(3))),o.isLine?(l=o.endPoint,e.resizable?a.push("path.lineTo f * "+l.x.toFixed(3)+", f * "+l.y.toFixed(3)):a.push("path.lineTo "+l.x.toFixed(3)+", "+l.y.toFixed(3))):o.isArc?(n=o.center,e.resizable?a.push("path.arcTo f * "+o.controlPoint.x.toFixed(3)+", f * "+o.controlPoint.y.toFixed(3)+", f * "+o.endPoint.x.toFixed(3)+", f * "+o.endPoint.y.toFixed(3)+", f * "+o.radius):a.push("path.arcTo "+o.controlPoint.x.toFixed(3)+", "+o.controlPoint.y.toFixed(3)+", "+o.endPoint.x.toFixed(3)+", "+o.endPoint.y.toFixed(3)+", "+o.radius)):(t=o.controlPoint1,i=o.controlPoint2,s=o.endPoint,e.resizable?a.push("path.curveTo f * "+t.x.toFixed(3)+", f * "+t.y.toFixed(3)+", f * "+i.x.toFixed(3)+", f * "+i.y.toFixed(3)+", f * "+s.x.toFixed(3)+", f * "+s.y.toFixed(3)):a.push("path.curveTo "+t.x.toFixed(3)+", "+t.y.toFixed(3)+", "+i.x.toFixed(3)+", "+i.y.toFixed(3)+", "+s.x.toFixed(3)+", "+s.y.toFixed(3)));return a.join("\n")},n}(),c.exports=h,c.exports||p}),sublime_.define("graphics/path_component",[],function(){var e,t,i;return i={},t={},e=function(){function e(e,t){this.startPoint=e,this.endPoint=t,this.isLine=!1}return e.className="PathComponent",e.prototype.boundingPoints=function(){return[this.startPoint,this.endPoint]},e.prototype.subComponent=function(){},e.prototype.toString=function(){return""+this.startPoint+" -> "+(""+this.endPoint)},e.prototype.linearDirection=function(){return Math.atan(this.endPoint.x-this.startPoint.x,this.endPoint.y-this.startPoint.y)},e.prototype.direction=function(e,t){return Math.atan2(-t,-e)-Math.PI},e.prototype.notEqual=function(e,t,i,n){return e!==i||t!==n},e.prototype.translate=function(){},e}(),i.exports=e,i.exports||t}),sublime_.define("graphics/point",[],function(){var e,t,i;return i={},t={},e=function(){function e(e,t){this.x=parseFloat(e),this.y=parseFloat(t)}return e.className="Point",e.zero=function(){return new e(0,0)},e.prototype.copyPoint=function(e){return this.x=e.x,this.y=e.y},e.min=function(){return new e(Number.MIN_VALUE,Number.MIN_VALUE)},e.max=function(){return new e(Number.MAX_VALUE,Number.MAX_VALUE)},e.prototype.isEqualTo=function(e,t){return null==t&&(t=.001),t>Math.abs(this.x-e.x)&&t>Math.abs(this.y-e.y)},e.prototype.toString=function(){return"("+this.x+", "+this.y+")"},e.prototype.isZero=function(){return 0===this.x&&0===this.y},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.round=function(){return Math.round(this.x),Math.round(this.y)},e.difference=function(t,i){return new e(t.x-i.x,t.y-i.y)},e.sum=function(t,i){return new e(t.x+i.x,t.y+i.y)},e.prototype.multiply=function(t){return new e(this.x*t,this.y*t)},e.prototype.difference=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.sum=function(t){return new e(this.x+t.x,this.y+t.y)},e.zero=function(){return new e(0,0)},e}(),i.exports=e,i.exports||t}),sublime_.define("graphics/range",[],function(){var e,t,i;return i={},t={},e=function(){function e(e,t){this.start=e,this.end=t}return e.className="Range",e.prototype.normalized=function(){return new e(0,1)},e.contains=function(e,t,i){return i>=e&&t>=i},e}(),i.exports=e,i.exports||t}),sublime_.define("graphics/rect",["graphics/point","graphics/size"],function(e,t){var i,n,o;return o={},n={},i=function(){function i(i,n,o,r){null==i&&(i=0),null==n&&(n=0),null==o&&(o=0),null==r&&(r=0),this.origin=new e(i,n),this.size=new t(o,r)}return i.className="Rect",i.forMinMax=function(e,n){var o;return o=new i,o.origin=e,o.size=new t(n.x-e.x,n.y-e.y),o},i.prototype.inset=function(e,t){var i;return i=this.clone(),i.origin.x+=e,i.origin.y+=t,i.size.width-=2*e,i.size.height-=2*t,i},i.zero=function(){return new i(0,0,0,0)},i.prototype.clone=function(){return new i(this.origin.x,this.origin.y,this.size.width,this.size.height)},i.prototype.minX=function(){return this.origin.x},i.prototype.minY=function(){return this.origin.y},i.prototype.midX=function(){return this.minX()+(this.maxX()-this.minX())/2},i.prototype.maxX=function(){return this.origin.x+this.size.width},i.prototype.maxY=function(){return this.origin.y+this.size.height},i.prototype.toString=function(){return"Rect("+this.origin.x+", "+this.origin.y+", "+this.size.width+", "+this.size.height+")"},i.prototype.containsPoint=function(e){return e.x>=this.origin.x&&e.x<=this.maxX()&&e.y>=this.origin.y&&e.y<=this.maxY()},i.prototype.strictlyContainsPoint=function(e){return e.x>this.origin.x&&e.x<this.maxX()&&e.y>this.origin.y&&e.y<this.maxY()},i.prototype.instersectsRect=function(e){return e.origin.x<this.maxX()&&e.maxX()>this.origin.x&&e.origin.y<this.maxY()&&e.maxY()>this.origin.y},i.prototype.isEqualTo=function(e){return this.origin.isEqualTo(e.origin&&this.size.isEqualTo(e.size))},i}(),o.exports=i,o.exports||n}),sublime_.define("graphics/shadow",["graphics/point","graphics/color"],function(e,t){var i,n,o;return o={},n={},i=function(){function i(i){var n,o,r;null==i&&(i={}),this.size=null!=i.size?parseFloat(i.size):0,this.color=null!=i.color?i.color instanceof t?i.color:new t(i.color):new t("#000"),this.distance=null!=i.distance?parseFloat(i.distance):0,this.angle=null!=i.angle?i.angle:90,this.spread=null!=i.spread?i.spread/100:0,n=this.angle*Math.PI/180,o=-Math.round(100*Math.cos(n))/100,r=Math.round(100*Math.sin(n))/100,o*=this.distance,r*=this.distance,this.offset=new e(o,r)}return i.className="Shadow",i.prototype.colorWithAlpha=function(e){return 0>e?e=0:e>1&&(e=1),"rgba("+this.color.red+","+this.color.green+","+this.color.blue+","+e+")"},i.AlphaMap=[[.25,.5],[.25,.5],[.11,.22,.34,.22],[.06,.13,.22,.21,.19,.13],[.04,.08,.12,.16,.2,.16,.12,.08],[.03,.06,.07,.12,.14,.16,.14,.11,.09,.05],[.02,.04,.06,.08,.11,.12,.14,.12,.11,.08,.06,.04],[.02,.03,.04,.07,.08,.09,.11,.12,.11,.09,.08,.07,.04,.03],[.02,.01,.03,.05,.06,.08,.09,.09,.12,.09,.09,.08,.06,.05,.03,.03],[.01,.02,.03,.04,.05,.06,.07,.08,.09,.1,.09,.08,.07,.06,.05,.04,.03,.02],[.01,.03,.03,.05,.04,.06,.07,.07,.08,.1,.08,.07,.07,.06,.04,.05,.03,.03,.01]],i
}(),o.exports=i,o.exports||n}),sublime_.define("graphics/size",[],function(){var e,t,i;return i={},t={},e=function(){function e(e,t){this.width=e,this.height=t}return e.className="Size",e.zero=function(){return new e(0,0)},e.defaultSize=function(){return new e(300,150)},e.prototype.isZero=function(){return 0===this.width&&0===this.height},e.prototype.isEqualTo=function(e){return this.width===e.width&&this.height===e.height},e.prototype.clone=function(){return new e(this.width,this.height)},e.prototype.toString=function(){return"Size("+this.width+", "+this.height+")"},e.prototype.multiply=function(t){return new e(this.width*t,this.height*t)},e.prototype.area=function(){return this.width*this.height},e.prototype.isBiggerThan=function(e){return this.width>e.width||this.height>e.height},e}(),i.exports=e,i.exports||t}),sublime_.define("graphics/stroke",["core/util","graphics/color"],function(e,t){var i,n,o,r;return r=e._,o={},n={},i=function(){function e(i){var n;null==i&&(i={}),this.width=null!=i.width?i.width:0,i.color?(this.colors=r.isArray(i.color)?i.color:[i.color],this.colors.length>0&&(n=this.colors[0]),null!=n&&(this.color=n instanceof t?n:new t(n))):(this.colors=[],this.color=new t("#000")),this.position=null!=i.position?i.position:e.Position.Outside}return e.className="Stroke",e.Position={Inside:0,Outside:1},e.prototype.clone=function(){return new e({width:this.width,color:this.color,position:this.position})},e}(),o.exports=i,o.exports||n});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("graphics/svg_context",["graphics/shadow","graphics/abstract_context","graphics/point","graphics/context","graphics/stroke","core/util"],function(e,t,i,n,o,r){var s,a,l,u,h;return s=n.ContentGravity,h=r._,u={},l={},a=function(t){function n(){var e;n.__super__.constructor.apply(this,arguments),this.supportsFilters=!1;try{this.supportsFilters=void 0!==typeof window.SVGFEColorMatrixElement&&2===window.SVGFEColorMatrixElement.SVG_FECOLORMATRIX_TYPE_SATURATE}catch(t){}this.translation_=new i(0,0),e=document.createElementNS("http://www.w3.org/2000/svg","g"),this.mainGroupElement_=e}var r,a,l,u,p,c;return __extends(n,t),n.className="SvgContext",n.GradientId=1,n.ClipId=1,n.FilterId=1,n.MaskId=1,n.prototype.clear=function(){return this._element_.textContent="",this.mainGroupElement_.textContent="",this._element_._defsElement_=null,this._element_.appendChild(this.mainGroupElement_)},n.prototype.absoluteSvgUrl=function(e){var t;return t=document.location.href.replace(/\#.*/,"")+"#"+e,'"'+t+'"'},n.prototype.internalDraw_=function(e,t){var i,r,a,l,u,p,c,d,_,y,g,f,m,v,w,b,T,x;for(n.__super__.internalDraw_.apply(this,arguments),y=e.referenceSize(),e.pathElements_=[],e.contentGravity()===s.Resize?(this._element_.setAttribute("viewBox","0 0 "+y.width+" "+y.height),this._element().setAttribute("preserveAspectRatio","none")):this._element().removeAttribute("preserveAspectRatio"),m=this.createGroupElement_(),this.mainGroupElement_.appendChild(m),e.presentationClippath()&&(d=this.commandsForPath_(e.presentationClippath()),f=document.createElementNS("http://www.w3.org/2000/svg","path"),f.setAttribute("d",d.join(" ")),r="sublimeClip"+n.ClipId++,g=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),g.setAttribute("id",r),g.appendChild(f),this.appendToDefs_(g,this._element_),m.setAttribute("clip-path","url("+this.absoluteSvgUrl(r)+")")),(i=e.dropShadow())&&this.drawDropShadow_(e,i,m),(c=e.outerGlow())&&this.drawOuterGlow_(e,c,m),_=e.stroke(),_&&_.position===o.Position.Outside&&this.drawOuterStroke_(e,_,m),e.color()&&this.fillWithColor_(e,e.color(),m),e.gradient()&&this.fillWithGradient_(e,e.gradient(),m),e.colorOverlay()&&this.fillWithColor_(e,e.colorOverlay(),m),(a=e.innerGlow())&&this.drawInnerGlow_(e,a,m),(l=e.innerShadow())&&this.drawInnerShadow_(e,l,m),x=e.masks(),v=0,w=x.length;w>v;v++)p=x[v],p.presentationPath()&&(b=this.createMaskElement_(p,this._element_),this.setMaskId_(m,b));return e.clipBounds!==e.constructor.ClipBounds.None?(r="sublimeClip"+n.ClipId++,g=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),g.setAttribute("id",r),u=this.frameForClipBounds(e,t),T=this.createRectElement_({x:u.origin.x,y:u.origin.y,width:u.size.width,height:u.size.height}),g.appendChild(T),this.appendToDefs_(g,this._element_),m.setAttribute("clip-path","url("+this.absoluteSvgUrl(r)+")",e.updateClipBounds=h.bind(this,function(t){return u=this.frameForClipBounds(e,t),T.setAttribute("x",u.origin.x),T.setAttribute("y",u.origin.y),T.setAttribute("width",u.size.width),T.setAttribute("height",u.size.height)}))):void 0},n.prototype.fillWithGradient_=function(e,t,i){var n,o;return o=this.isFillTransparent(e)&&e.stroke()?this.createPathElement_(e,{transforms:!0,offset:.3}):this.createPathElement_(e,{transforms:!0}),n=this.createGradient_(e,this._element_,t),this.setGradientAttribute_(o,n),i.appendChild(o)},n.prototype.fillWithColor_=function(e,t,i){var n;return n=this.createPathElement_(e),this.setFillAttribute_(n,t.rgba()),i.appendChild(n)},n.prototype.pathCommandsForLayer_=function(e,t){return null==t&&(t={}),null!=t.offset?this.commandsForPath_(e.presentationPath().offset(t.offset)):this.commandsForPath_(e.presentationPath())},n.prototype.commandsForPath_=function(e){var t,i,n,o,r,s,a,l,u,h,p;for(i=[],o=r=0,u=e.numberOfSubpaths()-1;u>=0?u>=r:r>=u;o=u>=0?++r:--r)i=i.concat(this.pathCommandsForComponents_(e.componentsForSubpathAtIndex(o)));for(h=e.clippaths(),s=0,l=h.length;l>s;s++)for(t=h[s],n=t,o=a=0,p=n.numberOfSubpaths()-1;p>=0?p>=a:a>=p;o=p>=0?++a:--a)i=i.concat(this.pathCommandsForComponents_(n.componentsForSubpathAtIndex(o)));return 1>i.length&&i.push("M0 0"),i.push("Z"),i},n.prototype.setFillAttribute_=function(e,t){return e.setAttribute("fill",t)},n.prototype.createPathElement_=function(e,t){var i,n,o,r,s,a;return null==t&&(t={transforms:!0}),o=e.presentationPath(),n=!1,o?(r=this.pathCommandsForLayer_(e,t),a=document.createElementNS("http://www.w3.org/2000/svg","path"),a.setAttribute("d",r.join(" "))):(a=document.createElementNS("http://www.w3.org/2000/svg","path"),a.setAttribute("d","M0 0 Z")),t.transforms&&(s=[],(0!==this.translation_.x||0!==this.translation_.y)&&s.push("translate("+this.translation_.x+", "+this.translation_.y+")"),a.setAttribute("transform",s.join(" "))),e.pathElements_||(e.pathElements_=[]),e.pathElements_.push(a),i=a,i.updatePath=h.bind(this,function(){return r=e.path()?this.pathCommandsForLayer_(e,t):["M0 0 Z"],a.setAttribute("d",r.join(" "))}),a},n.prototype.drawOuterStroke_=function(e,t,i){var n,o,r;return 1>t.width?void 0:(n=e.presentationPath(),r=this.createPathElement_(e),r.setAttribute("stroke-linejoin","round"),r.setAttribute("stroke",t.color.rgba()),r.setAttribute("fill","none"),r.setAttribute("stroke-width",2*t.width),this.isFillTransparent(e)&&(o=this.createMaskElement_(e,this._element_,{black:!0}),h.iOS&&0>h.compareVersions(h.OSVersion,"6.0")||this.setMaskId_(r,o)),i.appendChild(r))},n.prototype.pathCommandsForComponents_=function(e){var t,i,n,o,r,s,a,l,u,h,p,c,d,_,y,g,f,m,v,w;if(!e)return"M0 0 Z";for(r=[],a=v=0,w=e.length;w>v;a=++v)s=e[a],0===a&&(_=s.startPoint,r.push("M"+_.x+" "+_.y)),s.isLine?(_=s.endPoint,r.push("L"+_.x+" "+_.y)):s.isArc?(n=s.center,p=s.endPoint.x,c=s.endPoint.y,y=s.radius,f=s.startAngle,h=s.endAngle,o=!s.counterclockwise,l=Math.abs(f-h),g=180*l/Math.PI,m=o?1:0,d=g>=180&&180===Boolean(o)?1:0,r.push("A"+y+", "+y+", "+g+", "+d+", "+m+", "+p+", "+c)):(t=s.controlPoint1,i=s.controlPoint2,u=s.endPoint,r.push("C"+t.x+" "+t.y+", "+i.x+" "+i.y+", "+u.x+" "+u.y));return r},n.prototype.translate_=function(e,t){return this.translation_.x+=e,this.translation_.y+=t},n.prototype.drawInnerStroke_=function(e,t,i){var n,o,r,s;return o=this.pathCommandsForPath_(e),s=this.createPathElement_(o),n=this.createClipPathElement_(s,i),r=e.offset(-t.width),o=this.subpathsCommandsForPath_(r),s=this.createPathElement_(o),s.setAttribute("clip-path","url("+this.absoluteSvgUrl(n)+")"),i.appendChild(s)},n.prototype.drawInnerGlow_=function(t,i,o){var r,s,a,l,u,p,c,d,_,y,g,f,m,v,w,b,T,x,P,k,z;if(f=1===i.size&&0===i.distance,this.supportsFilters&&!f)return w=this._element_.width.baseVal.value,u=this._element_.height.baseVal.value,m=this.pathCommandsForLayer_(t),k=document.createElementNS("http://www.w3.org/2000/svg","path"),k.setAttribute("d","M0 0 L0 "+u+" L"+w+" "+u+" L"+w+" 0 L0 0"+m.join(" ")),t.pathElements_||(t.pathElements_=[]),t.pathElements_.push(k),p=k,p.updatePath=h.bind(this,function(){return w=this._element_.width.baseVal.value,u=this._element_.height.baseVal.value,m=this.pathCommandsForLayer_(t),k.setAttribute("d","M0 0 L0 "+u+" L"+w+" "+u+" L"+w+" 0 L0 0"+m.join(" "))}),d=this.createGlowElement_(i,k,o),this.setFilterId_(k,d),l=this.createClipPathElement_(t,this._element_),k.setAttribute("clip-path","url("+this.absoluteSvgUrl(l)+")"),o.appendChild(k);if(b=this.createGroupElement_(),i.offset.isZero()||(P=this.createPathElement_(t),b.appendChild(P),d="sublimeMask"+n.MaskId++,T=document.createElementNS("http://www.w3.org/2000/svg","mask"),T.setAttribute("id",d),T.setAttribute("maskUnits","userSpaceOnUse"),z=this.createPathElement_(t,{transforms:!1}),this.setFillAttribute_(z,"white"),this.translate_(i.offset.x,i.offset.y,o)),v=Math.min(i.size,11),y=0,v>0)for(g=Math.max(1,v-1),a=e.AlphaMap[g]||[],_=0,s=i.color.alpha,c=0;a.length>c&&(_=g-c,r=parseFloat((a[c]*s/(1-i.spread)).toFixed(2)),0>r?r=0:r>1&&(r=1),y=r,0!==_);)k=this.createPathElement_(t),k.setAttribute("stroke-linejoin","round"),k.setAttribute("stroke-width",2*_),k.setAttribute("stroke",i.colorWithAlpha(r)),k.setAttribute("fill","none"),b.appendChild(k),c++;else y=i.color.alpha;return i.offset.isZero()||(P.setAttribute("fill",i.colorWithAlpha(y)),x=this.createPathElement_(t,{transforms:!0}),this.setFillAttribute_(x,"black"),T.appendChild(z),T.appendChild(x),this.appendToDefs_(T,o),this.setMaskId_(P,d),this.translate_(-i.offset.x,-i.offset.y,o)),l=this.createClipPathElement_(t,this._element_),b.setAttribute("clip-path","url("+this.absoluteSvgUrl(l)+")"),o.appendChild(b)},n.prototype.drawInnerShadow_=function(t,o,r){var s,a,l,u,p,c,d,_,y,g,f,m,v,w,b,T,x,P,k,z;if(this.supportsFilters)return w=this._element_.width.baseVal.value,p=this._element_.height.baseVal.value,m=this.pathCommandsForLayer_(t),k=document.createElementNS("http://www.w3.org/2000/svg","path"),k.setAttribute("d","M0 0 L0 "+p+" L"+w+" "+p+" L"+w+" 0 L0 0"+m.join(" ")),t.pathElements_||(t.pathElements_=[]),t.pathElements_.push(k),c=k,c.updatePath=h.bind(this,function(){return w=this._element_.width.baseVal.value,p=this._element_.height.baseVal.value,m=this.pathCommandsForLayer_(t),k.setAttribute("d","M0 0 L0 "+p+" L"+w+" "+p+" L"+w+" 0 L0 0"+m.join(" "))}),_=this.createShadowElement_(o,k,r),this.setFilterId_(k,_),u=this.createClipPathElement_(t,this._element_),k.setAttribute("clip-path","url("+this.absoluteSvgUrl(u)+")"),r.appendChild(k);if(b=this.createGroupElement_(),o.size>1&&(o.offset=i.zero()),o.offset.isZero()||(P=this.createPathElement_(t),b.appendChild(P),_="sublimeMask"+n.MaskId++,T=document.createElementNS("http://www.w3.org/2000/svg","mask"),T.setAttribute("id",_),T.setAttribute("maskUnits","userSpaceOnUse"),z=this.createPathElement_(t,{transforms:!1}),this.setFillAttribute_(z,"white"),this.translate_(o.offset.x,o.offset.y,r)),v=Math.min(o.size,11),g=0,v>0)for(f=Math.max(1,v-1),l=e.AlphaMap[f]||[],y=0,a=o.color.alpha,d=0;l.length>d&&(y=f-d,s=parseFloat((l[d]*a/(1-o.spread)).toFixed(2)),0>s?s=0:s>1&&(s=1),g=s,0!==y);)k=this.createPathElement_(t),k.setAttribute("stroke-linejoin","round"),k.setAttribute("stroke-width",2*y),k.setAttribute("stroke",o.colorWithAlpha(s)),k.setAttribute("fill","none"),b.appendChild(k),d++;else g=o.color.alpha;return o.offset.isZero()||(P.setAttribute("fill",o.colorWithAlpha(g)),x=this.createPathElement_(t,{transforms:!0}),this.setFillAttribute_(x,"black"),T.appendChild(z),T.appendChild(x),this.appendToDefs_(T,r),this.setMaskId_(P,_),this.translate_(-o.offset.x,-o.offset.y,r)),u=this.createClipPathElement_(t,this._element_),b.setAttribute("clip-path","url("+this.absoluteSvgUrl(u)+")"),r.appendChild(b)},n.prototype.createGlowElement_=function(e,t,i){var n,o,s,a,l,u;return u=this.createFilterElement_(),s=e.color.rgba(),this.setFillAttribute_(t,s),0!==e.size&&(a=e.size,l=a*e.spread,o=this.photoshopShadowSizeToSVGBlurSize_(a-l),t.setAttribute("stroke-width",2*l),t.setAttribute("stroke",s),t.setAttribute("stroke-linejoin","round"),n=new r({size:o}),u.appendChild(n._element())),this.appendToDefs_(u,i),u.id},n.prototype.drawOuterGlow_=function(t,i,n){var o,r,s,a,l,u,p,c,d,_,y,g;if(this.supportsFilters)return d=this.createGroupElement_(),g=this.createPathElement_(t),this.setFillAttribute_(g,i.color.rgba()),y=this.createGlowElement_(i,g,n),this.setFilterId_(g,y),_=this.createMaskElement_(t,this._element_),this.setMaskId_(g,_),n.appendChild(g);if(i.offset.isZero()||this.translate_(i.offset.x,i.offset.y,n),d=this.createGroupElement_(),c=Math.min(i.size,11),c>0)for(u=Math.max(1,c-1),s=e.AlphaMap[u]||[],l=0,r=i.color.alpha,p=u,a=0;s.length>a;)p=u-a,l=-p,o=s[a]*r/(1-i.spread),0>o?o=0:o>1&&(o=1),g=this.createPathElement_(t),g.setAttribute("stroke-linejoin","round"),g.setAttribute("stroke-width",2*l),g.setAttribute("stroke",i.colorWithAlpha(o)),g.setAttribute("fill","none"),d.appendChild(g),a++;else g=this.createPathElement_(t),g.setAttribute("fill",i.color.rgba()),d.appendChild(g);return _=this.createMaskElement_(t,this._element_,{black:!0}),h.iOS&&0>h.compareVersions(h.OSVersion,"6.0")||this.setMaskId_(d,_),n.appendChild(d),i.offset.isZero()?void 0:this.translate_(-i.offset.x,-i.offset.y,n)},n.prototype.drawDropShadow_=function(t,n,o){var r,s,a,l,u,p,c,d,_,y,g,f;if(this.supportsFilters)return f=this.createPathElement_(t),_=this.createShadowElement_(n,f,o),this.setFilterId_(f,_),g=this.createMaskElement_(t,this._element_),this.setMaskId_(f,g),o.appendChild(f);if(n.size>1&&(n.offset=i.zero()),n.offset.isZero()||this.translate_(n.offset.x,n.offset.y,o),y=this.createGroupElement_(),d=Math.min(n.size,11),d>0)for(p=Math.max(1,d-1),a=e.AlphaMap[p]||[],u=0,s=n.color.alpha,c=p,l=0;a.length>l;)c=p-l,u=-c,r=a[l]*s/(1-n.spread),0>r?r=0:r>1&&(r=1),f=this.createPathElement_(t),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-width",2*u),f.setAttribute("stroke",n.colorWithAlpha(r)),f.setAttribute("fill","none"),y.appendChild(f),l++;else f=this.createPathElement_(t),f.setAttribute("fill",n.color.rgba()),y.appendChild(f);return g=this.createMaskElement_(t,this._element_,{black:!0}),h.iOS&&0>h.compareVersions(h.OSVersion,"6.0")||this.setMaskId_(y,g),o.appendChild(y),n.offset.isZero()?void 0:this.translate_(-n.offset.x,-n.offset.y,o)},u=function(){function e(t){null==t&&(t={}),this.id=e.nextId(),this["in"]=t["in"],this.in2=t.in2,this.operator=t.operator,this.name=null}return e.className="CGSVGFilter",e.id=1,e.nextId=function(){var e;return e=this.id++},e.SourceAlpha="SourceAlpha",e.out="out",e["in"]="in",e.arithmetic="arithmetic",e.prototype._element=function(){var e;return this._element_||(e=document.createElementNS("http://www.w3.org/2000/svg",this.name),e.setAttribute("result",this.id),this["in"]&&e.setAttribute("in",this["in"]),this.in2&&e.setAttribute("in2",this.in2),this.operator&&e.setAttribute("operator",this.operator),this.setSpecificAttributes_(e),this._element_=e),this._element_},e.prototype.setSpecificAttributes_=function(){},e}(),p=function(e){function t(e){var i;null==e&&(e={}),this.offset=null!=e.offset?e.offset:1,i=this.offset>0?"dilate":"erode",e.operator=i,t.__super__.constructor.apply(this,arguments),this.name="feMorphology"}return __extends(t,e),t.className="CGSVGMorphFilter",t.prototype.setSpecificAttributes_=function(e){return e.setAttribute("radius",Math.abs(this.offset))},t}(u),l=function(e){function t(e){null==e&&(e={}),t.__super__.constructor.apply(this,arguments),this.o=e,this.name="feComposite"}return __extends(t,e),t.className="CGSVGCompositeFilter",t.prototype.setSpecificAttributes_=function(e){return this.operator===u.arithmetic&&(this.o.k0&&e.setAttribute("k0",this.o.k0),this.o.k1&&e.setAttribute("k1",this.o.k1),this.o.k2&&e.setAttribute("k2",this.o.k2),this.o.k3)?e.setAttribute("k3",this.o.k3):void 0},t}(u),c=function(e){function t(e){null==e&&(e={}),t.__super__.constructor.apply(this,arguments),this.name="feOffset",this.offset=e.offset}return __extends(t,e),t.className="CGSVGOffsetFilter",t.prototype.setSpecificAttributes_=function(e){return e.setAttribute("dx",this.offset.x),e.setAttribute("dy",this.offset.y)},t}(u),r=function(e){function t(e){null==e&&(e={}),t.__super__.constructor.apply(this,arguments),this.name="feGaussianBlur",this.size=e.size}return __extends(t,e),t.className="CGSVGBlurFilter",t.prototype.setSpecificAttributes_=function(e){return e.setAttribute("stdDeviation",this.size)},t}(u),a=function(e){function t(e){null==e&&(e={}),t.__super__.constructor.apply(this,arguments),this.name="feFlood",this.o=e}return __extends(t,e),t.className="CGSVGColorFilter",t.prototype.setSpecificAttributes_=function(e){return e.setAttribute("flood-color",this.o.color)},t}(u),n.prototype.createRectElement_=function(e){var t,i;return null==e&&(e={}),i=document.createElementNS("http://www.w3.org/2000/svg","rect"),i.setAttribute("x",e.x||"0"),i.setAttribute("y",e.y||"0"),i.setAttribute("width",e.width||"100%"),i.setAttribute("height",e.height||"100%"),e.transforms&&(t=[],(0!==this.translation_.x||0!==this.translation_.y)&&t.push("translate("+this.translation_.x+", "+this.translation_.y+")"),i.setAttribute("transform",t.join(" "))),i},n.prototype.createMaskElement_=function(e,t,i){var o,r,s,a,l;return null==i&&(i={}),r="sublimeMask"+n.MaskId++,s=document.createElementNS("http://www.w3.org/2000/svg","mask"),s.setAttribute("id",r),s.setAttribute("maskUnits","userSpaceOnUse"),l=this.createRectElement_({transforms:!1}),this.setFillAttribute_(l,"white"),a=this.createPathElement_(e,{transforms:!1}),!i.black&&e.gradient()?(o=this.createGradient_(e,this._element_,e.gradient()),this.setGradientAttribute_(a,o)):this.setFillAttribute_(a,"black"),s.appendChild(l),s.appendChild(a),this.appendToDefs_(s,t),r},n.prototype.photoshopShadowSizeToSVGBlurSize_=function(e){return e>5?.4463*e-.057:Math.max(.47*e-.12,.8)},n.prototype.createShadowElement_=function(e,t,i){var n,o,s,a,l,u,h;return h=this.createFilterElement_(),e.offset.isZero()||(s=new c({offset:e.offset}),h.appendChild(s._element())),a=e.color.rgba(),this.setFillAttribute_(t,a),0!==e.size&&(l=e.size,u=l*e.spread,o=this.photoshopShadowSizeToSVGBlurSize_(l-u),t.setAttribute("stroke-width",2*u),t.setAttribute("stroke",a),t.setAttribute("stroke-linejoin","round"),n=new r({size:o}),h.appendChild(n._element())),this.appendToDefs_(h,i),h.id},n.prototype.createStrokeElement_=function(e,t,i){var n,o,r;return r=this.createFilterElement_(),o=new p({offset:e.width}),n=new l({"in":o.id,in2:u.SourceAlpha,operator:u.out}),r.appendChild(o._element()),r.appendChild(n._element()),this.appendToDefs_(r,i),r.id},n.prototype.createOffsetFilterElement_=function(){var e;return e=document.createElementNS("http://www.w3.org/2000/svg","feMorphology")},n.prototype.createCompositeFilterElement_=function(){var e;return e=document.createElementNS("http://www.w3.org/2000/svg","feComposite")},n.prototype.createFilterElement_=function(){var e,t;return e="sublimeFilter"+n.GradientId++,t=document.createElementNS("http://www.w3.org/2000/svg","filter"),t.setAttribute("id",e),t.setAttribute("filterUnits","userSpaceOnUse"),t},n.prototype.setFilterId_=function(e,t){return e.setAttribute("filter","url("+this.absoluteSvgUrl(t)+")")},n.prototype.setMaskId_=function(e,t){return e.setAttribute("mask","url("+this.absoluteSvgUrl(t)+")")},n.prototype.appendToDefs_=function(e,t){var i;return t._defsElement_||(i=document.createElementNS("http://www.w3.org/2000/svg","defs"),t.appendChild(i),t._defsElement_=i),t._defsElement_.appendChild(e)},n.prototype.createClipPathElement_=function(e,t){var i,o,r;return i="sublimeClip"+n.ClipId++,o=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),o.setAttribute("id",i),r=this.createPathElement_(e),o.appendChild(r),this.appendToDefs_(o,t),i},n.prototype.createGradient_=function(e,t,i){var o,r,s,a,l,u,p,c,d,_,y,g,f,m,v;for(s="sublimeGradient"+n.GradientId++,f=document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),a=e.presentationPath(),l=i.points(a.minPoint(),a.maxPoint()),c=l.startPoint,r=l.endPoint,f.setAttribute("id",s),f.setAttribute("gradientUnits","userSpaceOnUse"),f.setAttribute("x1",c.x),f.setAttribute("y1",c.y),f.setAttribute("x2",r.x),f.setAttribute("y2",r.y),u=c.x===r.x,p=c.y===r.y,e.on({didUpdate:function(){var t,n;return a=e.presentationPath(),l=i.points(a.minPoint(),a.maxPoint()),n=c,t=r,c=l.startPoint,r=l.endPoint,u||(c.x!==n.x&&f.setAttribute("x1",c.x),r.x!==t.x&&f.setAttribute("x2",r.x)),p||(c.y!==n.y&&f.setAttribute("y1",c.y),r.y===t.y)?void 0:f.setAttribute("y2",r.y)}}),_=h.keys(i.colors).sort(),m=0,v=_.length;v>m;m++)d=_[m],o=i.colors[d],y=document.createElementNS("http://www.w3.org/2000/svg","stop"),y.setAttribute("offset",100*d+"%"),y.setAttribute("style","stop-color:"+o.rgb()+";stop-opacity:"+o.alpha),f.appendChild(y);return t._defsElement_||(g=document.createElementNS("http://www.w3.org/2000/svg","defs"),t.appendChild(g),t._defsElement_=g),t._defsElement_.appendChild(f),s},n.prototype.setGradientAttribute_=function(e,t){return e.setAttribute("fill","url("+this.absoluteSvgUrl(t)+")")},n.prototype.createGroupElement_=function(){return document.createElementNS("http://www.w3.org/2000/svg","g")},n.prototype.pathCommandsForPath_=function(e){var t;return t=e.subpaths(),this.subpathsCommandsForPath_(t)},n}.call(this,t),u.exports=a,u.exports||l});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("graphics/svg_layer",["graphics/abstract_layer","graphics/svg_context"],function(e,t){var i,n,o;return o={},n={},i=function(e){function i(){i.__super__.constructor.apply(this,arguments)}return __extends(i,e),i.className="SvgLayer",i.prototype.initElement_=function(){var e;return e=document.createElementNS("http://www.w3.org/2000/svg","svg"),e.setAttribute("version","1.1"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),this._element_=e},i.prototype.context=function(){return this.context_||(this.context_=new t(this._element_)),this.context_},i.prototype.shouldRedrawOnSizeUpdate=function(){return!1},i}(e),o.exports=i,o.exports||n}),sublime_.define("graphics/vector",["graphics/point"],function(e){var t,i,n;return n={},i={},t=function(){function t(e,t){this.x=e,this.y=t}return t.className="Vector",t.forPoints=function(e,i){return new t(i.x-e.x,i.y-e.y)},t.prototype.toString=function(){return"V: "+this.x+", "+this.y},t.prototype.dotProduct=function(e){return this.x*e.x+this.y*e.y},t.prototype.divise=function(e){return new t(this.x/e.x,this.y/e.y)},t.prototype.endPoint=function(){return new e(this.x,this.y)},t.prototype.opposite=function(){return new t(-this.x,-this.y)},t.prototype.perpendicular=function(){return new t(-this.y,this.x)},t.prototype.length=function(){return Math.sqrt(this.powLenght())},t.prototype.powLenght=function(){return Math.pow(this.x,2)+Math.pow(this.y,2)},t.prototype.rotate=function(e){var t,i,n,o,r,s,a;return t=Math.cos(e),r=Math.sin(e),n=[t,-r],o=[r,t],i=this.length(),s=this.x,a=this.y,this.x=n[0]*s+n[1]*a,this.y=o[0]*s+o[1]*a},t}(),n.exports=t,n.exports||i});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("graphics/vertex",["graphics/point"],function(e){var t,i,n;return n={},i={},t=function(e){function t(e,i){this.x=e,this.y=i,t.__super__.constructor.apply(this,arguments),this.id=t.id++,this.next=null,this.prev=null,this.nextPolygon=null,this.neighbor=null,this.intersect=!1,this.added=!1,this.alpha=0,this.entryExit=0,this.nextComponent=null,this.prevComponent=null}return __extends(t,e),t.className="Vertex",t.id=0,t.prototype.multiply=function(){return new t(this)},t.prototype.toString=function(){return this.added?this.id+"a"+t.__super__.toString.apply(this,arguments):this.intersect?this.id+"i"+t.__super__.toString.apply(this,arguments):this.id+t.__super__.toString.apply(this,arguments)},t.prototype.clone=function(){var e;return e=new t(this.x,this.y),e.id=this.id,e},t.fromVertices=function(e,i,n){var o,r;return o=i.x-e.x,r=i.y-e.y,e=new t(e.x+o*n,e.y+r*n),e.alpha=n,e},t}(e),n.exports=t,n.exports||i});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("ui/button",["core/util","ui/view","ui/label","ui/image_view"],function(e,t,i,n){var o,r,s,a,l;return l=e._,r=i.Label,a={},s={},o=function(e){function i(){i.__super__.constructor.apply(this,arguments),this.labelAutoLayout_=!0,this.mouseUpObserver_=null,this.contentView_=null,this.disabled=!1,this.state_=i.State.Default}return __extends(i,e),i.className="Button",i.State={Default:0,Selected:1},i.prototype.state=function(){return this.state_},i.prototype.setEnabled=function(e){var t;return this.disabled=!e,l.mobile?void 0:(t=e?"pointer":"auto",this.css({cursor:t}))},i.prototype.enabled=function(){return!this.disabled},i.prototype.setSelected=function(e){return e&&this.state_!==i.State.Selected?(this.state_=i.State.Selected,this.emit({didChangeState:[this.state_]})):e||this.state_===i.State.Default?void 0:(this.state_=i.State.Default,this.emit({didChangeState:[this.state_]}))},i.prototype.selected=function(){return this.state_===i.State.Selected},i.prototype.addCssSize_=function(e){return i.__super__.addCssSize_.call(this,e)},i.prototype.setImage=function(e){return this.imageView_||(this.imageView_=new n,this.imageView_.setAutoresizingMask(t.AutoresizingMask.FlexibleWidth|t.AutoresizingMask.FlexibleHeight)),this.imageView_.setImage(e),this.imageView_.setFrame(this.bounds()),this.imageView_.setContentMode(this.contentMode()),this.append(this.imageView_)},i.prototype._image=function(){return this.imageView_?this.imageView_._image():void 0},i.prototype.imageView=function(){return this.imageView_},i.prototype.label=function(){return this.label_||(this.label_=new r),this.label_},i.prototype.setDisableLabelAutoLayout=function(e){return this.labelAutoLayout_=!e},i.prototype.contentView=function(){return this.contentView_||(this.contentView_=new t,this.contentView_.setUserInteractionEnabled(!1),this.contentView_.setAutoresizingMask(t.AutoresizingMask.FlexibleWidth|t.AutoresizingMask.FlexibleHeight),this.contentView().css({position:"static"})),this.contentView_},i.prototype.didMoveToParent=function(){return i.__super__.didMoveToParent.apply(this,arguments),this.label_?(this.labelAutoLayout_&&(this.label_.setFrame(this.bounds()),this.label_.setAutoresizingMask(t.AutoresizingMask.FlexibleWidth|t.AutoresizingMask.FlexibleHeight)),this.append(this.label_)):void 0},i.prototype.onMouseUpInside=function(e){return this.mouseUpObserver_=e},i.prototype.isEventOutOfTapBounds_=function(e){var t,i,n;return n=e.locationInView(this),this.mouseDownPoint_&&this.bounds().containsPoint(n)?(t=this.mouseDownPoint_.difference(n),i=10,Math.abs(t.x)>i||Math.abs(t.y)>i):!0},i.prototype.mouseDown=function(e){return this.mouseDownPoint_=this.disabled||1!==e.numberOfTouches()?null:e.locationInView(this)},i.prototype.mouseDragged=function(e){return this.disabled||1!==e.numberOfTouches()?this.mouseDownPoint_=null:this.isEventOutOfTapBounds_(e)?this.mouseDownPoint_=null:void 0},i.prototype.mouseUp=function(e){return this.disabled||e.numberOfTouches()>0||!this.mouseDownPoint_||this.isEventOutOfTapBounds_(e)?this.mouseDownPoint_=null:this.mouseUpObserver_?this.mouseUpObserver_(e):void 0},i.prototype.baseCss=function(){var e;return e=i.__super__.baseCss.apply(this,arguments),l.gtIE8&&l.extend(e,{background:"none",outline:"none"}),e},i.baseCss=function(){var e;return e={background:"none",border:"none",margin:0,outline:"none",padding:0,"font-size":0,"line-height":0,overflow:"visible"},l.mobile||l.extend(e,{cursor:"pointer"}),e},i}(t),a.exports=o,a.exports||s}),sublime_.define("ui/content_drawing",["core/util","graphics/flash_layer","graphics/layer","core/dom"],function(e,t,i,n){var o,r,s,a;return a=e._,s={},r={},o=function(){function e(){}return e.className="ContentDrawing",e.prototype.initContentDrawing=function(){return this.on({didRemoveFromWindow:a.bind(this,function(){return this.layer_&&this.layer_.constructor===t?this.resetLayer_():void 0})}),this.on({didUpdateFrame:function(){return this.layer_?this.layer_.fixDrawingIssues():void 0}}),this.on({didUpdateSize:a.bind(this,function(){return this.layer_?(this.layer_.setReferenceSize(this.referenceSize()),this.layer_.shouldRedrawOnSizeUpdate()?this.layer_.setNeedsDisplay():this.layer_.displayIfNeeded()):void 0})})},e.prototype.addLayer=function(e){return e?(e.setReferenceSize(this.referenceSize()),this.layer().addSublayer(e),e.setDelegate(this)):void 0},e.prototype.setLayers=function(e){var t,i,n;for(this.layer().setReferenceSize(this.referenceSize()),this.layer_.removeAllSublayers(),i=0,n=e.length;n>i;i++)t=e[i],this.addLayer(t);return this.setNeedsDisplay()},e.prototype.setLayerClass=function(e){return this.layerClass_=e},e.prototype.resetLayer_=function(){var e;return this.layer_?(this.layer_.removeFromParent(),e=this.layer_.sublayers(),this.layer_.setDelegate(null),this.layer_=null,this.setLayers(e)):void 0},e.prototype.layer=function(){return this.layer_||(this.layer_=this.layerClass_?new this.layerClass_:i.layer(),this.layer_.setDelegate(this)),this.layer_},e.prototype.isInDOM=function(){return a.isDefAndNotNull(this._ancestorElement_())},e.prototype.intrinsicSize=function(){return this.layer_&&!this.layer_.size().isZero()?this.layer_.size().clone():this.size()},e.prototype.canDisplay=function(){return n.isInDom(this._element_)&&!this.hidden_&&this.size().area()>0},e.prototype.displayIfNeeded=function(){return this.layer_&&this.canDisplay()?(this.layer_.parent()!==this._element()&&this.layer_.appendToElement(this._element()),this.needsDisplay_?(this.needsDisplay_=!1,this.layer_.setNeedsDisplay()):this.layer_.displayIfNeeded()):void 0},e.prototype.setNeedsDisplay=function(){return this.layer_&&this.canDisplay()?(this.layer_.parent()!==this._element()&&this.layer_.appendToElement(this._element()),this.layer_.setNeedsDisplay()):this.needsDisplay_=!0},e}(),s.exports=o,s.exports||r}),sublime_.define("ui/content_mode",[],function(){var e,t,i;return i={},t={},e={TopLeft:0,Center:1,Redraw:2,ScaleToFill:3,ScaleAspectFill:4,ScaleAspectFit:5,ScaleAspectWidthFit:6},i.exports=e,i.exports||t}),sublime_.define("ui/event",["graphics/point","core/util"],function(e,t){var i,n,o,r,s,a;return a=t._,s={},r={},n={MouseDown:1,MouseUp:2,MouseMoved:5,MouseDragged:6,MouseEntered:8,MouseExited:9,TouchCancel:10},o={None:0,Left:1,Right:2,Other:3},i=function(){function t(e,t,i){this.window_=e,this._event_=t,this.type_=i,this.timestamp=(new Date).getTime()}return t.className="Event",t.userDidClick=function(){return a.isDef(window.event)&&"click"===window.event.type},t.prototype.type=function(){return this.type_},t.prototype._targetElement=function(){return this._event_.target||this._event_.srcElement},t.prototype.pressedMouseButton=function(){var e,t;return this.pressedMouseButton_||(e=o.None,t=this._event_,t&&(e=t.which?2>t.which?a.Mac&&t.ctrlKey?o.Right:o.Left:2===t.which?o.Other:o.Right:2>t.button?o.Left:4===t.button?o.Other:o.Right),this.pressedMouseButton_=e),this.pressedMouseButton_},t.prototype.wheelOffset=function(){var e,t;
return t=this._event_,e=t.wheelDeltaY||t.deltaY,null!=e?a.Opera?e/120:a.Firefox?-e:e:null!=t.wheelDelta?t.wheelDelta/10:null!=t.detail?-t.detail/3:void 0},t.prototype.window=function(){return this.window_},t.prototype.preventDefault=function(){return this._event_.preventDefault?this._event_.preventDefault():this._event_.returnValue=!1},t.prototype.stopPropagation=function(){},t.prototype.numberOfTouches=function(){if(this._event_.touches)return this._event_.touches.length;switch(this.type_){case n.MouseUp:return 0;default:return 1}},t.prototype.altKeyPressed=function(){return a.isDef(this._event_.altKey)?this._event_.altKey:!1},t.prototype.locationInBrowserWindow=function(){var t,i,n;return this.locationInBrowserWindow_||this._event_&&(void 0===this._event_.pageX?(t=this._event_.clientX+document.documentElement.scrollLeft,i=this._event_.clientY+document.documentElement.scrollTop,n=new e(t,i)):n=this._event_.touches&&this._event_.touches[0]?new e(this._event_.touches[0].pageX,this._event_.touches[0].pageY):this._event_.changedTouches&&this._event_.changedTouches[0]?new e(this._event_.changedTouches[0].pageX,this._event_.changedTouches[0].pageY):new e(this._event_.pageX,this._event_.pageY),this.locationInBrowserWindow_=n),this.locationInBrowserWindow_},t.prototype.locationInWindow=function(){var t,i;return this.locationInWindow_||(t=this.locationInBrowserWindow(),i=a.pageOffset(this.window_._element()),this.locationInWindow_=new e(Math.round(t.x-i.x),Math.round(t.y-i.y))),this.locationInWindow_},t.prototype.locationInView=function(e){var t;return t=this.locationInWindow(),e.convertPointFromView(t,this.window())},t}(),r.EventType=n,r.MouseButton=o,r.Event=i,s.exports||r}),sublime_.define("ui/event_handling",["core/util","core/dom","core/events","graphics/point","ui/screen","ui/event"],function(e,t,i,n,o,r){var s,a,l,u,h,p,c,d;return d=e._,h=o.Screen,s=r.Event,l=r.EventType,u=r.MouseButton,c={},p={},a=function(){function e(){}return e.className="EventHandling",e._lastMouseMoveEvent_=null,e.trackGlobalMousePosition_=function(){return e.trackingGlobalMousePosition_?void 0:(e.trackingGlobalMousePosition_=!0,i.listen(window,i.EventTypes.MouseMove,function(t){return t=t||window.event,e._lastMouseMoveEvent_=d.ltIE9?d.clone(t):t}))},e.prototype.initEventHandling=function(){return e.trackGlobalMousePosition_(),this.userInteractionEnabled_=!0,this.trackingAreas_=[],this.gestureRecognizers_=[],this.trackingEvents_=!1,this.registeredViewsForTrackingAreas_=[],this.isTrackingAreas_=!1,this.isMouseEntered_=!1,this.isMouseDown_=!1,this.bindedMouseDragged_=d.bind(this,this.mouseDragged_),this.bindedMouseUp_=d.bind(this,this.mouseUp_),this.bindedMouseDown_=d.bind(this,this.mouseDown_),this.bindedMouseEntered_=d.bind(this,this.mouseEntered_),this.bindedMouseExited_=d.bind(this,this.mouseExited_),this.bindedMouseMoved_=d.bind(this,this.mouseMoved_),this.bindedClick_=d.bind(this,this.didClick_),this.monitoringDrag_=!1,this.on({didRemoveFromRootView:function(e){return e.hittedView_===this?e.didRemoveHittedView_():void 0}})},e.prototype.didRemoveHittedView_=function(){return this.cancelMouse_()},e.prototype.hitTest=function(e,t,i){var o,r,s,a,l,u;if(null==i&&(i=0),this.hidden_||!this.userInteractionEnabled_)return null;for(l=this.children(),s=this.frame().origin,r=0===i?e:new n(e.x-s.x,e.y-s.y),o=l.length-1;o>=0;){if(a=l[o],u=a.hitTest(r,t,i+1))return u;o--}return this.bounds().containsPoint(r)?this:null},e.prototype.addTrackingArea=function(e){return this.rootView()&&(e.owner||(e.owner=this),this.trackingAreas_.push(e),1===this.trackingAreas_.length)?this.rootView().registerViewForTrackingAreas(this):void 0},e.prototype.removeTrackingArea=function(e){return d.remove(this.trackingAreas_,e),1>this.trackingAreas_.length&&this.rootView()?this.rootView().unregisterViewForTrackingAreas(this):void 0},e.prototype.removeAllTrackingAreas=function(){var e;for(e=[];this.trackingAreas_.length>0;)e.push(this.removeTrackingArea(this.trackingAreas_[0]));return e},e.prototype.updateTrackingAreas=function(){var e,t,i,n,o,r,s,a,l;for(s=d.clone(this.trackingAreas_),i=0,o=s.length;o>i;i++)t=s[i],t.trackingInVisibleRect&&(this.removeTrackingArea(t),this.rootView()&&(t.rect=this.bounds(),this.addTrackingArea(t)));for(a=this.children(),l=[],n=0,r=a.length;r>n;n++)e=a[n],l.push(e.updateTrackingAreas());return l},e.prototype.startTrackingEvents_=function(){var t,n,o;return this.trackingEvents_?void 0:(this.trackingEvents_=!0,h.mainScreen().isTouchScreen()?(this.listen_(i.EventTypes.TouchStart,d.bind(this,this.touchStart_)),this.listen_(i.EventTypes.TouchMove,d.bind(this,this.touchMove_)),this.listen_(i.EventTypes.TouchEnd,d.bind(this,this.touchEnd_)),this.listen_(i.EventTypes.TouchCancel,d.bind(this,this.touchCancel_))):(this.listen_(i.EventTypes.MouseOver,this.bindedMouseEntered_),this.listen_(i.EventTypes.MouseOut,this.bindedMouseExited_),this.listen_(i.EventTypes.MouseDown,this.bindedMouseDown_)),this.listen_(i.EventTypes.Click,this.bindedClick_),this.listen_(i.EventTypes.ContextMenu,d.bind(this,this.contextMenu_)),this.isUserInteractionEnabled()&&(o=e._lastMouseMoveEvent_,o&&(t=this.eventFromBrowserEvent(o,this.mouseMoved_),n=t.locationInWindow(),this.bounds().strictlyContainsPoint(n)))?this.mouseEntered_(o):void 0)},e.prototype.stopTrackingEvents_=function(){return this.trackingEvents_?(this.trackingEvents_=!1,h.mainScreen().isTouchScreen()?(this.unlistenAll_(i.EventTypes.TouchStart),this.unlistenAll_(i.EventTypes.TouchMove),this.unlistenAll_(i.EventTypes.TouchEnd)):(i.unlisten(this._element(),i.EventTypes.MouseOver,this.bindedMouseEntered_),i.unlisten(this._element(),i.EventTypes.MouseOut,this.bindedMouseExited_),i.unlisten(this._element(),i.EventTypes.MouseDown,this.bindedMouseDown_),this.unlistenAll_(i.EventTypes.ContextMenu)),i.unlisten(this._element(),i.EventTypes.Click,this.bindedClick_)):void 0},e.prototype.listen_=function(e,t){return i.listen(this._element(),e,t)},e.prototype.unlisten_=function(e,t){return i.unlisten(this._element(),e,t)},e.prototype.unlistenAll_=function(e){return i.unlistenAll(this._element(),e)},e.prototype.eventFromBrowserEvent=function(e,t){var i,n;return e||(e=window.event),t===this.mouseEntered_?new s(this,e,l.MouseEntered):t===this.mouseExited_?(n=l.MouseExited,new s(this,e,l.MouseExited)):t===this.mouseMoved_?new s(this,e,l.MouseMoved):t===this.touchCancel_?new s(this,e,l.TouchCancel):(t===this.mouseDown_?n=l.MouseDown:t===this.mouseUp_?n=l.MouseUp:t===this.mouseDragged_&&(n=l.MouseDragged),i=new s(this,e,n))},e.prototype.registerViewForTrackingAreas=function(t){return this.isMouseEntered_&&!this.isTrackingAreas_&&this.startTrackingAreas_(),this.registeredViewsForTrackingAreas_.push(t),this.isUserInteractionEnabled()&&this.isMouseEntered_&&e._lastMouseMoveEvent_?this.mouseMoved_(e._lastMouseMoveEvent_):void 0},e.prototype.unregisterViewForTrackingAreas=function(e){return d.remove(this.registeredViewsForTrackingAreas_,e)},e.prototype.startTrackingAreas_=function(){var t;return!this.isTrackingAreas_&&(this.isTrackingAreas_=!0,this.listen_(i.EventTypes.MouseMove,this.bindedMouseMoved_),t=e._lastMouseMoveEvent_)?this.mouseMoved_(t):void 0},e.prototype.stopTrackingAreas_=function(){return this.isTrackingAreas_?(this.isTrackingAreas_=!1,i.unlisten(this._element(),i.EventTypes.MouseMove,this.bindedMouseMoved_)):void 0},e.prototype.didClick_=function(e){var t;return this.userInteractionEnabled_?(e||(e=window.event),t=new s(this,e),t.preventDefault()):void 0},e.prototype.contextMenu_=function(e){var i,n;return e||(e=window.event),i=new s(this,e),n=t.nodeName(i._targetElement()),"INPUT"!==n&&"TEXTAREA"!==n?i.preventDefault():void 0},e.prototype.mouseEntered_=function(e){return this.userInteractionEnabled_?this.isMouseEntered_?void 0:(this.isMouseEntered_=!0,this.registeredViewsForTrackingAreas_.length>0&&this.startTrackingAreas_(),this.mouseMoved_(e)):void 0},e.prototype.exitTrackingArea_=function(e,t){var i;return e.entered?(e.owner.mouseExited&&(i=this.eventFromBrowserEvent(t,this.mouseExited_),e.owner.mouseExited(i)),e.entered=!1):void 0},e.prototype.mouseMoved_=function(e){var t,i,n,o,r,s,a,l,u,h;if(this.userInteractionEnabled_&&this.isMouseEntered_&&(i=this.eventFromBrowserEvent(e,this.mouseMoved_),o=i.locationInWindow(),this.registeredViewsForTrackingAreas_.length>0)){for(o=i.locationInWindow(),u=d.clone(this.registeredViewsForTrackingAreas_).reverse(),h=[],a=0,l=u.length;l>a;a++)s=u[a],n=s.convertPointFromView(o,this),h.push(function(){var o,a,l,u;for(l=d.clone(s.trackingAreas_).reverse(),u=[],o=0,a=l.length;a>o;o++)r=l[o],t=r.hitTest(n),this.isMouseDown_||r.entered||!t?r.mouseMovedEnabled&&t&&(!this.isMouseDown_||r.mouseDragEnabled)&&r.owner.mouseMoved?(i=this.eventFromBrowserEvent(e,this.mouseMoved_),u.push(r.owner.mouseMoved(i))):r.entered&&!t?u.push(this.exitTrackingArea_(r,e)):u.push(void 0):(r.owner.mouseEntered&&(i=this.eventFromBrowserEvent(e,this.mouseEntered_),r.owner.mouseEntered(i)),u.push(r.entered=!0));return u}.call(this));return h}},e.prototype.setUserInteractionEnabled=function(t){var i,n,o;return this.isRoot()&&!t&&this.mouseExited_({x:-10,y:-10}),this.userInteractionEnabled_=t,this.isRoot()&&t&&(o=e._lastMouseMoveEvent_,o&&(i=this.eventFromBrowserEvent(o,this.mouseMoved_),n=i.locationInWindow(),this.bounds().strictlyContainsPoint(n)))?this.mouseEntered_(o):void 0},e.prototype.isUserInteractionEnabled=function(){return this.userInteractionEnabled_},e.prototype.mouseExited_=function(e){var t,i,n,o,r,s,a,l,u,h;if(this.userInteractionEnabled_&&(t=this.eventFromBrowserEvent(e,this.mouseDown_),i=t.locationInWindow(),this.isMouseEntered_&&!this.bounds().strictlyContainsPoint(i))){for(this.isMouseEntered_=!1,u=d.clone(this.registeredViewsForTrackingAreas_).reverse(),r=0,a=u.length;a>r;r++)for(o=u[r],h=d.clone(o.trackingAreas_).reverse(),s=0,l=h.length;l>s;s++)n=h[s],this.exitTrackingArea_(n,e);return this.stopTrackingAreas_()}},e.prototype.mouseDown_=function(e){var n,o,r,s,a;if(this.userInteractionEnabled_&&(n=this.eventFromBrowserEvent(e,this.mouseDown_),!(a=n._targetElement())||(r=t.nodeName(a),"INPUT"!==r&&"TEXTAREA"!==r)))switch(n.pressedMouseButton()){case u.Right:return s=n.locationInWindow(),o=this.hitTest(s,n),this.sendEvent(n,o);case u.Left:if(this.isMouseDown_)return;if(this.isMouseDown_=!0,s=n.locationInWindow(),this.hittedView_=this.hitTest(s,n),this.hittedView_===this&&(this.hittedView_=null),i.listen(document,i.EventTypes.MouseUp,this.bindedMouseUp_),!this.hittedView_)return;if(this.sendEvent(n,this.hittedView_),this.hittedView_.mouseDragged)return i.listen(document,i.EventTypes.MouseMove,this.bindedMouseDragged_),this.monitoringDrag_=!0}},e.prototype.cancelMouse_=function(){return this.isMouseDown_=!1,this.hittedView_&&this.hittedView_.mouseCancelled&&this.hittedView_.mouseCancelled(),this.hittedView_=null,i.unlisten(document,i.EventTypes.MouseMove,this.bindedMouseDragged_),this.monitoringDrag_=!1,i.unlisten(document,i.EventTypes.MouseUp,this.bindedMouseUp_)},e.prototype.mouseUp_=function(e){var t;return this.userInteractionEnabled_&&(t=this.eventFromBrowserEvent(e,this.mouseUp_),t.pressedMouseButton()!==u.Right)?(this.isMouseDown_=!1,this.mouseMoved_(e),this.hittedView_&&this.sendEvent(t,this.hittedView_),this.hittedView_=null,i.unlisten(document,i.EventTypes.MouseMove,this.bindedMouseDragged_),this.monitoringDrag_=!1,i.unlisten(document,i.EventTypes.MouseUp,this.bindedMouseUp_)):void 0},e.prototype.mouseDragged_=function(e){var t;return t=this.eventFromBrowserEvent(e,this.mouseDragged_),this.hittedView_?this.sendEvent(t,this.hittedView_):void 0},e.prototype.sendMouseEnteredForEvent=function(e){return this.mouseEntered_(e)},e.prototype.sendMouseExitedForEvent=function(e){return this.mouseExited_(e)},e.prototype.sendClickForEvent=function(e){return this.isMouseDown_||this.mouseDown_(e),this.mouseUp_(e)},e.prototype.sendEvent=function(e,t){var i,n,o,r,s,a,h,p,c,_,y,g,f;if(e.pressedMouseButton()!==u.Right||d.touch){if(e.pressedMouseButton()===u.Left||d.touch)switch(e.type()){case l.MouseDown:if(t.mouseDown&&t.mouseDown(e),!d.touch){for(p=t.gestureRecognizers_,y=[],n=0,s=p.length;s>n;n++)i=p[n],y.push(i.mouseDown(e));return y}break;case l.MouseUp:if(t.mouseUp&&t.mouseUp(e),!d.touch){for(c=t.gestureRecognizers_,g=[],o=0,a=c.length;a>o;o++)i=c[o],g.push(i.mouseUp(e));return g}break;case l.MouseDragged:if(t.mouseDragged&&t.mouseDragged(e),!d.touch){for(_=t.gestureRecognizers_,f=[],r=0,h=_.length;h>r;r++)i=_[r],f.push(i.mouseDragged(e));return f}break;case l.TouchCancel:if(t.mouseCancelled)return t.mouseCancelled()}}else if(e.type()===l.MouseDown){for(;t&&!t.contextMenu;)t=t.parent();if(t&&t.contextMenu)return t.contextMenu(e)}},e.prototype.touchStart_=function(e){var t;return t=this.eventFromBrowserEvent(e,this.mouseDown_),this.hittedView_=this.hitTest(t.locationInWindow(),t),this.hittedView_===this&&(this.hittedView_=null),this.hittedView_?this.sendEvent(t,this.hittedView_):void 0},e.prototype.touchMove_=function(e){var t;return this.hittedView_?(t=this.eventFromBrowserEvent(e,this.mouseDragged_),this.sendEvent(t,this.hittedView_)):void 0},e.prototype.touchEnd_=function(e){var t;return this.hittedView_&&(t=this.eventFromBrowserEvent(e,this.mouseUp_),this.sendEvent(t,this.hittedView_)),this.hittedView_=null},e.prototype.touchCancel_=function(e){var t;return this.hittedView_?(t=this.eventFromBrowserEvent(e,this.touchCancel_),this.sendEvent(t,this.hittedView_),this.hittedView_=null):void 0},e.prototype.addGestureRecognizer=function(e){return this.gestureRecognizers_.push(e),e.setView(this)},e.prototype.removeGestureRecognizer=function(e){return e.setView(null),d.remove(this.gestureRecognizers_,e)},e}(),c.exports=a,c.exports||p}),sublime_.define("ui/font",["ui/view","ui/style","core/util","core/dom","graphics/size"],function(e,t,i,n,o){var r,s,a,l,u,h;return h=i._,u={},l={},s={HelveticaNeue:"HelveticaNeue",Helvetica:"Helvetica",Arial:"Arial",SansSerif:"sans-serif"},a={Italic:"italic"},r=function(){function i(e){null==e&&(e={}),this.size=e.size||12,this.family=e.family||[s.HelveticaNeue,s.Helvetica,s.Arial,s.SansSerif],this.weight=e.weight,this.style=e.style,this.lineHeight=e.lineHeight}return i.className="Font",i.fontWithSize=function(e){return new i({size:e})},i.supportedCssProperties=function(){var e;return i.supportedCssProperties_||(i.supportedCssProperties_={},e=document.createElement("div"),i.supportedCssProperties_.textShadow=void 0!==e.style.textShadow),i.supportedCssProperties_},i.prototype._toCss=function(){var e,t;return e={padding:"0",margin:"0",border:"none",overflow:"visible","float":"none","-moz-border-radius":"0","-webkit-border-radius":"0","border-radius":"0","-moz-box-shadow":"none","-webkit-box-shadow":"none","box-shadow":"none","text-transform":"none","text-decoration":"none","max-width":"none"},t={fontSize:""+this.size+"px",fontFamily:""+this.family.join(",")},this.weight&&(t.fontWeight=this.weight),this.style&&(t.fontStyle=this.style),this.lineHeight&&(t.lineHeight=this.lineHeight+"px"),h.extend(t,e),t},i.prototype.sizeForString=function(i,r){var s,a,l;return l=n.create("span"),l.id=t.SublimeId,a=this._toCss(),h.extend(a,{position:"absolute",left:"-9000px",top:"-9000px",overflow:"hidden"}),r&&h.extend(a,{maxWidth:r+"px"}),e.setCssToElement(l,a),l.childNodes[0]?l.childNodes[0].nodeValue=i:l.innerText?l.innerText=i:l.innerHTML=i,document.body.appendChild(l),s=h.size(l),r||!h.Firefox&&!h.IE||(s.width+=1),document.body.removeChild(l),new o(s.width,s.height)},i}(),l.FontFamily=s,l.FontStyle=a,l.Font=r,u.exports||l}),sublime_.define("ui/full_window",["graphics/point","graphics/size","graphics/rect","core/events","core/util","ui/positioning","ui/content_mode"],function(e,t,i,n,o,r,s){var a,l,u,h,p;return p=o._,l=r.Positioning,h={},u={},a=function(){function o(){}return o.className="FullWindow",o.prototype.initFullWindow=function(){return this.fullWindow_=!1,o.listenEvents_()},o.listenEvents_=function(){return o.listeningEvents_?void 0:(o.listeningEvents_=!0,n.listenKeyDown(o.onFullWindowKeyDown_),n.listenKeyUp(o.onFullWindowKeyUp_))},o.onFullWindowKeyDown_=function(e){var t;if(!o.keydown_&&(o.keydown_=!0,e===n.Keys.Esc&&o.fullWindowViews.length>0&&(t=p.last(o.fullWindowViews)))){if(!t.canExitFullWindow)return t.exitFullWindow();if(t.canExitFullWindow())return t.exitFullWindow()}},o.onFullWindowKeyUp_=function(){return o.keydown_=!1},o.fullWindowViews=[],o.scrollbarHidden=!1,o.supportsFullWindow=function(){return!0},o.windowFrame=function(){var e,n;return e=new i,n=p.viewportSize(),e.size=new t(n.width,n.height),e},o.prototype.isFullWindow=function(){return this.fullWindow_},o.prototype.shouldHideScrollbar_=function(e){return!o.scrollbarHidden&&e.disableScroll},o.prototype.shouldShowScrollbar_=function(e){return o.scrollbarHidden&&!e.disableScroll},o.prototype.enterFullWindow=function(e){var t,i,n;return null==e&&(e={}),t={disableScroll:!0},p.extend(t,e),this.willEnterFullWindow&&this.willEnterFullWindow(),this.fullWindow_=!0,this.fullWindowOptions_=t,o.fullWindowViews.push(this),this.rootView()!==this&&this.rootView().setUserInteractionEnabled(!1),n=null!=this.currentCss_["z-index"]?this.currentCss_["z-index"]:"auto",this.infoBeforeFullMode_={parent:this.parent(),frame:this.frame(),autoresizingMask:this.autoresizingMask,zIndex:n,position:this.currentCss_.position||"absolute",rootView:this.rootView()},this.appendTo(window,{virtually:!0}),p.IE6?(this.shouldHideScrollbar_(t)&&this.hideScrollbars(),i=p.clientPosition(this._element()),this.css({"z-index":"999999",top:-i.y+"px",left:-i.x+"px"})):(this.css({position:"fixed","z-index":"999999",top:0,left:0}),this.shouldHideScrollbar_(t)&&this.hideScrollbars()),1===o.fullWindowViews.length&&this.sendViewToFromPage_(),this.setFrame(o.windowFrame()),this.setAutoresizingMask(l.AutoresizingMask.FlexibleWidth|l.AutoresizingMask.FlexibleHeight),this.didEnterFullWindow?this.didEnterFullWindow():void 0},o.prototype.sendViewToFromPage_=function(){var e,t,i,n;if(e=this.rootView(),this.alteredZIndexes_=[],e){for(i=e._element().parentNode,n=[];null!=i&&i!==document.body&&i!==document;)t=p.computedZIndex(i),null!=t&&"auto"!==t&&(this.alteredZIndexes_.push({element:i,zIndex:t}),p.setStyle(i,{zIndex:"999997"})),n.push(i=i.parentNode);return n}},o.prototype.sendViewToOriginalPosition_=function(){var e,t,i,n,o;for(o=this.alteredZIndexes_,i=0,n=o.length;n>i;i++)t=o[i],p.setStyle(t.element,{zIndex:t.zIndex}),t.element;return e=[]},o.prototype.exitFullWindow=function(){var e,t,i;return this.fullWindow_&&(this.willExitFullWindow&&this.willExitFullWindow(),this.fullWindow_=!1,p.remove(o.fullWindowViews,this),t=o.fullWindowViews.length,1>t?o.scrollbarHidden&&this.showScrollbars():(i=o.fullWindowViews[t-1].fullWindowOptions_,this.shouldShowScrollbar_(i)&&this.showScrollbars()),this.css({position:this.infoBeforeFullMode_.position,"z-index":this.infoBeforeFullMode_.zIndex}),this.setFrame(this.infoBeforeFullMode_.frame),this.setAutoresizingMask(this.infoBeforeFullMode_.autoresizingMask),this.infoBeforeFullMode_.parent&&this.appendTo(this.infoBeforeFullMode_.parent),e=this.contentMode(),(e===s.ScaleAspectFit||e===s.ScaleToFill)&&this.windowDidResize_(),0===o.fullWindowViews.length&&this.sendViewToOriginalPosition_(),this.infoBeforeFullMode_.rootView!==this&&this.infoBeforeFullMode_.rootView.setUserInteractionEnabled(!0),this.didExitFullWindow)?this.didExitFullWindow():void 0},o.prototype.hideScrollbars=function(){var t;return o.scrollbarHidden=!0,p.IE6?document.all&&document.createAttribute&&"BackCompat"!==document.compatMode?document.getElementsByTagName("html")[0].style.overflow="hidden":document.body.style.overflow="hidden":(o.bodyOverflow_=new e(p.computedOverflowX(document.body),p.computedOverflowY(document.body)),t={overflowX:"hidden",overflowY:"hidden"},p.setStyle(document.body,t))},o.prototype.showScrollbars=function(){var e,t;return o.scrollbarHidden=!1,p.IE6?document.all&&document.createAttribute&&"BackCompat"!==document.compatMode?document.getElementsByTagName("html")[0].style.overflow="":document.body.style.overflow="":(e=o.bodyOverflow_,t={},t.overflowX=p.isNumber(e.x)?e.x:"visible",t.overflowY=p.isNumber(e.y)?e.y:"visible",p.setStyle(document.body,t),e=null)},o}(),h.exports=a,h.exports||u}),sublime_.define("ui/fullscreen",["ui/positioning","core/util","core/events","ui/content_mode","graphics/size","graphics/rect"],function(e,t,i,n,o,r){var s,a,l,u,h;return a=e.Positioning,h=t._,u={},l={},s=function(){function e(){}return e.className="Fullscreen",e.API=function(){var t,n,o;return o=document.documentElement,o.mozRequestFullScreen?t={id:"moz",enabled:document.mozFullScreenEnabled,enter:"mozRequestFullScreen",exit:"mozCancelFullScreen",isFullscreen:function(){return document.mozFullScreen},element:function(){return document.mozFullScreenElement},event:"mozfullscreenchange",errorEvent:"mozfullscreenerror",escEventSupported:!1}:o.webkitRequestFullscreen?(n=h.gtCH21||h.Safari,t={id:"webkit-2",enabled:(!h.embed||n)&&document.webkitFullscreenEnabled,enter:"webkitRequestFullscreen",exit:"webkitExitFullscreen",isFullscreen:function(){return null!=document.webkitFullscreenElement},element:function(){return document.webkitFullscreenElement},event:"webkitfullscreenchange",errorEvent:"webkitfullscreenerror",escEventSupported:h.Safari},h.embed&&h.Safari&&i.listen(window,i.EventTypes.Resize,function(){var i;return i=e.currentFullscreenView,t.isFullscreen()||!i||i.willExitCallbackFired_?void 0:e.currentFullscreenView.didExitFullscreen_()})):o.webkitRequestFullScreen&&(t={id:"webkit-1",enabled:!h.embed,enter:"webkitRequestFullScreen",exit:"webkitCancelFullScreen",isFullscreen:function(){return document.webkitIsFullScreen},element:function(){return document.webkitCurrentFullScreenElement},event:"webkitfullscreenchange",errorEvent:"webkitfullscreenerror",escEventSupported:!1}),t}(),e.supportsFullscreen=function(){return e.API&&e.API.enabled&&(!h.Firefox||h.compareVersions(h.version,"10.0")>=0)&&(!h.Chrome||h.compareVersions(h.version,"535.2")>=0)?!0:!1},e.currentFullscreenView=null,e.startTrackingFullscreenEvents_=function(){var t;return t=e.API,t&&(i.listen(document,t.event,e.fullscreenDidChange_),i.listen(document,t.errorEvent,e.fullscreenDidFail_),t.escEventSupported)?i.listen(document,i.EventTypes.KeyDown,e.didTapEscButton_):void 0},e.stopTrackingFullscreenEvents_=function(){var t;return t=e.API,t&&(i.unlisten(document,t.event,e.fullscreenDidChange_),i.unlisten(document,t.errorEvent,e.fullscreenDidFail_),t.escEventSupported)?i.unlisten(document,i.EventTypes.KeyDown,e.didTapEscButton_):void 0},e.didTapEscButton_=function(t){return e.API.escEventSupported&&t.keyCode===i.Keys.Esc&&e.currentFullscreenView?e.currentFullscreenView.willExitFullscreen_():void 0},e.fullscreenDidChange_=function(){var t;return t=e.currentFullscreenView,t?e.API.isFullscreen()?t.didEnterFullscreen_():t.didExitFullscreen_():void 0},e.fullscreenDidFail_=function(){var t;return t=e.currentFullscreenView,t?t.didFailEnteringFullscreen_():void 0},e.canEnterFullscreen=function(){return e.supportsFullscreen()&&!e.API.isFullscreen()},e.canExitFullscreen=function(t){return e.supportsFullscreen()&&e.API.isFullscreen()&&e.currentFullscreenView===t},e.prototype.didEnterFullscreen_=function(){var e,t;return this.didEnterFullscreenFired_?void 0:(this.didEnterFullscreenFired_=!0,h.Safari&&this.css({"min-height":"0","max-width":"none"}),this.setContentMode(n.TopLeft),e=h.viewportSize(),t=new o(window.innerWidth,window.innerHeight),this.setAutoresizingMask(a.AutoresizingMask.FlexibleHeight|a.AutoresizingMask.FlexibleWidth),this.isFullWindow()||this.appendTo(window,{virtually:!0}),this.css({"min-height":"0","max-width":"none"}),this.setAutoresizingMask(a.AutoresizingMask.FlexibleHeight|a.AutoresizingMask.FlexibleWidth),this.setFrame(new r(0,0,t.width,t.height)),this.didEnterFullscreen?this.didEnterFullscreen():void 0)},e.prototype.willExitFullscreen_=function(){return this.didEnterFullscreenFired_||this.didEnterFullscreen(),this.willExitCallbackFired_=!0,this.willExitFullscreen?this.willExitFullscreen():void 0},e.prototype.didExitFullscreen_=function(){var t,i,n;return this.willExitCallbackFired_||this.willExitFullscreen_(),this.willExitCallbackFired_=!1,this.didEnterFullscreenFired_=!1,e.currentFullscreenView=null,!this.infoBeforeFullMode_.fullwindow&&this.infoBeforeFullMode_.parent&&this.appendTo(this.infoBeforeFullMode_.parent),this.setContentMode(this.infoBeforeFullMode_.contentMode),this.infoBeforeFullMode_.fullwindow?(n=h.viewportSize(),i=n.width,t=n.height,this.setFrame(new r(0,0,i,t))):this.setFrame(this.infoBeforeFullMode_.frame),this.infoBeforeFullMode_.rootView!==this&&this.infoBeforeFullMode_.rootView.setUserInteractionEnabled(!0),this.setAutoresizingMask(this.infoBeforeFullMode_.autoresizingMask),this.didExitFullscreen&&this.didExitFullscreen(),e.stopTrackingFullscreenEvents_()},e.prototype.isFullscreen=function(){var t;return(t=e.API)?t.element()===this._element():void 0},e.prototype.enterFullscreen=function(){var t;return e.canEnterFullscreen()?(e.startTrackingFullscreenEvents_(),e.currentFullscreenView=this,this.infoBeforeFullMode_={parent:this.parent(),rootView:this.rootView(),fullwindow:this.isFullWindow(),frame:this.frame().clone(),autoresizingMask:this.autoresizingMask,contentMode:this.contentMode()},this.rootView()!==this&&this.rootView().setUserInteractionEnabled(!1),this.willEnterFullscreen&&this.willEnterFullscreen(),h.Safari&&(t=this.size(),this.css({width:"auto",height:"auto","min-height":t.height+"px","max-width":t.width+"px"})),this._element()[e.API.enter]()):void 0},e.prototype.didFailEnteringFullscreen_=function(){return this.didFailEnteringFullscreen&&this.didFailEnteringFullscreen(),e.stopTrackingFullscreenEvents_(),e.currentFullscreenView=null,!this.infoBeforeFullMode_.fullwindow&&this.infoBeforeFullMode_.parent&&this.appendTo(this.infoBeforeFullMode_.parent),this.infoBeforeFullMode_.rootView!==this&&this.infoBeforeFullMode_.rootView.setUserInteractionEnabled(!0),this.setAutoresizingMask(this.infoBeforeFullMode_.autoresizingMask),this.infoBeforeFullMode_={}},e.prototype.exitFullscreen=function(){return e.canExitFullscreen(this)?(this.willExitFullscreen_(),document[e.API.exit]()):void 0},e}(),u.exports=s,u.exports||l}),sublime_.define("ui/gesture_recognizer",[],function(){var e,t,i;return i={},t={},e={Possible:0,Recognized:1,Failed:2},i.exports=e,i.exports||t});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("ui/image_view",["core/util","core/dom","ui/view","graphics/size","ui/content_mode"],function(e,t,i,n,o){var r,s,a,l;return l=e._,a={},s={},r=function(e){function r(e){r.__super__.constructor.apply(this,arguments),this._image_=e,this.containerSize_=n.zero(),this.setUserInteractionEnabled(!1),this._imageElement_=t.create("img"),i.setCssToElement(this._imageElement_,{position:"absolute",display:"block"}),this.contentMode_=o.ScaleAspectFit}return __extends(r,e),r.className="ImageView",r.prototype.setImage=function(e){var n;return this._image_=e,n=e&&e.src?e.src:"",this._imageElement_.src=n,t.insertChildAt(this._element(),this._imageElement_,0),l.IE6&&setTimeout(l.bind(this,function(){return i.addCssToElement(this._imageElement_,{filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+n+"', sizingMethod='scale')"}),this._imageElement_.src=l.HOST+"/c/sa/2.6.5/blank.gif"}),0),this.layoutSubviews()},r.prototype.imageSize=function(){var e,t,i,o;return o=this._image_,o?(i=/@2x\.png$/.test(o.src),t=o.width,e=o.height,i&&(t*=.5,e*=.5),new n(t,e)):n.zero()},r.prototype._image=function(){return this._image_},r.prototype.layoutSubviews=function(){var e,t,n,r,s,a,u;if(this._image_)switch(u=this._image_,t=this.bounds().size,e=t.width/t.height,s=this.imageSize(),a=s.width,r=s.height,n=a/r,this.contentMode()){case o.ScaleAspectFill:return e>=n?this.scaleImageToFitContainerWidth_(t,n):n>e?this.scaleImageToFitContainerHeight_(t,n):this.scaleImageAndSetTopLeft_(u,a,r);case o.ScaleAspectFit:return e>=n?this.scaleImageToFitContainerHeight_(t,n):n>e?this.scaleImageToFitContainerWidth_(t,n):this.scaleImageAndSetTopLeft_(u,a,r);case o.ScaleAspectWidthFit:return e>=n?this.scaleImageToFitContainerWidth_(t,n):n>e?this.scaleImageToFitContainerWidth_(t,n):this.scaleImageAndSetTopLeft_(u,a,r);case o.Center:return a>t.width&&(a=t.width),r>t.height&&(r=t.height),i.addCssToElement(this._imageElement_,{width:a+"px",height:r+"px",top:l.round(.5*(t.height-r),1)+"px",left:l.round(.5*(t.width-a),1)+"px",maxWidth:u.width+"px",maxHeight:"none"}),this._imageElement_.width=a,this._imageElement_.height=r;case o.TopLeft:return a>t.width&&(a=t.width),r>t.height&&(r=t.height),this.scaleImageAndSetTopLeft_(u,a,r)}},r.prototype.scaleImageToFitContainerHeight_=function(e,t){var n;return n=e.height*t,i.addCssToElement(this._imageElement_,{width:l.round(n,1)+"px",height:e.height+"px",top:0,left:l.round((e.width-n)/2,1)+"px",maxWidth:n.toFixed(2)+"px",maxHeight:"none"}),this._imageElement_.width=l.round(n,1),this._imageElement_.height=e.height},r.prototype.scaleImageToFitContainerWidth_=function(e,t){var n;return n=e.width/t,i.addCssToElement(this._imageElement_,{width:e.width+"px",height:l.round(n,1)+"px",top:l.round(.5*(e.height-n),1)+"px",left:0,maxWidth:e.width+"px",maxHeight:"none"}),this._imageElement_.width=e.width,this._imageElement_.height=l.round(n)},r.prototype.scaleImageAndSetTopLeft_=function(e,t,n){return i.addCssToElement(this._imageElement_,{width:t+"px",height:n+"px",top:"0px",left:"0px",maxWidth:e.width+"px",maxHeight:"none"}),this._imageElement_.width=t,this._imageElement_.height=n},r}(i),a.exports=r,a.exports||s});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("ui/label",["ui/view","core/util"],function(e,t){var i,n,o,r,s;return s=t._,r={},o={},n={Left:0,Center:1,Right:2},i=function(e){function t(e){null==e&&(e={}),t.__super__.constructor.call(this,this.tagName()),this.setUserInteractionEnabled(!1),this.options_={},this.set(e),this.stringToComputeIntrinsicSize_=null}return __extends(t,e),t.className="Label",t.prototype.tagName=function(){return"span"},t.prototype.intrinsicSize=function(){return this.text_&&this.font_?this.textLength_&&this.textLength_===this.text.length?this.intrinsicSize_:(this.textLength_=this.text.length,this.intrinsicSize_=this.sizeOfString(this.stringToComputeIntrinsicSize_||this.text_)):this.size()},t.baseCss=function(){return{overflow:"hidden","text-align":"left"}},t.prototype.setIntrinsicSizeForString=function(e,t){var i,n;return null==t&&(t=!1),this.stringToComputeIntrinsicSize_=e,this.textLength_=0,n=this.intrinsicSize(),i=this.frame(),i.size=n,this.setFrame(i)},t.prototype.set=function(e){var t,i;switch(null==e&&(e={}),i={},s.extend(this.options_,e),e.color&&(i.color=e.color),e.fontSize&&(i.fontSize=""+e.fontSize+"px"),t=e.font,t&&this.setFont(t),e.textAlignment){case n.Left:i.textAlign="left";break;case n.Center:i.textAlign="center";break;case n.Right:i.textAlign="right"}return this.css(i)},t.prototype.sizeOfCurrentString=function(e){return this.sizeOfString(this.text_,e)},t.prototype.sizeOfString=function(e,t){return this.font_.sizeForString(e,t)},t.prototype.setFont=function(e){return this.font_=e,this.css(e._toCss())},t.prototype.font=function(){return this.font_},t.prototype.setText=function(e){var t,i;return this.text_=e,i=this._element(),t=function(){return i.childNodes[0]?i.childNodes[0].nodeValue=e:i.innerText?i.innerText=e:i.innerHTML=e},s.IE?setTimeout(t,0):t()},t.prototype.text=function(){return this.text_},t}(e),o.LabelTextAlignment=n,o.Label=i,r.exports||o});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);
return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("ui/link",["ui/label","core/util","core/events"],function(e,t,i){var n,o,r,s,a;return n=e.Label,a=t._,s={},r={},o=function(e){function t(){t.__super__.constructor.apply(this,arguments),this.url_=null,i.listen(this._element_,i.EventTypes.Click,a.bind(this,this.didTapLink_))}return __extends(t,e),t.className="Link",t.prototype.setURL=function(e){return this.url_=e,this._element_.href=e},t.prototype.tagName=function(){return"a"},t.prototype.didTapLink_=function(e){return e.preventDefault&&e.preventDefault(),window.open(this.url_)},t}(n),s.exports=o,s.exports||r});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("ui/list_view",["ui/view","ui/button","ui/slider","core/util","core/events","ui/event","graphics/rect"],function(e,t,i,n,o,r,s){var a,l,u,h,p,c,d;return u=i.Slider,h=i.SliderAxis,d=n._,a=r.Event,c={},p={},l=function(i){function n(){n.__super__.constructor.apply(this,arguments),this.scrollView_=new e("span"),this.append(this.scrollView_),this.scrollView_.css({overflow:"hidden"}),this.contentView_=new e("ul"),this.scrollView_.append(this.contentView_),this.itemHeight||(this.itemHeight=20),this.rightScrollbar=!0,o.listenMouseWheel(this._element_,d.bind(this,this.onMouseWheel_)),this.items_=[]}return __extends(n,i),n.className="ListView",n.prototype.setDelegate=function(e){return this.delegate_=e},n.prototype.items=function(){return this.items_},n.prototype.selectedItem=function(){return null!=this.selectedIndex_?this.items_[this.selectedIndex_]:void 0},n.prototype.selectedIndex=function(){return this.selectedIndex_},n.prototype.selectItemAtIndex=function(e){var t;return null!=this.selectedIndex_&&this.selectedIndex_>=0&&(t=this.items_[this.selectedIndex_],this.emit({didUnselectItem:[t]})),this.selectedIndex_=e,e>=0?(t=this.items_[e],this.emit({didSelectItem:[t]})):void 0},n.prototype.onMouseWheel_=function(e){var t,i,n,o,r;return e||(e=window.event),this.scrollbarEnabled?(t=new a(this,e),t.preventDefault(),o=.1*t.wheelOffset(),n=this.contentView_.frame(),i=Math.max(-this.scrollableHeight,n.origin.y+o),i>0&&(i=0),n.origin.y!==i&&(n.origin.y=i,this.contentView_.setFrame(n)),r=Math.abs(i)/this.scrollableHeight,this.scrollbar().setValue(1-r)):void 0},n.prototype.listenItem_=function(e){return e.onMouseUpInside(d.bind(this,function(){var t;return t=d.indexOf(this.items_,e),this.selectItemAtIndex(t),this.delegate_.didSelectItemAtIndex(this,t)}))},n.prototype.scrollbar=function(){return this.scrollbar_||(this.scrollbar_=new u(h.Vertical),this.scrollbar_.setValue(1),this.scrollbar_.setDelegate(this)),this.scrollbar_},n.prototype.reloadData=function(){var i,n,o,r,a,l;for(l=this.items_,r=0,a=l.length;a>r;r++)o=l[r],o.removeFromParent();if(this.items_=[],this.selectedIndex_=null,this.delegate_){for(i=this.delegate_.numberOfItemsInList(this),n=0;i>n;)o=new t("li"),o.css({overflow:"hidden"}),o.setDisableLabelAutoLayout(!0),this.emit({didCreatedItem:[o]}),o.label().setText(this.delegate_.itemTextAtIndex(this,n)),this.listenItem_(o),this.items_.push(o),this.contentView_.append(o),n++;return this.scrollView_.setFrame(this.bounds()),this.scrollView_.setAutoresizingMask(e.AutoresizingMask.FlexibleWidth|e.AutoresizingMask.FlexibleHeight),this.contentView_.setFrame(new s(0,0,this.size().width,i*this.itemHeight))}},n.prototype.layoutSubviews=function(){var e,t,i,n,o,r,a,l,u,h;for(n=this.size(),e=this.itemHeight,this.scrollbarEnabled?this.append(this.scrollbar()):this.scrollbar().removeFromParent(),u=this.items_,h=[],t=a=0,l=u.length;l>a;t=++a)i=u[t],o=this.scrollbarEnabled?n.width-this.scrollbarWidth-this.scrollbarMargin:n.width,this.rightScrollbar||(o=n.width-this.scrollbarMargin),r=this.scrollbarEnabled&&!this.rightScrollbar?this.scrollbarMargin:0,h.push(i.setFrame(new s(r,t*e,o,e)));return h},n.prototype.isScrolling=function(){return this.scrollbar().isDragging()},n.prototype.sliderWillBeginDragging=function(){},n.prototype.sliderDidDrag=function(e){var t;return t=this.contentView_.frame(),t.origin.y=-this.scrollableHeight*(1-e.value()),this.contentView_.setFrame(t)},n.prototype.sliderDidEndDragging=function(){return this.delegate_.listDidEndScrolling(this)},n}(e),c.exports=l,c.exports||p}),sublime_.define("ui/pinch_gesture_recognizer",["core/util","core/events","ui/event","ui/gesture_recognizer"],function(e,t,i,n){var o,r,s,a,l;return l=e._,o=i.Event,a={},s={},r=function(){function e(){this.gestureStart=l.bind(this,this.gestureStart_),this.gestureEnd=l.bind(this,this.gestureEnd_),this.gestureChange=l.bind(this,this.gestureChange_),this.view_=null}return e.className="PinchGestureRecognizer",e.prototype.setView=function(e){var i;return this.view_&&(t.unlisten(this.view_._element(),t.EventTypes.GestureStart,this.gestureStart),t.unlisten(this.view_._element(),t.EventTypes.GestureChange,this.gestureChange),t.unlisten(this.view_._element(),t.EventTypes.GestureEnd,this.gestureEnd)),this.view_=e,e?(i=e._element(),t.listen(i,t.EventTypes.GestureStart,this.gestureStart),t.listen(i,t.EventTypes.GestureEnd,this.gestureEnd),t.listen(i,t.EventTypes.GestureChange,this.gestureChange)):void 0},e.prototype.gestureStart_=function(e){return this.state=n.Possible,this.refEvent=new o(this.view_.rootView(),e),this.startScale=e.scale,e.preventDefault()},e.prototype.gestureChange_=function(e){var t,i,r,s,a;return this.state===n.Possible?(e.preventDefault(),r=new o(this.view_.rootView(),e),e.scale-this.startScale>.2&&(this.startPoint=this.refEvent.locationInWindow(),this.point=r.locationInWindow(),t=this.point.difference(this.startPoint),i=r.timestamp-this.refEvent.timestamp,s=Math.pow(t.x,2)+Math.pow(t.y,2),a=s/i,a>.8&&(this.state=n.Recognized,this.handleGesture&&this.handleGesture(r))),this.refEvent=r):void 0},e.prototype.gestureEnd_=function(){},e}(),a.exports=r,a.exports||s});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("ui/plugin_view_controller",["core/util","core/options","ui/view_controller"],function(e,t,i){var n,o,r,s;return s=e._,r={},o={},n=function(e){function i(){i.__super__.constructor.apply(this,arguments),this.dirtySkin_=!1,this.delegate_=null}return __extends(i,e),i.className="PluginViewController",i.prototype.setDelegate=function(e){return this.delegate_=e},i.prototype.delegate=function(){return this.delegate_},i.prototype.defaultOptions=function(){return{}},i.prototype.defaultAllowedOptions=function(){return{}},i.prototype.dataSettings=function(){var e;return this.dataSettings_||(e=this.loadDataSettings(),this.dataSettings_=e),this.dataSettings_},i.prototype.loadDataSettings=function(){return{}},i.prototype.compoundDataSettings=function(){return{}},i.prototype.options=function(){return this.options_},i.prototype.setOptions=function(e,i){var n;return null==e&&(e={}),null==i&&(i={}),n=this.defaultAllowedOptions(),s.deepExtend(n,e),this.options_=new t(n),this.options_.extend(this.defaultOptions()),this.options_.extend(i,{verify:!0}),this.options_.extendWithDataSettings(this.dataSettings(),this.compoundDataSettings())},i.prototype.load=function(e,t){return null==e&&(e={}),null==t&&(t={}),this.setOptions(e,t)},i.prototype.unload=function(){return this.view_&&(this.view_.removeFromParent(),this.view_=null),this.delegate_=null},i.prototype.name=function(){},i.prototype.tag=0,i.prototype.type=function(){},i.prototype.viewDidLoad=function(){},i.prototype.viewDidAppear=function(){return this.dirtySkin_?this.updateViewForSkin(this,this.skin_.get(this.constructor.className),this.view()):void 0},i.prototype.didSetSkin=function(){},i.prototype.updateSkin=function(){return this.skin_?this.setSkin(this.skin_):void 0},i.prototype.setSkin=function(e){return this.skin_=e,this.isViewLoaded()&&this.view().parent()?this.updateViewForSkin(this,e.get(this.constructor.className),this.view()):this.dirtySkin_=!0},i.prototype.updateViewForSkin=function(e,t,i){return t&&t.apply(e,[e.view(),i.parentSize()]),this.dirtySkin_=!1,this.didSetSkin()},i}(i),r.exports=n,r.exports||o}),sublime_.define("ui/positioning",["core/util","core/dom","core/events","graphics/point","graphics/size","graphics/rect","ui/content_mode"],function(e,t,i,n,o,r,s){var a,l,u,h,p;return p=e._,h={},u={},a=function(e){var i;return i=[e],i.append=function(e,i){return null==i&&(i={}),p.isDef(i.afterChild)?a.isNode(i.afterChild)?t.insertSiblingAfter(e,i.afterChild):t.insertChildAt(this[0],e,0):null!=i.index?t.insertChildAt(this[0],e,i.index):this[0].appendChild(e)},i},a.create=function(e){return document.createElement(e)},a.isNode=function(e){return e===window||e&&e.nodeType&&1===e.nodeType},l=function(){function e(){}return e.className="Positioning",e.AutoresizingMask={None:0,FlexibleLeftMargin:1,FlexibleWidth:2,FlexibleRightMargin:4,FlexibleTopMargin:8,FlexibleHeight:16,FlexibleBottomMargin:32},e.prototype.initPositioning=function(){return this.size_=o.zero(),this.computedSize_=o.zero(),this.root_=!1,this.autoresizingMask=e.AutoresizingMask.None,this.rootView_=null,this.origin_={},this.computedOrigin_=n.zero(),this.children_=[],this.dirtyLayout_=!0,this.bindedWindowDidResize_=p.bind(this,this.windowDidResize_)},e.prototype.appendTo=function(e,t){var i,n;if(null==t&&(t={}),a.isNode(e)){if(i=this._element_.parentNode===e,i&&(t.virtually=!0),this.removeFromParent(t),this.willMoveToParent&&this.willMoveToParent(e),this.willMoveToRootView_(this),i||t.virtually===!0||a(e).append(this._element_,t),this.parent_=e,this.root_=!0,this.rootView_=this,this.dirtyLayout_&&this.setLayout_(this.frame(),this.autoresizingMask),this.shouldMonitorParentSize_()&&this.monitorParentSize_(),this.didMoveToParent&&this.didMoveToParent(this),this.didMoveToRootView_(this),n=this._windowForElement(e))return this.didMoveToWindow_(n)}else if(!t.virtually)return e.append(this,t)},e.prototype.willRemoveFromWindow_=function(e){var t,i,n,o;for(o=this.children(),i=0,n=o.length;n>i;i++)t=o[i],t.willRemoveFromWindow_(e);return this.willRemoveFromWindow&&this.willRemoveFromWindow(e),this.emit({willRemoveFromWindow:[e]})},e.prototype.didRemoveFromWindow_=function(e){var t,i,n,o;for(o=this.children(),i=0,n=o.length;n>i;i++)t=o[i],t.didRemoveFromWindow_(e);return this.didRemoveFromWindow&&this.didRemoveFromWindow(e),this.emit({didRemoveFromWindow:[e]})},e.prototype.didMoveToWindow_=function(e){var t,i,n,o;for(o=this.children(),i=0,n=o.length;n>i;i++)t=o[i],t.didMoveToWindow_(e);return this.didMoveToWindow?this.didMoveToWindow(e):void 0},e.prototype._windowForElement=function(e){var t;return null!=e&&e===e.window?e:(t=e.ownerDocument)?t.parentWindow||t.defaultView:void 0},e.prototype.children=function(){return this.children_},e.prototype.rootView=function(){return this.rootView_},e.prototype.center=function(e){var t,i,n;return null==e&&(e={}),i=null!=e.size?e.size:this.size(),n=null!=e.view?e.view.size():this.parentSize(),t=new r((n.width-i.width)/2,(n.height-i.height)/2,i.width,i.height),this.setFrame(t)},e.prototype.isRoot=function(){return this.root_},e.prototype.shouldMonitorParentSize_=function(){var e;return this.parent_===window?!0:this.isRoot()?(e=this.contentMode(),e===s.ScaleAspectFit||e===s.ScaleToFill):void 0},e.prototype.stopMonitoringParentSize_=function(){return this.monitoringParentSize_=!1,i.unlisten(window,i.EventTypes.Resize,this.bindedWindowDidResize_)},e.prototype.monitorParentSize_=function(){return this.monitoringParentSize_?void 0:(this.monitoringParentSize_=!0,this.monitorWindowSize())},e.prototype.monitorElementSize_=function(e){return null==e&&(e=200),this.rootSizeTimer_=setTimeout(p.bind(this,function(){var e;if(this.hasParent())if(e=this.parentSize(),e.width===this.computedSize_.width&&e.height===this.computedSize_.height){if(this.rootSizeTimer_)return this.monitorParentSize_()}else if(this.parentDidResize(e),this.rootSizeTimer_)return this.monitorParentSize_(50)}),e)},e.prototype.monitorWindowSize=function(){return i.listen(window,i.EventTypes.Resize,this.bindedWindowDidResize_)},e.prototype.windowDidResize_=function(){var e,t,i,n,o,a,l;return n=this.parentSize(),this.parent_===window?this.parentDidResize(n):(this.contentMode_===s.ScaleAspectFit?(e=!0,a=this.size(),o=a.height/a.width,l=n.width,i=n.width*o):this.contentMode_===s.ScaleToFill&&(e=!0,l=n.width,i=n.height),e&&l>0&&i>0?(a=this.size(),p.isDefAndNotNull(l)&&(a.width=l),p.isDefAndNotNull(i)&&(a.height=i),t=new r,t.size=a,this.setFrame(t)):void 0)},e.prototype.setMandatoryCss=function(e){return this.mandatoryCss_=e},e.prototype.parentDidResize=function(t){var i,s,a,l,u,h,c,d,_,y,g,f,m,v,w,b,T,x,P,k,z,S,F,M,A,C,B;if(this.autoresizingMask!==e.AutoresizingMask.None&&this.originalParentSize_){if(T=this.originalParentSize_.clone(),a=!1,l=!1,F=null,M=null,S=null,g=null,b=new r,b.origin=this.origin_,b.size=this.size_,w=new n(T.width-b.maxX(),T.height-b.maxY()),s=new o(t.width-b.maxX()-w.x,t.height-b.maxY()-w.y),c=(this.autoresizingMask&e.AutoresizingMask.FlexibleLeftMargin)===e.AutoresizingMask.FlexibleLeftMargin,y=(this.autoresizingMask&e.AutoresizingMask.FlexibleWidth)===e.AutoresizingMask.FlexibleWidth,d=(this.autoresizingMask&e.AutoresizingMask.FlexibleRightMargin)===e.AutoresizingMask.FlexibleRightMargin,f=c+y+d,x=f>0?1/f:1,c&&(a=!0,F=this.computeOriginX_(b,T.width,w,t.width)),y&&(l=!0,S=this.computeWidth_(b,T.width,w,t.width)),_=(this.autoresizingMask&e.AutoresizingMask.FlexibleTopMargin)===e.AutoresizingMask.FlexibleTopMargin,h=(this.autoresizingMask&e.AutoresizingMask.FlexibleHeight)===e.AutoresizingMask.FlexibleHeight,u=(this.autoresizingMask&e.AutoresizingMask.FlexibleBottomMargin)===e.AutoresizingMask.FlexibleBottomMargin,m=_+h+u,P=m>0?1/m:1,_&&(a=!0,M=this.computeOriginY_(b,T.height,w,t.height)),h&&(l=!0,g=this.computeHeight_(b,T.height,w,t.height)),a&&(v=this.origin_.clone(),p.isDefAndNotNull(F)&&(v.x=F),p.isDefAndNotNull(M)&&(v.y=M),this.computedOrigin_=v,this.updateTrackingAreas()),l){for(z=this.size_.clone(),p.isDefAndNotNull(S)&&(z.width=S),p.isDefAndNotNull(g)&&(z.height=g),this.computedSize_=z,k=this,B=this.children(),A=0,C=B.length;C>A;A++)i=B[A],i.parentDidResize(z.clone());this.updateTrackingAreas(),this.layoutSublayers_(),this.layoutSubviews()}return l&&this.emit({didUpdateSize:[this]}),l||a?this.emit({didUpdateFrame:[this]}):void 0}},e.prototype.append=function(e,t){return null==t&&(t={}),a.isNode(e)?a(this._element()).append(e,t):this.addChild(e,t)},e.prototype.sendChildToBack=function(e){return this.append(e,{index:0})},e.prototype.window=function(){return this._windowForElement(this._element())},e.prototype.removeFromParent=function(e){var t,i,n;return null==e&&(e={}),n=this._windowForElement(this._element()),n&&this.willRemoveFromWindow_(n),this.hasParent()&&(t=this.parent(),this.isRoot()?(this.stopMonitoringParentSize_(),i=this.rootView(),this.willRemoveFromRootView_(i),this.willRemoveFromParent&&this.willRemoveFromParent(t),e.virtually!==!0&&this.removeElement(),this.root_=!1,this.parent_=null,this.rootView_=null,this.dirtyLayout_=!0,this.didRemoveFromRootView_(i),this.didRemoveFromParent&&this.didRemoveFromParent(t)):this.parent().removeChild(this,e)),n?this.didRemoveFromWindow_(n):void 0},e.prototype.removeChild=function(e,t){var i,n;return null==t&&(t={}),n=e.rootView(),e.willRemoveFromRootView_(n),i=this.parent(),e.willRemoveFromParent&&e.willRemoveFromParent(i),p.remove(this.children(),e),e.parent_=null,e.rootView_=null,e.dirtyLayout_=!0,e.originalParentSize_=null,t.virtually!==!0&&e.removeElement(),this.didRemoveChild&&this.didRemoveChild(e),e.didRemoveFromRootView_(n),e.didRemoveFromParent&&e.didRemoveFromParent(i),this.didRemoveChild?this.didRemoveChild(e):void 0},e.prototype.addChild=function(e,i){var n,o,r,s,l;return null==i&&(i={}),n=p.clone(t.children(this._element())),o=p.indexOf(n,e._element()),s=o>=0&&e.parent()!==this,e.removeFromParent({virtually:s}),r=this.rootView(),e.willMoveToParent&&e.willMoveToParent(this),e.willMoveToRootView_(r),e.parent_=this,e.rootView_=r,o>=0&&s?p.insertAt(this.children_,e,o):null!=i.index?(p.insertAt(this.children_,e,i.index),t.insertChildAt(this._element(),e._element(),i.index)):null!=i.before?(o=p.indexOf(n,i.before._element())||0,o=Math.max(0,o-1),p.insertAt(this.children_,e,o),t.insertChildAt(this._element(),e._element(),o)):(this.children_.push(e),a(this._element()).append(e._element(),i)),e.dirtyLayout_&&e.setLayout_(e.frame(),e.autoresizingMask),e.didMoveToParent&&e.didMoveToParent(this),e.didMoveToRootView_(r),(l=this._windowForElement(e._element()))&&e.didMoveToWindow_(l),this.didAppendChild?this.didAppendChild(e):void 0},e.prototype.didMoveToRootView_=function(e){var t,i,n,o;if(e){for(o=this.children(),i=0,n=o.length;n>i;i++)t=o[i],null===t.rootView_&&(t.rootView_=e,t.didMoveToRootView_(e));if(this.didMoveToRootView)return this.didMoveToRootView(e)}},e.prototype.willMoveToRootView_=function(e){var t,i,n,o,r;if(e){for(this.willMoveToRootView&&this.willMoveToRootView(e),o=this.children(),r=[],i=0,n=o.length;n>i;i++)t=o[i],r.push(t.willMoveToRootView_(e));return r}},e.prototype.didRemoveFromRootView_=function(e){var t,i,n,o,r;if(e){for(this.didRemoveFromRootView&&this.didRemoveFromRootView(e),this.emit({didRemoveFromRootView:[e]}),o=this.children(),r=[],i=0,n=o.length;n>i;i++)t=o[i],t.rootView_=null,r.push(t.didRemoveFromRootView_(e));return r}},e.prototype.willRemoveFromRootView_=function(e){var t,i,n,o,r;if(e){for(this.willRemoveFromRootView&&this.willRemoveFromRootView(e),o=this.children(),r=[],i=0,n=o.length;n>i;i++)t=o[i],r.push(t.willRemoveFromRootView_(e));return r}},e.prototype.removeElement=function(){return t.removeNode(this._element())},e.prototype.setParent_=function(e){return e!==this.parent()?e.addChild(this):void 0},e.prototype.parent=function(){return this.parent_},e.prototype.hasParent=function(){return null!=this.parent_},e.prototype.parentSize=function(){var e;return this.isRoot()?(e=this.parent_===window?p.viewportSize():p.contentSize(this.parent_),new o(e.width,e.height)):this.parent().size()},e.prototype.setAutoresizingMask=function(e){return this.autoresizingMask=e,this.setLayout_(this.frame(),e),this.shouldMonitorParentSize_()?this.monitorParentSize_():void 0},e.prototype.setMaxSize=function(e){return this.maxSize_=e},e.prototype.setFrame=function(e){var t,i,n,o,r;if(this.setLayout_(e,this.autoresizingMask),i=this.computedSize_.clone(),this.origin_=e.origin.clone(),this.size_=e.size.clone(),this.computedOrigin_=e.origin.clone(),this.computedSize_=e.size.clone(),!i.isEqualTo(this.computedSize_)){for(this.updateTrackingAreas(),r=this.children(),n=0,o=r.length;o>n;n++)t=r[n],t.parentDidResize(e.size.clone());return this.layoutSublayers_(),this.layoutSubviews(),this.emit({didUpdateFrame:[this]}),this.emit({didUpdateSize:[this]})}},e.prototype.setLayout_=function(e,t){return this.hasParent()||this.isRoot()?(this.originalParentSize_=this.parentSize(),this.setVerticalLayout_(e,t),this.setHorizontalLayout_(e,t),!this.mandatoryCss_||this.isFullWindow()||this.isFullscreen()||this.css(this.mandatoryCss_),this.dirtyLayout_=!1):this.dirtyLayout_=!0},e.prototype.setVerticalLayout_=function(t){var i,n,o,r,s,a,l,u,h,c;return this.hasParent()||this.isRoot()?(l=this.parentSize().height,r=(this.autoresizingMask&e.AutoresizingMask.FlexibleTopMargin)===e.AutoresizingMask.FlexibleTopMargin,o=(this.autoresizingMask&e.AutoresizingMask.FlexibleHeight)===e.AutoresizingMask.FlexibleHeight,n=(this.autoresizingMask&e.AutoresizingMask.FlexibleBottomMargin)===e.AutoresizingMask.FlexibleBottomMargin,a=r+o+n,h=a>0?1/a:1,c="px",u="%",i={},0===a?(i={top:t.origin.y+c,height:t.size.height+c},this.computeOriginY_=function(e){return e.origin.y},this.computeHeight_=function(e){return e.size.height}):1===a?r?(i={height:t.size.height+c,bottom:l-t.maxY()+c},this.computeOriginY_=function(e,t,i,n){return n-e.size.height-i.y},this.computeHeight_=function(e){return e.size.height}):n?(i={top:t.origin.y+c,height:t.size.height+c},this.computeOriginY_=function(e){return e.origin.y},this.computeHeight_=function(e){return e.size.height}):(s=t.size.height===l?"100%":"auto",i={top:0+c,bottom:0+c,marginTop:t.origin.y+c,marginBottom:l-t.maxY()+c,height:s},p.IE6&&(i={top:t.origin.y+c,height:t.size.height+c}),this.computeOriginY_=function(e){return e.origin.y},this.computeHeight_=function(e,t,i,n){var o;return o=n-e.origin.y-i.y,p.IE6&&this.css({height:o+c}),o}):2===a?n&&o?(i={top:t.origin.y+c,height:100*(t.size.height/l)+u},this.computeOriginY_=function(e){return e.origin.y},this.computeHeight_=function(e,t,i,n){return n*(e.size.height/t)}):r&&o?(i={height:100*(t.size.height/l)+u,bottom:l-t.maxY()+c},this.computeOriginY_=function(e,t,i,n){return n*(1-e.size.height/t)-i.y},this.computeHeight_=function(e,t,i,n){return n*(e.size.height/t)}):(i={top:100*(t.origin.y/l)+u,height:t.size.height+c},this.computeOriginY_=function(e,t,i,n){var o;return o=(n-e.size.height)/2,this.css({top:o+c}),o},this.computeHeight_=function(e){return e.size.height}):(s=t.size.height===l?"100%":100*(t.size.height/l)+u,i={top:100*(t.origin.y/l)+u,height:s},this.computeOriginY_=function(e,t,i,n){return e.origin.y*(n/t)},this.computeHeight_=function(e,t,i,n){return n*(e.size.height/t)}),this.css(null,["top","bottom","height","marginTop","marginBottom"]),this.css(i)):void 0},e.prototype.setHorizontalLayout_=function(t){var i,n,o,r,s,a,l,u,h,c,d,_,y;return this.hasParent()||this.isRoot()?(u=this.parentSize(),h=this.parentSize().width,r=(this.autoresizingMask&e.AutoresizingMask.FlexibleLeftMargin)===e.AutoresizingMask.FlexibleLeftMargin,a=(this.autoresizingMask&e.AutoresizingMask.FlexibleWidth)===e.AutoresizingMask.FlexibleWidth,s=(this.autoresizingMask&e.AutoresizingMask.FlexibleRightMargin)===e.AutoresizingMask.FlexibleRightMargin,l=r+a+s,d=l>0?1/l:1,_="px",c="%",o={},0===l?(o={left:t.origin.x+_,width:t.size.width+_},this.computeOriginX_=function(e){return e.origin.x},this.computeWidth_=function(e){return e.size.width}):1===l?r?(o={width:t.size.width+_,right:h-t.maxX()+_},this.computeOriginX_=function(e,t,i,n){return n-e.size.width-i.x},this.computeWidth_=function(e){return e.size.width}):s?(o={left:t.origin.x+_,width:t.size.width+_},this.computeOriginX_=function(e){return e.origin.x},this.computeWidth_=function(e){return e.size.width}):(y=t.size.width===h?"100%":"auto",o={left:0+_,right:0+_,marginLeft:t.origin.x+_,marginRight:h-t.maxX()+_,width:y},i=t.size.width!==h&&p.IE6,i&&(o={left:t.origin.x+_,width:t.size.width+_}),this.computeOriginX_=function(e){return e.origin.x},this.computeWidth_=function(e,t,n,o){var r;return r=o-e.origin.x-n.x,i&&this.css({width:r+_}),r}):2===l?s&&a?(o={left:t.origin.x+_,width:100*(t.size.width/h)+c},this.computeOriginX_=function(e){return e.origin.x},this.computeWidth_=function(e,t,i,n){return n*(e.size.width/t)}):r&&a?(o={width:100*(t.size.width/h)+c,right:h-t.maxX()+_},this.computeOriginX_=function(e,t,i,n){return n*(1-e.size.width/t)-i.x},this.computeWidth_=function(e,t,i,n){return n*(e.size.width/t)}):(p.ltIE8?o={left:t.origin.x+_,width:t.size.width+_}:(n=(h-t.size.width)/2===t.origin.x,o=n?{left:"0px",right:"0px","margin-right":"auto","margin-left":"auto",width:t.size.width+_}:{left:t.origin.x+_,width:t.size.width+_}),this.computeOriginX_=function(e,t,i,o){var r,s;return n?(s=(o-e.size.width)/2,p.ltIE8&&this.css({left:s+_})):(r=e.origin.x/(t-e.size.width),s=(o-e.size.width)*r,this.css({left:s+_})),s},this.computeWidth_=function(e){return e.size.width}):(y=t.size.width===h?"100%":100*(t.size.width/h)+c,o={left:100*(t.origin.x/h)+c,width:y},this.computeOriginX_=function(e,t,i,n){return e.origin.x*(n/t)},this.computeWidth_=function(e,t,i,n){return n*(e.size.width/t)}),this.css(null,["left","right","width","margin-left","margin-right"]),this.css(o)):void 0},e.prototype.frame=function(){var e;return e=r.zero(),e.origin=this.origin(),e.size=this.size(),e},e.prototype.bounds=function(){var e;return e=r.zero(),e.size=this.size(),e},e.prototype.referenceSize=function(){return this.size_.clone()},e.prototype.size=function(){return this.computedSize_.clone()},e.prototype.origin=function(){return this.computedOrigin_.clone()},e.prototype.convertPointFromView=function(e,t){var i,o;for(i=t,e=e.clone();null!==i&&!i.isRoot();)e.x+=i.frame().origin.x,e.y+=i.frame().origin.y,i=i.parent();for(i=this,o=new n(0,0);null!==i&&!i.isRoot();)o.x+=i.frame().origin.x,o.y+=i.frame().origin.y,i=i.parent();return e.x=e.x-o.x,e.y=e.y-o.y,e},e.prototype.convertRectFromView=function(e,t){var i;return i=new r,i.size=e.size,i.origin=this.convertPointFromView(e.origin,t),i},e}(),u.$=a,u.Positioning=l,h.exports||u});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("ui/responder",["core/util","core/dom","core/event_emitter"],function(e,t,i){var n,o,r,s,a;return a=e._,n=i.EventEmitter,s={},r={},o=function(e){function i(e){i.__super__.constructor.apply(this,arguments),e=e&&a.isString(e)?e:"span",this._element_=t.create(e)}return __extends(i,e),i.className="Responder",i.prototype._element=function(){return this._element_},i}(n),s.exports=o,s.exports||r}),sublime_.define("ui/screen",["core/util"],function(e){var t,i,n,o,r;return r=e._,o={},n={},i={Unknown:0,Portrait:1,Landscape:2},t=function(){function e(){this.orientation_=i.Unknown,this.pageScale_=1,this.screenSize_={},this.resolution=""+window.screen.width+"x"+window.screen.height,this.dpr=null!=window.devicePixelRatio?window.devicePixelRatio:1}return e.className="Screen",e.mainScreen=function(){return this.mainScreen_||(this.mainScreen_=new e),this.mainScreen_},e.MinScale=.25,e.MaxScale=5,e.prototype.pageScale=function(){var t,i,n;return this.isTouchScreen()?(i=90===Math.abs(window.orientation),t=i?Math.max(480,screen.height):screen.width,n=t/window.innerWidth,e.MinScale>n?e.MinScale:n>e.MaxScale?e.MaxScale:n):this.pageScale_},e.prototype.isTouchScreen=function(){return r.touch},e}(),n.ScreenOrientation=i,n.Screen=t,o.exports||n});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("ui/skin",["core/util","core/event_emitter","graphics/layer_style"],function(e,t,i){var n,o,r,s,a;return a=e._,n=t.EventEmitter,s={},r={},o=function(e){function t(e){this.name=e,t.__super__.constructor.apply(this,arguments),this.components_={},this.styles_={},this.palette_={},this.backgroundStyle_=new i,this.componentStyle_=new i}return __extends(t,e),t.className="Skin",t.prototype.extend=function(e){return a.extend(this.components_,e)},t.prototype.get=function(e){return this.components_[e]},t.prototype.createStyle=function(e){var t,n,o;o=[];for(t in e)n=e[t],n.enableChangesNotification=!0,o.push(this.styles_[t]=new i(n));return o},t.prototype.styles=function(){return this.styles_},t.prototype.setPalette=function(e){return this.palette_=e},t.prototype.palette=function(){return this.palette_},t}(n),s.exports=o,s.exports||r});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("ui/slider",["ui/button","ui/view"],function(e,t){var i,n,o,r;return r={},o={},n={Horizontal:0,Vertical:1},i=function(e){function i(e){null==e&&(e=n.Horizontal),i.__super__.constructor.apply(this,arguments),this.axis_=e,this.value_=0,this.delegate_=null,this.previousTrackPosition_=0,this.dragging_=!1,this.trackingMargin_=0}return __extends(i,e),i.className="Slider",i.prototype.trackView=function(){return this.trackView_||(this.trackView_=new t,this.trackView_.setUserInteractionEnabled(!1),this.trackView_.setAutoresizingMask(t.AutoresizingMask.FlexibleWidth|t.AutoresizingMask.FlexibleHeight)),this.trackView_},i.prototype.setDelegate=function(e){return this.delegate_=e},i.prototype.value=function(){return this.value_},i.prototype.didMoveToWindow=function(){return i.__super__.didMoveToWindow.apply(this,arguments),this.emit({didUpdateTrackPosition:[this.trackPosition()]})},i.prototype.layoutSubviews=function(){return this.trackView().hasParent()||this.append(this.trackView()),this.size().isZero()?void 0:(this.emit({didUpdateTrackPosition:[this.trackPosition()]}),this.trackView().setFrame(this.bounds()))},i.prototype.setValue=function(e){var t;return this.value_=e,t=this.trackPositionForValue_(e),Math.abs(this.previousTrackPosition_-t)>.3?(this.previousTrackPosition_=t,this.emit({didUpdateTrackPosition:[t]})):void 0},i.prototype.isDragging=function(){return this.dragging_},i.prototype.maxTrackPostion=function(){return this.axis_===n.Horizontal?this.size().width-this.trackingMargin_:this.size().height-this.trackingMargin_},i.prototype.maxTrackLength=function(){return this.axis_===n.Horizontal?this.size().width-2*this.trackingMargin_:this.size().height-2*this.trackingMargin_},i.prototype.trackPosition=function(){return this.trackPositionForValue_(this.value_)},i.prototype.valueForEvent=function(e){var t,i,o;return t=e.locationInView(this),i=this.axis_===n.Horizontal?t.x:t.y,this.trackingMargin_>i?i=this.trackingMargin_:i>this.maxTrackPostion()&&(i=this.maxTrackPostion()),o=this.valueForTrackPosition_(i)},i.prototype.updateValue_=function(e,t){return this.value_!==e&&(this.setValue(e),this.delegate_)?this.delegate_.sliderDidDrag(this,t):void 0},i.prototype.trackPositionForValue_=function(e){return this.axis_===n.Vertical?this.trackingMargin_+this.maxTrackLength()*(1-e):this.trackingMargin_+this.maxTrackLength()*e},i.prototype.valueForTrackPosition_=function(e){var t;return t=(e-this.trackingMargin_)/this.maxTrackLength(),this.axis_===n.Vertical&&(t=1-t),t},i.prototype.setTrackingMargin=function(e){return this.trackingMargin_=e},i.prototype.mouseDown=function(e){var t;return t=this.valueForEvent(e),!this.delegate_.sliderShouldStartDragging||this.delegate_.sliderShouldStartDragging(this,t)?(this.dragging_=!0,e.preventDefault(),this.delegate_&&this.delegate_.sliderWillBeginDragging(this,e),this.updateValue_(t,e)):void 0},i.prototype.mouseUp=function(e){return this.dragging_?(this.mouseDragged(e),this.dragging_=!1,this.delegate_&&this.delegate_.sliderDidEndDragging(this,e),this.emit({didEndDragging:null})):void 0},i.prototype.mouseDragged=function(e){var t,i;return i=this.valueForEvent(e),this.dragging_?(t=this.delegate_.sliderMaxDraggingValue?this.delegate_.sliderMaxDraggingValue(this):1,i=Math.min(i,t),e.preventDefault(),this.updateValue_(i,e)):void 0},i.prototype.mouseCancelled=function(){return this.dragging_?(this.dragging_=!1,this.delegate_&&this.delegate_.sliderDidInvalidateDragging(this),this.emit({didEndDragging:null})):void 0},i}(e),o.SliderAxis=n,o.Slider=i,r.exports||o}),sublime_.define("ui/style",["core/util","core/dom"],function(e,t){var i,n,o,r;return r=e._,o={},n={},i=function(){function e(){}return e.className="Style",e.injectedStyle_={},e._injectedStyleTag_=null,e.SublimeId="sv",e.defaultCss=function(){return{padding:"0",margin:"0",border:"none",overflow:"visible",background:"none","float":"none","z-index":"auto","-moz-border-radius":"0","-webkit-border-radius":"0","border-radius":"0","-moz-box-shadow":"none","-webkit-box-shadow":"none","box-shadow":"none","text-transform":"none","text-decoration":"none","max-width":"none",top:"auto",bottom:"auto",left:"auto",right:"auto"}},e.prototype.initStyle=function(t){return t.className=this.allCssClasses().join(" "),e.injectConstructorStyle(this.constructor),this.baseCss?this.css(this.baseCss()):void 0},e.injectSublimeId_=function(){var t,i;return i=document.documentElement,t=function(e){return!e||1>e.length
},!t(document.documentElement.id)&&t(document.body.id)&&(i=document.body),i.setAttribute("id",e.SublimeId)},e.prototype.setBackground=function(e){return this.css({background:e})},e.cssClassForConstructor=function(e){return"sublimevideo-"+e.className},e.prototype.allCssClasses=function(){var t;return t=[e.cssClassForConstructor(this.constructor)],this.constructor.__super__&&this.constructor.__super__.allCssClasses?this.constructor.__super__.allCssClasses().concat(t):t},e.injectStyle=function(t){var i,n;n=document.createElement("style"),n.setAttribute("type","text/css"),e.setStyleToTag(n,t);try{return i=document.getElementsByTagName("head")[0],i.appendChild(n),n}catch(o){return null}},e.addStyleToTag=function(e,t){return e?e.styleSheet?e.styleSheet.cssText=t+e.styleSheet.cssText:e.textContent=t+e.textContent:void 0},e.setStyleToTag=function(e,t){return e?e.styleSheet?e.styleSheet.cssText=t:e.textContent=t:void 0},e.injectConstructorStyle=function(t){var i,n,o,s,a,l;for(e._injectedStyleTag_||(e.injectSublimeId_(),o=r.ltIE8?"#"+e.SublimeId+" .sublimevideo-hide-iefix{display:none!important} ":"",l=e.injectStyle(o),e._injectedStyleTag_=l),n=0,a=[];t;)s=t.__super__?t.__super__.constructor:null,s&&t.baseCss===s.baseCss?t=s:(n++,e.injectedStyle_[t.className]||(o="",t.baseCss&&(i=t.baseCss())&&(o+=e.cssStringForHash(i,e.cssClassForConstructor(t))),t.childrenBaseCss&&(i=t.childrenBaseCss())&&(o+=e.cssStringForHash(i,e.cssClassForConstructor(t),{children:!0})),o.length>0&&(e.injectedStyle_[t.className]=o,e.addStyleToTag(e._injectedStyleTag_,o))),t.__super__?a.push(t=t.__super__.constructor):a.push(t=null));return a},e.cssStringForHash=function(t,i,n){var o,s,a,l;null==n&&(n={}),a="";for(o in t)l=t[o],a+=""+r.selectorCase(o)+":"+l+"!important;";return s=n.children?" * ":"","#"+e.SublimeId+" ."+i+s+"{"+a+"} "},e.prototype.css=function(e,i,n){var o,s,a,l,u,h,p,c,d,_,y;if(null==n&&(n=!0),this.currentCss_||(this.currentCss_={}),u=this._element_,null!=u&&null!=u.style&&(e||i)){if(i)for(h=0,c=i.length;c>h;h++)o=i[h],delete this.currentCss_[o];if(e&&r.extend(this.currentCss_,e),!r.isDef(u.style.removeProperty)){a=[],_=this.currentCss_;for(o in _)l=_[o],s=r.selectorCase(o)+":"+l,r.ltIE8&&"display"===o?"none"===l?t.addClass(u,"sublimevideo-hide-iefix"):t.removeClass(u,"sublimevideo-hide-iefix"):(n&&(s+=" !important"),a.push(s));return u.style.cssText=a.join("; ")}if(i)for(p=0,d=i.length;d>p;p++)o=i[p],u.style.removeProperty(r.selectorCase(o));if(e){y=[];for(o in e)if(l=e[o],n)try{y.push(u.style.setProperty(r.selectorCase(o),""+l,"important"))}catch(g){}else y.push(u.style.setProperty(r.selectorCase(o),""+l,null));return y}}},e.addCssToElement=function(e,i,n){var o,s,a,l,u,h;if(n=void 0===n?!0:n,r.isDefAndNotNull(i)&&r.isDefAndNotNull(e)&&r.isDef(e.style)){if(r.isDef(e.style.setProperty)){h=[];for(s in i)if(u=i[s],n)try{h.push(e.style.setProperty(r.selectorCase(s),""+u,"important"))}catch(p){}else h.push(e.style.setProperty(r.selectorCase(s),""+u,null));return h}o=e.style.cssText,l=[];for(s in i)u=i[s],a=r.selectorCase(s)+":"+u,r.ltIE8&&"display"===s?"none"===u?t.addClass(e,"sublimevideo-hide-iefix"):t.removeClass(e,"sublimevideo-hide-iefix"):(n&&(a+=" !important"),l.push(a));return e.style.cssText=o+";"+l.join("; ")}},e.setCssToElement=function(e,i,n){var o,s,a,l,u;if(n=void 0===n?!0:n,r.isDefAndNotNull(i)&&r.isDefAndNotNull(e)&&r.isDef(e.style)){if(r.isDef(e.style.setProperty)){u=[];for(o in i)if(l=i[o],n)try{u.push(e.style.setProperty(r.selectorCase(o),""+l,"important"))}catch(h){}else u.push(e.style.setProperty(r.selectorCase(o),""+l,null));return u}a=[];for(o in i)l=i[o],s=r.selectorCase(o)+":"+l,r.ltIE8&&"display"===o?"none"===l?t.addClass(e,"sublimevideo-hide-iefix"):t.removeClass(e,"sublimevideo-hide-iefix"):(n&&(s+=" !important"),a.push(s));return e.style.cssText=a.join("; ")}},e}(),o.exports=i,o.exports||n}),sublime_.define("ui/tap_gesture_recognizer",["core/util","core/events","ui/event","ui/gesture_recognizer"],function(e,t,i,n){var o,r,s,a,l;return l=e._,o=i.Event,a={},s={},r=function(){function e(){this.gestureStart=l.bind(this,this.gestureStart_),this.gestureEnd=l.bind(this,this.gestureEnd_),this.view_=null}return e.className="TapGestureRecognizer",e.prototype.setView=function(e){var i;return this.view_&&l.touch&&(t.unlisten(this.view_._element(),t.EventTypes.TouchStart,this.gestureStart),t.unlisten(this.view_._element(),t.EventTypes.TouchMove,this.gestureChange),t.unlisten(this.view_._element(),t.EventTypes.TouchEnd,this.gestureEnd)),this.view_=e,e&&(i=e._element(),l.touch)?(t.listen(i,t.EventTypes.TouchStart,this.gestureStart),t.listen(i,t.EventTypes.TouchEnd,this.gestureEnd)):void 0},e.prototype.isEventOutOfTapBounds_=function(e){var t,i,n;return n=e.locationInView(this.view_),this.mouseDownPoint_&&this.view_.bounds().containsPoint(n)?(t=this.mouseDownPoint_.difference(n),i=3,Math.abs(t.x)>=i&&Math.abs(t.y)>=i):!1},e.prototype.mouseDown=function(e){return 1!==e.numberOfTouches()?(this.mouseDownPoint_=null,this.state=n.Failed):(this.mouseDownPoint_=e.locationInView(this.view_),this.state=n.Possible)},e.prototype.mouseDragged=function(e){return 1!==e.numberOfTouches()?(this.mouseDownPoint_=null,this.state=n.Failed):this.isEventOutOfTapBounds_(e)?(this.mouseDownPoint_=null,this.state=n.Failed):void 0},e.prototype.mouseUp=function(e){return e.numberOfTouches()>0||!this.mouseDownPoint_||this.isEventOutOfTapBounds_(e)?(this.mouseDownPoint_=null,this.state=n.Failed):(this.state=n.Recognized,this.handleGesture?this.handleGesture(e):void 0)},e.prototype.gestureStart_=function(e){var t;return e.target===this.view_._element()?(this.state=n.Possible,t=new o(this.view_.rootView(),e),this.startPoint=t.locationInWindow()):this.state=n.Failed},e.prototype.gestureChange_=function(e){var t,i,r;return this.state!==n.Failed&&(i=new o(this.view_.rootView(),e),r=i.locationInWindow(),t=this.startPoint.difference(r),Math.abs(t.x)>=10||Math.abs(t.y)>=10)?this.state=n.Failed:void 0},e.prototype.gestureEnd_=function(e){var t,i;return this.state!==n.Failed&&(i=new o(this.view_.rootView(),e),this.endPoint=i.locationInWindow(),t=this.startPoint.difference(this.endPoint),10>Math.abs(t.x)&&10>Math.abs(t.y)&&(this.state=n.Recognized,this.handleGesture))?this.handleGesture(i):void 0},e}(),a.exports=r,a.exports||s});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("ui/text_area",["ui/view","core/util"],function(e,t){var i,n,o,r;return r=t._,o={},n={},i=function(e){function t(){t.__super__.constructor.call(this,"textarea"),this._element_.onclick=r.bind(this,function(){return this._element_.focus(),this._element_.select()})}return __extends(t,e),t.className="TextArea",t.prototype.setText=function(e){return this._element_.value=e},t.prototype.setEditable=function(e){return this._element_.readOnly=!e},t.prototype.setEnable=function(e){return this._element_.disabled=!e},t.baseCss=function(){return{border:"none",overflow:"auto",padding:"0",margin:"0",background:"none",cursor:"auto",resize:"none",outline:"none","box-shadow":"none","-webkit-box-shadow":"none","-moz-box-shadow":"none","-o-box-shadow":"none",transition:"none","-webkit-transition":"none","-moz-transition":"none","-o-transition":"none"}},t.prototype.select=function(){return setTimeout(r.bind(this,function(){return this._element_.select()}),0)},t}(e),o.exports=i,o.exports||n});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("ui/text_field",["ui/view","core/util","core/dom","ui/tap_gesture_recognizer","ui/event"],function(e,t,i,n,o){var r,s,a,l,u;return u=t._,r=o.Event,l={},a={},s=function(t){function o(){o.__super__.constructor.apply(this,arguments),i.appendChild(this._element_,this._inputElement()),this.showIcon_=!1,this.allowIntegersOnly_=!1,this.tapGestureRecognizer_=new n,this.tapGestureRecognizer_.handleGesture=u.bind(this,this.selectInput_),this.addGestureRecognizer(this.tapGestureRecognizer_)}return __extends(o,t),o.className="TextField",o.prototype.setMaxLength=function(e){return this._inputElement_.maxLength=e},o.prototype.setDelegate=function(e){return this.delegate_=e},o.prototype.allowIntegersOnly=function(){return this.allowIntegersOnly_===!1?(this.allowIntegersOnly_=!0,this._inputElement_.onkeydown=u.bind(this,function(e){var t,i;if(e||(e=window.event),i=e.shiftKey||e.ctrlKey||e.altKey||e.metaKey,i&&86!==e.keyCode||46===e.keyCode||8===e.keyCode||9===e.keyCode||27===e.keyCode||13===e.keyCode||65===e.keyCode&&e.ctrlKey===!0||e.keyCode>=35&&39>=e.keyCode);else if(e.shiftKey||(48>e.keyCode||e.keyCode>57)&&(96>e.keyCode||e.keyCode>105))return t=new r(null,e),t.preventDefault()})):void 0},o.prototype.setShowIcon=function(e){return this.showIcon_=e},o.prototype.selectInput_=function(){return this._inputElement_.focus(),this._inputElement_.select()},o.prototype._inputElement=function(){var t;return this._inputElement_||(t=i.create("input"),e.setCssToElement(t,{height:"100%",width:"100%",left:"0",outline:"none",top:"0",cursor:"default",position:"absolute",background:"none"}),t.type="text",t.onclick=u.bind(this,this.selectInput_),t.oninput=u.bind(this,function(){return this.delegate_?this.delegate_.textFieldDidUpdateValue(this,t.value):void 0}),t.onchange=u.bind(this,function(){return this.delegate_?this.delegate_.textFieldDidUpdateValue(this,t.value):void 0}),this._inputElement_=t),this._inputElement_},o.prototype.layoutSubviews=function(){var t;return this.showIcon_?(t=this.size(),e.addCssToElement(this._inputElement_,{"margin-left":t.height+"px",width:t.width-t.height-3+"px","margin-right":"3px"})):(t=this.size(),e.addCssToElement(this._inputElement_,{"margin-left":"3px","margin-right":"3px",width:t.width-6+"px"}))},o.prototype.setText=function(e){return this._inputElement().value=e},o.prototype.text=function(){return this._inputElement().value},o.prototype.setEditable=function(e){return this._inputElement().readOnly=!e},o.prototype.setEnable=function(e){return this._inputElement().disabled=!e},o.prototype.cssText=function(t){return e.addCssToElement(this._inputElement_,t)},o.prototype.setFont=function(t){var i;return this.font_=t,i=t._toCss(),u.ltIE9||delete i.lineHeight,e.addCssToElement(this._inputElement_,i)},o.prototype.font=function(){return this.font_},o.baseCss=function(){return{border:"none",overflow:"auto",padding:"0",margin:"0",background:"none",cursor:"auto",resize:"none",outline:"none","box-shadow":"none","-webkit-box-shadow":"none","-moz-box-shadow":"none","-o-box-shadow":"none",transition:"none","-webkit-transition":"none","-moz-transition":"none","-o-transition":"none"}},o.prototype.select=function(){return setTimeout(u.bind(this,function(){return this._inputElement().select()}),0)},o}(e),l.exports=s,l.exports||a}),sublime_.define("ui/tracking_area",[],function(){var e,t,i;return i={},t={},e=function(){function e(e,t){this.rect=e,null==t&&(t={}),this.owner=t.owner,this.trackingInVisibleRect=t.trackingInVisibleRect,this.mouseMovedEnabled=t.mouseMovedEnabled||!1,this.mouseDragEnabled=t.mouseDragEnabled||!1}return e.className="TrackingArea",e.prototype.hitTest=function(e){return this.rect.containsPoint(e)},e}(),i.exports=e,i.exports||t});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("ui/view",["core/util","animations/style_animation","graphics/size","ui/responder","ui/style","ui/positioning","ui/event_handling","ui/full_window","ui/fullscreen","ui/content_drawing","ui/content_mode"],function(e,t,i,n,o,r,s,a,l,u,h){var p,c,d,_,y;return y=e._,p=r.Positioning,_={},d={},c=function(e){function n(e){n.__super__.constructor.call(this,e),this.id_=n.ID++,this.contentMode_=h.TopLeft,this.size_=i.zero(),this.minSize_=null,this.hidden_=!1,this.initStyle(this._element_),this.initPositioning(),this.initEventHandling(),this.initFullWindow(),this.initContentDrawing(),this.tag=null,this.alphaAnimation_=null,this.isViewDrawn_=!1,this.viewDidLoad&&this.viewDidLoad()}return __extends(n,e),n.className="View",n.use(o),n.use(p),n.use(s),n.use(a),n.use(l),n.use(u),n.Fullmode={Screen:"screen",Window:"window"},n.ID=0,n.prototype.toString=function(){return"v"+this.id_},n.ContentMode={TopLeft:0,Center:1,Redraw:2,ScaleToFill:3,ScaleAspectFill:4,ScaleAspectFit:5,ScaleAspectWidthFit:6},n.prototype.contentMode=function(){return this.contentMode_},n.prototype.setContentMode=function(e){return this.contentMode_=e},n.prototype.setClassName=function(e){return this._element().className=e},n.prototype.setElementId=function(e){return this._element().id=e},n.prototype.elementId=function(){return this._element().id},n.prototype.setMinSize=function(e){return this.minSize_=e},n.prototype.animate=function(e,i){var n;return n=new t(this,e,i),n.start()},n.prototype.alpha=function(){return this.alpha_},n.prototype.didMoveToWindow=function(){return this.displayIfNeeded()},n.prototype.didRemoveFromWindow=function(){},n.prototype.setBackgroundColor=function(e){return this.css({background:e})},n.prototype.internalSetAlpha_=function(e){var t;return 1===e?this.css(null,["opacity","filter","ms-filter"]):(t=100*e,this.css({opacity:e,filter:"alpha(opacity="+t+")"})),this.alpha_=e},n.prototype.setAlpha=function(e,i,n){return this.alphaAnimation_&&(this.alphaAnimation_.cancel(),this.alphaAnimation_=null),y.isDef(i)?(this.alphaAnimation_=new t(this,{alpha:e},{duration:i,callback:n}),this.alphaAnimation_.start()):this.internalSetAlpha_(e)},n.prototype.setHidden=function(e,t,i,n){var o,r,s,a,l,u,h,p,c;if(null==t&&(t=!1),r=e?"none":"block",this.hidden_=e,o=e?0:1,t?(e||this.css({display:r}),n=n||(e?.5:.3),this.setAlpha(o,n,y.bind(this,function(t){return t&&e&&e===this.hidden_&&this.css({display:r}),i?i(t):void 0}))):(this.css({display:r}),this.setAlpha(o)),!e)for(p=this.children(),a=0,u=p.length;u>a;a++)s=p[a],s.superviewDidShow_();if(!this.isRecursivelyHidden_()&&this.rootView()&&!this.isViewDrawn_)for(this.displayIfNeeded(),c=this.children(),l=0,h=c.length;h>l;l++)s=c[l],s.displayIfNeeded();return this.viewDidSetHidden?this.viewDidSetHidden(e,n):void 0},n.prototype.isHidden=function(){return this.hidden_},n.prototype.isRecursivelyHidden_=function(){return this.hidden_||this.isRoot()?this.hidden_:this.parent()?this.parent().isRecursivelyHidden_():!1},n.prototype.superviewDidShow_=function(){var e,t,i,n,o;for(this.displayIfNeeded(),n=this.children(),o=[],t=0,i=n.length;i>t;t++)e=n[t],o.push(e.superviewDidShow_());return o},n.prototype.layoutSubviews=function(){},n.prototype.setDrawInContext=function(){},n.prototype.removeSublayer=function(){},n.prototype.addSublayer=function(){},n.prototype.layoutSublayers_=function(){},n.prototype.didMoveToParent=function(e){return e&&this.viewDidAppear&&this.viewDidAppear(),this.isRoot()&&this.startTrackingEvents_(),this.layoutSubviews()},n.prototype.willRemoveFromParent=function(){return this.isRoot()?this.stopTrackingEvents_():void 0},n.prototype.isInDOM=function(){return y.isDefAndNotNull(this._ancestorElement_())},n.prototype._ancestorElement_=function(){var e,t;if(t=null,e=this._element_){for(;e.parentNode;)e=e.parentNode,t=e;return t}},n.prototype.didMoveToRootView=function(e){return e&&!this.isViewDrawn_?this.displayIfNeeded():void 0},n.baseCss=function(){return{"-webkit-tap-highlight-color":"rgba(0,0,0,0)",display:"block",position:"absolute","text-shadow":"none",border:"none","z-index":"auto"}},n.prototype.baseCss=function(){return{top:0,left:0}},n}(n),_.exports=c,_.exports||d});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("ui/view_controller",["core/util","core/event_emitter","ui/view","ui/button","graphics/rect"],function(e,t,i,n,o){var r,s,a,l,u;return u=e._,r=t.EventEmitter,l={},a={},s=function(e){function t(){t.__super__.constructor.apply(this,arguments),this.view_=null}return __extends(t,e),t.className="ViewController",t.prototype.viewDidUpdateFrame=function(){},t.prototype.viewDidSetHidden=function(){},t.prototype.isViewLoaded=function(){return null!=this.view_},t.prototype.isViewVisible=function(){return this.isViewLoaded()&&this.view_.rootView()&&!this.view_.isHidden()},t.prototype.viewWillAppear=function(){},t.prototype.viewDidAppear=function(){},t.prototype.setView=function(e){return this.view_=null,this.view_=e,this.listenView_(this.view_)},t.prototype.viewDidLoad=function(){},t.prototype.viewWillUnload=function(){},t.prototype.viewDidUnload=function(){},t.prototype.viewCanExitFullWindow=function(){return!0},t.prototype.viewWillEnterFullWindow=function(){},t.prototype.viewDidEnterFullWindow=function(){},t.prototype.viewWillExitFullWindow=function(){},t.prototype.viewDidExitFullWindow=function(){},t.prototype.viewWillEnterFullscreen=function(){},t.prototype.viewDidFailEnteringFullscreen=function(){},t.prototype.viewDidEnterFullscreen=function(){},t.prototype.viewWillExitFullscreen=function(){},t.prototype.viewDidExitFullscreen=function(){},t.prototype.release=function(){return this.viewWillUnload(),this.isViewLoaded()&&(this.view_=null),this.viewDidUnload()},t.prototype.loadView=function(){return this.view_=new i},t.prototype.view=function(){return this.view_||(this.loadView(),this.listenView_(this.view_),this.viewDidLoad()),this.view_},t.prototype.listenView_=function(e){return e.viewWillAppear=u.bind(this,this.viewWillAppear),e.viewDidAppear=u.bind(this,this.viewDidAppear),e.on({didUpdateFrame:u.bind(this,this.viewDidUpdateFrame)}),e.viewDidSetHidden=u.bind(this,this.viewDidSetHidden),e.canExitFullWindow=u.bind(this,this.viewCanExitFullWindow),e.willEnterFullWindow=u.bind(this,this.viewWillEnterFullWindow),e.didFailEnteringFullscreen=u.bind(this,this.viewDidFailEnteringFullscreen),e.didEnterFullWindow=u.bind(this,this.viewDidEnterFullWindow),e.willExitFullWindow=u.bind(this,this.viewWillExitFullWindow),e.didExitFullWindow=u.bind(this,this.viewDidExitFullWindow),e.willEnterFullscreen=u.bind(this,this.viewWillEnterFullscreen),e.didEnterFullscreen=u.bind(this,this.viewDidEnterFullscreen),e.willExitFullscreen=u.bind(this,this.viewWillExitFullscreen),e.didExitFullscreen=u.bind(this,this.viewDidExitFullscreen)},t.prototype.modalViewController=function(){return this.modalViewController_},t.prototype.parentViewController=function(){return this.parentViewController_},t.prototype.modalView=function(){var e;return this.modalView_||(this.modalView_=new i,this.modalView_.setFrame(new o(0,0,100,100)),e=new n,e.setFrame(this.modalView_.bounds()),e.onMouseUpInside(u.bind(this,this.didTapModalView_)),e.setBackgroundColor("#000"),e.setAutoresizingMask(i.AutoresizingMask.FlexibleWidth|i.AutoresizingMask.FlexibleHeight),e.setAlpha(.7),this.modalView_.append(e),this.modalView_.css({"z-index":9999}),this.modalView_.setAutoresizingMask(i.AutoresizingMask.FlexibleWidth|i.AutoresizingMask.FlexibleHeight)),this.modalView_},t.prototype.didTapModalView_=function(){return this.modalViewController_?this.modalViewController_.didTapModalBackgroundView():void 0},t.prototype.dismissModalViewController=function(){return this.modalViewController_?(this.modalViewController_.parentViewController_=null,this.modalViewController_.view().removeFromParent(),this.modalViewController_=null,this.modalView().setHidden(!0,!0,u.bind(this,function(e){return e?this.modalView().removeFromParent():void 0}))):void 0},t.prototype.presentModalViewController=function(e){var t,i;return this.dismissModalViewController(),i=this.view().rootView(),i?e?(e.parentViewController_=this,t=this.modalView(),t.setFrame(this.view().bounds()),t.setHidden(!0),t.append(e.view()),this.modalViewController_=e,this.view().append(t),t.setHidden(!1,!0)):t.removeFromParent():void 0},t}(r),l.exports=s,l.exports||a}),sublime_.define("media/media_item",[],function(){var e,t,i,n,o,r;return r={},o={},t={NoSources:"No source was found.",NoPlayableSources:"No playable Sources."},n={Unknown:0,UserDriven:1,PlaybackEnd:2},i={PlaybackEnded:0,PlaybackError:1,UserExited:2},e=function(){function e(){}return e.className="MediaItem",e.STATE={PAUSED:0,PREPARING_PLAY:1,PLAYING:2},e.LOAD_STATE={UNKNOWN:0,PLAYABLE:1,PLAY_THROUGH_OK:2,STALLED:3},e.prototype.loadState=function(){},e.prototype.sources=function(){},e.prototype.source=function(){},e.prototype.supportsVideoType=function(){},e.prototype.videoSize=function(){},e.prototype.imageUrl=function(){},e.prototype.isBufferFull=function(){},e.prototype.size=function(){},e.prototype.setSize=function(){},e.prototype.element=function(){},e.prototype.prepareToPlay=function(){},e.prototype.hasLoadedMetadata=function(){},e.prototype.play=function(){},e.prototype.pause=function(){},e.prototype.duration=function(){},e.prototype.bufferDuration=function(){},e.prototype.remainingBufferDuration=function(){},e.prototype.playbackTime=function(){},e.prototype.setPlaybackTime=function(){},e.prototype.isMetadataLoaded=function(){},e.prototype.isPlaying=function(){},e.prototype.delegate=function(){},e.prototype.setDelegate=function(){},e}(),o.MediaItemError=t,o.MediaItemPauseReason=n,o.MediaItemFinishReason=i,o.MediaItem=e,r.exports||o}),sublime_.define("media/media_source",["core/util","core/url"],function(e,t){var i,n,o,r;return r=e._,o={},n={},i=function(){function e(e){var t;this.path_=r.makeAbsolutePath(e.src||e.getAttribute("src")),/^\/\//.test(this.path_)&&(this.path_=location.protocol+this.path_),this.quality_=this.extractQuality_(e),this.type_=null,this.family_=null,this._element_=e,t=function(e,t){var i;return e.hasAttribute?e.hasAttribute(t):(i=e.getAttributeNode(t),i&&(i.specified||i.nodeValue))},this.hasTypeAttr_=t(this._element_,"type")}return e.className="MediaSource",e.Family={Mp4:"MP4",Ogg:"Ogg",Webm:"WebM",Hls:"HLS"},e.Type={Mp4:"video/mp4",Ogg:"video/ogg",Webm:"video/webm",Hls:"application/x-mpegURL"},e.Quality={Base:"base",HD:"hd",Low:"low",Medium:"medium",Standard:"standard",FullHD:"fullhd",_240p:"240p",_360p:"360p",_480p:"480p",_720p:"720p",_1080p:"1080p"},e.prototype._element=function(){return this._element_},e.prototype.path=function(){return this.path_},e.prototype.pathWithoutParams=function(){return this.path_.replace(/\?.*/i,"")},e.prototype.quality=function(){return this.quality_},e.prototype.isStreamed=function(){return/\.m3u8(\?.*)?/.test(this.path_)},e.prototype.type=function(){return this.type_||(this.type_=this.hasTypeAttr_?this.extractType_(this._element_.type):this.typeForFamily(this.family())),this.type_},e.prototype.extractType_=function(t){var i,n,o;t=r.trim(t),o=e.Type;for(i in o)if(n=o[i],r.startsWith(t,n))return n;return null},e.familyForType=function(t){switch(t){case e.Type.Mp4:return e.Family.Mp4;case e.Type.Ogg:return e.Family.Ogg;case e.Type.Hls:return e.Family.Hls;case e.Type.Webm:return e.Family.Webm}},e.prototype.typeForFamily=function(t){switch(t){case e.Family.Mp4:return e.Type.Mp4;case e.Family.Ogg:return e.Type.Ogg;case e.Family.Hls:return e.Type.Hls;case e.Family.Webm:return e.Type.Webm}},e.familyForExtenxtion=function(t){if(!t)return null;switch(t.toLowerCase()){case"mp4":case"mov":case"m4v":return e.Family.Mp4;case"ogg":case"ogv":return e.Family.Ogg;case"m3u8":return e.Family.Hls;case"webm":return e.Family.Webm;default:return null}},e.prototype.family=function(){var i;return null===this.family_&&(this.hasTypeAttr_?this.family_=e.familyForType(this.type()):(i=t.parse(t.absolutePath(this.path())),this.family_=e.familyForExtenxtion(i.fileExtension()))),this.family_},e.prototype.extractQuality_=function(t){var i,n,o,r;if(n=t.getAttribute("data-quality")){r=e.Quality;for(i in r)if(o=r[i],n===o)return n}return e.Quality.Base},e}(),o.exports=i,o.exports||n});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("media/video/android_video",["media/video/touch_video","core/util","ui/view"],function(e,t,i){var n,o,r,s;return s=t._,r={},o={},n=function(e){function t(){t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.className="AndroidVideo",t.prototype.onMetadata_=function(){return this._videoObject_.videoWidth>0&&this._videoObject_.videoHeight>0&&this._videoObject_.duration>1?(this.extractMetadata_(),this.isChangingQuality()?this.onCanplay_():void 0):setTimeout(s.bind(this,this.onMetadata_),200)},t.prototype.availableQualities=function(){return s.Chrome||s.Firefox?t.__super__.availableQualities.apply(this,arguments):this.metadata_?[this.metadata_.quality]:[]},t.prototype.initialVideoElementCss_=function(){var e;return e=t.__super__.initialVideoElementCss_.apply(this,arguments),s.Chrome||s.Firefox||s.extend(e,{display:"none"}),e},t.prototype.onPlaying_=function(){return t.__super__.onPlaying_.apply(this,arguments),this.nativeFullscreen_?this.didUnexpectedlyPlay_():void 0},t.prototype.shouldLoadVideoOnRelease=function(){return s.Chrome||s.Firefox?t.__super__.shouldLoadVideoOnRelease.apply(this,arguments):!0},t.prototype.internalPlay_=function(){return s.Chrome||s.Firefox?t.__super__.internalPlay_.apply(this,arguments):(i.addCssToElement(this._videoElement_,{display:"block"}),setTimeout(s.bind(this,function(){return t.__super__.internalPlay_.apply(this,arguments)}),100))},t}(e),r.exports=n,r.exports||o});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("media/video/chrome_video",["media/video/html5_video"],function(e){var t,i,n;return n={},i={},t=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.className="ChromeVideo",t.prototype.requireNewVideoElement=function(){return!0},t}(e),n.exports=t,n.exports||i});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("media/video/dailymotion_video",["core/util","core/dom","core/error","ui/view","media/video/video","graphics/size","media/media_source","core/log"],function(e,t,i,n,o,r,s){var a,l,u,h;return h=e._,u={},l={},a=function(e){function a(){a.__super__.constructor.apply(this,arguments),this.dailymotionId_=this.videoOptions_.dailymotionId,this.seekId_=0,this.imageUrls_.push("//www.dailymotion.com/thumbnail/video/"+this.dailymotionId_),a.apiReady_(h.bind(this,function(){return!this.released_&&(this._DM_=window.DM,this.rootView())?this.createPlayer_():void 0}))}return __extends(a,e),a.className="DailymotionVideo",a.APIState={None:0,Loading:1,Ready:2},a.currentAPIState_=a.APIState.None,a.readyCallbacks_=[],a.apiReady_=function(e){switch(a.currentAPIState_){case a.APIState.None:return e&&a.readyCallbacks_.push(e),a.loadAPI_();case a.APIState.Loading:if(e)return a.readyCallbacks_.push(e);break;case a.APIState.Ready:if(e)return e()}},a.loadAPI_=function(){var e,t,i,n,o;return a.currentAPIState_===a.APIState.None?(a.currentAPIState_=a.APIState.Loading,window.YT||(o=document.createElement("script"),o.async=!0,o.src="//api.dmcdn.net/all.js",i=document.getElementsByTagName("script")[0],i?i.parentNode.insertBefore(o,i):(n=document.getElementsByTagName("head")[0],n&&n.appendChild(o))),t=function(){var t,i,n,o;for(a.currentAPIState_=a.APIState.Ready,o=a.readyCallbacks_,i=0,n=o.length;n>i;i++)t=o[i],t();return a.readyCallbacks_=[],e?e():void 0},window.DM&&window.YT.Player?t():(e=window.dmAsyncInit,window.dmAsyncInit=t)):void 0},a.prototype.technology=function(){return o.Technology.Dailymotion},a.prototype.canSeekOutsideBufferBounds=function(){return!0},a.prototype.isListeningEvents_=function(){return this.listeningEvents_},a.prototype.listenEvents_=function(){return this.listeningEvents_=!0},a.prototype.unlistenEvents_=function(){return this.listeningEvents_=!1},a.prototype.playVideoObject_=function(){return this.supportsDailymotionIframeApi_()?this.videoObjectReady_?(this.playOnVideoObjectReady_=!1,this.ended_&&(this.ended_=!1,this._videoObject_.load(this.dailymotionId_)),this._videoObject_.play()):this.playOnVideoObjectReady_=!0:this.injectDailymotionPlayerWithApiSupport_(!1)},a.prototype.pauseVideoObject_=function(){return this.videoObjectReady_&&this._videoObject_.pause(),this.playOnVideoObjectReady_=!1},a.prototype.videoObjectSeekTo_=function(e){return this._videoObject_.seek(e)},a.prototype.videoObjectPlaybackTime_=function(){return this._videoObject_.currentTime},a.prototype.hasSources_=function(){return!0},a.prototype.source=function(){return null},a.prototype.setVideoObjectVolume_=function(e){return e>0?(this.internalMute_&&(this._videoObject_.setMuted("false"),this.internalMute_=!1),this._videoObject_.setVolume(e)):(this.internalMute_=!0,this._videoObject_.setMuted("true"))},a.prototype.videoObjectVolume_=function(){return this._videoObject_.volume},a.prototype.videoObjectBufferDuration_=function(){var e;return e=this._videoObject_.bufferedTime,e>=0?e:this.playbackTime()},a.prototype.mediaEvents_=function(){return{play:this.onPlay_,playing:this.onPlaying_,seeking:this.onSeeking_,seeked:this.onSeeked_,ended:this.onEnd_,timeupdate:this.onTimeUpdate_,progress:this.onProgress_,pause:this.onPause_,volumechange:this.onVolumeChange_}},a.prototype.onPlay_=function(){},a.prototype.onPlaying_=function(){return this.didPlay_()},a.prototype.onPause_=function(){return this.didPause_()},a.prototype.onProgress_=function(){var e;return this.hasAlreadyFiredProgress_||this.onFakedMetadata_(),this.hasAlreadyFiredProgress_=!0,e=this.videoObjectBufferDuration_(),e!==this.bufferDuration_&&this.didUpdateBufferDuration_(e),this.bufferDuration_=e},a.prototype.onTimeUpdate_=function(){return this.didUpdatePlaybackTime_(this.videoObjectPlaybackTime_())},a.prototype.onEnd_=function(){return this.ended_=!0,this.didEnd_()},a.prototype.onSeeking_=function(){return this.isSeeking()?void 0:this.willseek_()},a.prototype.onSeeked_=function(){return this.isSeeking()?this.didSeek_():void 0},a.prototype.onVolumeChange_=function(){return this.videoObjectVolume_()>0?this.didChangeVolume_(this.videoObjectVolume_()):this.didChangeVolume_(0)},a.prototype.onDurationChange_=function(e){return alert("duration changed! "+e.target.duration)},a.prototype.onFakedMetadata_=function(){return this.metadata_={duration:this._videoObject_.duration,size:new r(640,360),quality:this.quality_()},this.didLoadMetadata_()},a.prototype.onError_=function(e){return this.abortWithError_(e)},a.prototype.didMoveToRootView=function(){return a.__super__.didMoveToRootView.apply(this,arguments),a.currentAPIState_!==a.APIState.Ready||this._videoObject_?void 0:this.createPlayer_()},a.prototype.supportsDailymotionIframeApi_=function(){return!h.ltIE8},a.prototype.supportsHTML5VideoWithMP4_=function(){return h.isFunction(this._videoElement_.canPlayType)&&this._videoElement_.canPlayType(s.Type.Mp4).length>=1},a.prototype.createPlayer_=function(){return this.supportsDailymotionIframeApi_()?this.injectDailymotionPlayerWithApiSupport_(!0):this.didInitialize_()},a.prototype.injectDailymotionPlayerWithApiSupport_=function(e){var i,n,o,r,s,a,l;s=t.create("span"),t.appendChild(this._element_,s),r=this.dailymotionSuggestedQualityForQuality_(this.videoOptions_.dailymotionSuggestedQuality),o={autoplay:e?0:1,chromeless:this.options_.showDefaultControls||!e?0:1,startscreen:"html",info:0,related:0,logo:0,quality:r},this.supportsHTML5VideoWithMP4_()&&(o.html=1),this._videoObject_=this._DM_.player(s,{video:this.dailymotionId_,width:"100%",height:"100%",params:o}),this._videoObject_.addEventListener("apiready",h.bind(this,this.onDailymotionPlayerReady_)),this._videoObject_.addEventListener("error",h.bind(this,this.onDailymotionError_)),a=this.mediaEvents_(),l=[];
for(i in a)n=a[i],l.push(this._videoObject_.addEventListener(i,h.bind(this,n)));return l},a.prototype.resizeVideo_=function(){return this.hasParent()?this.setFrame(this.parent().bounds()):void 0},a.prototype.release=function(){return a.__super__.release.apply(this,arguments)},a.prototype.onDailymotionPlayerReady_=function(){var e;return e=this._videoObject_,n.setCssToElement(e,{width:"100%",height:"100%"}),this.videoObjectReady_=!0,this.playOnVideoObjectReady_&&this.playVideoObject_(),this.didInitialize_()},a.prototype.onDailymotionError_=function(e){var t,n;return n=e.target.error,t=new i(n.title),this.onError_(t)},a.prototype.quality_=function(){var e;return e="480",this.qualityForDailymotionQuality_(e)},a.prototype.qualityForDailymotionQuality_=function(){return s.Quality.Base},a.prototype.dailymotionSuggestedQualityForQuality_=function(e){return e===s.Quality.HD?"720":null},a}(o),u.exports=a,u.exports||l});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("media/video/firefox_video",["media/video/html5_video"],function(e){var t,i,n;return n={},i={},t=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.className="FirefoxVideo",t.prototype.internalPlay_=function(){return this.nativeLoadCalled_||(this.nativeLoadCalled_=!0,this._videoObject_.load()),t.__super__.internalPlay_.apply(this,arguments)},t}(e),n.exports=t,n.exports||i});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("media/video/flash_video",["core/util","core/dom","core/exporter","core/error","ui/view","media/video/video","media/media_source","graphics/size","core/log"],function(e,t,i,n,o,r,s,a){var l,u,h,p;return p=e._,h={},u={},l=function(e){function l(e,t,n){l.__super__.constructor.call(this,e,t,n),this.flashSrc_=p.HOST+"/c/sa/2.6.5/sublimevideo.swf",this.playbackTimeToSet_=null,this.playbackTime_=0,this.id_=-1,this.objectLoaded_=!1,this.playbackTimeBeforeReloading_=null,i("sublime_.fv.didLoad",l,l.didLoad),i("sublime_.fv.onStatus",l,l.onStatus),i("sublime_.fv.onMetaData",l,l.onMetaData),i("sublime_.fv.onError ",l,l.onError),i("sublime_.fv.onWarning",l,l.onWarning),this._listenObject_=!1,this.didInitialize_()}return __extends(l,e),l.className="FlashVideo",l.prototype.technology=function(){return r.Technology.Flash},l.prototype.canSeekOutsideBufferBounds=function(){return!1},l.prototype.isListeningEvents_=function(){return this.listenObject_},l.prototype.listenEvents_=function(){return this.listenObject_=!0},l.prototype.unlistenEvents_=function(){return this.listenObject_=!1},l.prototype.playVideoObject_=function(){return this.isFlashLoaded_()&&this._videoObject_.playVideo?(this._videoObject_.playVideo(),this.startTimer_()):this.loadVideoObject_()},l.prototype.pauseVideoObject_=function(){return this._videoObject_&&this._videoObject_.pauseVideo&&(this.playAfterSeeking_=!1,this.pausing_=!0,this._videoObject_.pauseVideo()),this.stopTimer_()},l.prototype.videoObjectSeekTo_=function(e,t){var i,n;return this._videoObject_.seek?(i=this.bufferDuration(),e>i&&(e=i),e===this.duration()?e-=.1:0>=e&&(e=.1),this.willseek_(),n=this._videoObject_.isVideoPaused(),t||(this.playAfterSeeking_=!n),n||this._videoObject_.pauseVideo(),this._videoObject_.seek(e)):this.playbackTimeToSet_=e,this.playbackTime_=e},l.prototype.videoObjectPlaybackTime_=function(){return this.reloading_?this.playbackTimeBeforeReloading_:this.objectLoaded_?this.playbackTime_:0},l.prototype.setVideoObjectQuality_=function(e){var t;return t=this.availableSources_()[e],t?(this.source_=t,this._videoObject_.setSource(t.path())):void 0},l.prototype.availableQualities=function(){return p.keys(this.availableSources_())},l.prototype.hasSources_=function(){return this.sources_&&this.sources_.length>0},l.prototype.source=function(){return this.source_},l.prototype.setVideoObjectVolume_=function(e){return this._videoObject_?(this._videoObject_.setVolume(e),this.didChangeVolume_(e)):void 0},l.prototype.videoObjectVolume_=function(){return this._videoObject_&&this._videoObject_.volume?this._videoObject_.volume():.5},l.prototype.videoObjectBufferDuration_=function(){return this._videoObject_&&this._videoObject_.bufferDuration?this._videoObject_.bufferDuration():0},l.prototype.release=function(){return l.unregisterFlashVideo(this),o.setCssToElement(this._videoObject_,{display:"none"}),l.__super__.release.apply(this,arguments)},l.prototype.id=function(){return this.id_},l.prototype.supportsVideoType=function(e){return e===s.Type.Mp4},l.prototype.playableSources=function(){var e,t,i,n,o;if(!this.playableSources_){for(e=[],o=this.sources_,i=0,n=o.length;n>i;i++)t=o[i],this.supportsVideoType(t.type())&&e.push(t);this.playableSources_=e}return this.playableSources_},l.prototype.availableSources_=function(){var e,t,i,n,o,r,s,a;if(i=this.metadata(),!i)return{};if(!this.supportedSources_)for(this.supportedSources_={},t=i.source,this.supportedSources_[t.quality()]=t,n=this.playableSources(),s=0,a=n.length;a>s;s++)r=n[s],r!==t&&(o=r.quality(),e=this.supportedSources_[o],(!e||r.family()===t.family()&&e.family()!==t.family())&&(this.supportedSources_[o]=r));return this.supportedSources_},l.prototype.updateTime_=function(){var e,t;if(!this.isSeeking()&&!this.isChangingQuality()){if(this.reloading_)t=this.playbackTimeBeforeReloading_;else{if(!this._videoObject_||!this._videoObject_.bufferDuration)return this.flashObjectDidUnload_(),void 0;try{if(this._videoObject_&&this._videoObject_.currentPlaybackTime&&(e=this.playbackTime_,this.playbackTime_=this._videoObject_.currentPlaybackTime(),t=this.playbackTime_,t===e))return}catch(i){}}return this.didUpdatePlaybackTime_(t)}},l.prototype.startTimer_=function(){return this.stopTimer_(),this.timer_=setInterval(p.bind(this,this.updateTime_),250),this.updateTime_()},l.prototype.stopTimer_=function(){return this.timer_?(this.updateTime_(),clearInterval(this.timer_),this.timer_=null):void 0},l.prototype.updateBuffer_=function(){return this._videoObject_&&this._videoObject_.bufferDuration?isNaN(this.duration())?void 0:(this.onProgress_(),this.bufferDuration()>=this.duration()?this.stopBufferTimer_():void 0):this.flashObjectDidUnload_()},l.prototype.startBufferTimer_=function(){return this.stopBufferTimer_(),this.internalBufferTimer_=setInterval(p.bind(this,this.updateBuffer_),330),this.updateBuffer_()},l.prototype.stopBufferTimer_=function(){return this.internalBufferTimer_?(clearInterval(this.internalBufferTimer_),this.internalBufferTimer_=null):void 0},l.prototype.selectSource_=function(){var e,t,i,n;for(n=this.sources_,t=0,i=n.length;i>t;t++)if(e=n[t],e.family()===s.Family.Mp4)return e},l.prototype.isFlashLoaded_=function(){return this.objectLoaded_},l.prototype.loadVideoObject_=function(){return this.waitingForLoadEvent_=!0,this.id_=t.setFlashObject(this._element(),this.flashSrc_,"vid"),l.registerFlashVideo(this)},l.onMetaData=function(e,t,i,n){var o;return o=l.registeredFlashVideoForId(e),o?o.onMetadata_(t,i,n):void 0},l.prototype.onMetadata_=function(e,t,i){var n,o;return this.reloading_?(o=this.playbackTimeBeforeReloading_,setTimeout(p.bind(this,function(){return this.videoObjectSeekTo_(o)}),500)):null!==this.playbackTimeToSet_&&(n=this.playbackTimeToSet_,this.playbackTimeToSet_=null,setTimeout(p.bind(this,function(){return this.videoObjectSeekTo_(n)}),500)),this.metadata_={duration:i,size:new a(e,t),source:this.source_,quality:this.source_.quality()},this.didLoadMetadata_(),this.startBufferTimer_(),this.isChangingQuality()?this.didChangeQuality_():void 0},l.prototype.flashObjectDidLoad_=function(){var e,t,i;return this.objectLoaded_?(this.flashObjectDidUnload_(),void 0):(this.objectLoaded_=!0,this._videoObject_=this._element().firstChild,o.addCssToElement(this._videoObject_,{"pointer-events":"none",top:"0px",left:"0px"}),t=this.selectSource_(),t?(this.source_=t,this._videoObject_.setSource(t.path()),this.waitingForLoadEvent_||this.delegate_.videoDidUnexpectedlyReload(),this.waitingForLoadEvent_=!1):(e=this.familiesString(),i=e?e+" videos":"this video",this.abortWithError_(new n("Flash can't play "+i+"."))))},l.didLoad=function(e){var t;return t=l.registeredFlashVideoForId(e),t?t.flashObjectDidLoad_():void 0},l.onError=function(){},l.onWarning=function(){},l.registeredFlashVideos_={},l.registeredFlashVideoForId=function(e){return l.registeredFlashVideos_[e]},l.registerFlashVideo=function(e){return l.registeredFlashVideos_[e.id()]=e},l.unregisterFlashVideo=function(e){return delete l.registeredFlashVideos_[e.id()]},l.onStatus=function(e,t){var i;switch(i=l.registeredFlashVideoForId(e),t){case"NetStream.Unpause.Notify":case"NetStream.Buffer.Full":return i.onPlaying_();case"NetStream.Play.Stop":return i.onEnd_();case"NetStream.Seek.Notify":return i.onSeeked_();case"NetStream.Buffer.Empty":return i.onWaiting_();case"NetStream.Pause.Notify":return i.onPause_()}},l.prototype.onPause_=function(){return!this.isSeeking()||this.pausing_?(this.pausing_=!1,this.didPause_()):void 0},l.prototype.onWaiting_=function(){return this.hasLoadedMetadata()&&this.isPlaying()?this.didInterrupt_():void 0},l.prototype.onPlaying_=function(){if(this.isPlaying());else if(this._videoObject_.hasEnoughDataToPlay())return this.didPlay_(),this.startTimer_()},l.prototype.onEnd_=function(){return this.isPlaying()?(this.stopTimer_(),this.stopBufferTimer_(),this.pauseVideoObject_(),this.didEnd_()):void 0},l.prototype.onSeeked_=function(){return setTimeout(p.bind(this,function(){return this.isSeeking()&&this.playAfterSeeking_&&this._videoObject_.playVideo(),this.reloading_&&(this.reloading_=!1,this.playbackTimeBeforeReloading_=null,this.playAfterReloading_&&this.playVideoObject_()),(this.isSeeking()||this.isChangingQuality())&&(this.expectedPlaybackTime_=null,this.didSeek_()),this.updateTime_()}),90)},l.prototype.onProgress_=function(){return this.didUpdateBufferDuration_(this.videoObjectBufferDuration_())},l.prototype.flashObjectDidUnload_=function(){return this.objectLoaded_?(this.playbackTimeBeforeReloading_=this.playbackTime_,this.reloading_=!0,this.playAfterReloading_=this.isPlaying(),this.objectLoaded_=!1,l.unregisterFlashVideo(this),this.id_=-1,this.onProgress_(),this.stopBufferTimer_(),this.stopTimer_(),this.onWaiting_(),this.delegate_.videoWillUnexpectedlyReload(),this.playbackTime_=0,this.playbackTimeToSet_=null,this.loadVideoObject_()):void 0},l}(r),h.exports=l,h.exports||u});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("media/video/html5_video",["core/util","core/dom","core/events","core/range","core/error","media/video/video","graphics/size"],function(e,t,i,n,o,r,s){var a,l,u,h;return h=e._,u={},l={},a=function(e){function t(){t.__super__.constructor.apply(this,arguments),this._videoObject_=this._videoElement(),this.internalState_=t.VideoState.Paused,this.timeUpdateAfterInterrupting_=!1,this.qualityChangeState_=t.QualityChangeState.Unknown,this.failedSources_={},this._element().appendChild(this._videoElement()),this.didInitialize_()}return __extends(t,e),t.className="Html5Video",t.ReadyState={Nothing:0,Metadata:1,CurrentData:2,FutureData:3,EnoughData:4},t.NetworkState={Empty:0,Idle:1,Loading:2,NoSource:3},t.VideoState={Paused:0,Waiting:1,Playing:2},t.QualityChangeState={Unknown:0,WaitingLoadStart:1,WaitingMetadata:2,WaitingCanPlay:3,Seeking:4},t.canPlaySources=function(e,t){var i,n,o;if(e)for(n=0,o=t.length;o>n;n++)if(i=t[n],e.canPlayType(i.type()).length>0)return!0;return!1},t.prototype.shouldLoadVideoOnRelease=function(){return this.firstPlayingSource_&&this.firstPlayingSource_!==this._videoObject_.currentSrc},t.prototype.release=function(){var e,i;return e=this.shouldLoadVideoOnRelease(),clearTimeout(this.seekSanityCheckTimer_),this.invalidateMissingUpdatesTimer_(),this.invalidateSourceLoadingTimer_(),this.invalidateBufferUpdateTimer_(),i=this._videoObject_,this._videoObject_&&this.isListeningEvents_()&&(this.isPaused()||this.pause(),this.seekTo(0)),t.__super__.release.apply(this,arguments),e?i.load():void 0},t.prototype.technology=function(){return r.Technology.HTML5},t.prototype.isListeningEvents_=function(){return this.listeningEvents_},t.prototype.listenEvents_=function(){var e,n,o,r,s,a,l,u;this.listeningEvents_=!0,u=this._videoObject_,a=this.mediaEvents_();for(e in a)n=a[e],i.listen(u,e,h.bind(this,n));for(l=this.sources_,r=0,s=l.length;s>r;r++)o=l[r],(!h.Firefox||h.compareVersions(h.version,"11.0")>=0)&&this.listenSourceError_(o);return this._videoObject_.readyState>=t.ReadyState.Metadata?this.onMetadata_():void 0},t.prototype.unlistenEvents_=function(){var e,t,n,o;for(this.listeningEvents_=!1,o=this.sources_,t=0,n=o.length;n>t;t++)e=o[t],i.unlistenAll(e._element());return i.unlistenAll(this._videoObject_)},t.prototype.playVideoObject_=function(){var e,i;return t.canPlaySources(this._videoObject_,this.sources_)?this.isAtLastFrame()?setTimeout(h.bind(this,function(){return this.onPlaying_(),this.onEndPlaying_()}),1):this.internalPlay_():(e=this.familiesString(),i=e?e+" videos":"this video",this.abortWithError_(new o("Your browser can't play "+i+" using HTML5.")))},t.prototype.pauseVideoObject_=function(){return this.pausing_=!0,this.playAfterSeeking_=!1,this.seeking_=!1,this.internalState_=t.VideoState.Paused,this._videoObject_.pause()},t.prototype.videoObjectSeekTo_=function(e,t){var i;return i=this._videoObject_.paused,t||(this.playAfterSeeking_=!i),this.seekingToTime_=e,this.startSeekSanityCheck_(e),this.invalidateMissingUpdatesTimer_(),i||this._videoObject_.pause(),this._videoObject_.currentTime=e},t.prototype.videoObjectPlaybackTime_=function(){return this._videoObject_.currentTime},t.prototype.setVideoObjectQuality_=function(e){var i;return i=this.availableSources_()[e],i?(this.metadata_=null,this.setSource_(i),this._videoObject_.load(),this.qualityChangeState_=this.needsPlayPauseToChangeQuality_()?t.QualityChangeState.WaitingLoadStart:t.QualityChangeState.WaitingMetadata):void 0},t.prototype.availableQualities=function(){return h.keys(this.availableSources_())},t.prototype.hasSources_=function(){return this.sources_&&this.sources_.length>0},t.prototype.setVideoObjectVolume_=function(e){return this._videoObject_.volume=e},t.prototype.videoObjectVolume_=function(){return this._videoObject_.volume},t.prototype.videoObjectBufferDuration_=function(){var e,t;return t=this.playbackTime(),this.missingTimeUpdates_?t:(e=this.bufferRangeForPlaybackTime_(t),e?e.end:t)},t.prototype.initialVideoElementCss_=function(){return{position:"absolute",top:0,left:0,width:"100%",height:"100%",visibility:"visible",display:"block"}},t.prototype.supportsHtml5TextTrack_=function(){return"src"in document.createElement("track")},t.prototype.disableDefaultHtml5TextTracks_=function(){var e,t,i,n;if(this.supportsHtml5TextTrack_())for(n=this._videoObject_.textTracks,t=0,i=n.length;i>t;t++)e=n[t],e.mode="disabled";return this.defaultHtml5TextTracksDisabled_=!0},t.prototype.listenSourceError_=function(e){return i.listen(e._element(),i.EventTypes.Error,h.bind(this,function(t){return this.onSourceError_(t,e)}))},t.prototype.internalPlay_=function(){return(h.Safari||h.Chrome)&&"auto"!==this._videoObject_.preload&&(this._videoObject_.preload="auto"),this._videoObject_.play(),this.startSourceLoadingTimer_()},t.prototype.setSource_=function(e){return this._videoObject_.src=e.path()},t.prototype.needsPlayPauseToChangeQuality_=function(){return h.Firefox||h.Opera||h.Chrome&&0>h.compareVersions(h.version,"535.2")||h.IE||h.Safari&&0>h.compareVersions(h.version,"536.25")||h.Android},t.prototype.startSeekSanityCheck_=function(e){return clearTimeout(this.seekSanityCheckTimer_),this.seekEventsFired_=!1,this.seekSanityCheckTimer_=setTimeout(h.bind(this,function(){return this.released_?void 0:this.seekEventsFired_?void 0:this.videoObjectSeekTo_(e)}),1e3)},t.prototype.bufferRangeError_=function(){return.6},t.prototype.bufferRangeForPlaybackTime_=function(e){var t,i,n,o,r;for(t=this.bufferRangeError_(),r=this.bufferRanges_(),n=0,o=r.length;o>n;n++)if(i=r[n],i.contains(e,t))return i},t.prototype.bufferRanges_=function(){var e,t,i;if(t=[],this.metadata()&&(e=0,i=this._videoObject_.buffered))for(;i.length>e;)t.push(new n(i.start(e),i.end(e))),e++;return t},t.prototype.interruptPlayback_=function(){return this.isPlaying()?(this.didInterrupt_(),this.timeUpdateAfterInterrupting_=!1,this.invalidateMissingUpdatesTimer_()):void 0},t.prototype.resumePlayback_=function(){return this.isInterrupted()?(this.invalidateSourceLoadingTimer_(),this.options_.showDefaultControls&&(this._videoObject_.controls=!0),this.didPlay_(),this.onProgress_()):void 0},t.prototype.shouldInterruptPlayback_=function(){return!this.isInterrupted()&&(this.internalState_===t.VideoState.Waiting||this.internalState_===t.VideoState.Playing&&(this.isSeeking()||this.missingTimeUpdates_))},t.prototype.shouldResumePlayback_=function(){return this.isInterrupted()&&this.internalState_===t.VideoState.Playing&&!this.isSeeking()&&!this.missingTimeUpdates_},t.prototype.invalidateMissingUpdatesTimer_=function(){return clearTimeout(this.missingUpdatesTimer_),this.missingUpdatesTimer_=null},t.prototype.startMissingUpdatesTimer_=function(){return this.invalidateMissingUpdatesTimer_(),this.missingUpdatesTimer_=setTimeout(h.bind(this,function(){return this.onMissingTimeUpdates_()}),500)},t.prototype.supportsVideoType=function(e){return this._videoObject_.canPlayType(e).length>=1},t.prototype.playableSources=function(){var e,t,i,n,o;if(!this.playableSources_){for(e=[],o=this.sources_,i=0,n=o.length;n>i;i++)t=o[i],this.supportsVideoType(t.type())&&e.push(t);this.playableSources_=e}return this.playableSources_},t.prototype.availableSources_=function(){var e,t,i,n,o,r,s,a;if(i=this.metadata(),!i)return{};if(!this.supportedSources_)for(this.supportedSources_={},t=i.source,this.supportedSources_[t.quality()]=t,n=this.playableSources(),s=0,a=n.length;a>s;s++)r=n[s],r!==t&&(o=r.quality(),e=this.supportedSources_[o],(!e||r.family()===t.family()&&e.family()!==t.family())&&(this.supportedSources_[o]=r));return this.supportedSources_},t.prototype.sourceFromSourcePath_=function(e){var t,i,n,o;for(o=this.sources_,i=0,n=o.length;n>i;i++)if(t=o[i],t.path()===e)return t},t.prototype.mediaEvents_=function(){return{loadstart:this.onLoadStart_,progress:this.onProgress_,suspend:this.onSuspend_,abort:this.onAbort_,error:this.onError_,emptied:this.onEmptied_,stalled:this.onStalled_,loadedmetadata:this.onMetadata_,canplay:this.onCanplay_,playing:this.onPlaying_,waiting:this.onWaiting_,seeking:this.onSeeking_,seeked:this.onSeeked_,ended:this.onEnd_,timeupdate:this.onTimeUpdate_,pause:this.onPause_,volumechange:this.onVolumeChange_}},t.prototype.didFailLoadingSources_=function(){return this.abortWithError_(new o("Media source loading has failed."))},t.prototype.sourceLoadingTimerFired_=function(){return this._videoObject_.networkState!==t.NetworkState.NoSource||this._videoObject_.readyState!==t.ReadyState.Nothing||h.IE?void 0:this.didFailLoadingSources_()},t.prototype.invalidateSourceLoadingTimer_=function(){return this.sourceLoadingTimer_?(clearTimeout(this.sourceLoadingTimer_),this.sourceLoadingTimer_=null):void 0},t.prototype.startSourceLoadingTimer_=function(){return this.invalidateSourceLoadingTimer_(),this.sourceLoadingTimer_=setTimeout(h.bind(this,this.sourceLoadingTimerFired_),4e3)},t.prototype.abortWithError_=function(){return this.invalidateSourceLoadingTimer_(),t.__super__.abortWithError_.apply(this,arguments)},t.prototype.invalidateBufferUpdateTimer_=function(){return this.updatebufferTimer_?(clearTimeout(this.updatebufferTimer_),this.updatebufferTimer_=null):void 0},t.prototype.startBufferUpdateTimer_=function(){return this.invalidateBufferUpdateTimer_(),this.updatebufferTimer_=setTimeout(h.bind(this,this.onProgress_),50)},t.prototype.onDurationChange_=function(){},t.prototype.onMetadata_=function(){return this.extractMetadata_()},t.prototype.extractMetadata_=function(){var e;return(e=this.sourceFromSourcePath_(this._videoObject_.currentSrc))?(this.firstPlayingSource_||(this.firstPlayingSource_=this._videoObject_.currentSrc),this.metadata_={duration:this._videoObject_.duration,size:new s(this._videoObject_.videoWidth,this._videoObject_.videoHeight),source:e,quality:e.quality()},this.isChangingQuality()&&(this.qualityChangeState_=t.QualityChangeState.WaitingCanPlay),this.didLoadMetadata_()):(this._videoObject_.load(),void 0)},t.prototype.onVolumeChange_=function(){return this.didChangeVolume_(this.volume())},t.prototype.onPause_=function(){return!this.isSeeking()||this.pausing_?(this.missingTimeUpdates_=!1,this.pausing_=!1,this.isUnexpectedPause_()?this.didUnexpectedlyPause_():this.didPause_(),this.invalidateMissingUpdatesTimer_()):void 0},t.prototype.onSuspend_=function(){},t.prototype.onAbort_=function(){},t.prototype.onError_=function(){},t.prototype.onSourceError_=function(e,t){return this.failedSources_[t.path()]=1,h.keys(this.failedSources_).length===this.sources_.length?(this.invalidateSourceLoadingTimer_(),this.didFailLoadingSources_()):void 0},t.prototype.onEmptied_=function(){return this.pausing_&&this.onPause_(),this.failedLoadingSources_=0,this.isChangingQuality()?(this.invalidateSourceLoadingTimer_(),this.invalidateMissingUpdatesTimer_(),this.invalidateBufferUpdateTimer_()):void 0},t.prototype.onStalled_=function(){},t.prototype.onProgress_=function(){return this.hasLoadedMetadata()?1>this.bufferRanges_().length?this.startBufferUpdateTimer_():this.didUpdateBufferDuration_(this.videoObjectBufferDuration_()):void 0},t.prototype.onTimeUpdate_=function(){var e,i;return this.hasLoadedMetadata()&&!this.isChangingQuality()?this.isSeeking()?(this.didUpdatePlaybackTime_(this.seekingToTime_),void 0):(this.didUpdatePlaybackTime_(this.videoObjectPlaybackTime_()),i=this._videoObject_.currentTime,e=!this.lastTimeUpdate_||i!==this.lastTimeUpdate_||this.isAtLastFrame(),this.isInterrupted()||this.internalState_!==t.VideoState.Playing||(e?this.startMissingUpdatesTimer_():this.onMissingTimeUpdates_()),e&&(this.missingTimeUpdates_=!1),this.lastTimeUpdate_=i,this.shouldResumePlayback_()?(this.startMissingUpdatesTimer_(),this.resumePlayback_()):void 0):void 0},t.prototype.onMissingTimeUpdates_=function(){return this.missingTimeUpdates_=!0,this.onProgress_(),this.shouldInterruptPlayback_()?this.interruptPlayback_():void 0},t.prototype.onPlaying_=function(){return this.internalState_=t.VideoState.Playing,this.defaultHtml5TextTracksDisabled_?void 0:this.disableDefaultHtml5TextTracks_()},t.prototype.onWaiting_=function(){return this.hasLoadedMetadata()?(this.internalState_=t.VideoState.Waiting,this.shouldInterruptPlayback_()?this.interruptPlayback_():void 0):void 0},t.prototype.onSeeking_=function(){return this.seekEventsFired_=!0,this.isSeeking()||this.willseek_(),this.shouldInterruptPlayback_()?this.interruptPlayback_():void 0},t.prototype.onSeeked_=function(){return this.seekEventsFired_=!0,this.isSeeking()&&this.playAfterSeeking_&&this._videoObject_.play(),(this.isSeeking()||this.isChangingQuality())&&(this.didSeek_(),this.shouldResumePlayback_())?this.resumePlayback_():void 0},t.prototype.onEnd_=function(){return this.internalState_===t.VideoState.Playing?this.onEndPlaying_():void 0},t.prototype.onEndPlaying_=function(){return this.invalidateSourceLoadingTimer_(),this.pause(),this.didEnd_()},t.prototype.onCanplay_=function(){return this.isChangingQuality()&&this.qualityChangeState_===t.QualityChangeState.WaitingCanPlay?(this.qualityChangeState_=t.QualityChangeState.Unknown,this.didChangeQuality_()):void 0},t.prototype.onLoadStart_=function(){return this.isChangingQuality()&&this.qualityChangeState_===t.QualityChangeState.WaitingLoadStart?(this._videoObject_.play(),setTimeout(h.bind(this,function(){return this._videoObject_.pause()}),1)):void 0},t.prototype.isUnexpectedPause_=function(){return(this.isPlaying()||this.isInterrupted())&&!this.pausing_&&this._videoObject_.paused&&(!this.hasLoadedMetadata()||Math.abs(this._videoObject_.duration-this._videoObject_.currentTime)>.1)},t.prototype.widthAttribute_=function(){return this._videoElement_.getAttribute("width")},t.prototype.heightAttribute_=function(){return this._videoElement_.getAttribute("height")},t.prototype.width_=function(){return parseFloat(this.widthAttribute_()||0)},t.prototype.height_=function(){return parseFloat(this.heightAttribute_()||0)},t}(r),u.exports=a,u.exports||l});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("media/video/ie_video",["media/video/html5_video","core/util"],function(e,t){var i,n,o,r;return r=t._,o={},n={},i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.className="IeVideo",t.prototype.onTimeUpdate_=function(){return!r.IE9||this.hasLoadedMetadata()||this.isChangingQuality()||(this.receivedOnTimeUpdateBeforeMetadata_=!0),t.__super__.onTimeUpdate_.apply(this,arguments)},t.prototype.internalPlay_=function(){return r.gtIE9&&(this.nativeLoadCalled_||(this.nativeLoadCalled_=!0,this._videoObject_.load(),this._videoObject_.preload="auto")),t.__super__.internalPlay_.apply(this,arguments),this.playCalledAtLeastOnce_=!0,this.metadataOnHold_?this._callMetadata():void 0},t.prototype._callMetadata=function(e){return null==e&&(e=0),this._metadataTimer=setTimeout(r.bind(this,function(){return r.isNumber(this._videoObject_.duration)&&this._videoObject_.duration>0?this.onMetadata_():this._callMetadata(20)},e))},t.prototype.onMetadata_=function(){var e,i,n,o,s,a;if(!this.playCalledAtLeastOnce_)return this.metadataOnHold_=!0,void 0;if(this.metadataOnHold_=!1,null!=this._metadataTimer&&clearTimeout(this._metadataTimer),t.__super__.onMetadata_.apply(this,arguments),this.receivedOnTimeUpdateBeforeMetadata_&&(this.receivedOnTimeUpdateBeforeMetadata_=!1,this._videoObject_.pause(),this._videoObject_.play()),!this._playingSourceTag_&&(i=r.toArray(this._videoElement_.getElementsByTagName("source")),e=this.metadata_.source.path(),i)){for(s=[],n=0,o=i.length;o>n;n++)a=i[n],a.src===e?(this._playingSourceTag_=a,s.push(this._originalSource_=e)):s.push(void 0);return s}},t.prototype.setSource_=function(e){return this._playingSourceTag_.src=e.path()},t}(e),o.exports=i,o.exports||n});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("media/video/ios_video",["media/video/touch_video","core/util","ui/view"],function(e,t,i){var n,o,r,s;return s=t._,r={},o={},n=function(e){function t(){t.__super__.constructor.apply(this,arguments),s.iPad?i.addCssToElement(this._videoElement_,{display:"block"}):i.addCssToElement(this._videoElement_,{width:"1px",height:"1px"})}return __extends(t,e),t.className="IosVideo",t.prototype.initialVideoElementCss_=function(){var e;return e=t.__super__.initialVideoElementCss_.apply(this,arguments),s.extend(e,{display:"none"}),e},t.prototype.didExitNativeFullscreen_=function(){return t.__super__.didExitNativeFullscreen_.apply(this,arguments),s.iPad?void 0:i.addCssToElement(this._videoElement_,{width:"1px",height:"1px"})},t.prototype.onPlaying_=function(){return t.__super__.onPlaying_.apply(this,arguments),this.nativeFullscreen_&&s.iPad?this.didUnexpectedlyPlay_():void 0},t.prototype.internalPlay_=function(){return s.iPad?t.__super__.internalPlay_.apply(this,arguments):(i.addCssToElement(this._videoElement_,{display:"block",width:"100%",height:"100%"}),setTimeout(s.bind(this,function(){return this._videoObject_.play(),this.startSourceLoadingTimer_()}),100))},t}(e),r.exports=n,r.exports||o});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("media/video/opera_video",["media/video/html5_video","core/util","media/media_source"],function(e,t,i){var n,o,r,s;return s=t._,r={},o={},n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.className="OperaVideo",t.prototype.supportsVideoType=function(e){return 0>=s.compareVersions(s.version,"11.01")?e===i.Type.Ogg?!0:!1:t.__super__.supportsVideoType.apply(this,arguments)},t.prototype.onMetadata_=function(){return t.__super__.onMetadata_.apply(this,arguments),this.isChangingQuality()?void 0:this._videoObject_.currentTime=0},t}(e),r.exports=n,r.exports||o});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("media/video/safari_video",["media/video/html5_video","core/util"],function(e,t){var i,n,o,r;return r=t._,o={},n={},i=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return __extends(i,t),i.className="SafariVideo",i.prototype.requireNewVideoElement=function(){return!0},i.prototype.onCanplay_=function(){return this.isChangingQuality()&&this.qualityChangeState_===e.QualityChangeState.WaitingCanPlay&&(this.seekingFired_=!1,setTimeout(r.bind(this,function(){return this._videoObject_.paused&&!this.seekingFired_?(this.seekingFired_=!0,this.onSeeking_(),this.onSeeked_()):void 0}),999)),i.__super__.onCanplay_.apply(this,arguments)},i.prototype.onSeeking_=function(){return this.seekingFired_=!0,i.__super__.onSeeking_.apply(this,arguments)},i.prototype.bufferRangeForPlaybackTime_=function(){var e;return e=this.bufferRanges_(),e.length>0?e[0]:void 0},i.prototype.onMetadata_=function(){return 0>=r.compareVersions(r.version,"533.16")&&this.isChangingQuality()&&setTimeout(r.bind(this,this.onProgress_),400),i.__super__.onMetadata_.apply(this,arguments)},i}(e),o.exports=i,o.exports||n});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("media/video/touch_video",["media/video/html5_video","core/util","core/events"],function(e,t,i){var n,o,r,s;return s=t._,r={},o={},n=function(e){function t(){t.__super__.constructor.apply(this,arguments),this.bindedDidExitNativeFullscreen_=s.bind(this,this.didExitNativeFullscreen_),this.bindedDidEnterNativeFullscreen_=s.bind(this,this.didEnterNativeFullscreen_)}return __extends(t,e),t.className="TouchVideo",t.prototype.listenEvents_=function(){return t.__super__.listenEvents_.apply(this,arguments),i.listen(this._videoElement_,"webkitbeginfullscreen",this.bindedDidEnterNativeFullscreen_),i.listen(this._videoElement_,"webkitendfullscreen",this.bindedDidExitNativeFullscreen_)},t.prototype.unlistenEvents_=function(){return t.__super__.unlistenEvents_.apply(this,arguments),i.unlisten(this._videoElement_,"webkitbeginfullscreen",this.bindedDidEnterNativeFullscreen_),i.unlisten(this._videoElement_,"webkitendfullscreen",this.bindedDidExitNativeFullscreen_)},t.prototype.didEnterNativeFullscreen_=function(){return this.nativeFullscreen_=!0},t.prototype.didExitNativeFullscreen_=function(){return this.nativeFullscreen_=!1},t}(e),r.exports=n,r.exports||o});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("media/video/video",["graphics/size","graphics/rect","core/util","core/dom","core/image_importer","core/error","ui/view","media/media_item","media/media_source","sublime/video_manager"],function(e,t,i,n,o,r,s,a,l,u){var h,p,c,d,_,y;
return y=i._,h=a.MediaItem,p=a.MediaItemError,_={},d={},c=function(i){function a(e,t,i,n){a.__super__.constructor.call(this,"span"),this.options_=n,this.videoOptions_=i,this.loadState_=h.LOAD_STATE.UNKNOWN,this.state_=h.STATE.PAUSED,this.delegate_=null,this.isLoadingMetadata_=!1,this.changingQuality_=!1,this.videoElementPosterUrl_=null,this.imageUrls_=[],this.uidOrigin_=a.ParamOrigin.None,this.vidOrigin_=a.ParamOrigin.None,this.nameOrigin_=a.ParamOrigin.None,this.setUserInteractionEnabled(!1),this.source_=null,this.sources_=t||a.extractSources(e),this.setVideoElement_(this.usableVideoElement_(e)),this.state_=a.State.Paused,this.metadata_=null,this.seeking_=!1,this.ready_=!1}return __extends(a,i),a.className="Video",a.State={Paused:"paused",Playing:"playing",Interrupted:"interrupted"},a.Technology={Unknown:"unknown",Flash:"flash",HTML5:"html5",YouTube:"youtube",Dailymotion:"dailymotion"},a.BufferSupport={None:0,OnStart:1,Full:2},a.ParamOrigin={None:0,Attribute:1,Source:2,Youtube:3},a.extractSources=function(e){var t,i,o,r,s,a,u,h;if(r=[],i=null,o=e.getAttribute("src"),o?(h=n.create("source"),h.src=o,i=[h]):i=y.toArray(e.getElementsByTagName("source")),i)for(a=0,u=i.length;u>a;a++)h=i[a],s=h.getAttribute("src"),y.isString(s)&&!y.isEmptyString(s)&&(t=new l(h),r.push(t));return r},a.prototype.isReady=function(){return this.ready_},a.prototype.delegate=function(){return this.delegate_},a.prototype.setDelegate=function(e){return this.delegate_=e},a.prototype.metadata=function(){return this.metadata_},a.prototype.hasLoadedMetadata=function(){return null!=this.metadata_},a.prototype.playbackState=function(){return this.state_},a.prototype.duration=function(){return this.hasLoadedMetadata()?this.metadata_.duration:void 0},a.prototype.bufferDuration=function(){return this.invoke_(this.videoObjectBufferDuration_,0)},a.prototype.playbackTime=function(){return this.invoke_(this.videoObjectPlaybackTime_,0)},a.prototype.seekTo=function(e){var t,i,n;if(this.hasLoadedMetadata()){if(t=y.IE9?.7:.2,i=this.duration()-t,e=Math.max(0,Math.min(e,i)),.1>Math.abs(e-this.playbackTime()))return;return this.delegate_.videoWillSeek(this,e),n=this.seeking_,this.seeking_=!0,this.videoObjectSeekTo_(e,n)}},a.prototype.volume=function(){return this.invoke_(this.videoObjectVolume_,.5)},a.prototype.setVolume=function(e){return this.hasLoadedMetadata()?this.setVideoObjectVolume_(e):void 0},a.prototype.quality=function(){return this.hasLoadedMetadata()?this.metadata().quality:void 0},a.prototype.isChangingQuality=function(){return this.changingQuality_},a.prototype.setQuality=function(e){return!this.isChangingQuality()&&e!==this.quality()&&y.contains(this.availableQualities(),e)?(this.changingQuality_=!0,this.delegate_&&this.delegate_.videoWillChangeQuality(this,e),this.playbacktimeBeforeChangingQuality_=y.round2(this.playbackTime()),this.setVideoObjectQuality_(e),this.didUpdateBufferDuration_(this.playbackTime())):void 0},a.prototype.isSeeking=function(){return this.seeking_},a.prototype.isPaused=function(){return this.state_===a.State.Paused},a.prototype.isPlaying=function(){return this.state_===a.State.Playing},a.prototype.isInterrupted=function(){return this.state_===a.State.Interrupted},a.prototype.play=function(){return this.isListeningEvents_()||this.listenEvents_(),this.hasSources_()?(this.didInterrupt_(),this.playVideoObject_()):this.abortWithError_(new r(p.NoSources))},a.prototype.pause=function(){return this.isPaused()?void 0:(this.delegate_.videoWillPause(this),this.setState_(a.State.Paused),this.pauseVideoObject_())},a.prototype._videoElement=function(){return this._videoElement_},a.prototype.videoElementPosterUrl=function(){return this.videoElementPosterUrl_},a.prototype.imageUrls=function(){return this.imageUrls_},a.prototype.acceptPosterImage_=function(){return!0},a.prototype.loadPosterImage=function(e){var t;return t=y.clone(this.imageUrls()),this.loadFirstAvailableImage_(t,e)},a.prototype.loadFirstAvailableImage_=function(e,t){var i;return e.length>0?(i=new o(e.shift()),i.on({end:y.bind(this,function(i,n){return n&&this.acceptPosterImage_(n)?t?t(n):void 0:this.loadFirstAvailableImage_(e,t)})}),i.start()):t?t(null):void 0},a.prototype.uid=function(){var e,t;return this.uid_||(t=this.videoOptions_.uid,null==t||y.isEmptyString(y.trim(t))?this.sources_.length>0&&(e=this.sources_[0].pathWithoutParams(),this.uid_=y.crc32(e),this.uidOrigin_=a.ParamOrigin.Source):(this.uid_=y.trim(t),this.uidOrigin_=a.ParamOrigin.Attribute)),this.uid_},a.prototype.validUID=function(){var e;return e=this.videoOptions_.uid,/^[a-z0-9_\-]{1,64}$/i.test(e)?e:void 0},a.prototype.vid=function(){},a.prototype.name=function(){return this.name_||(this.name_=this.videoOptions_.title||this._videoElement_.getAttribute("title")||this.videoOptions_.name,this.nameOrigin_=a.ParamOrigin.Attribute),this.name_},a.prototype.uidOrigin=function(){return this.uid(),this.uidOrigin_},a.prototype.vidOrigin=function(){return this.vidOrigin_},a.prototype.nameOrigin=function(){return this.nameOrigin_},a.prototype.technology=function(){return a.Technology.Unknown},a.prototype.canSeekOutsideBufferBounds=function(){return!0},a.prototype.requireNewVideoElement=function(){return!1},a.prototype.isListeningEvents_=function(){},a.prototype.listenEvents_=function(){},a.prototype.unlistenEvents_=function(){},a.prototype.playVideoObject_=function(){},a.prototype.pauseVideoObject_=function(){},a.prototype.videoObjectSeekTo_=function(){},a.prototype.videoObjectPlaybackTime_=function(){},a.prototype.setVideoObjectQuality_=function(){},a.prototype.availableQualities=function(){return[]},a.prototype.hasSources_=function(){},a.prototype.source=function(){},a.prototype.setVideoObjectVolume_=function(){},a.prototype.videoObjectVolume_=function(){},a.prototype.videoObjectBufferDuration_=function(){},a.prototype.initialVideoElementCss_=function(){return{display:"none"}},a.prototype.didInitialize_=function(){return this.ready_=!0,this.delegate_?this.delegate_.videoIsReady(this):void 0},a.prototype.didEnd_=function(){return setTimeout(y.bind(this,function(){return this.delegate_.videoDidEnd(this)}))},a.prototype.didUnexpectedlyPlay_=function(){return this.delegate_.videoDidUnexpectedlyPlay(this)},a.prototype.didUnexpectedlyPause_=function(){return this.delegate_.videoDidUnexpectedlyPause(this)},a.prototype.didPause_=function(){return this.delegate_.videoDidPause(this)},a.prototype.didPlay_=function(){return this.setState_(a.State.Playing),this.delegate_.videoDidStartPlaying(this)},a.prototype.didUpdateBufferDuration_=function(e){return this.delegate_.videoDidUpdateBufferDuration(this,e)},a.prototype.didInterrupt_=function(){return this.setState_(a.State.Interrupted),this.delegate_.videoDidInterrupt(this)},a.prototype.didUpdatePlaybackTime_=function(e){return this.isChangingQuality()?void 0:this.delegate_.videoDidUpdatePlaybackTime(this,e)},a.prototype.willseek_=function(){},a.prototype.didSeek_=function(){return this.isChangingQuality()?(this.changingQuality_=!1,this.delegate_.videoDidChangeQuality(this,this.quality())):(this.seeking_=!1,this.delegate_.videoDidSeek(this))},a.prototype.didLoadMetadata_=function(){return this.resizeVideo_(),this.delegate_.videoDidLoadMetadata(this,this.metadata_)},a.prototype.didChangeVolume_=function(e){return this.delegate_.videoDidChangeVolume(this,e)},a.prototype.didChangeQuality_=function(){return this.isChangingQuality()?this.videoObjectSeekTo_(this.playbacktimeBeforeChangingQuality_):void 0},a.prototype.didUnexpectlyChangeQuality_=function(e){return this.delegate_.videoDidUnexpectlyChangeQuality(this,e)},a.prototype.invoke_=function(e,t){var i;return i=t,this.hasLoadedMetadata()&&(i=e.apply(this)),i},a.prototype.bufferSupport=function(){return this.bufferSupport_||(this.bufferSupport_=a.BufferSupport.Full),this.bufferSupport_},a.prototype.setState_=function(e){return this.state_=e},a.prototype.usableVideoElement_=function(e){var t;return this.requireNewVideoElement()?(t=e.cloneNode(!0),t.removeAttribute("id"),t.removeAttribute("class"),s.setCssToElement(e,{display:"none"}),e.src="",u.sharedInstance().registerClonedVideoElement(e,t)):t=e,t},a.prototype.setVideoElement_=function(e){return this._element()&&this.isListeningEvents_()&&this.unlistenEvents_(),e.controls=!1,s.setCssToElement(e,this.initialVideoElementCss_()),this._videoElement_=e,this.videoElementPosterUrl_=this.extractPosterAttr_(),y.isString(this.videoElementPosterUrl_)&&!y.isEmptyString(this.videoElementPosterUrl_)&&this.imageUrls_.push(this.videoElementPosterUrl_),this.tagSize_=this.extractVideoElementSize_(e)},a.prototype.extractPosterAttr_=function(){var e;return e=this._videoElement_.poster,y.isString(e)&&e.length>0||(e=this._videoElement_.getAttribute("poster")),y.makeAbsolutePath(e)},a.prototype.release=function(){return this._videoObject_&&this.isListeningEvents_()&&this.unlistenEvents_(),this.released_=!0,this.delegate_=null,this._element_=null,this._videoElement_=null,this._videoObject_=null,this.metadata_=null},a.prototype.stripVideoElementPoster=function(){return this._videoElement_.removeAttribute("poster")},a.prototype.loadState=function(){return this.loadState_},a.prototype.sources=function(){return this.sources_},a.prototype.setSource=function(e){return this.source_=e},a.prototype.internalSetAlpha_=function(e){return a.__super__.internalSetAlpha_.call(this,e),e>0?this.css({visibility:"visible"}):this.css({visibility:"hidden"})},a.prototype.didMoveToParent=function(e){return a.__super__.didMoveToParent.apply(this,arguments),e?this.setFrame(e.bounds()):void 0},a.prototype.tagSize=function(){return this.tagSize_},a.prototype.extractVideoElementSize_=function(t){var i,n,o;return this.tagSize_=e.defaultSize(),t.parentNode&&(n=y.size(t.parentNode)),o=t.getAttribute("width"),/^\d+(px)?$/.test(o)&&o>0&&(this.tagSize_.width=parseFloat(o)),i=t.getAttribute("height"),/^\d+(px)?$/.test(i)&&i>0&&(this.tagSize_.height=parseFloat(i)),this.tagSize_},a.prototype.videoAspectRatio_=function(){return this.hasLoadedMetadata()?this.metadata_.size.width/this.metadata_.size.height:this.tagSize_.width/this.tagSize_.height},a.prototype.resizeVideo_=function(){var e,i,n,o,r,s;return n=this.parentSize(),i=n.width/n.height,s=this.bounds().size,e=this.videoAspectRatio_(),i>=e?(r=parseInt((n.height*e).toFixed(0)),this.setFrame(new t(parseInt(n.width-r)/2,0,r,n.height)),this.css({maxWidth:r+"px"})):e>i?(o=n.width/e,this.setFrame(new t(0,parseInt(n.height-o)/2,n.width,parseInt(o))),this.css({maxWidth:n.width+"px"})):void 0},a.prototype.parentDidResize=function(){return this.resizeVideo_()},a.prototype.sourceFamilies=function(){var e,t,i,n,o;for(e={},o=this.sources_,i=0,n=o.length;n>i;i++)t=o[i],t.family()&&(e[t.family()]=!0);return y.keys(e)},a.prototype.familiesString=function(){var e,t;switch(e=this.sourceFamilies(),e.length){case 0:return null;case 1:return e.join(", ");default:return t=e.pop(),e.join(", ")+" or "+t}},a.prototype.abortWithError_=function(e){return this.isPaused()||this.pause(),this.delegate_?this.delegate_.videoDidFailWithError(this,e):void 0},a.prototype.isAtLastFrame=function(){var e;return e=.05,this.duration()>0&&this.duration()-e<this.playbackTime()},a}(s),_.exports=c,_.exports||d}),sublime_.define("media/video/video_picker",["media/video/html5_video","media/video/flash_video","media/video/firefox_video","media/video/opera_video","media/video/youtube_video","media/video/dailymotion_video","media/video/video","core/util","media/media_source","media/video/android_video","media/video/ios_video","media/video/chrome_video","media/video/ie_video","media/video/safari_video"],function(e,t,i,n,o,r,s,a,l,u,h,p,c,d){var _,y,g,f;return f=a._,g={},y={},_=function(a,_,y){var g,m,v,w,b,T,x;if(null==y&&(y={}),null!=_.youtubeId)return new o(a,null,_,y);if(null!=_.dailymotionId)return new r(a,null,_,y);for(v=s.extractSources(a),w=f.isFunction(a.canPlayType),g=!1,T=0,x=v.length;x>T;T++)if(m=v[T],m.family()===l.Family.Mp4){g=!0;break}return!f.mobile&&(!w||v.length>0&&!e.canPlaySources(a,v)&&g||"true"===_.forceFlash)||f.Chrome&&f.Windows&&f.flash?new t(a,null,_,y):(b=null,b=f.Android?new u(a,v,_,y):f.iOS?new h(a,v,_,y):f.Chrome?new p(a,v,_,y):f.Firefox?new i(a,v,_,y):f.Opera?new n(a,v,_,y):f.IE?new c(a,v,_,y):f.Safari?new d(a,v,_,y):new e(a,v,_,y))},g.exports=_,g.exports||y});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},__indexOf=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};sublime_.define("media/video/youtube_video",["core/util","core/dom","core/events","core/error","ui/view","media/video/video","graphics/size","media/media_source"],function(e,t,i,n,o,r,s,a){var l,u,h,p;return p=e._,h={},u={},l=function(e){function l(){var e;l.__super__.constructor.apply(this,arguments),this.youtubeId_=this.videoOptions_.youtubeId,this.seekId_=0,e="//img.youtube.com/vi/",this.imageUrls_.push(""+e+this.youtubeId_+"/hqdefault.jpg"),this.imageUrls_.push(""+e+this.youtubeId_+"/mqdefault.jpg"),this.playbackTime_=0,l.apiReady_(p.bind(this,function(){return!this.released_&&(this._YT_=window.YT,this.rootView())?this.createPlayer_():void 0})),p.Chrome&&p.Windows&&p.compareVersions(p.chromeVersion,"25")>0&&0>p.compareVersions(p.chromeVersion,"28")||(this.setAlpha(.02),this.css({"z-index":"10"}))}return __extends(l,e),l.className="YoutubeVideo",l.APIState={None:0,Loading:1,Ready:2},l.currentAPIState_=l.APIState.None,l.readyCallbacks_=[],l.apiReady_=function(e){switch(l.currentAPIState_){case l.APIState.None:return e&&l.readyCallbacks_.push(e),l.loadAPI_();case l.APIState.Loading:if(e)return l.readyCallbacks_.push(e);break;case l.APIState.Ready:if(e)return e()}},l.loadAPI_=function(){var e,t,i,n,o;return l.currentAPIState_===l.APIState.None?(l.currentAPIState_=l.APIState.Loading,window.YT||(o=document.createElement("script"),o.src="//www.youtube.com/iframe_api",i=document.getElementsByTagName("script")[0],i?i.parentNode.insertBefore(o,i):(n=document.getElementsByTagName("head")[0],n&&n.appendChild(o))),t=function(){var t,i,n,o;for(l.currentAPIState_=l.APIState.Ready,o=l.readyCallbacks_,i=0,n=o.length;n>i;i++)t=o[i],t();return l.readyCallbacks_=[],e?e():void 0},window.YT&&window.YT.Player?t():(e=window.onYouTubeIframeAPIReady,window.onYouTubeIframeAPIReady=t)):void 0},l.prototype.bufferSupport=function(){return r.BufferSupport.OnStart},l.prototype.acceptPosterImage_=function(e){return e.height>=180},l.prototype.technology=function(){return r.Technology.YouTube},l.prototype.canSeekOutsideBufferBounds=function(){return!0},l.prototype.isListeningEvents_=function(){return this.listeningObject_},l.prototype.listenEvents_=function(){return this.listeningObject_=!0},l.prototype.unlistenEvents_=function(){return this.listeningObject_=!1},l.prototype.playVideoObject_=function(){return this.stopForegroundHack(),this.supportsYoutubeIframeApi_()?this.videoObjectReady_?(this.waitingForPlayingEvent_=!0,this.unexpectedPlay=!1,this.pausing_=!1,this.playOnVideoObjectReady_=!1,this._videoObject_.playVideo()):this.playOnVideoObjectReady_=!0:this.injectYoutubePlayerWithApiSupport_(!1)},l.prototype.pauseVideoObject_=function(){return this.videoObjectReady_&&(this.waitingForPlayingEvent_=!1,this.pausing_=!0,this._videoObject_.pauseVideo(),this.stopTimer_()),this.playOnVideoObjectReady_=!1},l.prototype.videoObjectSeekTo_=function(e){var t,i;return e>=this.metadata_.duration&&(e-=.04),this.seekId_++,this.playbackTime_=e,p.mobile&&this.ended_?(this.didSeek_(),void 0):(i=this._videoObject_.getPlayerState()===this._YT_.PlayerState.PAUSED,this._videoObject_.seekTo(e,!0),p.mobile?this.didSeek_():i?(t=this.seekId_,setTimeout(p.bind(this,function(){return this.isSeeking()&&t===this.seekId_?this.didSeek_():void 0}),100)):void 0)},l.prototype.videoObjectPlaybackTime_=function(){return this.playbackTime_},l.prototype.setVideoObjectQuality_=function(e){return this._videoObject_.setPlaybackQuality(this.supportedQualities_()[e])},l.prototype.availableQualities=function(){return this.hasLoadedMetadata()?p.keys(this.supportedQualities_()):[]},l.prototype.hasSources_=function(){return!0},l.prototype.source=function(){return null},l.prototype.setVideoObjectVolume_=function(e){var t;return this.videoVolume_=e,t=parseInt(100*e,10),this._videoObject_.setVolume(t),this.didChangeVolume_(e)},l.prototype.videoObjectVolume_=function(){return this.videoVolume_},l.prototype.videoObjectBufferDuration_=function(){var e;return e=Math.min(1,this._videoObject_.getVideoLoadedFraction()),e*this.metadata_.duration},l.prototype.uid=function(){var e;return this.uid_||(e=this.videoOptions_.uid,null==e||p.isEmptyString(p.trim(e))?(this.uid_=this.vid(),this.uidOrigin_=this.vidOrigin()):(this.uid_=p.trim(e),this.uidOrigin_=r.ParamOrigin.Attribute)),this.uid_},l.prototype.vid=function(){return this.vid_||(this.vid_=this.youtubeId_,this.vidOrigin_=r.ParamOrigin.Youtube),this.vid_},l.prototype.onMetadata_=function(){return this.metadata_={duration:this._videoObject_.getDuration(),size:this.sizeForYoutubeQuality_(this._videoObject_.getPlaybackQuality()),quality:this.quality_()},this.didLoadMetadata_(),this.startBufferTimer_(),this.isChangingQuality()?(this.changingQuality_=!1,this.delegate_.videoDidChangeQuality(this,this.metadata_)):void 0},l.prototype.onPlaying_=function(){return this.waitingForPlayingEvent_=!1,this.blackOverlay().setHidden(!0),this.didPlay_(),this.startTimer_()},l.prototype.onPause_=function(){return this.stopTimer_(),this.didPause_(),this.pausing_=!1},l.prototype.onProgress_=function(){var e;return e=this.videoObjectBufferDuration_(),e!==this.bufferDuration_&&this.didUpdateBufferDuration_(e),this.bufferDuration_=e,e>=this.metadata_.duration?this.stopBufferTimer_():void 0},l.prototype.updateTime_=function(){var e,t;return this.released_?void 0:(t=this._videoObject_.getCurrentTime(),e=this.playbackTime_,this.playbackTime_=t,t!==e?this.didUpdatePlaybackTime_(t):void 0)},l.prototype.onTimeUpdate_=function(){return this.isSeeking()?void 0:this.updateTime_()},l.prototype.onEnd_=function(){return this.ended_=!0,this.playbackTime_=this.metadata_.duration,this.didUpdatePlaybackTime_(this.playbackTime_),this.pause(),this.blackOverlay().setHidden(!1),this.stopBufferTimer_(),this.stopTimer_(),this.didEnd_()},l.prototype.onUnexpectedQualityChange_=function(){var e,t,i;return this.hasLoadedMetadata()&&(i=this._videoObject_.getPlaybackQuality(),t=this.qualityForYoutubeQuality_(i),e=this.metadata_.quality,this.metadata_.size=this.sizeForYoutubeQuality_(i),this.metadata_.quality=t,this.supportedQualities_[t]=i,t!==e)?this.didUnexpectlyChangeQuality_(t):void 0},l.prototype.onError_=function(e){return this.stopBufferTimer_(),this.stopTimer_(),this.abortWithError_(e)},l.prototype.layoutSubviews=function(){return l.__super__.layoutSubviews.apply(this,arguments),this.blackOverlay().setFrame(this.bounds())},l.prototype.blackOverlay=function(){return this.blackOverlay_||(this.blackOverlay_=new o,this.blackOverlay_.setUserInteractionEnabled(!1),this.blackOverlay_.setAutoresizingMask(o.AutoresizingMask.FlexibleHeight|o.AutoresizingMask.FlexibleWidth),this.blackOverlay_.css({background:"#000",opacity:"0.99","pointer-events":"none"})),this.blackOverlay_},l.prototype.didMoveToRootView=function(){return l.__super__.didMoveToRootView.apply(this,arguments),l.currentAPIState_!==l.APIState.Ready||this._videoObject_?void 0:this.createPlayer_()},l.prototype.supportsYoutubeIframeApi_=function(){return!p.ltIE8},l.prototype.createPlayer_=function(){return this.supportsYoutubeIframeApi_()?this.injectYoutubePlayerWithApiSupport_(!0):this.didInitialize_()},l.prototype.injectYoutubePlayerWithApiSupport_=function(e){var i,n;return n=t.create("span"),t.appendChild(this._element_,n),i={autoplay:e?0:1,controls:this.options_.showDefaultControls||!e?1:0,disablekb:e?1:0,iv_load_policy:e?3:1,showinfo:0,rel:0},e&&(i.wmode="transparent"),this._videoObject_=new this._YT_.Player(n,{videoId:this.youtubeId_,width:"100%",height:"100%",playerVars:i,events:{onReady:p.bind(this,this.onYoutubePlayerReady_)}})},l.prototype.resizeVideo_=function(){return this.hasParent()?this.setFrame(this.parent().bounds()):void 0},l.prototype.release=function(){var e;return this.stopTimer_(),this.stopBufferTimer_(),(e=this._videoObject_.getIframe())&&(i.unlistenAll(e,i.EventTypes.MouseOut),i.unlistenAll(e,i.EventTypes.MouseOver)),this._videoObject_&&this._videoObject_.destroy(),l.__super__.release.apply(this,arguments)},l.prototype.onIframeMouseMove_=function(e){var t;return e||(e=window.event),(t=this.rootView())?t.mouseMoved_(e):void 0},l.prototype.onYoutubePlayerReady_=function(){var e,t;return!this.youtubePlayerReady_&&(this.youtubePlayerReady_=!0,t=this._videoObject_.getIframe(),o.setCssToElement(t,{width:"100%",height:"100%"}),this.supportsYoutubeIframeApi_())?(e=this.youtubeSuggestedQualityForQuality_(this.videoOptions_.youtubeSuggestedQuality),e&&this._videoObject_.cueVideoById(this.youtubeId_,0,e),!p.mobile&&(t=this._videoObject_.getIframe())&&(i.listen(t,i.EventTypes.MouseOver,p.bind(this,this.onIframeMouseMove_)),i.listen(t,i.EventTypes.MouseOut,p.bind(this,this.onIframeMouseMove_))),this._videoObject_.addEventListener("onStateChange",p.bind(this,this.onYoutubeStateChange_)),this._videoObject_.addEventListener("onPlaybackQualityChange",p.bind(this,this.onYoutubePlaybackQualityChange_)),this._videoObject_.addEventListener("onError",p.bind(this,this.onYoutubeError_)),this.didFakeClick=!1,this.unexpectedPlay=!1,this.videoObjectReady_=!0,this.playOnVideoObjectReady_&&this.playVideoObject_(),this.didInitialize_()):void 0},l.prototype.onYoutubeError_=function(e){var t,i;switch(t=void 0,i={title:"Try watching it on YouTube",url:this._videoObject_&&this._videoObject_.getVideoUrl?this._videoObject_.getVideoUrl():void 0},e.data){case 2:t=new n("An invalid param has been specified. Check the YouTube video ID.");break;case 5:t=new n("This YouTube video cannot be played in an HTML5 player.",i);break;case 100:t=new n("This video has been removed from YouTube.");break;case 101:case 150:t=new n("The owner of the requested video does not allow it to be played in embedded players.",i);break;default:t=new n("An error occurred.")}return this.onError_(t)},l.prototype.stopForegroundHack=function(){return this.css({"z-index":"auto"}),this.append(this.blackOverlay()),this.setAlpha(1)},l.prototype.onYoutubeStateChange_=function(e){var i,n,r,s;switch(n=e.data,n>-1&&5>n&&!this.waitingForPlayingEvent_&&!this.hasLoadedMetadata()&&(this.didFakeClick||(r=p.pageOffset(this._element()),i=this.bounds().size,e={pageX:r.x+.5*i.width,pageY:r.y+.5*i.height,which:1,button:1},this.unexpectedPlay=!0,this.didFakeClick=!0,this.rootView()&&this.rootView().sendClickForEvent(e),this.stopForegroundHack(),p.Safari?(s=t.create("input"),o.setCssToElement(s,{position:"absolute",top:"0px",left:"0px",opacity:"0.1"}),this._element().appendChild(s),s.focus(),s.blur(),setTimeout(function(){return t.removeNode(s)},0)):window.focus())),n){case this._YT_.PlayerState.BUFFERING:return this.didInterrupt_();case this._YT_.PlayerState.PLAYING:return this.unexpectedPlay?(this._videoObject_.pauseVideo(),void 0):(this.hasLoadedMetadata()||this.onMetadata_(),this.isSeeking()?(!this.ended_||this.isPlaying()||this.waitingForPlayingEvent_?this.onPlaying_():setTimeout(p.bind(this,function(){return this._videoObject_.pauseVideo()}),50),this.ended_=!1,this.blackOverlay().isHidden()||this.blackOverlay().setHidden(!0),this.didSeek_()):this.onPlaying_());case this._YT_.PlayerState.PAUSED:if(this.isSeeking()&&this.playOnSeek_&&(this.didSeek_(),this.playOnSeek_=!1,this._videoObject_.playVideo()),!this.isSeeking()&&!this.pausing_)return p.iOS&&!p.iPad&&this.didUnexpectedlyPause_(),void 0;if(this.isSeeking()&&this.didSeek_(),this.pausing_||!this.isSeeking())return this.onPause_();break;case this._YT_.PlayerState.ENDED:return this.onEnd_()}},l.prototype.onYoutubePlaybackQualityChange_=function(){return this.isChangingQuality()?this.onMetadata_():this.onUnexpectedQualityChange_()},l.prototype.startTimer_=function(){return this.timer_?void 0:(this.onTimeUpdate_(),this.timer_=setInterval(p.bind(this,this.onTimeUpdate_),300))},l.prototype.stopTimer_=function(){return this.timer_?(clearInterval(this.timer_),this.timer_=null):void 0},l.prototype.didSeek_=function(){return this.released_?void 0:(this.updateTime_(),l.__super__.didSeek_.apply(this,arguments))},l.prototype.startBufferTimer_=function(){return this.internalBufferTimer_?void 0:(this.onProgress_(),this.internalBufferTimer_=setInterval(p.bind(this,this.onProgress_),330))},l.prototype.stopBufferTimer_=function(){return this.internalBufferTimer_?(clearInterval(this.internalBufferTimer_),this.internalBufferTimer_=null):void 0},l.prototype.sizeForYoutubeQuality_=function(e){switch(e){case"medium":return new s(640,360);case"large":return new s(853,480);case"hd720":return new s(1280,720);case"hd1080":return new s(1920,1080);case"highres":return new s(4096,2304);default:return new s(320,240)}},l.prototype.quality_=function(){var e;return e=this._videoObject_.getPlaybackQuality(),this.qualityForYoutubeQuality_(e)},l.prototype.baseYoutubeQualities_=function(){return["small","medium","large"]},l.prototype.hdYoutubeQualities_=function(){return["hd720","hd1080","highres"]},l.prototype.selectHDQuality_=function(e){var t,i,n,o;for(o=p.clone(e).reverse(),i=0,n=o.length;n>i;i++)if(t=o[i],__indexOf.call(this.hdYoutubeQualities_(),t)>=0)return t},l.prototype.selectBaseQuality_=function(e){var t,i,n;for(i=0,n=e.length;n>i;i++)if(t=e[i],__indexOf.call(this.baseYoutubeQualities_(),t)>=0)return t},l.prototype.qualityForYoutubeQuality_=function(e){return __indexOf.call(this.hdYoutubeQualities_(),e)>=0?a.Quality.HD:__indexOf.call(this.baseYoutubeQualities_(),e)>=0?a.Quality.Base:void 0},l.prototype.supportedQualities_=function(){var e,t,i,n;return this.qualitiesMap_||(t={},i=this._videoObject_.getPlaybackQuality(),n=this._videoObject_.getAvailableQualityLevels(),__indexOf.call(this.baseYoutubeQualities_(),i)>=0?(t[a.Quality.Base]=i,e=this.selectHDQuality_(n),e&&(t[a.Quality.HD]=e)):__indexOf.call(this.hdYoutubeQualities_(),i)>=0?(t[a.Quality.Base]=this.selectBaseQuality_(n),t[a.Quality.HD]=i):t[a.Quality.Base]=i,this.qualitiesMap_=t),this.qualitiesMap_},l.prototype.youtubeSuggestedQualityForQuality_=function(e){return e===a.Quality.HD?"hd720":null},l}(r),h.exports=l,h.exports||u}),sublime_.define("players/flat/flat_skin",["ui/skin","graphics/color","graphics/layer"],function(e,t,i){var n,o,r;return r={},n={},o=new e("flat"),o.setPalette({background:new t("rgba(0,0,0,0.55)"),highlight:new t("rgb(255,255,255)"),colored:new t("rgb(255,255,255)")}),o.createStyle({component:{color:o.palette().highlight}}),o.componentLayer=function(e){var t;return t=i.layer(e,o.styles().component)},r.exports=o,r.exports||n}),sublime_.define("players/flat/plugins/contextual_menu/contextual_menu.flat_skin",["players/flat/flat_skin","graphics/layer","sublime/common_paths","graphics/rect","graphics/path","graphics/size","ui/font"],function(e,t,i,n,o,r,s){var a,l,u;return a=s.Font,u={},l={},e.extend({ContextualMenu:function(s){var l,u,h,p,c,d,_,y,g,f,m,v,w,b;return b=135,s.setFrame(new n(0,0,b,60)),v=o.Rect(0,0,b,60,4),d=t.layer(),d.setPath(v),d.setColor(e.palette().background),s.setLayers([d]),y=this.logo(),y.setFrame(new n(0,0,b,34)),f=i.logo(),f.center(new r(b-9,34)),g=t.layer(),g.setPath(f),g.setColor(e.palette().highlight),y.setLayers([g]),l=this.paneButton(),l.setFrame(new n(0,32,b,28)),_=t.layer(),_.setPath(o.Rect(0,0,b,1)),_.setColor("rgba(255,255,255,0.15)"),p=o.HelpIcon(8,7),h=t.layer(),h.setPath(p),h.setColor("#aaa"),l.setLayers([_,h]),u=new a({family:["Helvetica","Arial","sans-serif"],lineHeight:28,size:10,weight:"bold"}),w={"font-style":"normal",color:"#aaa"},m=30,c=l.label(),c.setFrame(new n(m,0,b-m,26)),c.css(w),c.setFont(u)}}),u.exports||l});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("players/flat/plugins/controls/controls",["sublime/video/plugins/controls/controls","players/flat/plugins/controls/controls_view","ui/view"],function(e,t,i){var n,o;return o={},n={},e=function(e){function n(){n.__super__.constructor.apply(this,arguments)}return __extends(n,e),n.className="Controls",n.prototype.viewForCurrentPlayer=function(){return this.defaultView()},n.prototype.defaultView=function(){return this.defaultView_||(this.defaultView_=new t,this.defaultView_.setAutoresizingMask(i.AutoresizingMask.FlexibleTopMargin|i.AutoresizingMask.FlexibleWidth),this.prepareView_(this.defaultView_)),this.defaultView_},n}(e),o.exports=e,o.exports||n}),sublime_.define("players/flat/plugins/controls/controls.flat_skin",["players/flat/flat_skin","core/util","ui/font","graphics/rect","ui/view","graphics/size","graphics/layer","graphics/path","ui/button"],function(e,t,i,n,o,r,s,a,l){var u,h,p,c;return c=t._,u=i.Font,p={},h={},e.extend({Controls:function(t,i){var h,p,d,_,y,g,f,m,v,w,b,T,x,P,k,z,S,F,M,A,C,B,V,E,L,O,I,D,R,U,N,W,H,j,G,q,Q,K,Y,X,Z,J,$,et,tt,it,nt,ot,rt,st,at,lt,ut,ht,pt,ct,dt,_t,yt,gt,ft,mt,vt,wt,bt,Tt,xt,Pt,kt,zt,St,Ft,Mt,At,Ct,Bt,Vt,Et,Lt,Ot,It,Dt,Rt,Ut,Nt,Wt,Ht,jt,Gt,qt,Qt,Kt,Yt,Xt,Zt,Jt,$t,ei,ti;for(c.mobile?(B=50,t.margins.left=17,t.margins.right=17,t.margins.component=20,R=new u({lineHeight:B,size:13,weight:"bold"})):(B=32,t.margins.left=11,t.margins.right=11,t.margins.component=14,R=new u({lineHeight:B+2,size:11,weight:"bold"})),Lt={"font-family":"Helvetica,Arial,sans-serif","font-style":"normal",color:e.palette().highlight.rgb(),"text-align":"center"},It=t.timeLabel(),It.setFrame(new n(0,0,B,B)),It.css(Lt),It.setFont(R),mt=t.remainingTimeLabel(),mt.setFrame(new n(0,0,B,B)),mt.setAutoresizingMask(o.AutoresizingMask.FlexibleRightMargin),mt.css(Lt),mt.setFont(R),It.setFrame(new n(0,0,40,B)),mt.setFrame(new n(0,0,40,B)),Ht=new r(i.width,B),t.setFrame(new n(0,i.height-Ht.height,Ht.width,Ht.height)),y=s.layer(),rt=a.Rect(0,0,Ht.width,B),y.setPath(rt),y.setColor(e.palette().background),t.setLayers([y]),_=t,t.on({didUpdateFrame:function(){return rt=a.Rect(0,0,_.size().width,B),y.setPath(rt)}}),at=t.pauseButton(),at.setFrame(new n(0,0,B,B)),c.mobile?(rt=a.Rect(0,0,5,16),rt.repeat(2,5)):(rt=a.Rect(0,0,3,11),rt.repeat(2,3)),rt.center(at.size()),X=e.componentLayer(),X.setPath(rt),at.setLayers([X]),lt=rt,at.intrinsicSize=function(){return lt.size()},ut=t.playButton(),ut.setFrame(new n(0,0,B,B)),X=e.componentLayer(),rt=c.mobile?a.Triangle(0,0,16,17):a.Triangle(0,0,10,11),rt.center(ut.size()),X.setPath(rt),ut.setLayers([X]),ut.intrinsicSize=function(){return lt.size()},O=t.expandButton(),d=c.mobile?1.4:1.2,O.setFrame(new n(0,0,B,B)),O.setAutoresizingMask(o.AutoresizingMask.FlexibleLeftMargin),rt=new a,rt.rightBy(5*d),rt.lineBy(-2*d,2*d),rt.lineBy(2*d,2*d),rt.lineBy(-1*d,1*d),rt.lineBy(-2*d,-2*d),rt.lineBy(-2*d,2*d),rt.closePath(),st=rt.clone(),st.rotate(180),c.mobile?st.translateTo(9,9):st.translateTo(7,7),rt=rt.merge(st),rt.center(O.size()),X=e.componentLayer(),X.setPath(rt),O.setLayers([X]),ft=t.reduceButton(),ft.setFrame(new n(0,0,B,B)),ft.setAutoresizingMask(o.AutoresizingMask.FlexibleLeftMargin),rt=new a,rt.rightBy(5*d),rt.lineBy(-2*d,2*d),rt.lineBy(2*d,2*d),rt.lineBy(-1*d,1*d),rt.lineBy(-2*d,-2*d),rt.lineBy(-2*d,2*d),rt.closePath(),st=rt.clone(),rt.rotate(180),st.translateTo(8,8),rt=rt.merge(st),rt.center(ft.size()),X=e.componentLayer(),X.setPath(rt),ft.setLayers([X]),Ot=t.timeButton(),Ot.label().setFont(R),Ot.setAutoresizingMask(o.AutoresizingMask.FlexibleRightMargin),Ot.setFrame(new n(B,0,40,B)),Ot.label().css(Lt),Ot.label().setFrame(Ot.bounds()),N=t.hdButton(),N.setFrame(new n(0,0,25,25)),Zt=0,Jt=0,D=c.mobile?1.6:1.2,rt=new a,rt.moveTo(Zt+12.917*D,Jt+4.567*D),rt.curveTo(Zt+12.457*D,Jt+5.027*D,Zt+11.727*D,Jt+5.277*D,Zt+10.918*D,Jt+5.277*D),rt.lineTo(Zt+10.278*D,Jt+5.277*D),rt.lineTo(Zt+11.237*D,Jt+1.719*D),rt.lineTo(Zt+11.797*D,Jt+1.719*D),rt.curveTo(Zt+12.477*D,Jt+1.719*D,Zt+12.906*D,Jt+1.879*D,Zt+13.167*D,Jt+2.148*D),rt.curveTo(Zt+13.387*D,Jt+2.368*D,Zt+13.517*D,Jt+2.679*D,Zt+13.517*D,Jt+3.108*D),rt.curveTo(Zt+13.517*D,Jt+3.658*D,Zt+13.286*D,Jt+4.197*D,Zt+12.917*D,Jt+4.567*D),rt.moveTo(Zt+14.746*D,Jt+.899*D),rt.curveTo(Zt+14.216*D,Jt+.37*D,Zt+13.366*D,Jt+0*D,Zt+12.007*D,Jt+0*D),rt.lineTo(Zt+9.748*D,Jt+0*D),rt.lineTo(Zt+7.869*D,Jt+6.996*D),rt.lineTo(Zt+10.687*D,Jt+6.996*D),rt.curveTo(Zt+12.307*D,Jt+6.996*D,Zt+13.517*D,Jt+6.546*D,Zt+14.355*D,Jt+5.707*D),rt.curveTo(Zt+15.105*D,Jt+4.957*D,Zt+15.505*D,Jt+3.998*D,Zt+15.505*D,Jt+2.948*D),rt.curveTo(Zt+15.505*D,Jt+2.099*D,Zt+15.266*D,Jt+1.419*D,Zt+14.746*D,Jt+.899*D),rt.moveTo(Zt+6.286*D,Jt+0*D),rt.lineTo(Zt+5.586*D,Jt+2.618*D),rt.lineTo(Zt+3.118*D,Jt+2.618*D),rt.lineTo(Zt+3.827*D,Jt+0*D),rt.lineTo(Zt+1.879*D,Jt+0*D),rt.lineTo(Zt+0*D,Jt+6.996*D),rt.lineTo(Zt+1.948*D,Jt+6.996*D),rt.lineTo(Zt+2.658*D,Jt+4.338*D),rt.lineTo(Zt+5.127*D,Jt+4.338*D),rt.lineTo(Zt+4.407*D,Jt+6.996*D),rt.lineTo(Zt+6.356*D,Jt+6.996*D),rt.lineTo(Zt+8.235*D,Jt+0*D),rt.lineTo(Zt+6.286*D,Jt+0*D),h=rt,h.center(N.size()),X=s.layer(),X.setColor(e.palette().highlight.colorWithAlpha(.5)),X.setPath(h),N.setLayers([X]),W=X,N.on({didChangeState:function(t){return t===l.State.Selected?(W.setColor(e.palette().highlight),W.setOuterGlow({color:e.palette().highlight.colorWithAlpha(.25),size:8}),N.setNeedsDisplay()):(W.setColor(e.palette().highlight.colorWithAlpha(.5)),W.setOuterGlow(null),N.setNeedsDisplay())
}}),pt=t.progressBar(),ct=n.zero(),ct.size.height=26,ct.size.width=220,ct.origin.x=Math.round((Ht.width-ct.size.width)/2),ct.origin.y=56,dt=3,gt=.5*dt,ht=0,yt=0,pt.setTrackingMargin(ht),pt.setFrame(ct),pt.setAutoresizingMask(o.AutoresizingMask.FlexibleWidth),_t=s.layer(),At=function(){return rt=a.Rect(yt,0,pt.size().width-2*yt,dt,dt/2),rt.center(pt.size()),_t.setPath(rt)},At(),_t.setColor(e.palette().highlight.colorWithAlpha(.15)),pt.setLayers([_t]),pt.on({didUpdateFrame:At}),et=s.layer(),et.setColor("rgba(0,0,0,0.2)"),pt.loadingBar().setLayers([et]),pt.on({didUpdateLoadingValue:function(e){var t,i,n,o,r;return o=new a,o.rightBy(10),o.lineBy(-8,8),o.leftBy(10),o.lineBy(8,-8),t=2,r=o.size().width,Zt=e*(r+t),i=pt.size().width/r+2,n=-r+Zt,o.repeat(i,t),o.centerVertically(pt.size()),o.setOrigin(n,o.origin().y),rt=a.Rect(yt,0,pt.size().width-2*yt,dt,dt/2),rt.center(pt.size()),et.setPath(o),et.setClippath(rt)}}),f=pt.bufferBar(),m=s.layer(),m.setColor(e.palette().highlight.colorWithAlpha(.15)),f.setLayers([m]),pt.on({didUpdateBufferValue:function(e){var t;return t=Math.max(6,(f.size().width-2*yt)*e),rt=a.Rect(yt,0,t,dt,dt/2),rt.centerVertically(f.size()),m.setPath(rt)}}),gt=dt/2,Nt=pt.trackView(),Ut=s.layer(),Ut.setColor(e.palette().colored),Nt.setLayers([Ut]),pt.on({didUpdateTrackPosition:function(e){var t;return t=Math.max(2*gt,e-yt),rt=a.Rect(yt,0,t,dt,gt),rt.centerVertically(Nt.size()),Ut.setPath(rt)}}),c.mobile||(Rt=t.progressBar().toolTipView(),Dt=c.clone(Lt),Dt["text-align"]="center",Rt.label().css(Dt),U=new n(0,-13,46,39),Rt.setFrame(U),Rt.label().setFont(new u({lineHeight:22,size:11,weight:"bold"})),rt=new a,H=10,Yt=U.size.width,rt.lineTo(0,3.28),rt.curveTo(0,1.469,1.484,0,3.315,0),rt.lineTo(Yt-3.316,0),rt.curveTo(Yt-1.485,0,Yt,1.469,Yt,3.28),rt.lineTo(Yt,H),rt.lineTo(0,H),g=s.layer(),g.setColor(e.palette().background),rt.centerHorizontally(U.size),g.setPath(rt),rt=a.Circle(21,31,5),rt.centerHorizontally(U.size),Rt.setLayers([g])),jt=t.volumeButton(),jt.setFrame(new n(t.size().width-50,0,B,B)),jt.setAutoresizingMask(o.AutoresizingMask.FlexibleLeftMargin),Et=new a,Et.moveTo(0,2),Et.rightBy(4),Et.lineBy(5,-4),Et.downBy(12),Et.lineBy(-5,-4),Et.leftBy(4),Et.closePath(),Kt=new a,Kt.moveTo(4.139,9.987),Kt.curveTo(3.863,9.987,3.639,9.763,3.639,9.487),Kt.curveTo(3.639,9.21,3.863,8.987,4.139,8.987),Kt.curveTo(5.488,8.987,6.628,7.158,6.628,4.993),Kt.curveTo(6.628,2.829,5.488,1,4.139,1),Kt.curveTo(3.863,1,3.639,.776,3.639,.5),Kt.curveTo(3.639,.224,3.863,0,4.139,0),Kt.curveTo(6.096,0,7.628,2.193,7.628,4.993),Kt.curveTo(7.628,7.793,6.096,9.987,4.139,9.987),Kt.moveTo(1.995,8.075),Kt.curveTo(1.719,8.075,1.495,7.851,1.495,7.575),Kt.curveTo(1.495,7.298,1.719,7.075,1.995,7.075),Kt.curveTo(2.883,7.075,3.605,6.183,3.605,5.088),Kt.curveTo(3.605,3.993,2.883,3.102,1.995,3.102),Kt.curveTo(1.719,3.102,1.495,2.878,1.495,2.602),Kt.curveTo(1.495,2.326,1.719,2.102,1.995,2.102),Kt.curveTo(3.434,2.102,4.605,3.441,4.605,5.088),Kt.curveTo(4.605,6.735,3.434,8.075,1.995,8.075),Kt.moveTo(.861,4.186),Kt.curveTo(1.338,4.186,1.723,4.572,1.723,5.047),Kt.curveTo(1.723,5.524,1.338,5.911,.861,5.911),Kt.curveTo(.385,5.911,0,5.524,0,5.047),Kt.curveTo(0,4.572,.385,4.186,.861,4.186),Kt.translateBy(11,-1),Xt=Et.merge(Kt),Xt.center(jt.size()),V=new a,V.moveTo(6.171,8.049),V.curveTo(6.043,8.049,5.915,8,5.817,7.903),V.lineTo(1.104,3.189),V.curveTo(.908,2.994,.908,2.677,1.104,2.482),V.curveTo(1.299,2.287,1.615,2.287,1.811,2.482),V.lineTo(6.524,7.196),V.curveTo(6.72,7.391,6.72,7.708,6.524,7.903),V.curveTo(6.427,8,6.299,8.049,6.171,8.049),V.moveTo(1.457,8.05),V.curveTo(1.329,8.05,1.201,8.001,1.104,7.904),V.curveTo(.908,7.708,.908,7.392,1.104,7.197),V.lineTo(5.818,2.482),V.curveTo(6.013,2.287,6.33,2.287,6.525,2.482),V.curveTo(6.72,2.677,6.72,2.994,6.525,3.189),V.lineTo(1.811,7.904),V.curveTo(1.713,8.001,1.585,8.05,1.457,8.05),V.translateBy(11,-1),it=Et.merge(V),it.center(jt.size()),X=e.componentLayer(),X.setPath(Xt),jt.setLayers([X]),Gt=X,jt.on({didChangeVolume:function(e){return e>0?Gt.setPath(Xt):Gt.setPath(it)}}),Bt=t.volumeSlider(),t.setMarginBetweenComponents(jt,Bt,7),Bt.setFrame(new n(0,0,42,8)),Vt=3,rt=a.Rect(0,0,Bt.size().width,Vt,Vt/2),rt.center(Bt.size()),X=s.layer(),X.setPath(rt),X.setColor(e.palette().highlight.colorWithAlpha(.15)),Bt.setLayers([X]),Bt.setTrackingMargin(0),Qt=Bt.trackView(),qt=s.layer(),qt.setColor(e.palette().colored),Qt.setLayers([qt]),Bt.on({didUpdateTrackPosition:function(e){return rt=a.Rect(0,0,e,Vt,Vt/2),rt.centerVertically(Qt.size()),qt.setPath(rt)}}),v=t.ccButton(),c.mobile?(D=1.2,A=1.5):(D=1,A=1),t===this.defaultView_?(b=Math.round(28*A+2),v.setFrame(new n(0,0,b,B-4))):v.setFrame(new n(260,22,25,25)),rt=new a,rt.moveTo(16.393*D,7.301*D),rt.curveTo(16.22*D,8.336*D,15.632*D,9.421*D,15.023*D,9.845*D),rt.curveTo(13.675*D,10.781*D,11.738*D,10.663*D,10.583*D,9.568*D),rt.curveTo(9.67*D,8.701*D,9.174*D,7.143*D,9.285*D,5.556*D),rt.curveTo(9.457*D,3.308*D,10.542*D,1.789*D,12.205*D,1.474*D),rt.curveTo(12.823*D,1.355*D,12.976*D,1.355*D,13.665*D,1.493*D),rt.curveTo(14.476*D,1.661*D,15.155*D,2.065*D,15.581*D,2.627*D),rt.curveTo(15.956*D,3.11*D,16.342*D,4.146*D,16.342*D,4.629*D),rt.lineTo(16.342*D,4.925*D),rt.lineTo(15.257*D,4.895*D),rt.lineTo(14.172*D,4.865*D),rt.lineTo(14.111*D,4.569*D),rt.curveTo(13.969*D,3.909*D,13.533*D,3.534*D,12.895*D,3.534*D),rt.curveTo(12.439*D,3.534*D,12.134*D,3.78*D,11.87*D,4.353*D),rt.curveTo(11.678*D,4.786*D,11.637*D,5.043*D,11.637*D,5.999*D),rt.curveTo(11.627*D,7.33*D,11.84*D,7.941*D,12.377*D,8.208*D),rt.curveTo(13.147*D,8.603*D,13.888*D,8.237*D,14.121*D,7.34*D),rt.lineTo(14.232*D,6.887*D),rt.lineTo(16.463*D,6.887*D),rt.lineTo(16.393*D,7.301*D),rt.moveTo(8.606*D,7.35*D),rt.curveTo(8.413*D,8.938*D,7.318*D,10.17*D,5.878*D,10.426*D),rt.curveTo(4.439*D,10.683*D,2.988*D,10.052*D,2.208*D,8.829*D),rt.curveTo(1.609*D,7.893*D,1.357*D,5.821*D,1.681*D,4.49*D),rt.curveTo(2.066*D,2.884*D,3.11*D,1.72*D,4.388*D,1.464*D),rt.curveTo(5.817*D,1.178*D,7.379*D,1.818*D,8.078*D,2.982*D),rt.curveTo(8.291*D,3.337*D,8.626*D,4.432*D,8.636*D,4.786*D),rt.curveTo(8.636*D,4.885*D,8.352*D,4.915*D,7.531*D,4.915*D),rt.lineTo(6.426*D,4.915*D),rt.lineTo(6.355*D,4.55*D),rt.curveTo(6.315*D,4.333*D,6.152*D,4.057*D,5.949*D,3.859*D),rt.curveTo(5.676*D,3.594*D,5.533*D,3.534*D,5.189*D,3.534*D),rt.curveTo(4.337*D,3.534*D,3.871*D,4.422*D,3.871*D,6.039*D),rt.curveTo(3.871*D,7.152*D,4.002*D,7.626*D,4.428*D,8.04*D),rt.curveTo(5.087*D,8.681*D,6.051*D,8.365*D,6.334*D,7.399*D),rt.lineTo(6.477*D,6.936*D),rt.lineTo(8.666*D,6.877*D),rt.lineTo(8.606*D,7.35*D),rt.moveTo(17.913*D,3.167*D),rt.curveTo(17.61*D,.681*D,17.083*D,.267*D,13.902*D,0*D),rt.curveTo(12.525*D,D*-.108,5.477*D,D*-.108,4.059*D,0*D),rt.curveTo(1.698*D,.197*D,.959*D,.483*D,.524*D,1.421*D),rt.curveTo(.393*D,1.707*D,.231*D,2.161*D,.18*D,2.428*D),rt.curveTo(.007*D,3.227*D,D*-.063,6.927*D,.068*D,8.259*D),rt.curveTo(.291*D,10.677*D,.787*D,11.298*D,2.681*D,11.604*D),rt.curveTo(4.149*D,11.831*D,7.745*D,11.97*D,10.561*D,11.9*D),rt.curveTo(16.445*D,11.762*D,17.225*D,11.506*D,17.762*D,9.621*D),rt.curveTo(17.985*D,8.821*D,18.086*D,4.618*D,17.913*D,3.167*D),rt.center(v.size()),X=e.componentLayer(),X.setPath(rt),v.setLayers([X]),w=X,E=function(t){return t===l.State.Selected?w.setColor(e.palette().highlight):w.setColor(e.palette().highlight.colorWithAlpha(.5)),v.setNeedsDisplay()},E(v.state()),v.on({didChangeState:E}),Q=18*A,J=5*A,T=5*A,St=c.mobile?25:4,Tt=c.mobile?8:St,xt=5,tt=4,z=t.ccPane(),x=z.listView(),nt=x.items().length,Ct=nt>tt,j=nt-tt,bt=tt/nt,x.scrollbarWidth=Tt,x.scrollbarMargin=xt,x.scrollbarEnabled=Ct,$=Math.min(nt*Q,tt*Q),wt=Math.round(bt*$),x.scrollableHeight=Q*j,z.scaleFactor=A,C=100*A+2,I=c.mobile?70:60,S=I*A+$,z.setFrame(new n(0,0,C,S)),z.setAutoresizingMask(o.AutoresizingMask.FlexibleLeftMargin),x.setFrame(new n(T,T,C-2*T,$)),x.itemHeight=Q,X=s.layer(),X.setColor(e.palette().background),F=X,M=function(e,t,i){var n;return rt=new a,n=t-104*i,rt.moveTo(99.999*i,3*i),rt.lineTo(99.999*i,n+104*i),rt.lineTo(0*i,n+104*i),rt.lineTo(0*i,3*i),rt.curveTo(0*i,1.343*i,1.343*i,0*i,3*i,0*i),rt.lineTo(97.001*i,0*i),rt.curveTo(98.657*i,0*i,99.999*i,1.343*i,99.999*i,3*i),rt},Wt=function(){return H=S-B+(B-v.frame().size.height),rt=M(z.shapeL,H,A),F.setPath(rt)},Wt(),Mt=s.layer(),Mt.setPath(a.Rect(T,x.frame().maxY()+5*A,C-2*T,1)),Mt.setColor("rgba(255,255,255,0.2)"),z.setLayers([X,Mt]),z.on({didChangeShape:Wt}),Z=J+T,q=new u({lineHeight:Q,size:c.mobile?15:11,weight:"bold"}),K={"font-family":"Helvetica,Arial,sans-serif","font-style":"normal","-webkit-font-smoothing":"antialiased"},Y={color:"#cecece"},Ft={color:"#ffffff"},c.extend(K,Y),p=function(t){var i,n,o;return n=s.layer(),o=t.size(),n.setPath(a.Rect(0,0,o.width,o.height,2)),n.setColor("#000"),i=s.layer(),rt=a.Circle(o.width-8*A,0,2.5),rt.centerVertically(o),i.setPath(rt),i.setColor(e.palette().highlight),t.setLayers([n,i]),t.label().css(Ft)},ti=x.items(),$t=0,ei=ti.length;ei>$t;$t++)G=ti[$t],U=G.bounds(),U.origin.x=J,U.size.width-=J,G.label().setFrame(U),G.label().css(K),G.label().setFont(q);return x.layoutSubviews(),(G=x.selectedItem())&&p(G),x.on({didUnselectItem:function(e){return e.setLayers([]),e.label().css(Y)}}),x.on({didSelectItem:function(e){return p(e)}}),Ct&&(vt=x.scrollbar(),ot=c.mobile?St-Tt:St,vt.setFrame(new n(x.frame().size.width-ot,0,St,x.frame().size.height)),Pt=Math.round(Tt/2),rt=a.Rect(0,0,Tt,vt.size().height,Pt),rt.centerHorizontally(vt.size()),X=s.layer(),X.setColor("#000"),X.setPath(rt),vt.setLayers([X]),vt.setTrackingMargin(wt/2),zt=vt.trackView(),kt=s.layer(),kt.setColor(e.palette().highlight),zt.setLayers([kt]),vt.on({didUpdateTrackPosition:function(e){return rt=a.Rect(0,e-.5*wt,Tt,wt,Pt),rt.centerHorizontally(vt.size()),kt.setPath(rt)}})),P=z.offButton(),P.label().css(K),P.label().setFont(q),P.setFrame(new n(T,x.frame().maxY()+10*A,C-2*T,Q)),U=P.bounds(),U.origin.x=J,U.size.width-=J,P.label().setFrame(U),X=s.layer(),rt=a.Rect(0,0,20,20),X.setPath(rt),P.setLayers([X]),k=X,L=function(e){return e===l.State.Selected?p(P):(P.label().css(Y),P.setLayers([]))},L(P.state()),P.on({didChangeState:L})}}),p.exports||h});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("players/flat/plugins/controls/controls_view",["sublime/video/plugins/controls/inline_controls_view","core/util"],function(e,t){var i,n,o,r;return r=t._,o={},n={},i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.className="ControlsView",t.prototype.loadComponents_=function(){return this.addLeftComponent(this.pauseButton(),4),r.mobile?(this.addLeftComponent(this.timeLabel()),this.addRightComponent(this.remainingTimeLabel(),0)):(this.addLeftComponent(this.timeButton()),this.volumeEnabled_&&(this.addRightComponent(this.volumeButton(),2),this.addRightComponent(this.volumeSlider(),3))),this.setCenterComponent(this.progressBar())},t.prototype.removeVolumeComponents_=function(){return t.__super__.removeVolumeComponents_.apply(this,arguments),this.volumeSlider_?this.removeComponent(this.volumeSlider()):void 0},t.prototype.showHDButton=function(){return this.addRightComponent(this.hdButton(),1),this.layoutSubviews()},t.prototype.layoutVolumePane=function(){},t}(e),o.exports=i,o.exports||n}),sublime_.define("players/flat/plugins/embed/embed.flat_skin",["players/flat/flat_skin","graphics/size","graphics/rect","graphics/point","ui/view","graphics/layer","graphics/path","ui/font"],function(e,t,i,n,o,r,s,a){var l,u,h;return l=a.Font,h={},u={},e.extend({Embed:function(a,u){var h,p,c,d,_,y,g,f,m,v,w,b,T,x,P,k,z,S;return k=new t(46,46),x=i.zero(),P=new n(10,10),x.origin=this.isSharingInstalled()?new n(u.width-k.width-P.x,P.y+56):new n(u.width-k.width-P.x,P.y),x.size=k,a.setAutoresizingMask(o.AutoresizingMask.FlexibleLeftMargin|o.AutoresizingMask.FlexibleBottomMargin),a.setFrame(x),d=a,h=r.layer(),h.setColorOverlay(e.palette().background),v=s.Rect(0,0,k.width,k.height,4),h.setPath(v),_=e.componentLayer(),v=s.EmbedIcon(0,0,16),v.center(d.size()),_.setPath(v),d.setLayers([h,_]),m=this.paneController().view(),w={"font-style":"normal",color:"#fff","text-align":"center"},y=new l({lineHeight:28,size:28,weight:"bold"}),T=m.label(),T.css(w),T.setFont(y),y=new l({family:["Monaco","Courier","monospace"],lineHeight:20,size:12,weight:"normal"}),c=function(e,t,i){var n;return n=r.layer(),n.setColor("#111"),e.on({didUpdateFrame:function(){return v=s.Rect(0,0,e.size().width,e.size().height,4),n.setPath(v)}}),t&&e.cssText(t),i&&e.setFont(i),n},z=m.widthTextField(),z.setLayers([c(z,w,y)]),g=m.heightTextField(),g.setLayers([c(g,w,y)]),b=m.textField(),f=e.componentLayer(),b.setLayers([c(b,w,y),f]),b.on({didUpdateFrame:function(){return v=s.EmbedIcon(0,0,.35*b.size().height),v.centerVertically(b.size(),10,1),f.setPath(v)}}),b.cssText(w),b.setFont(y),w["text-align"]="right",y=new l({lineHeight:40,size:14,weight:"normal"}),T=m.sizeLabel(),T.css(w),T.setFont(y),S=m.xView(),p=e.componentLayer(),S.setLayers([p]),S.on({didUpdateFrame:function(){return v=s.CrossIcon(0,0,10),v.center(S.size()),p.setPath(v)}})}}),h.exports||u}),sublime_.define("players/flat/plugins/lightbox/lightbox_controller.flat_skin",["players/flat/flat_skin","core/util","graphics/rect","graphics/path","graphics/layer"],function(e,t){var i,n,o;return o=t._,n={},i={},e.extend({LightboxController:function(){}}),n.exports||i}),sublime_.define("players/flat/plugins/poster/start_controller.flat_skin",["players/flat/flat_skin","graphics/layer","ui/view","graphics/size","graphics/path"],function(e,t,i,n,o){var r,s;return s={},r={},e.extend({StartController:function(r){var s,a,l,u,h,p,c;return r.setAutoresizingMask(i.AutoresizingMask.FlexibleWidth|i.AutoresizingMask.FlexibleHeight),r.setFrame(r.parent().bounds()),c=r.size(),u=r.playButton(),u.setAutoresizingMask(i.AutoresizingMask.FlexibleLeftMargin|i.AutoresizingMask.FlexibleRightMargin|i.AutoresizingMask.FlexibleTopMargin|i.AutoresizingMask.FlexibleBottomMargin),h=70,u.center({size:new n(h,h),view:r}),a=o.Circle(0,0,h/2),a.center(u.size()),s=o.Circle(0,0,(h-8)/2),s.center(u.size()),a=a.inversePath(),a=a.merge(s),p=o.Triangle(0,0,26,26),p.center(u.size(),1,0),a=a.merge(p),l=t.layer(a),l.setColor(e.palette().highlight.colorWithAlpha(.9)),l.setDropShadow({color:"rgba(0,0,0,0.4)",distance:1,size:6}),u.setLayers([l])}}),s.exports||r}),sublime_.define("players/flat/plugins/social_sharing/social_sharing.flat_skin",["players/flat/flat_skin","sublime/video/plugins/social_sharing/social_sharing","graphics/size","graphics/rect","graphics/point","ui/view","ui/font","graphics/layer","graphics/path"],function(e,t,i,n,o,r,s,a,l){var u,h,p;return u=s.Font,p={},h={},e.extend({SocialSharing:function(s,h){var p,c,d,_,y,g,f,m,v,w,b,T,x,P;return P=new i(46,46),T=n.zero(),x=new o(10,10),T.origin=new o(h.width-P.width-x.x,x.y),T.size=P,s.setAutoresizingMask(r.AutoresizingMask.FlexibleLeftMargin|r.AutoresizingMask.FlexibleBottomMargin),s.setFrame(T),w={"font-style":"normal",color:"#d5d5d5","text-align":"center"},d=new u({lineHeight:20,size:12,weight:"bold"}),m=s,p=a.layer(),p.setColorOverlay(e.palette().background),f=l.Rect(0,0,P.width,P.height,4),p.setPath(f),v=e.componentLayer(),this.options_.icon===t.IconStyle.Alternative?(f=l.SharingIcon(0,0,m.size().width-25),f.center(m.size())):(f=l.SharingIconAlt(0,0,m.size().width-28),f.center(m.size(),1)),v.setPath(f),m.setLayers([p,v]),g=this.paneController().view(),c=function(t,i){var n,o,r;return o=t.icon(),n=e.componentLayer(),o.on({didUpdateFrame:function(){return f=i(0,0,o.size().height-15),f.center(o.size()),n.setPath(f)}}),o.setLayers([n]),r=t.textLabel(),r.css(w),r.setFont(d)},c(g.twitterButton(),l.TwitterLogo),c(g.facebookButton(),l.FacebookLogo),c(g.googlePlusButton(),l.GooglePlusLogo),c(g.pinterestButton(),l.PinterestLogo),y=e.componentLayer(),b=g.textField(),_=a.layer(),_.setColor("#111"),b.on({didUpdateFrame:function(){return f=l.Rect(0,0,b.size().width,b.size().height,4),_.setPath(f),f=l.LinkIcon(0,0,.5*b.size().height),f.centerVertically(b.size(),10),y.setPath(f)}}),b.setLayers([_,y]),d=new u({family:["Monaco","Courier","monospace"],lineHeight:40,size:12,weight:"normal"}),w={"font-style":"normal",color:"#fff"},b.cssText(w),b.setFont(d)}}),p.exports||h}),sublime_.define("players/light/light_skin",["ui/skin","graphics/color","graphics/layer"],function(e,t,i){var n,o,r;return r={},n={},o=new e("light"),o.setPalette({main:new t("rgb(255,255,255)"),contrast:new t("rgb(0,0,0)"),contextualBackground:new t("rgba(0,0,0,0.5)"),contextualLogo:new t("rgb(255,255,255)")}),o.createStyle({component:{color:o.palette().main,dropShadow:{color:"rgba(0,0,0,0.25)",size:5,distance:0}}}),o.componentLayer=function(e){var t;return t=i.layer(e,o.styles().component)},r.exports=o,r.exports||n}),sublime_.define("players/light/plugins/contextual_menu/contextual_menu.light_skin",["players/light/light_skin","graphics/layer","sublime/common_paths","graphics/rect","graphics/path","graphics/size","ui/font"],function(e,t,i,n,o,r,s){var a,l,u;return a=s.Font,u={},l={},e.extend({ContextualMenu:function(s){var l,u,h,p,c,d,_,y,g,f,m,v,w,b;return b=135,s.setFrame(new n(0,0,b,60)),v=o.Rect(0,0,b,60,4),d=t.layer(),d.setPath(v),d.setColor(e.palette().contextualBackground),s.setLayers([d]),y=this.logo(),y.setFrame(new n(0,0,b,34)),f=i.logo(),f.center(new r(b-9,34)),g=t.layer(),g.setPath(f),g.setColor(e.palette().contextualLogo),y.setLayers([g]),l=this.paneButton(),l.setFrame(new n(0,32,b,28)),_=t.layer(),_.setPath(o.Rect(0,0,b,1)),_.setColor("rgba(255,255,255,0.15)"),p=o.HelpIcon(8,7),h=t.layer(),h.setPath(p),h.setColor("#aaa"),l.setLayers([_,h]),u=new a({family:["Helvetica","Arial","sans-serif"],lineHeight:28,size:10,weight:"bold"}),w={"font-style":"normal",color:"#aaa"},m=30,c=l.label(),c.setFrame(new n(m,0,b-m,26)),c.css(w),c.setFont(u)}}),u.exports||l});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("players/light/plugins/controls/controls",["sublime/video/plugins/controls/controls","players/light/plugins/controls/controls_view"],function(e,t){var i,n;return n={},i={},e=function(e){function i(){i.__super__.constructor.apply(this,arguments)}return __extends(i,e),i.className="Controls",i.prototype.viewForCurrentPlayer=function(){return this.defaultView()},i.prototype.defaultView=function(){return this.defaultView_||(this.defaultView_=new t,this.prepareView_(this.defaultView_)),this.defaultView_},i}(e),n.exports=e,n.exports||i}),sublime_.define("players/light/plugins/controls/controls.light_skin",["players/light/light_skin","core/util","graphics/size","graphics/rect","graphics/path","ui/view","graphics/layer","ui/button","ui/font"],function(e,t,i,n,o,r,s,a,l){var u,h,p,c;return c=t._,u=l.Font,p={},h={},e.extend({Controls:function(t,l){var h,p,d,_,y,g,f,m,v,w,b,T,x,P,k,z,S,F,M,A,C,B,V,E,L,O,I,D,R,U,N,W,H,j,G,q,Q,K,Y,X,Z,J,$,et,tt,it,nt,ot,rt,st,at,lt,ut,ht,pt,ct,dt,_t,yt,gt,ft,mt,vt,wt,bt,Tt,xt,Pt,kt,zt,St,Ft,Mt,At,Ct,Bt,Vt,Et,Lt,Ot,It,Dt;for(c.mobile?(M=44,t.margins.left=14,t.margins.right=14,t.margins.component=20):(M=30,t.margins.left=9,t.margins.right=9,t.margins.component=14),this.maxViewWidth=X=640,this.viewMargin=12,Ct=new i(Math.min(l.width,this.maxViewWidth),M),Et=Math.round(.5*(l.width-Ct.width)),t.setFrame(new n(Et,l.height-M-8,Ct.width,Ct.height)),t.setAutoresizingMask(r.AutoresizingMask.FlexibleTopMargin|r.AutoresizingMask.FlexibleLeftMargin|r.AutoresizingMask.FlexibleRightMargin),tt=t.pauseButton(),tt.setFrame(new n(0,0,M,M)),c.mobile?($=o.Rect(0,0,5,16),$.repeat(2,4)):($=o.Rect(0,0,4,12),$.repeat(2,3)),$.center(tt.size()),j=e.componentLayer(),j.setPath($),tt.setLayers([j]),it=$,tt.intrinsicSize=function(){return it.size()},nt=t.playButton(),nt.setFrame(new n(0,0,M,M)),j=e.componentLayer(),$=c.mobile?o.Triangle(0,0,16,17):o.Triangle(0,0,10,12),$.center(nt.size()),j.setPath($),nt.setLayers([j]),nt.intrinsicSize=function(){return it.size()},rt=t.progressBar(),st=n.zero(),st.size.height=25,st.size.width=220,st.origin.x=Math.round((Ct.width-st.size.width)/2),st.origin.y=56,at=3,ht=.5*at,ot=ht,ut=0,rt.setTrackingMargin(ot),rt.setFrame(st),rt.setAutoresizingMask(r.AutoresizingMask.FlexibleWidth),lt=s.layer(),Pt=function(){return $=o.Rect(ut,0,rt.size().width-2*ut,at,at/2),$.center(rt.size()),lt.setPath($)},Pt(),lt.setColor(e.palette().contrast.colorWithAlpha(.15)),lt.setColorOverlay(e.palette().main.colorWithAlpha(.1)),lt.setDropShadow(e.styles().component.dropShadow()),rt.setLayers([lt]),rt.on({didUpdateFrame:Pt}),K=s.layer(),K.setColor(e.palette().main.colorWithAlpha(.1)),rt.loadingBar().setLayers([K]),rt.on({didUpdateLoadingValue:function(e){var t,i,n,r,s;return r=new o,r.rightBy(10),r.lineBy(-8,8),r.leftBy(10),r.lineBy(8,-8),t=2,s=r.size().width,Et=e*(s+t),i=rt.size().width/s+2,n=-s+Et,r.repeat(i,t),r.centerVertically(rt.size()),r.setOrigin(n,r.origin().y),$=o.Rect(ut,0,rt.size().width-2*ut,at,at/2),$.center(rt.size()),K.setPath(r),K.setClippath($)}}),_=rt.bufferBar(),y=s.layer(),y.setColor(e.palette().main.colorWithAlpha(.3)),_.setLayers([y]),rt.on({didUpdateBufferValue:function(e){var t;return t=Math.max(6,(_.size().width-2*ut)*e),$=o.Rect(ut,0,t,at,at/2),$.centerVertically(_.size()),y.setPath($)}}),ht=at/2,Mt=rt.trackView(),Ft=s.layer(),Ft.setColor(e.palette().main),Mt.setLayers([Ft]),rt.on({didUpdateTrackPosition:function(e){var t;return t=Math.max(2*ht,e-ut),$=o.Rect(ut,0,t,at,ht),$.centerVertically(Mt.size()),Ft.setPath($)}}),O=t.hdButton(),O.setFrame(new n(0,0,25,25)),Et=0,Lt=0,E=c.mobile?1.2:1,$=new o,$.moveTo(Et+2.444*E,Lt+0*E),$.lineTo(Et+5.486*E,Lt+0*E),$.lineTo(Et+4.615*E,Lt+3.211*E),$.lineTo(Et+7.397*E,Lt+3.211*E),$.lineTo(Et+8.269*E,Lt+0*E),$.lineTo(Et+11.31*E,Lt+0*E),$.lineTo(Et+8.866*E,Lt+9.1*E),$.lineTo(Et+5.824*E,Lt+9.1*E),$.lineTo(Et+6.695*E,Lt+5.837*E),$.lineTo(Et+3.913*E,Lt+5.837*E),$.lineTo(Et+3.042*E,Lt+9.1*E),$.lineTo(Et+0*E,Lt+9.1*E),$.lineTo(Et+2.444*E,Lt+0*E),$.moveTo(Et+14.794*E,Lt+6.448*E),$.curveTo(Et+15.717*E,Lt+6.448*E,Et+16.51*E,Lt+6.175*E,Et+16.978*E,Lt+5.707*E),$.curveTo(Et+17.355*E,Lt+5.33*E,Et+17.628*E,Lt+4.719*E,Et+17.628*E,Lt+4.16*E),$.curveTo(Et+17.628*E,Lt+3.666*E,Et+17.485*E,Lt+3.341*E,Et+17.252*E,Lt+3.107*E),$.curveTo(Et+16.965*E,Lt+2.821*E,Et+16.51*E,Lt+2.652*E,Et+15.782*E,Lt+2.652*E),$.lineTo(Et+15.275*E,Lt+2.652*E),$.lineTo(Et+14.261*E,Lt+6.448*E),$.lineTo(Et+14.794*E,Lt+6.448*E),$.moveTo(Et+12.948*E,Lt+0*E),$.lineTo(Et+16.172*E,Lt+0*E),$.curveTo(Et+17.94*E,Lt+0*E,Et+19.045*E,Lt+.481*E,Et+19.734*E,Lt+1.17*E),$.curveTo(Et+20.41*E,Lt+1.846*E,Et+20.722*E,Lt+2.73*E,Et+20.722*E,Lt+3.835*E),$.curveTo(Et+20.722*E,Lt+5.2*E,Et+20.202*E,Lt+6.448*E,Et+19.227*E,Lt+7.423*E),$.curveTo(Et+18.135*E,Lt+8.515*E,Et+16.562*E,Lt+9.1*E,Et+14.456*E,Lt+9.1*E),$.lineTo(Et+10.504*E,Lt+9.1*E),$.lineTo(Et+12.948*E,Lt+0*E),h=$,h.center(O.size()),j=e.componentLayer(),j.setColor(e.palette().contrast.colorWithAlpha(.15)),j.setColorOverlay(e.palette().main.colorWithAlpha(.5)),j.setPath(h),O.setLayers([j]),I=j,O.on({didChangeState:function(t){return t===a.State.Selected?(I.setOuterGlow({color:e.palette().main.colorWithAlpha(.3),size:12}),I.setColorOverlay(e.palette().main),O.setNeedsDisplay()):(I.setOuterGlow(null),I.setColorOverlay(e.palette().main.colorWithAlpha(.5)),O.setNeedsDisplay())}}),zt=t.volumeSlider(),zt.setFrame(new n(0,0,27,10)),St=10,d=o.Rect(0,0,3,St,1.5),d.repeat(5,3),j=s.layer(),j.setPath(d),j.setColor(e.palette().contrast.colorWithAlpha(.15)),j.setColorOverlay(e.palette().main.colorWithAlpha(.35)),j.setDropShadow(e.styles().component.dropShadow()),zt.setLayers([j]),zt.setTrackingMargin(0),Vt=zt.trackView(),Bt=s.layer(),Bt.setColor(e.palette().main),Vt.setLayers([Bt]),zt.on({didUpdateTrackPosition:function(e){return $=o.Rect(0,0,e,St),Bt.setPath($),Bt.setClippath(d)}}),E=c.mobile?1.2:1,B=t.expandButton(),B.setFrame(new n(0,0,M,M)),B.setAutoresizingMask(r.AutoresizingMask.FlexibleLeftMargin),c.mobile?($=o.Rect(0,0,22,14),et=o.Rect(0,0,18,10)):($=o.Rect(0,0,16,10),et=o.Rect(0,0,12,6)),$.center(B.size()),et.center(B.size()),$=$.inversePath(),$=$.merge(et),j=e.componentLayer(),j.setPath($),B.setLayers([j]),pt=t.reduceButton(),pt.setFrame(new n(0,0,M,M)),pt.setAutoresizingMask(r.AutoresizingMask.FlexibleLeftMargin),c.mobile?($=o.Rect(0,0,22,14),et=o.Rect(13,21,6,6)):($=o.Rect(0,0,16,10),et=o.Rect(9,14,4,4)),$.center(pt.size()),$=$.inversePath(),$=$.merge(et),j=e.componentLayer(),j.setPath($),pt.setLayers([j]),g=t.ccButton(),c.mobile?(E=1.2,S=1.5):(E=1,S=1),t===this.defaultView_?(m=Math.round(28*S+2),g.setFrame(new n(0,0,m,M-5))):g.setFrame(new n(260,22,25,25)),$=new o,$.moveTo(16.393*E,7.301*E),$.curveTo(16.22*E,8.336*E,15.632*E,9.421*E,15.023*E,9.845*E),$.curveTo(13.675*E,10.781*E,11.738*E,10.663*E,10.583*E,9.568*E),$.curveTo(9.67*E,8.701*E,9.174*E,7.143*E,9.285*E,5.556*E),$.curveTo(9.457*E,3.308*E,10.542*E,1.789*E,12.205*E,1.474*E),$.curveTo(12.823*E,1.355*E,12.976*E,1.355*E,13.665*E,1.493*E),$.curveTo(14.476*E,1.661*E,15.155*E,2.065*E,15.581*E,2.627*E),$.curveTo(15.956*E,3.11*E,16.342*E,4.146*E,16.342*E,4.629*E),$.lineTo(16.342*E,4.925*E),$.lineTo(15.257*E,4.895*E),$.lineTo(14.172*E,4.865*E),$.lineTo(14.111*E,4.569*E),$.curveTo(13.969*E,3.909*E,13.533*E,3.534*E,12.895*E,3.534*E),$.curveTo(12.439*E,3.534*E,12.134*E,3.78*E,11.87*E,4.353*E),$.curveTo(11.678*E,4.786*E,11.637*E,5.043*E,11.637*E,5.999*E),$.curveTo(11.627*E,7.33*E,11.84*E,7.941*E,12.377*E,8.208*E),$.curveTo(13.147*E,8.603*E,13.888*E,8.237*E,14.121*E,7.34*E),$.lineTo(14.232*E,6.887*E),$.lineTo(16.463*E,6.887*E),$.lineTo(16.393*E,7.301*E),$.moveTo(8.606*E,7.35*E),$.curveTo(8.413*E,8.938*E,7.318*E,10.17*E,5.878*E,10.426*E),$.curveTo(4.439*E,10.683*E,2.988*E,10.052*E,2.208*E,8.829*E),$.curveTo(1.609*E,7.893*E,1.357*E,5.821*E,1.681*E,4.49*E),$.curveTo(2.066*E,2.884*E,3.11*E,1.72*E,4.388*E,1.464*E),$.curveTo(5.817*E,1.178*E,7.379*E,1.818*E,8.078*E,2.982*E),$.curveTo(8.291*E,3.337*E,8.626*E,4.432*E,8.636*E,4.786*E),$.curveTo(8.636*E,4.885*E,8.352*E,4.915*E,7.531*E,4.915*E),$.lineTo(6.426*E,4.915*E),$.lineTo(6.355*E,4.55*E),$.curveTo(6.315*E,4.333*E,6.152*E,4.057*E,5.949*E,3.859*E),$.curveTo(5.676*E,3.594*E,5.533*E,3.534*E,5.189*E,3.534*E),$.curveTo(4.337*E,3.534*E,3.871*E,4.422*E,3.871*E,6.039*E),$.curveTo(3.871*E,7.152*E,4.002*E,7.626*E,4.428*E,8.04*E),$.curveTo(5.087*E,8.681*E,6.051*E,8.365*E,6.334*E,7.399*E),$.lineTo(6.477*E,6.936*E),$.lineTo(8.666*E,6.877*E),$.lineTo(8.606*E,7.35*E),$.moveTo(17.913*E,3.167*E),$.curveTo(17.61*E,.681*E,17.083*E,.267*E,13.902*E,0*E),$.curveTo(12.525*E,E*-.108,5.477*E,E*-.108,4.059*E,0*E),$.curveTo(1.698*E,.197*E,.959*E,.483*E,.524*E,1.421*E),$.curveTo(.393*E,1.707*E,.231*E,2.161*E,.18*E,2.428*E),$.curveTo(.007*E,3.227*E,E*-.063,6.927*E,.068*E,8.259*E),$.curveTo(.291*E,10.677*E,.787*E,11.298*E,2.681*E,11.604*E),$.curveTo(4.149*E,11.831*E,7.745*E,11.97*E,10.561*E,11.9*E),$.curveTo(16.445*E,11.762*E,17.225*E,11.506*E,17.762*E,9.621*E),$.curveTo(17.985*E,8.821*E,18.086*E,4.618*E,17.913*E,3.167*E),$.center(g.size()),j=e.componentLayer(),j.setPath($),g.setLayers([j]),f=j,A=function(t){return t===a.State.Selected?f.setColor(e.palette().main):f.setColor(e.palette().main.colorWithAlpha(.5)),g.setNeedsDisplay()},A(g.state()),g.on({didChangeState:A}),N=18*S,q=5*S,v=5*S,bt=c.mobile?16:3,gt=c.mobile?3:bt,ft=c.mobile?16:6,Y=4,x=t.ccPane(),w=x.listView(),w.rightScrollbar=!1,Z=w.items().length,yt=(Math.min(Z,Y)+1)*N,kt=!0,D=Z-Y,_t=Y>Z?1:Y/Z,w.scrollbarWidth=gt,w.scrollbarMargin=ft,w.scrollbarEnabled=kt,Q=Math.min(Z*N,Y*N),dt=Math.round(_t*yt),w.scrollableHeight=N*D,x.scaleFactor=S,F=87*S+2,V=c.mobile?50:50,P=V*S+Q,x.setFrame(new n(0,0,F,P)),x.setAutoresizingMask(r.AutoresizingMask.FlexibleLeftMargin),w.setFrame(new n(v,v,F-v,Q)),w.itemHeight=N,j=s.layer(),j.setColor(e.palette().background),k=j,z=function(e,t,i){var n;return $=new o,n=t-104*i,$.moveTo(99.999*i,3*i),$.lineTo(99.999*i,n+104*i),$.lineTo(0*i,n+104*i),$.lineTo(0*i,3*i),$.curveTo(0*i,1.343*i,1.343*i,0*i,3*i,0*i),$.lineTo(97.001*i,0*i),$.curveTo(98.657*i,0*i,99.999*i,1.343*i,99.999*i,3*i),$},At=function(){var e;return e=P-M+(M-g.frame().size.height),$=z(x.shapeL,e,S),k.setPath($)},At(),x.setLayers([j]),x.on({didChangeShape:At}),G=q+v,U=new u({lineHeight:N,size:c.mobile?15:11,weight:"normal"}),Tt=new u({lineHeight:N,size:c.mobile?15:11,weight:"bold"}),W={"font-family":"Helvetica,Arial,sans-serif","font-style":"normal","text-shadow":"rgba(0,0,0,0.4) 0px 0px 5px","-webkit-font-smoothing":"antialiased"},H={color:"#cecece"},xt={color:"#ffffff"},c.extend(W,H),p=function(e){var t,i,n;return i=s.layer(),n=e.size(),t=s.layer(),$=o.Circle(n.width-4*S,0,2.5),$.centerVertically(n),e.label().setFont(Tt),e.label().css(xt)},Dt=w.items(),Ot=0,It=Dt.length;It>Ot;Ot++)R=Dt[Ot],L=R.bounds(),L.origin.x=q,L.size.width-=q,R.label().setFrame(L),R.label().css(W),R.label().setFont(U);return w.layoutSubviews(),(R=w.selectedItem())&&p(R),w.on({didUnselectItem:function(e){return e.setLayers([]),e.label().setFont(U),e.label().css(H)}}),w.on({didSelectItem:function(e){return p(e)}}),kt&&(ct=w.scrollbar(),J=c.mobile?bt-gt:bt,ct.setFrame(new n(0,0,bt,yt)),mt=Math.round(gt/2),$=o.Rect(0,0,gt,ct.size().height,mt),$.centerHorizontally(ct.size()),j=s.layer(),j.setColor(e.palette().contrast.colorWithAlpha(.15)),j.setColorOverlay(e.palette().main.colorWithAlpha(.4)),j.setDropShadow(e.styles().component.dropShadow()),j.setPath($),ct.setLayers([j]),ct.setTrackingMargin(dt/2),wt=ct.trackView(),vt=s.layer(),vt.setColor(e.palette().main),wt.setLayers([vt]),ct.on({didUpdateTrackPosition:function(e){return $=o.Rect(0,e-.5*dt,gt,dt,mt),$.centerHorizontally(ct.size()),vt.setPath($)}})),b=x.offButton(),b.label().css(W),b.label().setFont(U),b.setFrame(new n(v+ft,w.frame().maxY(),F-2*v,N)),L=b.bounds(),L.origin.x=q,L.size.width-=q,b.label().setFrame(L),j=s.layer(),$=o.Rect(0,0,20,20),j.setPath($),b.setLayers([j]),T=j,C=function(e){return e===a.State.Selected?p(b):(b.label().setFont(U),b.label().css(H),b.setLayers([]))},C(b.state()),b.on({didChangeState:C})}}),p.exports||h});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("players/light/plugins/controls/controls_view",["sublime/video/plugins/controls/inline_controls_view","ui/tracking_area","core/util"],function(e,t,i){var n,o,r,s;return s=i._,r={},o={},n=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return __extends(i,e),i.className="ControlsView",i.prototype.loadComponents_=function(){return this.addLeftComponent(this.pauseButton(),4),s.mobile||this.volumeEnabled_&&this.addRightComponent(this.volumeSlider(),2),this.setCenterComponent(this.progressBar())},i.prototype.layoutVolumePane=function(){},i.prototype.removeVolumeComponents_=function(){return i.__super__.removeVolumeComponents_.apply(this,arguments),this.volumeSlider_?this.removeComponent(this.volumeSlider()):void 0},i.prototype.layoutCCPane=function(){var e,t,i;return this.ccButton().hasParent()?(t=this.ccPane(),e=this.ccButton().frame(),i=t.frame(),i.origin.x=e.origin.x,i.maxX()>this.parent().bounds().maxX()&&(i.origin.x=this.bounds().maxX()-i.size.width),t.hasParent()||this.append(this.ccPane(),{before:this.ccButton()}),i.origin.y=e.size.height-i.size.height,t.setFrame(i)):void 0},i.prototype.trackingAreaForPane=function(e){var i,n;return i=e.scaleFactor||1,n=new t(e.bounds(),{trackingInVisibleRect:!1}),e===this.ccPane()&&(n.hitTest=s.bind(this,function(e){var t;return t=n.rect,t=t.clone(),t.size.height-=this.ccButton().bounds().size.height-10,t.containsPoint(e)?!0:(e=this.ccButton().convertPointFromView(e,this.ccPane()),this.ccButton().bounds().containsPoint(e)?!0:!1)})),n},i}(e),r.exports=n,r.exports||o}),sublime_.define("players/light/plugins/embed/embed.light_skin",["players/light/light_skin","graphics/size","graphics/rect","graphics/point","ui/view","graphics/path","ui/font","graphics/layer"],function(e,t,i,n,o,r,s,a){var l,u,h;
return l=s.Font,h={},u={},e.extend({Embed:function(s,u){var h,p,c,d,_,y,g,f,m,v,w,b,T,x,P,k,z;return P=new t(44,44),T=i.zero(),x=new n(10,10),T.origin=this.isSharingInstalled()?new n(u.width-P.width-x.x-50,x.y):new n(u.width-P.width-x.x,x.y),T.size=P,s.setAutoresizingMask(o.AutoresizingMask.FlexibleLeftMargin|o.AutoresizingMask.FlexibleBottomMargin),s.setFrame(T),c=s,d=e.componentLayer(),m=r.EmbedIcon(0,0,16),m.center(c.size()),d.setPath(m),c.setLayers([d]),f=this.paneController().view(),v={"font-style":"normal",color:"#fff","text-align":"center"},_=new l({lineHeight:28,size:28,weight:"normal"}),b=f.label(),b.css(v),b.setFont(_),_=new l({family:["Monaco","Courier","monospace"],lineHeight:40,size:12,weight:"normal"}),p=function(e,t,i){var n;return n=a.layer(),n.setColor("rgba(10,10,10,0.5)"),e.on({didUpdateFrame:function(){return m=r.Rect(0,0,e.size().width,e.size().height,4),n.setPath(m)}}),t&&e.cssText(t),i&&e.setFont(i),n},k=f.widthTextField(),k.setLayers([p(k,v,_)]),y=f.heightTextField(),y.setLayers([p(y,v,_)]),w=f.textField(),g=e.componentLayer(),w.setLayers([p(w,v,_),g]),w.on({didUpdateFrame:function(){return m=r.EmbedIcon(0,0,.35*w.size().height),m.centerVertically(w.size(),10,1),g.setPath(m)}}),w.cssText(v),w.setFont(_),v["text-align"]="right",_=new l({lineHeight:40,size:14,weight:"normal"}),b=f.sizeLabel(),b.css(v),b.setFont(_),z=f.xView(),h=e.componentLayer(),z.setLayers([h]),z.on({didUpdateFrame:function(){return m=r.CrossIcon(0,0,10),m.center(z.size()),h.setPath(m)}})}}),h.exports||u}),sublime_.define("players/light/plugins/lightbox/lightbox_controller.light_skin",["players/light/light_skin","graphics/rect","graphics/path","graphics/layer"],function(e){var t,i;return i={},t={},e.extend({LightboxController:function(){}}),i.exports||t}),sublime_.define("players/light/plugins/poster/start_controller.light_skin",["players/light/light_skin","graphics/layer","ui/view","graphics/size","graphics/path"],function(e,t,i,n,o){var r,s;return s={},r={},e.extend({StartController:function(r){var s,a,l,u,h;return r.setAutoresizingMask(i.AutoresizingMask.FlexibleWidth|i.AutoresizingMask.FlexibleHeight),r.setFrame(r.parent().bounds()),h=r.size(),l=r.playButton(),l.setAutoresizingMask(i.AutoresizingMask.FlexibleLeftMargin|i.AutoresizingMask.FlexibleRightMargin|i.AutoresizingMask.FlexibleTopMargin|i.AutoresizingMask.FlexibleBottomMargin),u=64,l.center({size:new n(u,u),view:r}),a=o.Triangle(0,0,41,42),a.center(l.size()),s=t.layer(a),s.setPath(a),s.setColor(e.palette().main),s.setStroke({color:e.palette().main,width:2}),s.setDropShadow({color:"rgba(0,0,0,0.2)",distance:2,size:8}),l.setLayers([s])}}),s.exports||r}),sublime_.define("players/light/plugins/social_sharing/social_sharing.light_skin",["players/light/light_skin","sublime/video/plugins/social_sharing/social_sharing","graphics/size","graphics/rect","graphics/point","ui/view","graphics/path","graphics/layer","ui/font"],function(e,t,i,n,o,r,s,a,l){var u,h,p;return u=l.Font,p={},h={},e.extend({SocialSharing:function(l,h){var p,c,d,_,y,g,f,m,v,w,b,T,x;return x=new i(44,44),b=n.zero(),T=new o(10,10),b.origin=new o(h.width-x.width-T.x,T.y),b.size=x,l.setAutoresizingMask(r.AutoresizingMask.FlexibleLeftMargin|r.AutoresizingMask.FlexibleBottomMargin),l.setFrame(b),f=l,m=e.componentLayer(),this.options_.icon===t.IconStyle.Alternative?(g=s.SharingIcon(0,0,f.size().width-24),g.center(f.size(),-1,-1)):(g=s.SharingIconAlt(0,0,f.size().width-26),g.center(f.size(),-2,-1)),m.setPath(g),f.setLayers([m]),y=this.paneController().view(),p=function(t,i){var n,o;return o=t.icon(),t.setShowTextLabel(!1),n=e.componentLayer(),o.on({didUpdateFrame:function(){return g=i(0,0,o.size().height-15),g.center(o.size()),n.setPath(g)}}),o.setLayers([n])},p(y.twitterButton(),s.TwitterLogo),p(y.facebookButton(),s.FacebookLogo),p(y.googlePlusButton(),s.GooglePlusLogo),p(y.pinterestButton(),s.PinterestLogo),_=e.componentLayer(),w=y.textField(),d=a.layer(),d.setColor("rgba(10,10,10,0.5)"),w.on({didUpdateFrame:function(){return g=s.Rect(0,0,w.size().width,w.size().height,4),d.setPath(g),g=s.LinkIcon(0,0,.5*w.size().height),g.centerVertically(w.size(),10),_.setPath(g)}}),w.setLayers([d,_]),c=new u({family:["Monaco","Courier","monospace"],lineHeight:40,size:12,weight:"normal"}),v={"font-style":"normal",color:"#fff"},w.cssText(v),w.setFont(c)}}),p.exports||h});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("sublime/alert",["ui/font","ui/view","ui/label","ui/link","graphics/rect"],function(e,t,i,n,o){var r,s,a,l,u,h,p;return s=e.Font,a=e.FontStyle,l=i.Label,u=i.LabelTextAlignment,p={},h={},r=function(e){function i(e){i.__super__.constructor.call(this,"span"),this.title_=e.title||null,this.description_=e.description||null,this.dismissible_=e.dismissible||!1,this.action_=e.action||{},this.css({background:"black"}),this.delegate_=e.delegate||null,this.contentView_=new t,this.contentView_.setAutoresizingMask(t.AutoresizingMask.FlexibleHeight|t.AutoresizingMask.FlexibleWidth|t.AutoresizingMask.FlexibleTopMargin|t.AutoresizingMask.FlexibleBottomMargin)}return __extends(i,e),i.className="Alert",i.prototype.titleLabel=function(){return this.titleLabel_||(this.titleLabel_=new l({color:"#fff",textAlignment:u.Center}),this.title_&&this.titleLabel_.setText(this.title_)),this.titleLabel_},i.prototype.descriptionLabel=function(){return this.descriptionLabel_||(this.descriptionLabel_=new l({color:"#666",textAlignment:u.Center}),this.description_&&this.descriptionLabel_.setText(this.description_)),this.descriptionLabel_},i.prototype.link=function(){return this.link_||(this.link_=new n,this.link_.set({color:"#fff",textAlignment:u.Center}),this.link_.css({"text-decoration":"none","border-bottom":"1px solid #B64F00","padding-bottom":"3px"}),this.action_.title&&this.link_.setText(this.action_.title),this.link_.setURL(this.action_.url)),this.link_},i.prototype.didMoveToParent=function(){return i.__super__.didMoveToParent.apply(this,arguments),this.title_&&this.contentView_.append(this.titleLabel()),this.description_&&this.contentView_.append(this.descriptionLabel()),this.action_.title&&this.contentView_.append(this.link()),this.append(this.contentView_)},i.prototype.layoutSubviews=function(){var e,t,i,n,r,l,u,h,p,c,d,_,y;return e=this.bounds(),n=e.size.height,y=e.size.width,this.title_&&(y>320?this.title_&&this.titleLabel().setFont(new s({lineHeight:22,size:22,weight:600})):y>200?this.title_&&this.titleLabel().setFont(new s({lineHeight:19,size:19,weight:600})):this.title_&&this.titleLabel().setFont(new s({lineHeight:15,size:15,weight:600}))),this.description_&&(y>320?this.description_&&this.descriptionLabel().setFont(new s({size:16,weight:200,lineHeight:20})):this.description_&&this.descriptionLabel().setFont(new s({size:14,weight:200,lineHeight:20}))),this.action_.title&&(y>200?this.action_.title&&this.link().setFont(new s({lineHeight:18,size:15,weight:200,style:a.Italic})):this.action_.title&&this.link().setFont(new s({lineHeight:16,size:13,weight:200,style:a.Italic}))),r=10,y=e.size.width-2*r,d=this.titleLabel().sizeOfCurrentString(y).height,i=this.descriptionLabel().sizeOfCurrentString(y).height,this.action_.title?(u=this.link().sizeOfCurrentString(),l=u.height):l=0,_=20,c=n-4*_-d,t=!1,c>=i?t=!0:(c-=_+l,0>c&&(_=(4*_-Math.abs(c))/4)),this.titleLabel_&&(this.titleLabel_.setFrame(new o(0,0,y,d)),p=this.titleLabel_.frame().maxY()),this.descriptionLabel_&&t?(this.descriptionLabel_.setFrame(new o(0,p+_,y,i)),p=this.descriptionLabel_.frame().maxY(),this.descriptionLabel().setHidden(!1)):this.descriptionLabel().setHidden(!0),this.action_.title&&(h=u.width,this.link().setFrame(new o((y-h)/2,p+_-4,h,l)),p=this.link_.frame().maxY()),this.contentView_.setFrame(new o(r,(n-p)/2,y,p))},i}(t),p.exports=r,p.exports||h}),sublime_.define("sublime/api",["core/exporter"],function(e){var t,i,n,o,r;return r={},o={},t=function(t,i,n){return e(["sublime",t].join("."),i,n)},i=function(t,i,n){return e(["sublimevideo",t].join("."),i,n)},n=function(t,i,n){return e(["sublime_",t].join("."),i,n)},o.Api=t,o.DeprecatedApi=i,o.InternalApi=n,r.exports||o}),sublime_.define("sublime/app_plugin",["core/util","core/dom","core/event_emitter","core/options","sublime/alert"],function(e,t,i,n,o){var r,s,a,l,u,h;return h=e._,a=i.EventEmitter,u={},l={},s={None:0,Loading:1,Loaded:2},r=function(){function e(){this.readyCallbacks_=[],this.loadingState_=s.None,this.controllers_=[],this.APIEventEmitter_=new a}return e.className="AppPlugin",e.prototype.setDelegate=function(e){return this.delegate_=e},e.prototype.delegate=function(){return this.delegate_},e.prototype.tag=0,e.prototype.emitAPIEvent=function(){var e,t,i;return i={},e=Array.prototype.slice.call(arguments),t=e.shift(),i[t]=e,this.APIEventEmitter_.emit(i)},e.prototype.onAPIEvent_=function(){var e;return 1===arguments.length&&h.isObject(arguments[0])?e=arguments[0]:2===arguments.length&&h.isString(arguments[0])&&h.isFunction(arguments[1])&&(e={},e[arguments[0]]=arguments[1]),this.APIEventEmitter_.on(e),h.undef},e.prototype.didPreparedController=function(e,t,i){var n;return null==i&&(i={}),e&&(this.controllers_.push(e),this.emitAPIEvent("ready",e.API())),n=i.created,t?t(null,e,n):void 0},e.prototype.prepareElement=function(e,i){var n;return(n=this.existingController(e))?i(null,n):(e=this._controllerElement(e),e&&t.isInDom(e)?this.prepareControllerForElement(e,{append:!0},h.bind(this,function(e){return this.didPreparedController(e,i)})):i?i(Error("Invalid element or outside the DOM")):void 0)},e.prototype._controllerElement=function(e){var i;return i=h.isString(e)?t.elementById(e):e,i?this._validElement(i):null},e.prototype.existingController=function(e){var t,i,n,o,r;for(i=this._controllerElement(e),r=this.controllers_,n=0,o=r.length;o>n;n++)if(t=r[n],t._element()===i||t._usedVideoElement&&t._usedVideoElement()===i)return t},e.prototype.controller=function(e,t,i){var n,o;if(null==t&&(t={}),o=this._controllerElement(e)){if(n=this.existingController(o))return i(null,n);if(t.createIfNeeded)return this.prepareControllerForElement(o,{append:!1},h.bind(this,function(e){return this.didPreparedController(e,i,{created:!0})}))}},e.prototype.unprepareElement=function(e){var t;return t=this.existingController(e),this.unprepareController(t)},e.prototype.unprepareController=function(e){return e?h.remove(this.controllers_,e):void 0},e.prototype.APIObjectForElement=function(e){var t;return t=this.existingController(e),t?t.API():void 0},e.prototype._validElement=function(e){return e},e.prototype.prepareControllerForElement=function(e,t){return null==t&&(t={}),null},e.prototype.API=function(){return{}},e.prototype.isSingleUIElement=function(e){var i,n,o,r,s,a,l;if(h.embed){for(i=t.children(document.body),o=0,a=h.clone(i),r=0,s=a.length;s>r;r++)n=a[r],("STYLE"===(l=t.nodeName(n))||"SCRIPT"===l||/^\/.*/.test(n.nodeName))&&o++;return 1===i.length-o&&e.parentNode===document.body}return!1},e.prototype.installSingleUIElementStyle=function(){return h.installStyles("html,body{padding:0!important;margin:0!important;overflow:hidden!important;width:100%!important;height:100%!important;}")},e.prototype.defaultOptions=function(){return{}},e.prototype.defaultAllowedOptions=function(){return{}},e.prototype.compoundDataSettings=function(){},e.prototype.options=function(e,t,i){var o,r;return o=this.defaultAllowedOptions(),h.deepExtend(o,e),r=new n(o),r.extend(this.defaultOptions()),r.extend(t,{verify:!0}),i&&r.extendWithDataSettings(i,this.compoundDataSettings()),r},e.prototype.load=function(e,t,i){switch(null==e&&(e={}),null==t&&(t={}),this.loadingState_){case s.None:return i&&this.readyCallbacks_.push(i),this.loadingState_=s.Loading,this.main(h.bind(this,this.didLoad_));case s.Loading:if(i)return this.readyCallbacks_.push(i);break;case s.Loaded:if(i)return i()}},e.prototype.didLoad_=function(){var e,t,i,n,o;for(this.loadingState_=s.Loaded,t=h.clone(this.readyCallbacks_),this.readyCallbacks_=[],o=[],i=0,n=t.length;n>i;i++)e=t[i],o.push(e());return o},e.prototype.licenseAlert=function(){var e,t;return t=this.delegate_.licenseError(),e=new o({title:t.title,description:t.description,action:t.action})},e.prototype.requirePluginForElement=function(e,t){return this.delegate_.requirePluginForElement(e,t)},e.prototype.kitForName=function(e){return this.delegate_.availableKits()[e]},e.prototype.defaultKit=function(){return this.delegate_.defaultKit()},e.prototype.license=function(){return this.delegate_.license()},e.prototype.licenseType=function(){return this.delegate_.licenseType()},e.prototype.config=function(){return this.delegate_.config()},e.prototype.pluginsInfo=function(){return this.delegate_.pluginsInfo()},e.prototype.skinsInfo=function(){return this.delegate_.skinsInfo()},e.prototype.modulePath=function(e,t){return this.delegate_.modulePath(e,t)},e.prototype.requireSkin=function(e,t){var i;return i=e||this.defaultKit().skin,require([i.module],h.bind(this,function(n){var o,r,s;if(/\//.test(i.module))e=n;else for(e=null,r=0,s=arguments.length;s>r;r++)o=arguments[r],o&&o.name&&o.name===i.name&&(e=o);return t?t(e):void 0}))},e}(),l.AppPluginLoadingState=s,l.AppPlugin=r,u.exports||l}),sublime_.define("sublime/common_paths",["graphics/path"],function(e){var t,i,n;return i={},t={},n={logo:function(){var t;return t=new e,t.moveTo(113.104,8.257),t.curveTo(113.037,8.311,112.951,8.315,112.846,8.315),t.lineTo(112.649,8.315),t.lineTo(112.742,7.803),t.curveTo(112.776,7.798,112.812,7.806,112.848,7.805),t.curveTo(112.883,7.804,112.915,7.809,112.945,7.809),t.curveTo(113.023,7.809,113.086,7.828,113.133,7.859),t.curveTo(113.18,7.892,113.203,7.938,113.203,8.017),t.curveTo(113.203,8.13,113.17,8.204,113.104,8.257),t.moveTo(113.38,8.033),t.curveTo(113.38,7.902,113.34,7.809,113.261,7.753),t.curveTo(113.181,7.697,113.083,7.669,112.967,7.669),t.curveTo(112.91,7.669,112.854,7.671,112.797,7.675),t.curveTo(112.741,7.679,112.675,7.728,112.599,7.737),t.lineTo(112.351,9.169),t.lineTo(112.521,9.169),t.lineTo(112.624,8.486),t.lineTo(112.875,8.486),t.curveTo(112.907,8.486,112.938,8.576,112.967,8.632),t.curveTo(112.996,8.688,113.028,8.769,113.063,8.865),t.lineTo(113.137,9.09),t.curveTo(113.169,9.088,113.199,9.087,113.229,9.084),t.curveTo(113.259,9.082,113.287,9.078,113.313,9.07),t.lineTo(113.207,8.774),t.curveTo(113.18,8.7,113.15,8.636,113.118,8.581),t.curveTo(113.086,8.527,113.055,8.484,113.022,8.452),t.curveTo(113.133,8.429,113.221,8.381,113.284,8.307),t.curveTo(113.349,8.233,113.38,8.142,113.38,8.033),t.moveTo(113.777,8.65),t.curveTo(113.722,8.804,113.644,8.938,113.544,9.052),t.curveTo(113.444,9.166,113.326,9.255,113.188,9.321),t.curveTo(113.051,9.386,112.9,9.419,112.738,9.419),t.curveTo(112.604,9.419,112.483,9.399,112.381,9.358),t.curveTo(112.277,9.317,112.19,9.261,112.12,9.189),t.curveTo(112.051,9.118,111.997,9.031,111.96,8.928),t.curveTo(111.923,8.826,111.904,8.714,111.904,8.593),t.curveTo(111.904,8.417,111.933,8.252,111.987,8.098),t.curveTo(112.043,7.943,112.12,7.809,112.22,7.693),t.curveTo(112.319,7.579,112.438,7.489,112.574,7.423),t.curveTo(112.711,7.357,112.861,7.325,113.026,7.325),t.curveTo(113.154,7.325,113.27,7.344,113.373,7.382),t.curveTo(113.477,7.421,113.563,7.476,113.635,7.547),t.curveTo(113.706,7.619,113.762,7.706,113.801,7.809),t.curveTo(113.84,7.911,113.86,8.025,113.86,8.151),t.curveTo(113.86,8.33,113.832,8.496,113.777,8.65),t.moveTo(113.93,7.753),t.curveTo(113.883,7.638,113.817,7.54,113.732,7.458),t.curveTo(113.647,7.376,113.547,7.314,113.428,7.271),t.curveTo(113.311,7.228,113.18,7.206,113.037,7.206),t.curveTo(112.851,7.206,112.68,7.242,112.524,7.313),t.curveTo(112.369,7.385,112.236,7.484,112.126,7.61),t.curveTo(112.016,7.736,111.93,7.885,111.868,8.055),t.curveTo(111.807,8.226,111.775,8.409,111.775,8.604),t.curveTo(111.775,8.747,111.798,8.876,111.844,8.991),t.curveTo(111.889,9.106,111.953,9.204,112.035,9.286),t.curveTo(112.118,9.367,112.218,9.43,112.336,9.473),t.curveTo(112.454,9.516,112.586,9.538,112.73,9.538),t.curveTo(112.918,9.538,113.089,9.502,113.244,9.43),t.curveTo(113.398,9.358,113.532,9.261,113.644,9.136),t.curveTo(113.756,9.011,113.844,8.863,113.906,8.693),t.curveTo(113.969,8.522,114,8.338,114,8.14),t.curveTo(114,7.997,113.977,7.868,113.93,7.753),t.moveTo(107.938,12.646),t.curveTo(107.79,13.43,107.596,13.993,107.354,14.338),t.curveTo(107.11,14.682,106.789,14.854,106.389,14.854),t.curveTo(106.104,14.854,105.888,14.774,105.74,14.615),t.curveTo(105.593,14.457,105.52,14.176,105.52,13.773),t.curveTo(105.52,13.487,105.551,13.133,105.614,12.709),t.curveTo(105.751,11.894,105.938,11.322,106.176,10.993),t.curveTo(106.412,10.665,106.721,10.501,107.1,10.501),t.curveTo(107.385,10.501,107.611,10.591,107.78,10.771),t.curveTo(107.948,10.951,108.033,11.263,108.033,11.708),t.curveTo(108.033,11.983,108.001,12.296,107.938,12.646),t.moveTo(109.835,9.15),t.curveTo(109.529,8.886,109.163,8.689,108.736,8.563),t.curveTo(108.31,8.436,107.838,8.372,107.321,8.372),t.curveTo(106.752,8.372,106.22,8.465,105.725,8.65),t.curveTo(105.229,8.835,104.786,9.105,104.396,9.46),t.curveTo(104.007,9.815,103.68,10.249,103.416,10.763),t.curveTo(103.152,11.276,102.963,11.861,102.847,12.519),t.curveTo(102.815,12.73,102.789,12.941,102.768,13.154),t.curveTo(102.747,13.365,102.736,13.562,102.736,13.742),t.curveTo(102.736,14.844,103.039,15.658,103.646,16.188),t.curveTo(104.252,16.718,105.098,16.982,106.184,16.982),t.curveTo(106.721,16.982,107.237,16.89,107.732,16.705),t.curveTo(108.228,16.52,108.674,16.252,109.068,15.902),t.curveTo(109.464,15.553,109.804,15.121,110.088,14.607),t.curveTo(110.373,14.094,110.573,13.504,110.689,12.836),t.curveTo(110.721,12.646,110.747,12.441,110.769,12.225),t.curveTo(110.789,12.008,110.8,11.809,110.8,11.629),t.curveTo(110.8,11.057,110.716,10.567,110.547,10.159),t.curveTo(110.378,9.751,110.141,9.415,109.835,9.15),t.moveTo(91.796,14.6),t.curveTo(91.647,14.663,91.5,14.711,91.353,14.742),t.curveTo(91.205,14.774,91.026,14.79,90.815,14.79),t.curveTo(90.541,14.79,90.33,14.705,90.183,14.536),t.curveTo(90.035,14.367,89.962,14.07,89.962,13.646),t.curveTo(89.962,13.498,89.972,13.34,89.993,13.17),t.curveTo(90.014,13,90.04,12.81,90.072,12.598),t.curveTo(90.145,12.185,90.228,11.846,90.317,11.581),t.curveTo(90.406,11.316,90.512,11.107,90.634,10.954),t.curveTo(90.754,10.8,90.892,10.694,91.045,10.636),t.curveTo(91.197,10.578,91.369,10.548,91.559,10.548),t.curveTo(91.706,10.548,91.864,10.567,92.033,10.604),t.curveTo(92.201,10.641,92.344,10.686,92.46,10.739),t.lineTo(91.796,14.6),t.moveTo(98.941,10.598),t.curveTo(99.142,10.343,99.39,10.207,99.685,10.207),t.curveTo(99.928,10.207,100.109,10.277,100.23,10.426),t.curveTo(100.352,10.574,100.412,10.778,100.412,11.043),t.curveTo(100.412,11.16,100.398,11.316,100.373,11.48),t.curveTo(100.347,11.645,100.322,11.73,100.302,11.902),t.lineTo(98.499,11.902),t.curveTo(98.594,11.219,98.741,10.852,98.941,10.598),t.moveTo(98.215,13.44),t.lineTo(102.578,13.44),t.curveTo(102.694,12.927,102.786,12.59,102.854,12.225),t.curveTo(102.924,11.858,102.958,11.541,102.958,11.287),t.curveTo(102.958,10.408,102.705,9.7,102.199,9.17),t.curveTo(101.693,8.641,100.907,8.374,99.843,8.374),t.curveTo(99.306,8.374,98.805,8.447,98.341,8.595),t.curveTo(97.877,8.744,97.466,8.982,97.107,9.31),t.curveTo(96.749,9.638,96.441,10.067,96.183,10.596),t.curveTo(95.925,11.126,95.732,11.767,95.606,12.519),t.curveTo(95.543,12.879,95.511,13.234,95.511,13.626),t.curveTo(95.511,13.934,95.537,14.293,95.584,14.464),t.lineTo(94.721,14.464),t.curveTo(94.552,14.464,94.468,14.399,94.468,14.23),t.curveTo(94.468,14.177,94.478,14.107,94.499,14.002),t.lineTo(96.08,4.999),t.curveTo(95.638,4.999,95.182,5.02,94.713,5.057),t.curveTo(94.243,5.094,93.819,5.141,93.439,5.193),t.lineTo(92.855,8.53),t.curveTo(92.665,8.488,92.436,8.451,92.167,8.419),t.curveTo(91.898,8.388,91.68,8.372,91.511,8.372),t.curveTo(91.047,8.372,90.592,8.438,90.144,8.57),t.curveTo(89.695,8.703,89.281,8.934,88.902,9.262),t.curveTo(88.522,9.59,88.193,10.024,87.914,10.565),t.curveTo(87.635,11.104,87.426,11.787,87.289,12.613),t.curveTo(87.258,12.826,87.236,13.024,87.227,13.209),t.curveTo(87.216,13.395,87.21,13.568,87.21,13.77),t.curveTo(87.21,14.021,87.224,14.293,87.25,14.464),t.lineTo(86.468,14.464),t.curveTo(86.299,14.464,86.215,14.399,86.215,14.23),t.curveTo(86.215,14.188,86.225,14.102,86.246,13.995),t.lineTo(87.211,8.486),t.lineTo(84.602,8.486),t.lineTo(83.638,14.053),t.curveTo(83.595,14.275,83.566,14.488,83.551,14.668),t.curveTo(83.534,14.848,83.526,15.028,83.526,15.197),t.curveTo(83.526,15.791,83.685,16.238,84.001,16.535),t.curveTo(84.317,16.831,84.828,16.98,85.534,16.98),t.curveTo(85.987,16.98,86.381,16.873,86.713,16.656),t.curveTo(87.045,16.439,87.264,16.034,87.369,15.441),t.lineTo(87.401,15.249),t.curveTo(87.501,15.585,87.639,15.881,87.819,16.133),t.curveTo(88.225,16.699,88.876,16.982,89.772,16.982),t.curveTo(90.215,16.982,90.615,16.926,90.974,16.793),t.curveTo(91.332,16.661,91.685,16.343,92.033,16.001),t.lineTo(92.159,16.001),t.curveTo(92.328,16.343,92.552,16.648,92.831,16.785),t.curveTo(93.11,16.924,93.435,16.987,93.804,16.987),t.curveTo(94.257,16.987,94.644,16.876,94.966,16.659),t.curveTo(95.287,16.441,95.5,16.036,95.606,15.443),t.lineTo(95.689,14.945),t.curveTo(95.836,15.421,96.069,15.818,96.397,16.133),t.curveTo(96.986,16.699,97.872,16.982,99.053,16.982),t.curveTo(99.242,16.982,99.464,16.972,99.717,16.951),t.curveTo(99.97,16.93,100.23,16.893,100.499,16.84),t.curveTo(100.768,16.787,101.037,16.726,101.306,16.656),t.curveTo(101.574,16.588,101.819,16.506,102.041,16.41),t.curveTo(102.041,16.04,102.022,15.643,101.985,15.219),t.curveTo(101.948,14.795,101.898,14.398,101.835,14.027),t.curveTo(101.656,14.123,101.461,14.208,101.25,14.281),t.curveTo(101.039,14.355,100.826,14.422,100.609,14.48),t.curveTo(100.394,14.539,100.183,14.584,99.978,14.615),t.curveTo(99.772,14.646,99.59,14.663,99.432,14.663),t.curveTo(98.958,14.663,98.631,14.592,98.451,14.449),t.curveTo(98.272,14.306,98.183,14.07,98.183,13.742),t.curveTo(98.183,13.688,98.186,13.648,98.19,13.59),t.curveTo(98.196,13.532,98.204,13.44,98.215,13.44),t.moveTo(85.1,7.419),t.curveTo(85.306,7.652,85.624,7.768,86.057,7.768),t.curveTo(86.563,7.768,86.966,7.623,87.266,7.331),t.curveTo(87.566,7.04,87.717,6.656,87.717,6.18),t.curveTo(87.717,5.873,87.616,5.6,87.416,5.361),t.curveTo(87.216,5.123,86.904,5.004,86.483,5.004),t.curveTo(85.967,5.004,85.556,5.16,85.25,5.473),t.curveTo(85.046,5.682,84.911,5.92,84.844,6.188),t.curveTo(84.766,6.177,84.682,6.167,84.586,6.156),t.curveTo(84.344,6.129,84.088,6.108,83.819,6.092),t.curveTo(83.551,6.076,83.287,6.063,83.028,6.053),t.curveTo(82.77,6.042,82.557,6.037,82.389,6.037),t.lineTo(79.779,12.264),t.curveTo(79.727,12.412,79.672,12.574,79.613,12.802),t.curveTo(79.556,13.029,79.511,13.268,79.48,13.609),t.lineTo(79.289,13.609),t.curveTo(79.289,13.44,79.287,13.197,79.281,12.921),t.curveTo(79.276,12.646,79.263,12.432,79.242,12.251),t.lineTo(78.926,7.46),t.curveTo(78.884,6.877,78.693,6.484,78.356,6.271),t.curveTo(78.019,6.06,77.613,5.956,77.139,5.956),t.curveTo(76.485,5.956,76.001,6.1,75.685,6.385),t.curveTo(75.368,6.671,75.163,7.048,75.068,7.598),t.lineTo(74.957,8.144),t.lineTo(75.748,8.144),t.curveTo(76.043,8.144,76.206,8.361,76.238,8.679),t.lineTo(77.202,16.855),t.lineTo(80.206,16.855),t.curveTo(81.07,15.146,81.922,13.376,82.76,11.597),t.curveTo(83.488,10.05,84.181,8.496,84.841,6.95),t.curveTo(84.89,7.123,84.973,7.274,85.1,7.419),t.moveTo(72.704,11.479),t.curveTo(72.678,11.644,72.654,11.73,72.633,11.902),t.lineTo(70.831,11.902),t.curveTo(70.926,11.219,71.073,10.852,71.273,10.598),t.curveTo(71.474,10.343,71.722,10.207,72.017,10.207),t.curveTo(72.259,10.207,72.44,10.277,72.563,10.426),t.curveTo(72.684,10.574,72.744,10.787,72.744,11.052),t.curveTo(72.744,11.168,72.731,11.315,72.704,11.479),t.moveTo(72.175,8.372),t.curveTo(71.637,8.372,71.137,8.446,70.673,8.594),t.curveTo(70.209,8.743,69.798,8.981,69.439,9.309),t.curveTo(69.081,9.638,68.772,10.067,68.515,10.596),t.curveTo(68.256,11.126,68.064,11.767,67.938,12.519),t.curveTo(67.874,12.879,67.843,13.234,67.843,13.626),t.curveTo(67.843,13.934,67.868,14.293,67.915,14.464),t.lineTo(67.115,14.464),t.curveTo(66.946,14.464,66.862,14.399,66.862,14.23),t.curveTo(66.862,14.188,66.873,14.123,66.894,14.018),t.lineTo(67.416,11.084),t.curveTo(67.436,10.999,67.452,10.896,67.463,10.769),t.curveTo(67.474,10.641,67.478,10.526,67.478,10.42),t.curveTo(67.478,9.7,67.263,9.179,66.831,8.855),t.curveTo(66.398,8.533,65.851,8.372,65.186,8.372),t.curveTo(64.786,8.372,64.414,8.43,64.072,8.546),t.curveTo(63.73,8.663,63.357,8.886,62.957,9.214),t.curveTo(62.81,8.907,62.599,8.689,62.324,8.563),t.curveTo(62.051,8.436,61.703,8.372,61.281,8.372),t.curveTo(60.943,8.372,60.625,8.48,60.324,8.618),t.curveTo(60.024,8.755,59.711,8.998,59.384,9.34),t.lineTo(59.258,9.34),t.lineTo(59.399,8.522),t.curveTo(58.967,8.522,58.515,8.516,58.04,8.542),t.curveTo(57.565,8.569,57.139,8.579,56.76,8.632),t.lineTo(55.739,14.464),t.lineTo(54.815,14.464),t.curveTo(54.647,14.464,54.562,14.399,54.562,14.23),t.curveTo(54.562,14.188,54.572,14.102,54.594,13.995),t.lineTo(55.558,8.486),t.lineTo(52.949,8.486),t.lineTo(51.984,14.033),t.curveTo(51.955,14.188,51.935,14.293,51.918,14.464),t.lineTo(51.004,14.464),t.curveTo(50.836,14.464,50.751,14.399,50.751,14.23),t.curveTo(50.751,14.188,50.762,14.123,50.783,14.018),t.lineTo(52.364,4.999),t.curveTo(51.922,4.999,51.463,5.02,50.988,5.057),t.curveTo(50.515,5.094,50.093,5.141,49.724,5.193),t.lineTo(48.174,14.074),t.curveTo(48.132,14.297,48.103,14.498,48.087,14.679),t.curveTo(48.071,14.859,48.063,15.033,48.063,15.203),t.curveTo(48.063,15.797,48.222,16.241,48.538,16.537),t.curveTo(48.855,16.834,49.365,16.982,50.071,16.982),t.curveTo(50.524,16.982,50.917,16.873,51.249,16.656),t.curveTo(51.568,16.448,51.781,16.064,51.892,15.51),t.curveTo(51.938,15.951,52.09,16.295,52.349,16.537),t.curveTo(52.664,16.834,53.176,16.982,53.882,16.982),t.curveTo(54.335,16.982,54.727,16.873,55.06,16.656),t.curveTo(55.208,16.56,55.333,16.439,55.435,16.267),t.lineTo(55.336,16.855),t.lineTo(57.945,16.855),t.lineTo(58.973,10.961),t.curveTo(59.142,10.866,59.315,10.787,59.494,10.739),t.curveTo(59.674,10.691,59.843,10.664,60,10.664),t.curveTo(60.358,10.664,60.538,10.82,60.538,11.138),t.curveTo(60.538,11.244,60.527,11.365,60.507,11.471),t.lineTo(59.573,16.855),t.lineTo(62.183,16.855),t.lineTo(63.21,10.977),t.curveTo(63.357,10.872,63.519,10.787,63.692,10.739),t.curveTo(63.866,10.691,64.026,10.664,64.175,10.664),t.curveTo(64.575,10.664,64.775,10.82,64.775,11.138),t.curveTo(64.775,11.191,64.769,11.259,64.76,11.344),t.curveTo(64.749,11.429,64.738,11.492,64.728,11.533),t.lineTo(64.285,14.075),t.curveTo(64.243,14.298,64.214,14.499,64.198,14.68),t.curveTo(64.183,14.859,64.175,15.034,64.175,15.203),t.curveTo(64.175,15.797,64.333,16.241,64.648,16.537),t.curveTo(64.965,16.834,65.477,16.982,66.183,16.982),t.curveTo(66.636,16.982,67.028,16.873,67.36,16.656),t.curveTo(67.692,16.439,67.911,16.035,68.017,15.441),t.lineTo(68.073,15.107),t.curveTo(68.221,15.512,68.439,15.854,68.728,16.133),t.curveTo(69.318,16.699,70.203,16.982,71.384,16.982),t.curveTo(71.574,16.982,71.795,16.972,72.048,16.951),t.curveTo(72.301,16.93,72.563,16.893,72.831,16.84),t.curveTo(73.1,16.787,73.368,16.726,73.637,16.656),t.curveTo(73.906,16.588,74.15,16.506,74.372,16.41),t.curveTo(74.372,16.04,74.353,15.643,74.317,15.219),t.curveTo(74.28,14.795,74.231,14.398,74.167,14.027),t.curveTo(73.987,14.123,73.793,14.208,73.582,14.281),t.curveTo(73.371,14.355,73.157,14.422,72.941,14.48),t.curveTo(72.726,14.539,72.515,14.584,72.309,14.615),t.curveTo(72.103,14.646,71.922,14.663,71.764,14.663),t.curveTo(71.289,14.663,70.963,14.592,70.783,14.449),t.curveTo(70.603,14.306,70.515,14.07,70.515,13.742),t.curveTo(70.515,13.688,70.517,13.648,70.522,13.59),t.curveTo(70.527,13.532,70.535,13.44,70.546,13.44),t.lineTo(74.91,13.44),t.curveTo(75.025,12.927,75.118,12.59,75.186,12.225),t.curveTo(75.255,11.858,75.289,11.541,75.289,11.287),t.curveTo(75.289,10.408,75.036,9.7,74.53,9.17),t.curveTo(74.024,8.641,73.239,8.372,72.175,8.372),t.moveTo(54.403,7.768),t.curveTo(54.909,7.768,55.313,7.623,55.613,7.331),t.curveTo(55.914,7.04,56.063,6.656,56.063,6.18),t.curveTo(56.063,5.873,55.964,5.6,55.764,5.361),t.curveTo(55.563,5.123,55.252,5.004,54.83,5.004),t.curveTo(54.315,5.004,53.903,5.16,53.598,5.473),t.curveTo(53.291,5.785,53.139,6.164,53.139,6.608),t.curveTo(53.139,6.916,53.241,7.186,53.447,7.419),t.curveTo(53.652,7.652,53.972,7.768,54.403,7.768),t.moveTo(45.249,12.582),t.curveTo(45.176,13.006,45.086,13.355,44.98,13.631),t.curveTo(44.875,13.906,44.751,14.129,44.609,14.298),t.curveTo(44.467,14.467,44.306,14.586,44.127,14.654),t.curveTo(43.947,14.725,43.747,14.758,43.526,14.758),t.curveTo(43.399,14.758,43.257,14.745,43.099,14.719),t.curveTo(42.941,14.692,42.815,14.652,42.72,14.6),t.lineTo(43.368,10.85),t.curveTo(43.674,10.66,44.016,10.565,44.395,10.565),t.curveTo(44.67,10.565,44.897,10.652,45.075,10.826),t.curveTo(45.255,11.001,45.344,11.295,45.344,11.708),t.curveTo(45.344,11.951,45.313,12.243,45.249,12.582),t.moveTo(48.111,11.549),t.curveTo(48.111,10.511,47.882,9.723,47.423,9.182),t.curveTo(46.965,8.642,46.351,8.372,45.581,8.372),t.curveTo(45.244,8.372,44.931,8.415,44.641,8.495),t.curveTo(44.351,8.574,44.079,8.657,43.826,8.998),t.lineTo(43.7,8.998),t.lineTo(44.395,5.007),t.curveTo(43.953,5.007,43.494,5.024,43.02,5.062),t.curveTo(42.546,5.099,42.124,5.123,41.755,5.175),t.lineTo(40.126,14.464),t.lineTo(39.193,14.464),t.curveTo(39.025,14.464,38.94,14.399,38.94,14.23),t.curveTo(38.94,14.188,38.951,14.123,38.973,14.018),t.lineTo(39.953,8.478),t.curveTo(39.51,8.478,39.057,8.491,38.593,8.513),t.curveTo(38.129,8.534,37.702,8.572,37.313,8.625),t.lineTo(36.301,14.424),t.curveTo(36.121,14.529,35.942,14.602,35.763,14.639),t.curveTo(35.584,14.676,35.42,14.694,35.273,14.694),t.curveTo(34.735,14.694,34.467,14.504,34.467,14.123),t.curveTo(34.467,14.027,34.477,13.928,34.498,13.82),t.lineTo(35.446,8.483),t.curveTo(35.004,8.483,34.551,8.494,34.087,8.515),t.curveTo(33.623,8.536,33.196,8.573,32.807,8.626),t.lineTo(31.826,14.234),t.curveTo(31.805,14.33,31.792,14.433,31.786,14.544),t.curveTo(31.781,14.654,31.778,14.753,31.778,14.838),t.curveTo(31.778,15.568,31.977,16.108,32.371,16.458),t.curveTo(32.767,16.808,33.333,16.982,34.071,16.982),t.curveTo(34.482,16.982,34.878,16.896,35.257,16.652),t.curveTo(35.637,16.409,35.947,16.172,36.19,15.83),t.lineTo(36.301,15.83),t.curveTo(36.395,16.172,36.598,16.502,36.909,16.708),t.curveTo(37.22,16.914,37.671,17,38.261,17),t.curveTo(38.714,17,39.106,16.883,39.438,16.666),t.curveTo(39.672,16.514,39.848,16.263,39.969,15.926),t.curveTo(40.377,16.273,40.882,16.533,41.486,16.707),t.curveTo(42.129,16.892,42.788,16.983,43.463,16.983),t.curveTo(44.738,16.983,45.75,16.615,46.498,15.879),t.curveTo(47.247,15.143,47.742,14.113,47.984,12.789),t.curveTo(48.026,12.556,48.059,12.328,48.079,12.105),t.curveTo(48.101,11.883,48.111,11.697,48.111,11.549),t.moveTo(29.139,8.245),t.curveTo(29.297,8.245,29.48,8.256,29.691,8.276),t.curveTo(29.902,8.298,30.121,8.327,30.348,8.364),t.curveTo(30.574,8.401,30.804,8.443,31.035,8.491),t.curveTo(31.268,8.539,31.483,8.589,31.684,8.642),t.curveTo(31.852,8.25,31.984,7.854,32.079,7.451),t.curveTo(32.174,7.048,32.242,6.672,32.285,6.323),t.curveTo(32.095,6.27,31.887,6.219,31.66,6.172),t.curveTo(31.434,6.124,31.201,6.084,30.965,6.053),t.curveTo(30.727,6.021,30.495,5.997,30.269,5.981),t.curveTo(30.042,5.965,29.845,5.958,29.676,5.958),t.curveTo(29.033,5.958,28.438,6.026,27.89,6.164),t.curveTo(27.341,6.301,26.867,6.516,26.467,6.807),t.curveTo(26.065,7.099,25.749,7.466,25.518,7.911),t.curveTo(25.286,8.356,25.17,8.886,25.17,9.5),t.curveTo(25.17,9.977,25.257,10.379,25.431,10.707),t.curveTo(25.605,11.036,25.818,11.316,26.071,11.549),t.curveTo(26.324,11.782,26.604,11.98,26.909,12.145),t.curveTo(27.215,12.309,27.494,12.469,27.747,12.621),t.curveTo(28,12.775,28.213,12.938,28.388,13.105),t.curveTo(28.561,13.275,28.648,13.487,28.648,13.742),t.curveTo(28.648,14.027,28.566,14.261,28.403,14.44),t.curveTo(28.239,14.621,27.963,14.711,27.573,14.711),t.curveTo(27.384,14.711,27.172,14.692,26.94,14.654),t.curveTo(26.709,14.618,26.469,14.57,26.222,14.512),t.curveTo(25.974,14.454,25.731,14.383,25.494,14.298),t.curveTo(25.257,14.213,25.033,14.123,24.822,14.027),t.curveTo(24.453,14.801,24.179,15.574,24,16.348),t.curveTo(24.242,16.453,24.498,16.549,24.767,16.633),t.curveTo(25.035,16.718,25.31,16.783,25.589,16.832),t.curveTo(25.868,16.879,26.14,16.916,26.403,16.943),t.curveTo(26.666,16.969,26.914,16.982,27.146,16.982),t.curveTo(27.736,16.982,28.301,16.911,28.838,16.768),t.curveTo(29.375,16.625,29.845,16.405,30.245,16.108),t.curveTo(30.645,15.813,30.965,15.44,31.201,14.988),t.curveTo(31.439,14.539,31.558,14.006,31.558,13.393),t.curveTo(31.558,12.916,31.471,12.514,31.297,12.185),t.curveTo(31.123,11.856,30.909,11.573,30.656,11.335),t.curveTo(30.403,11.097,30.124,10.896,29.818,10.731),t.curveTo(29.513,10.567,29.233,10.408,28.98,10.254),t.curveTo(28.727,10.101,28.514,9.942,28.34,9.778),t.curveTo(28.166,9.614,28.079,9.42,28.079,9.198),t.curveTo(28.079,8.912,28.155,8.682,28.309,8.507),t.curveTo(28.461,8.333,28.737,8.245,29.139,8.245),t.moveTo(10.199,19.166),t.curveTo(10.104,19.27,9.998,19.365,9.883,19.451),t.curveTo(9.767,19.539,9.641,19.627,9.506,19.715),t.curveTo(9.243,19.883,8.912,19.967,8.514,19.967),t.curveTo(8.108,19.967,7.757,19.883,7.462,19.715),t.curveTo(7.16,19.548,6.945,19.365,6.817,19.166),t.lineTo(1.975,12.01),t.lineTo(4.929,12.01),t.lineTo(8.514,17.563),t.lineTo(12.024,12.01),t.lineTo(14.979,12.01),t.lineTo(10.199,19.166),t.moveTo(1.987,8.01),t.lineTo(11.999,8.01),t.lineTo(11.999,6.975),t.lineTo(1.987,6.975),t.lineTo(1.987,3.305),t.curveTo(1.987,2.932,2.096,2.624,2.313,2.38),t.curveTo(2.53,2.128,2.855,2.002,3.29,2.002),t.lineTo(14.968,2.002),t.lineTo(14.968,3.954),t.lineTo(4.967,3.954),t.lineTo(4.967,5.01),t.lineTo(14.968,5.01),t.lineTo(14.968,8.659),t.curveTo(14.968,9.075,14.859,9.401,14.643,9.636),t.curveTo(14.425,9.853,14.1,9.961,13.666,9.961),t.lineTo(1.987,9.961),t.lineTo(1.987,8.01),t.moveTo(14.968,0),t.lineTo(2.032,0),t.curveTo(.91,0,0,.91,0,2.033),t.lineTo(0,12.291),t.curveTo(0,12.705,.127,13.111,.364,13.451),t.lineTo(5.129,20.305),t.curveTo(5.148,20.332,5.169,20.36,5.192,20.391),t.curveTo(5.5,20.82,5.93,21.19,6.461,21.484),t.curveTo(7.064,21.826,7.755,22,8.514,22),t.curveTo(9.302,22,10.002,21.809,10.613,21.42),t.curveTo(10.79,21.305,10.956,21.189,11.108,21.074),t.curveTo(11.291,20.936,11.465,20.779,11.641,20.594),t.curveTo(11.712,20.52,11.778,20.439,11.837,20.354),t.lineTo(16.636,13.451),t.curveTo(16.873,13.111,17,12.705,17,12.291),t.lineTo(17,2.033),t.curveTo(17,.91,16.09,0,14.968,0),t
}},i.exports=n,i.exports||t}),sublime_.define("sublime/default.settings",[],function(){var e,t,i;return i={},t={},e={app:{stats:{settings:{enable:!0,realtime:!1},allowedSettings:{enable:{values:[!0]},realtime:{values:[!1]}}}},plugins:{imageViewer:{module:"sublime/image/image_app_plugin",plugins:{},settings:{},condition:{tagName:"IMG",className:"sublime"}},lightbox:{module:"sublime/lightbox/lightbox_app_plugin",plugins:{},settings:{},condition:{tagName:"A",className:"sublime"}},videoPlayer:{module:"sublime/video/video_app_plugin",settings:{},allowedSettings:{},condition:{tagName:"VIDEO",className:"sublime"},plugins:{api:{module:"sublime/video/plugins/api/video_controller_api",settings:{enable:!0},allowedSettings:{enable:{type:"boolean"}}},contextmenu:{module:"sublime/video/plugins/contextual_menu/contextual_menu",settings:{enable:!0},allowedSettings:{enable:{type:"boolean"}}},controls:{module:"sublime/video/plugins/controls/controls",settings:{enable:!0},allowedSettings:{enable:{type:"boolean"}}},initial:{module:"sublime/video/plugins/poster/start_controller",settings:{enable:!0},allowedSettings:{enable:{values:[!0],type:"boolean"}}},logo:{module:"sublime/video/plugins/logo/logo",settings:{enable:!0},allowedSettings:{enable:{type:"boolean",values:[!0]}}},subtitles:{module:"sublime/video/plugins/subtitles/subtitles",settings:{enable:!0},allowedSettings:{enable:{type:"boolean"}}},stats:{module:"sublime/video/plugins/stats/stats_controller",settings:{enable:!0},allowedSettings:{enable:{type:"boolean"}}},cuezones:{module:"sublime/video/plugins/cuepoints/cue_zones",settings:{enable:!1},allowedSettings:{enable:{type:"boolean",values:[!1]}}}}}},skin:{module:"sublime/sublime_skin"}},i.exports=e,i.exports||t});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("sublime/image/image_app_plugin",["core/dom","sublime/app_plugin","sublime/image/image_controller","ui/view"],function(e,t,i,n){var o,r,s,a;return o=t.AppPlugin,a={},s={},r=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return __extends(o,t),o.className="ImageAppPlugin",o.prototype._validElement=function(t){return"IMG"===e.nodeName(t)?t:void 0},o.prototype.prepareControllerForElement=function(e,t,o){var r,s;return null==t&&(t={}),s=new i(e),this.delegate_.isLicenseValid()||(r=this.licenseAlert(),r.setFrame(s.view().bounds()),r.setAutoresizingMask(n.AutoresizingMask.FlexibleWidth|n.AutoresizingMask.FlexibleHeight),s.view().append(r)),o?o(s):void 0},o.prototype.main=function(e){return e?e():void 0},o}(o),a.exports=r,a.exports||s});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("sublime/image/image_controller",["core/util","core/image_importer","graphics/size","graphics/rect","ui/view_controller","sublime/image/image_view"],function(e,t,i,n,o,r){var s,a,l,u;return u=e._,l={},a={},s=function(e){function o(e){var t;o.__super__.constructor.apply(this,arguments),this._image_=null,this.metadataCallbacks_=[],e.src&&this.imageHasSize_(e)?this.setImage_(e):(t=e.src||e.src_,this.loadImage_(t))}return __extends(o,e),o.className="ImageController",o.prototype.API=function(){},o.prototype._element=function(){return this._image_},o.prototype._image=function(){return this._image_},o.prototype.setImage_=function(e){return this._image_=e,this._image_.width=this._image_.width,this._image_.height=this._image_.height,this.view().setImage(this._image_)},o.prototype.imageHasSize_=function(e){return e.width>0&&e.height>0},o.prototype.canPlayWithoutUserInteration=function(){return!1},o.prototype.onImageMetadata=function(e){return e?this._image()?e():this.metadataCallbacks_.push(e):void 0},o.prototype.sendImageMetadataNotif_=function(){var e,t,i,n;for(n=this.metadataCallbacks_,t=0,i=n.length;i>t;t++)e=n[t],e();return this.metadataCallbacks_=[]},o.prototype.loadImage_=function(e){var i;return e?(i=new t(e,!0),i.on({size:u.bind(this,function(e,t){return this.setImage_(i._image()),this.sendImageMetadataNotif_(e,t)})}),i.start()):void 0},o.prototype.loadView=function(){var e;return this.view_=new r,e=i.defaultSize(),this.view_.setFrame(new n(0,0,e.width,e.height))},o}(o),l.exports=s,l.exports||a});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("sublime/image/image_view",["ui/image_view"],function(e){var t,i;return i={},t={},e=function(e){function t(){t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.className="ImageView",t}(e),i.exports=e,i.exports||t}),sublime_.define("sublime/license_validator",["core/util","core/url"],function(e,t){var i,n,o,r;return r=e._,o={},n={},i=function(){function e(e,i,n){this.url_=t.parse(e),this.token_=n,this.version_=i,this.errorDescription=null}return e.className="LicenseValidator",e.LicenseType={Invalid:"i",Main:"m",Extra:"e",Staging:"s",Dev:"d"},e.LicenseStatsType={Normal:0,Realtime:1,None:2},e.prototype.validate=function(e){return this.validateLicense_(t.parse(location.href),e)},e.prototype.validateLicense_=function(t,i){var n,o;return(n=this.version_.match(/(alpha|beta)/))&&(o=n[1],"beta"===o&&"stable"===i.stage||"alpha"===o&&"alpha"!==i.stage)?(this.errorDescription="SublimeVideo permission denied for stage '"+o+"'.",e.LicenseType.Invalid):i=this.validateURL_(t,i)},e.prototype.envForLicenseType=function(t){switch(t){case e.LicenseType.Main:case e.LicenseType.Extra:return"production";case e.LicenseType.Staging:return"staging";case e.LicenseType.Dev:return"development"}},e.prototype.validateURL_=function(t,i){return this.isMainHost_(t,i)?e.LicenseType.Main:this.isExtraHost_(t,i)?e.LicenseType.Extra:this.isStagingHost_(t,i)?e.LicenseType.Staging:this.isDevHost_(t,i)?e.LicenseType.Dev:(this.errorDescription="SublimeVideo Player is not properly registered for this site.",e.LicenseType.Invalid)},e.prototype.isDevHost_=function(e,t){return this.matchHosts_(e,t.devHosts,t.wildcard,t.path)},e.prototype.isStagingHost_=function(e,t){return this.matchHosts_(e,t.stagingHosts,t.wildcard,t.path)},e.prototype.isExtraHost_=function(e,t){var i;return i=r.clone(t.hosts),i.shift(),i.push("www.npr.org/news/graphics/2012/10/popup-pres"),this.matchHosts_(e,i,t.wildcard,t.path)},e.prototype.isMainHost_=function(e,t){return this.matchHost_(e,t.hosts[0],t.wildcard,t.path)},e.prototype.matchHosts_=function(e,t,i,n){var o,r,s;for(null==t&&(t=[]),null==i&&(i=!1),null==n&&(n=null),r=0,s=t.length;s>r;r++)if(o=t[r],this.matchHost_(e,o,i,n))return!0},e.prototype.matchHost_=function(e,t,i,n){return null==i&&(i=!1),null==n&&(n=null),this.hostRegex_(i,t).test(e.host())&&this.pathRegex_(n).test(e.path())},e.prototype.hostRegex_=function(e,t){var i,n;return n=e?"[^/]*\\.":"www\\.",i=t.replace(/\./,"\\."),RegExp("^("+n+")?"+i+"$","i")},e.prototype.pathRegex_=function(e){return e?RegExp("^/"+e.replace(/\./,"\\.")+"($|/.*$)","i"):/.*/},e}(),o.exports=i,o.exports||n});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("sublime/lightbox/lightbox_app_plugin",["core/util","core/dom","core/url","core/options","sublime/api","sublime/app_plugin","sublime/lightbox/lightbox_controller","sublime/lightbox/lightbox_view"],function(e,t,i,n,o,r,s,a){var l,u,h,p,c,d;return d=e._,l=o.Api,u=r.AppPlugin,c={},p={},h=function(e){function o(){o.__super__.constructor.apply(this,arguments)}return __extends(o,e),o.className="LightboxAppPlugin",o.prototype.defaultOptions=function(){return{onOpen:s.OnOpenAction.Play,overlayColor:"black",overlayOpacity:.7,closeButtonVisibility:a.CloseButtonVisibility.Autohide,closeButtonPosition:a.CloseButtonPosition.Left,enableCloseButton:!0}},o.prototype.compoundDataSettings=function(){var e;return e=this.defaultAllowedOptions(),{overlay:[e.overlayColor,e.overlayOpacity],closeButton:[e.closeButtonVisibility,e.closeButtonPosition]}},o.prototype.defaultAllowedOptions=function(){return{onOpen:{name:"onOpen",type:n.OptionType.String,values:[s.OnOpenAction.Nothing,s.OnOpenAction.Play]},overlayColor:{name:"overlayColor",type:n.OptionType.Color},overlayOpacity:{name:"overlayOpacity",type:n.OptionType.Float,range:[.1,1]},enableCloseButton:{name:"closeButtonEnable",type:n.OptionType.Boolean},closeButtonVisibility:{name:"closeButtonVisibility",type:n.OptionType.String,values:[a.CloseButtonVisibility.Autohide,a.CloseButtonVisibility.Visible]},closeButtonPosition:{name:"closeButtonPosition",type:n.OptionType.String,values:[a.CloseButtonPosition.Left,a.CloseButtonPosition.Right]}}},o.prototype._validElement=function(e){return"A"===t.nodeName(e)?e:void 0},o.prototype.prepareControllerForElement=function(e,t,i){var n,o;if(null==t&&(t={}),o=this.contentElementForLinkElement_(e)){if(n=new s(e),n.setDelegate(this),n.setContentElement(o),i)return i(n)}else if(i)return i(null)},o.prototype.unprepareController=function(e){return o.__super__.unprepareController.apply(this,arguments),e?e.closeLightbox(null,function(){return e.release()}):void 0},o.prototype.isImageExtension_=function(e){return/^(png|jpg|jpeg|gif|tif(f)?)$/.test(e)},o.prototype.contentElementForLinkElement_=function(e){var n,o,r;return o=this.idFromHref(e),r=t.elementById(o),r?r:(n=i.parse(e.href),n&&this.isImageExtension_(n.fileExtension())?(r=new Image,r.src_=e.href,r):(r=t.nextElementSibling(e),r&&"VIDEO"===t.nodeName(r)&&(t.hasClass(r,"lightbox")||t.hasClass(r,"zoom"))?r:null))},o.prototype.idFromHref=function(e){var t;return null==e.href?null:(t=e.href.match(/#([^#]+)$/))?t[1]:null},o.prototype.main=function(e){var i,n,o,r,s,a;if(this.exportAPI_(),n=t.elementsByTagNameAndClass("a","sublime"),i=n.length,!(1>n.length)){for(a=[],o=0,r=n.length;r>o;o++)s=n[o],a.push(this.prepareControllerForElement(s,{},d.bind(this,function(t){return i--,t&&this.controllers_.push(t),0===i&&e?e():void 0})));return a}return e?e():void 0},o.prototype.exportAPI_=function(){return l("lightbox",this,this.APIObjectForElement)},o.prototype.canOpenLightbox=function(){return!0},o.prototype.willOpenLightbox=function(e){var t,i,n,o,r,s;for(r=this.controllers_,s=[],n=0,o=r.length;o>n;n++)t=r[n],t.isOpened()?(i=e._contentElement()===t._contentElement(),s.push(t.closeLightbox({unprepareContent:!i}))):s.push(void 0);return s},o.prototype.didOpenLightbox=function(){},o}(u),c.exports=h,c.exports||p});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("sublime/lightbox/lightbox_controller",["core/util","core/dom","core/events","core/event_emitter","graphics/size","graphics/color","ui/event","ui/view","ui/button","ui/plugin_view_controller","sublime/lightbox/lightbox_view","sublime/video_manager"],function(e,t,i,n,o,r,s,a,l,u,h,p){var c,d,_,y,g,f;return f=e._,d=n.EventEmitter,c=s.Event,g={},y={},_=function(e){function n(e){n.__super__.constructor.apply(this,arguments),this.APIEventEmitter_=new d,this._triggerLink=e,this._linkSettings_=t.data(e),this._contentElement_=null,this.opened_=!1,this.isOverlayShown_=!1,this.defaultOpeningTransitionDuration_=.4,this.defaultClosingTransitionDuration_=.4,this.bindedClick_=f.bind(this,this.didClick_),i.listen(this._triggerLink,i.EventTypes.Click,this.bindedClick_)}return __extends(n,e),n.className="LightboxController",n.OnOpenAction={Nothing:"nothing",Play:"play"},n.prototype.release=function(){return n.__super__.release.apply(this,arguments),i.unlisten(this._triggerLink,i.EventTypes.Click,this.bindedClick_)},n.prototype.didClick_=function(e){var t;return e||(e=window.event),t=new c(null,e),t.preventDefault(),this.openLightbox()},n.prototype._element=function(){return this._triggerLink},n.prototype.isOpened=function(){return this.opened_},n.prototype.setContentElement=function(e){return this._contentElement_=e},n.prototype._contentElement=function(){return this._contentElement_},n.prototype.viewCanExitFullWindow=function(){var e;return e=this.contentController_&&(this.contentController_.view().isFullWindow()||this.contentController_.view().isFullscreen()),this.opened_&&!e&&this.closeLightbox(),!1},n.prototype.loadView=function(){return this.view_||(this.view_=new a,this.view_.setHidden(!0),this.view_.css({background:"transparent"})),this.view_},n.prototype.lightboxView=function(){return this.lightboxView_||(this.lightboxView_=new h,this.lightboxView_.closeButton().onMouseUpInside(f.bind(this,this.closeLightbox))),this.lightboxView_},n.prototype.overlay=function(){return this.overlay_||(this.overlay_=new l,this.overlay_.setAutoresizingMask(a.AutoresizingMask.FlexibleHeight|a.AutoresizingMask.FlexibleWidth),this.overlay_.onMouseUpInside(f.bind(this,function(){return this.closeLightbox()}))),this.overlay_},n.prototype.uninstallCurrentKit_=function(){},n.prototype.kit=function(){return this.kit_},n.prototype.setKit=function(e,t){var i;return e?(this.uninstallCurrentKit_(),this.kit_=e,i=e.plugins.lightbox,this.options_=this.delegate_.options(i.allowedSettings,i.settings,this._linkSettings_),this.applyOptions_(this.options_),this.installKit_(e,t)):t?t():void 0},n.prototype.installKit_=function(e,t){return this.delegate_.requireSkin(e.skin,f.bind(this,function(e){return this.setSkin(e),t?t():void 0}))},n.prototype.applyOptions_=function(e){var t,i,n;return n=this.lightboxView(),n.enableCloseButton(e.enableCloseButton),n.setCloseButtonPosition(e.closeButtonPosition),n.setCloseButtonVisibility(e.closeButtonVisibility),t=new r(e.overlayColor),i=Math.max(.1,e.overlayOpacity),this.overlay().css({background:t.rgb()}),this.overlay().setAlpha(i)},n.prototype.setLightboxMaxSize_=function(e){var t,i,n;return i=o.defaultSize(),n=e.getAttribute("width"),/^\d+(px)?$/.test(n)&&n>0&&(i.width=parseFloat(n)),t=e.getAttribute("height"),/^\d+(px)?$/.test(t)&&t>0&&(i.height=parseFloat(t)),this.lightboxView().setMaxSize(i)},n.prototype.openLightbox=function(e){var i,n;return!this.opened_&&this.delegate_.canOpenLightbox(this)?(this.delegate_.willOpenLightbox(this),this.opened_=!0,n=t.data(this._contentElement()),i=this.delegate_.kitForName(n.playerKit)||this.delegate_.defaultKit(),i!==this.kit_?this.setKit(i,f.bind(this,function(t){return t?void 0:this.finishOpening_(e)})):this.finishOpening_(e)):void 0},n.prototype.finishOpening_=function(e){var t,i;return i=this._contentElement(),t=this.options_,this.delegate_.requirePluginForElement(i,f.bind(this,function(o,r){return!o&&r?r.controller(i,{createIfNeeded:!0},f.bind(this,function(o,r,s){var l,u;return s&&this.emitAPIEvent("contentready",this.API(),r.API()),u=this.lightboxView(),this.contentController_=r,"ImageController"===r.constructor.className?r.onImageMetadata(f.bind(this,function(){return this.setLightboxMaxSize_(r._image()),r.view().setHidden(!1),u.setContentView(r.view()),r.view().setFrame(u.bounds()),r.view().setAutoresizingMask(a.AutoresizingMask.FlexibleHeight|a.AutoresizingMask.FlexibleWidth),this.isOverlayOpeningTransitionFinished_()?u.setHidden(!1):u.setHidden(!1,!0,null,this.defaultClosingTransitionDuration_)})):(this.setLightboxMaxSize_(i),u.setHidden(!1),l=this.contentController_.canPlayWithoutUserInteration()&&t.onOpen===n.OnOpenAction.Play,l&&!f.IE8&&r.contentView().setHidden(!0),r.view().setHidden(!1),u.setContentView(r.view()),r.view().setFrame(u.bounds()),r.view().setAutoresizingMask(a.AutoresizingMask.FlexibleHeight|a.AutoresizingMask.FlexibleWidth)),this.contentController_.start&&l&&1===this.view().alpha()&&this.contentController_.start(),this.presentView(t,e)})):void 0}))},n.prototype.presentView=function(e,t){return this.view().hasParent()||(this.view_.appendTo(document.body),this.overlay().setFrame(this.view_.bounds()),this.view_.append(this.overlay()),this.view_.append(this.lightboxView())),this.view_.enterFullWindow({disableScroll:!1}),this.view().setHidden(!1,!0,f.bind(this,function(e){return e&&(this.isOverlayShown_=!0,this.didOpen(),t)?t():void 0}),this.defaultOpeningTransitionDuration_)},n.prototype.didOpen=function(){var e;return this.emitAPIEvent("didopen",this.API()),this.contentController_&&(e=this.contentController_.canPlayWithoutUserInteration()&&this.options_.onOpen===n.OnOpenAction.Play,this.contentController_.start&&e&&(this.contentController_.start(),!f.IE8))?this.contentController_.contentView().setHidden(!1):void 0},n.prototype.closeLightbox=function(e,t){return null==e&&(e={}),this.opened_?this.contentController_.canReduceView&&this.contentController_.canReduceView()?this.contentController_.reduceView(f.bind(this,function(){return this.internalClose_(e,t)})):this.internalClose_(e,t):(t&&t(),void 0)},n.prototype.internalClose_=function(e,t){var i,n;return null==e&&(e={}),i=this.opened_,this.opened_=null,n=f.isDef(e.unprepareContent)?e.unprepareContent:!0,this.contentController_.pause&&this.contentController_.pause(),this.view().setHidden(!0,!0,f.bind(this,function(e){var i;return e?(n&&(i=p.sharedInstance().updatedElement(this.contentController_._element()),this.delegate_.requirePluginForElement(i,f.bind(this,function(e,t){return t.unprepareController(this.contentController_)}))),this.contentController_=null,this.lightboxView().setContentView(null),this.isOverlayShown_=!1,this.lightboxView().setHidden(!0),this.view_.exitFullWindow(),t&&t(),this.emitAPIEvent("didclose",this.API())):void 0}),this.defaultClosingTransitionDuration_)},n.prototype.isOverlayOpeningTransitionFinished_=function(){return!this.isOverlayShown_},n.prototype.API=function(){return this.API_||(this.API_={on:f.bind(this,this.onAPIEvent_),close:f.bind(this,function(){return this.closeLightbox()}),open:f.bind(this,function(){return this.openLightbox()})}),this.API_},n.prototype.onAPIEvent_=function(){var e;return 1===arguments.length&&f.isObject(arguments[0])?e=arguments[0]:2===arguments.length&&f.isString(arguments[0])&&f.isFunction(arguments[1])&&(e={},e[arguments[0]]=arguments[1]),this.APIEventEmitter_.on(e),f.undef},n.prototype.emitAPIEvent=function(){var e,t,i;return i={},e=Array.prototype.slice.call(arguments),t=e.shift(),i[t]=e,this.APIEventEmitter_.emit(i)},n}(u),g.exports=_,g.exports||y}),sublime_.define("sublime/lightbox/lightbox_controller.sublime_skin",["sublime/sublime_skin","graphics/rect","graphics/path","graphics/layer"],function(e,t,i,n){var o,r;return r={},o={},e.extend({LightboxController:function(o){var r,s,a,l;return o=this.lightboxView(),r=o.closeButton(),r.setFrame(new t(0,0,45,45)),l=i.Circle(0,0,10.5),l.center(r.size()),a=n.layer(l),a.setGradient({colors:{1:e.palette().background1.color1.colorWithAlpha(.89),0:e.palette().background1.color2.colorWithAlpha(.89)}}),a.setDropShadow({distance:1,angle:90,size:8,color:e.palette().background1.color3}),a.setInnerShadow({angle:90,distance:1,color:e.palette().background1.contrastColor1.colorWithAlpha(.05)}),a.setStroke({width:1,color:e.palette().background1.color3}),l=new i,l.moveTo(11.002,9.041),l.lineTo(9.036,11.002),l.lineTo(5.501,7.475),l.lineTo(1.966,11.002),l.lineTo(0,9.041),l.lineTo(3.529,5.51),l.lineTo(0,1.991),l.lineTo(1.966,0),l.lineTo(5.501,3.538),l.lineTo(9.036,0),l.lineTo(11.002,1.991),l.lineTo(7.473,5.51),l.lineTo(11.002,9.041),l.center(r.size()),s=n.layer(l),s.setGradient({colors:{1:"#d5d5d5",0:"#939393"}}),s.setStroke({width:1,color:"rgba(0,0,0,0.75)"}),r.setLayers([a,s])}}),r.exports||o});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("sublime/lightbox/lightbox_view",["core/util","ui/tracking_area","ui/view","ui/button","graphics/rect","graphics/size"],function(e,t,i,n,o,r){var s,a,l,u;return u=e._,l={},a={},s=function(e){function s(){s.__super__.constructor.apply(this,arguments),this.closeButtonPosition_=s.CloseButtonPosition.Right,this.closeButtonVisibility_=s.CloseButtonVisibility.Autohide,this.closeButtonEnabled_=!0,this.css({background:"black"}),this.margin_=40}return __extends(s,e),s.className="LightboxView",s.CloseButtonVisibility={Autohide:"autohide",Visible:"visible"},s.CloseButtonPosition={Left:"left",Right:"right"},s.prototype.setCloseButtonOverContent=function(e){return this.closeButtonOverContent_=e,this.rootView()?this.layoutSubviews():void 0},s.prototype.closeButton=function(){return this.closeButton_||(this.closeButton_=new n,this.closeButton_.setFrame(new o(-20,-20,40,40)),this.closeButton_.css({"z-index":1}),this.closeButton().setHidden(!0,!1)),this.closeButton_},s.prototype.setCloseButtonPosition=function(e){return this.closeButtonPosition_=e,this.layoutSubviews()},s.prototype.enableCloseButton=function(e){return this.closeButtonEnabled_=e,e?void 0:this.closeButton().setHidden(!0,!1)},s.prototype.setCloseButtonVisibility=function(e){var t;return this.closeButtonVisibility_=e,t=this.closeButtonVisibility_!==s.CloseButtonVisibility.Visible,this.closeButton().setHidden(t,!1)},s.prototype.setMaxSize=function(e){return this.maxSize_=e,this.adjustFrame_()},s.prototype.maxSize=function(){return this.maxSize_?this.maxSize_.clone():void 0},s.prototype.contentView=function(){return this.contentView_},s.prototype.setContentView=function(e){return this.contentView_&&this.contentView_.removeFromParent(),this.contentView_=e,this.contentView_?(this.contentView_.css({"z-index":0}),this.contentView_.setAutoresizingMask(i.AutoresizingMask.FlexibleWidth|i.AutoresizingMask.FlexibleHeight),this.layoutSubviews()):void 0},s.prototype.layoutSubviews=function(){var e;return this.contentView()&&(this.contentView_.isFullscreen()||this.contentView_.isFullWindow()||(this.contentView().setFrame(this.bounds()),this.contentView().hasParent()&&this.contentView().parent()===this||this.append(this.contentView()))),this.closeButtonEnabled_?(e=this.closeButton().bounds().size,this.closeButtonPosition_===s.CloseButtonPosition.Left?(this.closeButton().setAutoresizingMask(i.AutoresizingMask.FlexibleRightMargin),this.closeButtonOverContent_?this.closeButton_.setFrame(new o(0,0,e.width,e.height)):this.closeButton_.setFrame(new o(-e.width/2,-e.height/2,e.width,e.height))):(this.closeButton().setAutoresizingMask(i.AutoresizingMask.FlexibleLeftMargin),this.closeButtonOverContent_?this.closeButton_.setFrame(new o(this.bounds().size.width-e.width,0,e.width,e.height)):this.closeButton_.setFrame(new o(this.bounds().size.width-e.width/2,-e.height/2,e.width,e.height))),this.append(this.closeButton())):void 0},s.prototype.willRemoveFromRootView=function(){return this.removeAllTrackingAreas()},s.prototype.didMoveToRootView=function(){var e;return s.__super__.didMoveToRootView.apply(this,arguments),e=new t(this.bounds(),{trackingInVisibleRect:!0}),e.hitTest=u.bind(this,function(e){return this.bounds().containsPoint(e)||this.closeButton().frame().containsPoint(e)}),this.addTrackingArea(e),this.adjustFrame_()},s.prototype.parentDidResize=function(){return this.adjustFrame_()},s.prototype.adjustFrame_=function(){var e,t,i,n,s,a,l,u;return this.hasParent()&&this.maxSize()?(u=this.maxSize(),l=this.parentSize(),i=new r(l.width-2*this.margin_,l.height-2*this.margin_),a=192,s=108,a>i.width&&(i.width=a),s>i.height&&(i.height=s),n=i.width/i.height,e=u.width/u.height,e>n?u.width>i.width&&(u.height=i.width/e,u.width=i.width):n>=e&&u.height>i.height&&(u.width=i.height*e,u.height=i.height),t=new o((l.width-u.width)/2,(l.height-u.height)/2,u.width,u.height),this.setFrame(t)):void 0},s.prototype.mouseEntered=function(){return this.closeButtonEnabled_&&this.closeButtonVisibility_===s.CloseButtonVisibility.Autohide?this.closeButton().setHidden(!1,!0):void 0},s.prototype.mouseExited=function(){return this.closeButtonEnabled_&&this.closeButtonVisibility_===s.CloseButtonVisibility.Autohide?this.closeButton().setHidden(!0,!0):void 0},s.prototype.baseCss=function(){var e;return e=s.__super__.baseCss.apply(this,arguments),u.extend(e,{"-webkit-box-shadow":"rgba(0,0,0,0.8) 0 2px 20px","-moz-box-shadow":"rgba(0,0,0,0.8) 0 2px 20px","box-shadow":"rgba(0,0,0,0.8) 0 2px 20px"}),e},s}(i),l.exports=s,l.exports||a});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("sublime/stats/app_load_request",["ui/screen","core/util","core/browser","core/page","sublime/stats/stats_request"],function(e,t,i,n,o){var r,s,a,l,u,h;return s=e.Screen,h=t._,u={},a={},l=s.mainScreen(),r=function(e){function t(e){t.__super__.constructor.apply(this,arguments),this._extend({e:"al",ho:e.hostType,st:this.firstLowercaseLetter(e.stage),sa:e.realtimeStats(),ss:n.ssl,sr:l.resolution,sd:l.dpr,bl:i.lang,fv:i.flashVersion,jq:window.jQuery&&null!=window.jQuery().jquery?window.jQuery().jquery:void 0})}return __extends(t,e),t.className="AppLoadRequest",t.prototype._playloadParams=function(){return["e","ho","st","sa","ss","sr","sd","bl","fv","jq"]},t}(o),u.exports=r,u.exports||a}),sublime_.define("sublime/stats/stats_request",["core/util"],function(e){var t,i,n,o;return o=e._,n={},i={},t=function(){function e(){this._payload={}}return e.className="StatsRequest",e.prototype._extend=function(e){return o.extend(this._payload,e)},e.prototype.firstLowercaseLetter=function(e){return e&&e.length>0?e.charAt(0).toLowerCase():null},e.prototype.value=function(e){return this._payload[e]},e.prototype.meaninglessValue=function(e){return 0===e||e===!1||null===e||void 0===e||"number"==typeof e&&isNaN(e)},e.prototype._playloadParams=function(){return[]},e.prototype.playload=function(){var e,t,i,n,r,s,a,l;for(i=this._playloadParams(),n=[],a=0,l=i.length;l>a;a++)e=i[a],s=this._payload[e],this.meaninglessValue(s)||(t='"'+e+'":',"number"==typeof s||"boolean"==typeof s?t+=s:o.isString(s)?(r=s.replace(/"/g,'\\"'),r=r.replace(/\\$/g,""),t+='"'+r+'"'):t+=o.JSON.stringify(s),n.push(t));return"{"+n.join(",")+"}"},e}(),n.exports=t,n.exports||i}),sublime_.define("sublime/stats/stats_responder",["sublime/stats/video_tag_request","sublime/stats/stats_sender","core/url","core/util"],function(e,t,i,n){var o,r,s,a;return a=n._,s={},r={},o=function(){function n(){}return n.className="StatsResponder",n.sharedInstance=function(){return this.sharedInstance_||(this.sharedInstance_=new n),this.sharedInstance_},n.prototype.setDelegate=function(e){return this.delegate=e},n.prototype.shouldSendVideoTagInfo_=function(){var e;return this.delegate.isMainOrExtraLicense()?(e=i.parse(location.href),!("apps.npr.org/dailygraphics/graphics/popup-politics-20120118"===e.host()&&/^\/e\//.test(e.path()))):!1},n.prototype.handleResponse=function(i){var n,o;return"l"===i.e&&this.shouldSendVideoTagInfo_()&&(n=this.delegate.playerForUID(i.u),n&&(o=new e(n),o.value("h")!==i.h))?t.sharedInstance().send(o,{endpointType:t.EndpointType.AJAX}):void 0},n}(),s.exports=o,s.exports||r});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("sublime/stats/stats_sender",["core/util","core/ajax","core/image_importer","core/event_emitter"],function(e,t,i,n){var o,r,s,a,l,u;return u=e._,o=t.Ajax,r=n.EventEmitter,l={},a={},s=function(e){function t(){t.__super__.constructor.apply(this,arguments),this._enabled=!0,this._queue=[],this._endpoints={}}return __extends(t,e),t.className="StatsSender",t.EndpointType={AJAX:"a",GIF:"g"},t.sharedInstance=function(){return this.sharedInstance_||(this.sharedInstance_=new t),this.sharedInstance_},t.prototype.addEndpoint=function(e,t){var i;return(i=this._endpoints)[e]||(i[e]=[]),this._endpoints[e].push(t)},t.prototype.disable=function(){return this._enabled=!1},t.prototype.send=function(e,t){return null==t&&(t={}),this._enabled?this._enqueue({request:e,options:t}):void 0},t.prototype._enqueue=function(e){var t=this;return this._queue.push(e),setTimeout(function(){return t._flushQueue()},100)},t.prototype._flushQueue=function(){var e;return e=u.clone(this._queue),this._queue=[],e.length>0?this._handleTasks(e):void 0},t.prototype._handleTasks=function(e){var i,n=this;return i=u.map(e,function(e){return e.request}),i.length>0?this._sendRequestsViaAJAX(i,function(o){var r,s,a;if(o){for(i=[],s=0,a=e.length;a>s;s++)r=e[s],r.options.endpointType!==t.EndpointType.AJAX&&i.push(r.request);return n._sendRequestViaGIF(i)}}):void 0},t.prototype._handleResponse=function(e){var t,i,n,o,r;try{for(i=u.JSON.parse(e),r=[],n=0,o=i.length;o>n;n++)t=i[n],r.push(this.emit({response:[t]}));return r}catch(s){}},t.prototype._ajaxEndpoints=function(){return this._endpoints[t.EndpointType.AJAX]||[]},t.prototype._sendRequestsViaAJAX=function(e,t){var i;return i=this._ajaxEndpoints(),this._recursivelySendRequestsViaAJAX(i,e,t)},t.prototype._recursivelySendRequestsViaAJAX=function(e,t,i){var n,r;return 1>e.length?i(Error()):(n=Math.random(),r=this._payloadForRequests(t),o.post(e[0],r,u.bind(this,function(n,o){return n?(e.shift(),this._recursivelySendRequestsViaAJAX(e,t,i)):(this._handleResponse(o),i())})))},t.prototype._gifEndpoints=function(){return this._endpoints[t.EndpointType.GIF]||[]},t.prototype._sendRequestViaGIF=function(e){var t;return t=this._gifEndpoints(),this._recursivelySendRequestsViaGIF(t,e)},t.prototype._payloadForRequests=function(e){var t,i,n;return t=[],t.push("["),i=u.map(e,function(e){return e.playload()}),t=t.concat(i.join(",")),t.push("]"),n=t.join("")},t.prototype._recursivelySendRequestsViaGIF=function(e,t){var n,o,r,s;return t.length>0?1>e.length?void 0:(s=(new Date).getTime(),r=this._payloadForRequests(t),n=e[0]+("&i="+s+"&d=")+encodeURIComponent(r),o=new i(n),o.on({end:u.bind(this,function(i){return i?(e.shift(),this._recursivelySendRequestsViaGIF(e,t)):void 0})}),o.start()):void 0},t}(r),l.exports=s,l.exports||a});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("sublime/stats/video_load_request",["sublime/stats/stats_request","core/page","core/util"],function(e,t,i){var n,o,r,s;return s=i._,r={},o={},n=function(e){function i(e,n){i.__super__.constructor.apply(this,arguments),this._extend({e:"l",ho:e.hostType,sa:e.realtimeStats(),u:n.video().validUID(),de:s.mobile?"m":"d",te:this.firstLowercaseLetter(n.video().technology()),ex:e.isEmbeddedOnExternalPage(),em:t.embedded})}return __extends(i,e),i.className="VideoLoadRequest",i.prototype._playloadParams=function(){return["e","ho","sa","u","de","te","ex","em"]},i}(e),r.exports=n,r.exports||o});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("sublime/stats/video_start_request",["sublime/stats/video_load_request","core/page","core/util"],function(e,t,i){var n,o,r,s;return s=i._,r={},o={},n=function(e){function i(e,n){var o,r;i.__super__.constructor.apply(this,arguments),o=n.video().metadata(),null!=o&&(r=""+o.size.width+"x"+o.size.height),this._extend({e:"s",du:t.embedded?t.referrerUrl:t.url,ru:t.embedded?null:t.referrerUrl,vsr:r,vd:parseInt(1e3*o.duration)})}return __extends(i,e),i.className="VideoStartRequest",i.prototype._playloadParams=function(){var e;return e=i.__super__._playloadParams.apply(this,arguments),e.concat(["du","ru","vsr","vd"])},i}(e),r.exports=n,r.exports||o});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e
}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("sublime/stats/video_tag_request",["sublime/stats/stats_request","core/util"],function(e,t){var i,n,o,r;return r=t._,o={},n={},i=function(e){function t(e){var i,n,o,s,a,l,u,h,p,c,d,_,y,g,f,m;t.__super__.constructor.apply(this,arguments),p=e.videoOptions(),f=e.video(),c=null;try{c=r.makeAbsolutePath(f.imageUrls()[0])}catch(v){}d=e.size(),delete p.embedUrl,n=e.pluginForKind("embed"),u=n&&"auto"===n.options().type,i={e:"v",a:p,u:f.uid(),z:""+d.width+"x"+d.height},g=e.video().name(),g&&(i.t=g),c&&(i.p=c),h={},u&&(h.autoembed=!0),s=e.pluginManager().pluginForKind("googleAnalytics"),s&&(o=s.options().account),null!=o&&(h.gaAccount=o),_=this.sourceHashes_(e),_.length>0&&(i.s=_),r.keys(h).length>0&&(i.o=h),(m=p.youtubeId)&&(i.i=m,i.io="y"),l=r.clone(i),delete l.z,u||delete l.s,y=this.recursiveStringFromDict_(l),a=r.crc32(y),i.h=a,this._extend(i)}return __extends(t,e),t.className="VideoTagRequest",t.prototype._playloadParams=function(){return["e","a","u","z","t","p","s","o","i","io","h"]},t.prototype.recursiveStringFromDict_=function(e){var t,i,n,o,s;if(r.isObject(e)){for(i=r.keys(e),i.sort(),n=[],o=0,s=i.length;s>o;o++)t=i[o],n.push([t,this.recursiveStringFromDict_(e[t])].join(":"));return n.join("|")}return r.isString(e)?e:""+e},t.prototype.sourceHashes_=function(e){var t,i,n,o,r;for(t=[],r=e.video().sources(),n=0,o=r.length;o>n;n++)i=r[n],t.push({u:i.path(),q:i.quality(),f:i.family().toLowerCase()});return t},t}(e),o.exports=i,o.exports||n}),sublime_.define("sublime/stats_util",["sublime/license_validator","media/video/video","media/media_source"],function(e,t,i){var n,o,r;return r={},o={},n=function(){function n(){}return n.className="StatsUtil",n.licenseTypeToParam=function(t){var i;switch(t){case e.LicenseType.Main:i="m";break;case e.LicenseType.Extra:i="e";break;case e.LicenseType.Staging:i="s";break;case e.LicenseType.Dev:i="d";break;case e.LicenseType.Invalid:i="i";break;default:i=""}return i},n.technologyToParam=function(e){var i;switch(e){case t.Technology.Flash:i="f";break;case t.Technology.HTML5:i="h";break;case t.Technology.YouTube:i="y";break;default:i=""}return i},n.originToParam=function(e){var i;switch(e){case t.ParamOrigin.Attribute:i="a";break;case t.ParamOrigin.Source:i="s";break;case t.ParamOrigin.Youtube:i="y";break;default:i=""}return i},n.familyToParam=function(e){var t;switch(e){case i.Family.Mp4:t="mp4";break;case i.Family.Ogg:t="ogg";break;case i.Family.Webm:t="webm";break;case i.Family.Hls:t="hls";break;default:t=""}return t},n.stageToParam=function(e){var t;switch(e){case"stable":t="s";break;case"beta":t="b";break;case"alpha":t="a";break;default:t=""}return t},n}(),r.exports=n,r.exports||o}),sublime_.define("sublime/sublime_scripts",["core/util"],function(e){var t,i,n,o;return o=e._,n={},i={},t=function(){function e(e){var t;this.scriptFormats_=[RegExp("^"+e+"/p(/([^/]+))?/sublime.js\\?t=([a-z0-9]{8})","i"),RegExp("^"+e+"/js/([a-z0-9]{8}).js","i")],t=document.getElementsByTagName("script"),this.tokens_=this.parseScripts_(t)}return e.className="SublimeScripts",e.prototype.count=function(){return this.tokens_.length},e.prototype.anyToken=function(){return this.tokens_.length>0?this.tokens_[0]:null},e.prototype.uniqueTokens=function(){var e,t,i,n,r,s;for(i={},e=this.tokens_.length,s=this.tokens_,n=0,r=s.length;r>n;n++)t=s[n],i[t]=1;return o.keys(i)},e.prototype.parseScripts_=function(e){var t,i,n,r,s,a,l,u,h;if(r=[],!o.isArrayLike(e))return r;for(n=o.clone(this.scriptFormats_),s=0,l=e.length;l>s;s++)for(h=e[s],a=0,u=n.length;u>a;a++)t=n[a],(i=h.src.match(t))&&(r.push(i[i.length-1]),n.splice(o.indexOf(n,t),1));return r},e}(),n.exports=t,n.exports||i}),sublime_.define("sublime/sublime_skin",["ui/skin","graphics/color","graphics/layer"],function(e,t,i){var n,o,r;return o={},n={},r=new e("sublime"),r.setPalette({background1:{color1:new t("rgb(40,40,40)"),color2:new t("rgb(15,15,15)"),color3:new t("rgb(0, 0, 0)"),contrastColor1:new t("rgb(255,255,255)")},component1:{color1:new t("#fff"),color2:new t("#a9a9a9"),contrastColor1:new t("rgb(0,0,0)")},field:{color1:new t("rgb(61,61,61)"),color2:new t("#fff")}}),r.createStyle({floatingBackground:{gradient:{colors:{0:r.palette().background1.color2.colorWithAlpha(.89),1:r.palette().background1.color1.colorWithAlpha(.89)}},dropShadow:{distance:1,angle:90,size:8,color:r.palette().background1.color3},innerShadow:{angle:90,distance:1,color:r.palette().background1.contrastColor1.colorWithAlpha(.1)},innerGlow:{size:1,color:r.palette().background1.contrastColor1.colorWithAlpha(.2),spread:0},stroke:{width:1,color:r.palette().background1.color3}}}),r.floatingBackgroundLayer=function(e){var t;return t=i.layer(e,r.styles().floatingBackground)},r.createStyle({component:{gradient:{colors:{0:r.palette().component1.color2,1:r.palette().component1.color1}},dropShadow:{size:1,color:r.palette().component1.contrastColor1,distance:1,angle:90}}}),r.componentLayer=function(e){var t;return t=i.layer(e,r.styles().component)},r.createStyle({contextualLogo:{gradient:{colors:{0:r.palette().component1.color2,1:r.palette().component1.color1}},dropShadow:{size:0,color:r.palette().component1.contrastColor1,distance:1,angle:-90}}}),r.contextualLogoLayer=function(e){var t;return t=i.layer(e,r.styles().contextualLogo)},r.createStyle({input:{color:r.palette().field.color1,stroke:{width:1,color:r.palette().background1.color3},dropShadow:{size:0,color:r.palette().field.color2.colorWithAlpha(.13),distance:2,angle:90},innerShadow:{size:8,distance:2,color:r.palette().background1.color3.colorWithAlpha(.75)}}}),r.inputLayer=function(e){var t;return t=i.layer(e,r.styles().input)},o.exports=r,o.exports||n});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("sublime/video/plugins/api/video_controller_api",["core/util","graphics/size","sublime/video/video_controller_plugin","sublime/video/video_controller","sublime/api"],function(e,t,i,n,o){var r,s,a,l,u,h;return h=e._,s=n.VideoController,r=o.Api,u={},l={},a=function(e){function i(){i.__super__.constructor.apply(this,arguments)}return __extends(i,e),i.className="VideoControllerApi",i.condition={UISupport:s.PluginUISupport.None},i.kind="api",i.prototype.load=function(e,t,n){return null==e&&(e={}),null==t&&(t={}),i.__super__.load.apply(this,arguments),this.api({play:h.bind(this,this.play_),pause:h.bind(this,this.pause_),stop:h.bind(this,this.stop_),videoId:h.bind(this,this.videoId_),videoElement:h.bind(this,this.videoElement_),setSize:h.bind(this,this.setSize_),isFullscreen:h.bind(this,this.isFullscreen_),exitFullscreen:h.bind(this,this.exitFullscreen_),videoWidth:h.bind(this,this.videoWidth_),videoHeight:h.bind(this,this.videoHeight_),duration:h.bind(this,this.duration_),seekTo:h.bind(this,this.seekTo_),playbackTime:h.bind(this,this.playbackTime_)}),r("PlaybackState",this,{Stopped:s.PLAYBACK_STATE.STOPPED,Waiting:s.PLAYBACK_STATE.INTERRUPTED,Playing:s.PLAYBACK_STATE.PLAYING,Paused:s.PLAYBACK_STATE.PAUSED,Ended:s.PLAYBACK_STATE.ENDED}),n?n():void 0},i.prototype.unload=function(){},i.prototype.playerWillStart=function(e){return this.emitAPIEvent("start",e.API())},i.prototype.playerWillPlay=function(e){return e.isStopped()||e.isPaused()||e.isEnded()?this.emitAPIEvent("play",e.API()):void 0},i.prototype.playerDidPause=function(e){return this.emitAPIEvent("pause",e.API())},i.prototype.playerDidEnd=function(e){return this.emitAPIEvent("end",e.API())},i.prototype.playerDidStop=function(e){return this.emitAPIEvent("stop",e.API())},i.prototype.playerDidLoadMetadata=function(e){return setTimeout(h.bind(this,function(){return this.emitAPIEvent("metadata",e.API())}),0)},i.prototype.videoElement_=function(){return this.player()._element()},i.prototype.videoId_=function(){var e;return e=this.player()._element().id,e.length>0?e:void 0},i.prototype.currentVideo=function(){var e;return e=this.player(),e&&e.video()?e.video():void 0},i.prototype.playerDidResizeView=function(){},i.prototype.playerDidSeek=function(e){return this.emitAPIEvent("seek",e.API())},i.prototype.playerDidUpdatePlaybackTime=function(e,t){return this.emitAPIEvent("timeUpdate",e.API(),t)},i.prototype.playerDidUpdateBuffer=function(){},i.prototype.playerDidChangeQuality=function(){},i.prototype.playerDidInterrupt=function(){},i.prototype.playerDidStartPlaying=function(){},i.prototype.play_=function(){var e;return e=this.player(),e.isStopped()&&e.canPlayViaAPI()?e.start():e.isPaused()&&e.play(),h.undef},i.prototype.pause_=function(){var e;return e=this.player(),(e.isPlaying()||e.isInterrupted())&&e.pause(),h.undef},i.prototype.stop_=function(){var e;return e=this.player(),e.isStopped()||e.stop(),h.undef},i.prototype.bufferPercent_=function(){var e;return e=this.player().duration(),null!=e&&e>0?this.player().bufferDuration()/e:0},i.prototype.videoWidth_=function(){var e;try{return e=this.currentVideo(),e.metadata().size.width||h.undef}catch(t){return h.undef}},i.prototype.videoHeight_=function(){var e;try{return e=this.currentVideo(),e.metadata().size.height||h.undef}catch(t){return h.undef}},i.prototype.width_=function(){return this.player().size().width},i.prototype.height_=function(){return this.player().size().height},i.prototype.setSize_=function(e,i){var n,o;return n=t.defaultSize(),o=this.player().size(),h.isNumber(e)&&(o.width=Math.max(n.width,e)),h.isNumber(i)&&(o.height=Math.max(n.height,i)),this.player().setSize(o),h.undef},i.prototype.duration_=function(){return this.player().duration()||h.undef},i.prototype.playbackTime_=function(){return this.player().playbackTime()},i.prototype.playbackState_=function(){return this.player().playbackState()},i.prototype.seekTo_=function(e){var t,i;return i=this.player(),i.isStopped()||(t=i.interrupt(this),i.seekTo(e),i.releaseInterruptLock(t)),h.undef},i.prototype.volume_=function(){return this.player().volume()},i.prototype.setVolume_=function(e){return this.player().setVolume(e),h.undef},i.prototype.mute_=function(){return this.player().mute(),h.undef},i.prototype.isMuted_=function(){return this.player().isMuted()},i.prototype.unmute_=function(){return this.player().unmute(),h.undef},i.prototype.quality_=function(){return this.player().playingQuality()},i.prototype.setQuality_=function(e){return this.player().setPlaybackQuality(e),h.undef},i.prototype.availableQualities_=function(){return this.player().availableQualities()},i.prototype.isFullmode_=function(){return this.player().canReduceView()},i.prototype.supportsFullmode_=function(){return this.player().canExpandView()},i.prototype.enterFullmode_=function(){return this.player().canExpandView()?this.player().expandView():void 0},i.prototype.isFullscreen_=function(){return this.player().isFullscreen()},i.prototype.exitFullscreen_=function(e){return this.player().isFullscreen()?this.player().reduceView(e):void 0},i}(i),u.exports=a,u.exports||l});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("sublime/video/plugins/contextual_menu/contextual_menu",["sublime/video/video_controller_plugin","core/util","core/dom","core/events","graphics/point","ui/event","ui/button","ui/view"],function(e,t,i,n,o,r,s,a){var l,u,h,p,c,d;return d=t._,u=r.Event,h=r.MouseButton,c={},p={},l=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.className="ContextualMenu",t.kind="contextMenu",t.prototype.load=function(e,i,n){var o;return null==e&&(e={}),null==i&&(i={}),t.__super__.load.apply(this,arguments),n&&n(),o=this.player().delegate().config().token,this.logo().onMouseUpInside(d.bind(this,function(){return this.dismissContextMenu_(),window.open("http://ref.sublimevideo.net/c/"+o)}))},t.prototype.unload=function(){return this.isViewLoaded()&&this.view().removeFromParent(),t.__super__.unload.apply(this,arguments)},t.prototype.frameForEvent_=function(e){var t,i,n,r,s,a,l;return n=this.view().frame(),d.embed||this.player().isFullscreen()||this.player().isFullWindow()?(t=this.player().contentView(),a=e.locationInView(t),a=a.sum(new o(1,1)),n.origin=a,i=t.bounds().size,s=5,n.maxX()>i.width&&(n.origin.x=Math.max(s,i.width-n.size.width-s)),n.maxY()>i.height&&(n.origin.y=Math.max(s,i.height-n.size.height-s))):(a=e.locationInBrowserWindow(),r=parseInt(d.computedStyle(document.body,"left")),d.isNumber(r)&&(a.x-=r),l=parseInt(d.computedStyle(document.body,"top")),d.isNumber(l)&&(a.y-=l),n.origin=a),n},t.prototype.mouseDownOnDocument_=function(e){var t,n,o,r,s;return n=new u(this.view(),e),r=n.locationInBrowserWindow(this.view()),this.view().frame().containsPoint(r)?n.preventDefault():(t=this.player().contentView(),n=new u(t.rootView(),e),o=i.nodeName(n._targetElement()),r=n.locationInView(t),s=n.pressedMouseButton()===h.Right||d.Mac&&e.ctrlKey,t.bounds().containsPoint(r)&&s&&"INPUT"!==o&&"TEXTAREA"!==o?void 0:this.dismissContextMenu_())},t.prototype.playerWillExitFullscreen=function(){return t.__super__.playerWillExitFullscreen.apply(this,arguments),this.dismissContextMenu_(!1)},t.prototype.playerWillExitFullWindow=function(){return t.__super__.playerWillExitFullWindow.apply(this,arguments),this.dismissContextMenu_(!1)},t.prototype.dismissContextMenu_=function(e){return null==e&&(e=!0),this.contextMenuPresented_?(this.contextMenuPresented_=!1,n.unlisten(document.body,n.EventTypes.MouseDown,this.bindedMouseDownCallback_),n.unlisten(window,n.EventTypes.Resize,this.bindedWindowResizeCallback_),n.unlisten(window,n.EventTypes.Scroll,this.bindedWindowScrollCallback_),this.view().setHidden(!0,e)):void 0},t.prototype.windowDidResize_=function(){return this.dismissContextMenu_()},t.prototype.windowDidScroll_=function(){return this.dismissContextMenu_()},t.prototype.playerDidResizeView=function(){return this.dismissContextMenu_()},t.prototype.contextMenuDidFire=function(e,t){var i,o,r;return i=this.player().contentView(),i.bounds().containsPoint(t.locationInView(i))&&(this.bindedMouseDownCallback_||(this.bindedMouseDownCallback_=d.bind(this,this.mouseDownOnDocument_),this.bindedWindowResizeCallback_=d.bind(this,this.windowDidResize_),this.bindedWindowScrollCallback_=d.bind(this,this.windowDidScroll_)),this.contextMenuPresented_||(n.listen(document.body,n.EventTypes.MouseDown,this.bindedMouseDownCallback_),n.listen(window,n.EventTypes.Resize,this.bindedWindowResizeCallback_),n.listen(window,n.EventTypes.Scroll,this.bindedWindowScrollCallback_)),this.contextMenuPresented_=!0,d.embed||this.player().isFullscreen()||this.player().isFullWindow()?e.addPluginView(this.view()):this.view().appendTo(document.body),o=this.frameForEvent_(t),this.view().setFrame(o),r=this.logo(),this.view().append(r),this.view().isHidden())?this.view().setHidden(!1):void 0},t.prototype.logo=function(){return this.logo_||(this.logo_=new s),this.logo_},t.prototype.browserWindowOptions=function(){var e,t,i,n;return n=477,e=460,i=Math.round(.5*(screen.height-e)),t=Math.round(.5*(screen.width-n)),"scrollbars=no,resizable=yes,toolbar=no,location=yes,width="+n+",height="+e+",left="+t+",top="+i+";"},t.prototype.paneButton=function(){return this.paneButton_||(this.paneButton_=new s,this.paneButton_.label().setText("Keyboard shortcuts"),this.paneButton_.setDisableLabelAutoLayout(!0),this.paneButton_.onMouseUpInside(d.bind(this,function(){return this.dismissContextMenu_(),window.open("https://www.npr.org/news/graphics/2012/10/popup-pres/player/keyboard-shortcuts.html","",this.browserWindowOptions())}))),this.paneButton_},t.prototype.loadView=function(){return this.view_||(this.view_=new a,this.view_.css({"z-index":999999}),this.view_.append(this.paneButton())),this.view_},t.prototype.playerDidFocusOnVideo=function(){},t.prototype.playerDidUnfocusFromVideo=function(){},t}(e),c.exports=l,c.exports||p}),sublime_.define("sublime/video/plugins/contextual_menu/contextual_menu.sublime_skin",["sublime/sublime_skin","graphics/layer","sublime/common_paths","graphics/rect","graphics/path","graphics/size","ui/font"],function(e,t,i,n,o,r,s){var a,l,u;return a=s.Font,u={},l={},e.extend({ContextualMenu:function(s){var l,u,h,p,c,d,_,y,g,f,m,v,w,b;return b=135,s.setFrame(new n(0,0,b,60)),v=o.Rect(0,0,b,60,4),d=e.floatingBackgroundLayer(v),s.setLayers([d]),y=this.logo(),y.setFrame(new n(0,0,b,34)),f=i.logo(),f.center(new r(b-9,34)),g=e.contextualLogoLayer(),g.setPath(f),y.setLayers([g]),l=this.paneButton(),l.setFrame(new n(0,32,b,28)),_=t.layer(),_.setPath(o.Rect(0,0,b,1)),_.setColor("#000"),_.setDropShadow({color:"rgba(255,255,255,0.1)",size:0,distance:1,angle:90}),p=o.HelpIcon(8,7),h=t.layer(),h.setPath(p),h.setColor("rgba(255,255,255,0.3)"),h.setDropShadow({color:"rgba(0,0,0,0.75)",size:0,distance:1,angle:-90}),l.setLayers([_,h]),u=new a({family:["Helvetica","Arial","sans-serif"],lineHeight:28,size:10,weight:"bold"}),w={"font-style":"normal",color:"#666","text-shadow":"rgba(0,0,0,.75) 0 -1px 0"},m=30,c=l.label(),c.setFrame(new n(m,0,b-m,26)),c.css(w),c.setFont(u)}}),u.exports||l});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("sublime/video/plugins/controls/abstract_controls_view",["ui/tracking_area","ui/view","ui/label","ui/button","sublime/video/plugins/controls/time_button","sublime/video/plugins/subtitles/subtitles_pane","core/util","graphics/point","sublime/video/plugins/controls/progress_bar"],function(e,t,i,n,o,r,s,a,l){var u,h,p,c,d;return h=i.Label,d=s._,c={},p={},u=function(t){function i(){i.__super__.constructor.apply(this,arguments)}return __extends(i,t),i.className="AbstractControlsView",i.prototype.setDelegate=function(e){return this.delegate_=e},i.prototype.isDragging=function(){return!1},i.prototype.didMoveToRootView=function(){var t;return i.__super__.didMoveToRootView.apply(this,arguments),this.ccButton().hasParent()&&!d.mobile&&(this.ccButton().removeAllTrackingAreas(),t=new e(this.ccButton().bounds(),{trackingInVisibleRect:!0}),this.ccButton().addTrackingArea(t)),this.updateCCPaneTrackingArea()},i.prototype.layoutSubviews=function(){return this.bounds().size.isZero()?void 0:this.layoutCCPane()},i.prototype.trackingAreaForPane=function(t){var i,n;return i=t.scaleFactor||1,n=new e(t.bounds(),{trackingInVisibleRect:!1}),n.hitTest=function(e){var o,r;return r=n.rect,r.containsPoint(e)?e.y<r.maxY()-17*i?!0:t.shapeL?e.x>r.maxX()-30*i?!0:(o=new a(e.x-(r.maxX()-30*i),e.y-(r.maxY()-25*i)),o.y<o.x):e.x<r.midX()-11*i?(o=new a(e.x-(r.midX()-11*i-15*i),e.y-(r.maxY()-20*i)),o.y<o.x):e.x>r.midX()+11*i?(o=new a(e.x-(r.midX()+11*i),e.y-r.maxY()+5*i),Math.abs(o.y)>o.x):!0:!1},n},i.prototype.playButton=function(){return this.playButton_||(this.playButton_=new n),this.playButton_},i.prototype.pauseButton=function(){return this.pauseButton_||(this.pauseButton_=new n),this.pauseButton_},i.prototype.expandButton=function(){return this.expandButton_||(this.expandButton_=new n),this.expandButton_},i.prototype.reduceButton=function(){return this.reduceButton_||(this.reduceButton_=new n),this.reduceButton_},i.prototype.progressBar=function(){return this.progressBar_||(this.progressBar_=new l,this.progressBar_.setEnableToolTip(!0),this.progressBar_.setDelegate(this)),this.progressBar_},i.prototype.timeStringForValue=function(e){return this.delegate_.timeStringForValue(e)},i.prototype.canShowToolTip=function(){return this.delegate_.canShowToolTip()},i.prototype.timeButton=function(){return this.timeButton_||(this.timeButton_=new o),this.timeButton_},i.prototype.timeLabel=function(){return this.timeLabel_||(this.timeLabel_=new h,this.timeLabel_.setText("00:00")),this.timeLabel_},i.prototype.remainingTimeLabel=function(){return this.remainingTimeLabel_||(this.remainingTimeLabel_=new h,this.remainingTimeLabel_.setText("00:00")),this.remainingTimeLabel_},i.prototype.hdButton=function(){return this.hdButton_||(this.hdButton_=new n),this.hdButton_},i.prototype.ccButton=function(){return this.ccButton_||(this.ccButton_=new n,this.ccButton_.mouseEntered=d.bind(this,this.presentCCPane)),this.ccButton_},i.prototype.ccPane=function(){return this.ccPane_||(this.ccPane_=new r,this.ccPane_.shapeL=!1,this.ccPane_.mouseExited=d.bind(this,function(){return this.ccPane_.listView().isScrolling()?void 0:this.dismissCCPane()}),this.ccPane_.setHidden(!0)),this.ccPane_},i.prototype.showPlayButton=function(){},i.prototype.showPauseButton=function(){},i.prototype.showExpandButton=function(){},i.prototype.showReduceButton=function(){},i.prototype.showHDButton=function(){},i.prototype.showCCButton=function(){},i.prototype.volumeButton=function(){},i.prototype.volumeSlider=function(){},i.prototype.setTimeLabelIntrinsicSizeForString=function(e){return this.timeButton_&&this.timeButton().setIntrinsicSizeForString(e),this.timeLabel_&&this.timeLabel().setIntrinsicSizeForString(e),this.remainingTimeLabel_?this.remainingTimeLabel().setIntrinsicSizeForString("-"+e,!0):void 0},i.prototype.setTimeInfo=function(){},i.prototype.presentCCPane=function(){return this.ccPane_.setHidden(!1)},i.prototype.dismissCCPane=function(){return this.ccPane_.setHidden(!0)},i.prototype.layoutCCPane=function(){var e,t,i,n;return this.ccButton().hasParent()?(t=this.ccPane(),e=this.ccButton().frame(),i=t.frame(),n=(i.size.width-e.size.width)/2,this.bounds().maxX()-e.minX()<e.size.width+n?(t.shapeL||(t.shapeL=!0,this.updateCCPaneTrackingArea(),t.setNeedsDisplay(),t.emit({didChangeShape:null})),i.origin.x=e.maxX()-i.size.width):(t.shapeL&&(t.shapeL=!1,this.updateCCPaneTrackingArea(),t.setNeedsDisplay(),t.emit({didChangeShape:null})),i.origin.x=e.midX()-Math.round(i.size.width/2)),t.hasParent()||this.append(this.ccPane(),{before:this.ccButton()}),i.origin.y=e.size.height-i.size.height,t.setFrame(i)):void 0},i.prototype.updateCCPaneTrackingArea=function(){var e,t;return d.mobile?void 0:(e=this.ccPane(),e.parent()&&this.rootView()?(e.removeAllTrackingAreas(),t=this.trackingAreaForPane(e),this.ccPaneTrackingArea_=t,e.addTrackingArea(t)):void 0)},i}(t),c.exports=u,c.exports||p});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("sublime/video/plugins/controls/controls",["core/util","core/time","core/options","ui/tracking_area","ui/view","sublime/video/video_controller_plugin","sublime/video/plugins/controls/inline_controls_view","media/media_source","media/video/video","media/media_item","sublime/video/video_controller","animations/timer_animation","animations/timing_function"],function(e,t,i,n,o,r,s,a,l,u,h,p,c){var d,_,y,g,f,m,v,w;return w=e._,y=t.TimeStringForSeconds,_=u.MediaItemPauseReason,f=h.VideoController,g=c.TimingFunctionLinear,v={},m={},d=function(e){function t(){t.__super__.constructor.apply(this,arguments),this.defaultView_=null}return __extends(t,e),t.className="Controls",t.Visibility={Autohide:"autohide",Visible:"visible"},t.prototype.tag="controls",t.kind="controls",t.prototype.defaultOptions=function(){return{visibility:t.Visibility.Autohide}},t.prototype.compoundDataSettings=function(){var e;return e=this.defaultAllowedOptions(),{controls:[e.visibility]}},t.prototype.defaultAllowedOptions=function(){return{visibility:{name:"controlsVisibility",type:i.OptionType.String,values:[t.Visibility.Autohide,t.Visibility.Visible]}}},t.prototype.load=function(e,i,n){return null==e&&(e={}),null==i&&(i={}),t.__super__.load.apply(this,arguments),this.subtitles_=null,this.player().pluginReady("subtitles",w.bind(this,this.subtitlesPluginDidLoad)),setTimeout(w.bind(this,function(){return this.player().isStopped()||this.view().parent()===this.player().contentView()?void 0:this.appendView()}),0),n?n():void 0},t.prototype.unload=function(){return this.isViewLoaded()&&(this.sliderLockId_&&this.player().releaseInterruptLock(this.sliderLockId_),this.stopLoadingAnimation(),this.stopPlayheadAnimation(),this.stopBufferAnimation()),t.__super__.unload.apply(this,arguments)},t.prototype.defaultView=function(){return this.defaultView_||(this.defaultView_=new s,this.defaultView_.setAutoresizingMask(o.AutoresizingMask.FlexibleTopMargin|o.AutoresizingMask.FlexibleWidth),this.prepareView_(this.defaultView_)),this.defaultView_},t.prototype.prepareView_=function(e){var t,i;return e.pauseButton().onMouseUpInside(w.bind(this,this.didTapPauseButton)),e.playButton().onMouseUpInside(w.bind(this,this.didTapPlayButton)),e.expandButton().onMouseUpInside(w.bind(this,this.didTapEnlargeButton)),e.reduceButton().onMouseUpInside(w.bind(this,this.didTapReduceButton)),e.volumeButton().onMouseUpInside(w.bind(this,this.didTapVolumeButton)),e.hdButton().onMouseUpInside(w.bind(this,this.didTapHDButton)),e.ccButton().onMouseUpInside(w.bind(this,this.didTapCCButton)),e.ccPane().offButton().onMouseUpInside(w.bind(this,this.didTapCCOffButton)),t=e.ccPane().listView(),t.setDelegate(this),this.updateCCButtonState_(e),i=this,this.player().pluginReady("subtitles",function(n){var o,r;return t.reloadData(),n.on({didSelectTrack:function(e,t,n){return n?i.didTapCCOffButton():(i.view().ccPane().offButton().setSelected(!1),i.view().ccPane().listView().selectItemAtIndex(t),i.view().dismissCCPane())}}),r=w.indexOf(n.tracks(),n.selectedTrack()),o=w.isNumber(r)&&r>=0,o&&t.selectItemAtIndex(r),e.ccPane().offButton().setSelected(!o)}),e.setVolumeEnabled(!w.mobile&&this.player().options().volumeEnable),e.progressBar()&&e.progressBar().setDelegate(this),e.volumeSlider().setDelegate(this),e.setDelegate(this)},t.prototype.loadView=function(){return this.view_=this.viewForCurrentPlayer()},t.prototype.playerDidResizeView=function(){return this.resizeViewIfNeeded()},t.prototype.resizeViewIfNeeded=function(){var e,t,i,n,r,s;if(w.isDef(this.maxViewWidth)&&this.isViewLoaded()&&this.view_.hasParent()){if(e=o.AutoresizingMask.FlexibleTopMargin|o.AutoresizingMask.FlexibleWidth,s=o.AutoresizingMask.FlexibleTopMargin|o.AutoresizingMask.FlexibleLeftMargin|o.AutoresizingMask.FlexibleRightMargin,n=this.maxViewWidth,i=this.viewMargin,t=this.view_.frame(),r=this.view_.parentSize(),this.view_.autoresizingMask!==s&&this.view_.size().width>n)return t.size.width=n,t.origin.x=Math.round(.5*(r.width-t.size.width)),this.view_.setFrame(t),this.view_.setAutoresizingMask(o.AutoresizingMask.FlexibleTopMargin|o.AutoresizingMask.FlexibleLeftMargin|o.AutoresizingMask.FlexibleRightMargin);if(this.view_.autoresizingMask!==e&&n+2*i>=r.width)return this.view_.setAutoresizingMask(e),t.size.width=r.width-2*i,t.origin.x=Math.round(.5*(r.width-t.size.width)),this.view_.setFrame(t)}},t.prototype.fullmodeDidChange_=function(){return this.updateReduceExpandButton_(this.view())},t.prototype.viewForCurrentPlayer=function(){return this.defaultView()},t.prototype.subtitlesPluginDidLoad=function(e){return this.subtitles_=e,this.updateCCButtonState_(),e.on({didSelectTrack:w.bind(this,function(){return this.updateCCButtonState_()})}),e.on({off:w.bind(this,function(){return this.updateCCButtonState_()})})},t.prototype.updateCCButtonState_=function(e){var t,i,n;return e||(e=this.view()),(i=this.player()&&this.subtitles_)&&(n=this.subtitles_.tracks(),n.length>0)?(t=e.ccButton(),t.hasParent()||e.showCCButton(),t.setSelected(null!=this.subtitles_.selectedTrack())):void 0},t.prototype.updateHDButtonState_=function(e){var t,i;return e||(e=this.view()),(t=this.player())&&(i=t.availableQualities(),w.contains(i,a.Quality.Base)&&w.contains(i,a.Quality.HD))?(e.hdButton().hasParent()||e.showHDButton(),t.playingQuality()===a.Quality.HD?e.hdButton().setSelected(!0):e.hdButton().setSelected(!1)):void 0},t.prototype.appendView=function(){return this.dirtySkin_=!0,this.player().addPluginView(this.view()),this.updateView_(this.view()),this.resizeViewIfNeeded(),this.shouldHideView()?setTimeout(w.bind(this,function(){return this.shouldHideView()?this.view().setHidden(!0,!0):void 0}),3e3):void 0},t.prototype.playerDidStart=function(e){var i;return t.__super__.playerDidStart.apply(this,arguments),this.view().parent()!==e.contentView()&&this.appendView(),this.updateTimeLabels_(0,this.view_),(i=this.view().progressBar())&&i.setValue(0),this.view().isHidden()?this.view().setHidden(!1):void 0},t.prototype.playerDidEnd=function(){return t.__super__.playerDidEnd.apply(this,arguments),this.view().showPlayButton()},t.prototype.playerDidPlay=function(){return t.__super__.playerDidPlay.apply(this,arguments),this.view().showPauseButton()},t.prototype.playerDidPause=function(e,t){var i;return this.view().showPlayButton(),this.stopLoadingAnimation(),e.video().bufferSupport()===l.BufferSupport.Full&&this.stopPlayheadAnimation(),i=t!==_.Unknown},t.prototype.supportsPlayheadAnimation_=function(){return w.ltIE9||w.Firefox?!1:this.player().video().bufferSupport()===l.BufferSupport.Full},t.prototype.updatePlayheadAnimation_=function(){var e,t;return e=this.player(),t=e.playbackTime(),this.startPlayheadAnimation(t,e.duration())},t.prototype.playerWillSeek=function(e,t){return this.stopPlayheadAnimation(),this.updatePlaybackTime(t,!1)},t.prototype.playerDidSeek=function(e){return e.isInterrupted()?this.startLoadingAnimation():void 0},t.prototype.playerDidUpdatePlaybackTime=function(e,t){return this.updatePlaybackTime(t)},t.prototype.updatePlaybackTime=function(e,t){var i,n;return null==t&&(t=!0),n=this.view().progressBar(),n&&n.isDragging()?void 0:(i=this.player(),this.updateTimeLabels_(e,this.view_),i.duration()>0&&n?t&&i.isPlaying()&&this.supportsPlayheadAnimation_()&&e>0?this.updatePlayheadAnimation_():n.setValue(e/i.duration()):void 0)},t.prototype.playerDidEnterFullscreen=function(){return t.__super__.playerDidEnterFullscreen.apply(this,arguments),this.fullmodeDidChange_(),this.updateReduceExpandButton_(this.view_)},t.prototype.playerDidExitFullscreen=function(){return t.__super__.playerDidExitFullscreen.apply(this,arguments),this.fullmodeDidChange_(),this.updateReduceExpandButton_(this.view_)},t.prototype.playerCanResumePlayback=function(){return this.isViewLoaded()&&this.view().progressBar()?!this.view().progressBar().isDragging():!0},t.prototype.playerDidUpdateBuffer=function(){return this.updateBufferValue_()},t.prototype.playerDidChangeInterruptReason=function(e,t){if(t===f.InterruptReason.NoMediaData||t===f.InterruptReason.QualityChange){if(!this.loadingAnimation_)return this.startLoadingAnimation()}else if(this.loadingAnimation_)return this.stopLoadingAnimation()},t.prototype.playerDidInterrupt=function(e,t){var i;return this.supportsPlayheadAnimation_()&&this.stopPlayheadAnimation(),this.view().showPauseButton(),i=this.view().progressBar(),(i&&!i.isDragging()&&t===f.InterruptReason.NoMediaData||t===f.InterruptReason.QualityChange)&&this.startLoadingAnimation(),this.view().isHidden()?this.showViewAnimated(!0):void 0},t.prototype.playerDidStop=function(){var e;return(e=this.view().progressBar())&&e.setValue(0),this.view().removeFromParent()},t.prototype.playerDidStartPlaying=function(e){return t.__super__.playerDidStartPlaying.apply(this,arguments),this.stopLoadingAnimation(),!this.view().isHidden()&&e.isFocusedOnVideo()&&this.options_.visibility===t.Visibility.Autohide?this.hideViewAnimated(!0):void 0},t.prototype.playerWillChangeQuality=function(e,t){return this.view().hdButton().setSelected(t===a.Quality.HD),this.stopPlayheadAnimation()},t.prototype.playerDidLoadMetadata=function(e){return this.view().progressBar()&&this.view().progressBar().setUserInteractionEnabled(!0),this.updateVolumeButton(this.player().volume()),this.view().volumeSlider().setValue(this.player().volume()),this.updateHDButtonState_(),this.updateTimeLabelsIntrisicSize_(),this.updateTimeLabels_(e.playbackTime(),this.view()),this.updateBufferValue_()
},t.prototype.updateTimeLabelsIntrisicSize_=function(){var e,t,i,n;if(this.isViewLoaded()){if(n="-00:00",(i=this.player())&&(t=parseInt(i.duration()/3600,10),t>0))for(e=(t+"").length,n=":"+n;e>0;)n="0"+n,e--;return this.view_.setTimeLabelIntrinsicSizeForString(n)}},t.prototype.didTapPlayButton=function(){var e;return e=this.player(),e.isEnded()?e.start():this.player().play()},t.prototype.didTapPauseButton=function(){return this.player().pause()},t.prototype.didTapEnlargeButton=function(e){var t;return e.altKeyPressed()&&(t=this.player().invertedFullmodePriority_()),this.player().expandView(t)},t.prototype.didTapReduceButton=function(){return this.player().reduceView()},t.prototype.playerDidUnexpectlyChangeQuality=function(e,t){var i;return i=this.view(),i&&i.hdButton().hasParent()?i.hdButton().setSelected(t===a.Quality.HD):void 0},t.prototype.didTapHDButton=function(){var e;return e=this.player(),e.playingQuality()===a.Quality.Base?e.setPlaybackQuality(a.Quality.HD):e.setPlaybackQuality(a.Quality.Base)},t.prototype.didTapCCButton=function(){return w.mobile?this.view().ccPane().isHidden()?this.view().presentCCPane():this.view().dismissCCPane():void 0},t.prototype.didTapCCOffButton=function(){var e;return this.subtitles_?(this.subtitles_.turnOff(),e=this.view(),e.dismissCCPane(),e.ccPane().offButton().setSelected(!0),e.ccPane().listView().selectItemAtIndex(-1)):void 0},t.prototype.playerDidMute=function(){var e;return e=this.view_.volumeSlider(),e.setValue(0),this.updateVolumeButton(0)},t.prototype.playerDidUnmute=function(e){var t;return t=this.view_.volumeSlider(),t.setValue(e.volume()),this.updateVolumeButton(e.volume())},t.prototype.didTapVolumeButton=function(){var e,t;return t=this.view_.volumeSlider(),e=this.player(),e.isMuted()?(e.unmute(),t.setValue(e.volume())):(e.mute(),t.setValue(0)),this.updateVolumeButton(t.value()),this.player().setVolume(t.value())},t.prototype.sliderShouldStartDragging=function(e,t){var i,n;return i=this.player(),n=this.view().progressBar(),i||n?e===n?i.canSeekOutsideBufferBounds()?!0:n.bufferValue()>t:!0:void 0},t.prototype.sliderMaxDraggingValue=function(e){var t,i;return(t=this.player())&&(i=this.view().progressBar(),i&&e===i&&!t.canSeekOutsideBufferBounds())?i.bufferValue():1},t.prototype.sliderWillBeginDragging=function(e){var t;return e===this.view().progressBar()?(t=this.player(),this.sliderLockId_=t.interrupt(this,f.InterruptReason.UserInteraction),t.mute()&&t.unmute(),this.stopLoadingAnimation()):void 0},t.prototype.sliderDidDrag=function(e){var t,i,n;return this.player()?(i=this.player(),e===this.view().progressBar()?(t=e.value()*i.duration(),w.mobile||w.ltIE9||i.seekTo(t),this.updateTimeLabels_(t,this.view_)):e===this.view_.volumeSlider()&&(n=e.value(),this.updateVolumeButton(n),i.setVolume(n),i.isMuted())?i.unmute():void 0):void 0},t.prototype.sliderDidInvalidateDragging=function(e){var t;return(t=this.player())?e===this.view().progressBar()?(t.seekTo(e.value()*t.duration()),t.releaseInterruptLock(this.sliderLockId_),this.sliderLockId_=null):void 0:void 0},t.prototype.sliderDidEndDragging=function(e){var t;return(t=this.player())?e===this.view().progressBar()?(t.seekTo(e.value()*t.duration()),t.releaseInterruptLock(this.sliderLockId_),this.sliderLockId_=null):e===this.view().volumeSlider()&&this.view_.volumePane_&&this.view_.volumePane_.hasParent()&&!this.view_.volumePane_.isHidden()&&!this.view_.volumePaneTrackingArea_.entered?this.view_.dismissVolumePane():void 0:void 0},t.prototype.controlsDidEndDragging=function(){var e;return e=this.player().view(),this.player().isPlaying()&&!this.view().isHidden()&&this.shouldHideView()?this.hideViewAnimated(!0):void 0},t.prototype.didEnterVolumeButton=function(){},t.prototype.updateReduceExpandButton_=function(e){var t;if(e&&(t=this.player())){if(t.canReduceView())return e.showReduceButton();if(t.canExpandView())return e.showExpandButton()}},t.prototype.updateTimeLabels_=function(e,t){var i,n,o,r;return n=parseInt(this.player().duration()/3600,10),i=n>0?(n+"").length:0,o=y(e,{hourDigits:i}),r=y(e-this.player().duration(),{hourDigits:i}),t.setTimeInfo(o,r)},t.prototype.progressValue=function(){var e;return e=this.player().playbackTime()/this.player().duration(),!isNaN(e)&&isFinite(e)?e:0},t.prototype.updateView_=function(e){var t,i,n;return i=this.player(),i.isPlaying()||i.isInterrupted()?e.showPauseButton():e.showPlayButton(),this.updateTimeLabelsIntrisicSize_(),this.updateReduceExpandButton_(e),this.updateTimeLabels_(i.playbackTime(),e),n=this.view().progressBar(),n&&(t=null!=this.player().video().metadata(),n.setUserInteractionEnabled(t),n.setBufferValue(this.player().bufferDuration()/this.player().duration()),n.setValue(this.progressValue()),i.isInterrupted()&&this.startLoadingAnimation()),this.updateVolumeButton(this.player().volume()),this.updateHDButtonState_(e),this.updateCCButtonState_(e),e.volumeSlider().setValue(this.player().volume())},t.prototype.updateBufferValue_=function(){var e,t,i,n,o;return n=this.view().progressBar(),n?(o=n.bufferValue(),t=this.player().duration(),t>0?(i=this.player().bufferDuration()/t,e=i>=o&&i>this.player().playbackTime()/t,e&&this.supportsPlayheadAnimation_()?this.startBufferAnimation(i):n.setBufferValue(i)):n.setBufferValue(0)):void 0},t.prototype.startPlayheadAnimation=function(e,t){var i;return i=t-e,this.view_.progressBar()&&i>0?(this.playHeadAnimation_&&this.playHeadAnimation_.cancel(),this.playHeadAnimation_=new p,this.playHeadAnimation_.delegate=this,this.playHeadAnimation_.timingFunction=g(),this.playHeadAnimation_.startValue=e/t,this.playHeadAnimation_.endValue=1,this.playHeadAnimation_.duration=i,this.playHeadAnimation_.start()):void 0},t.prototype.stopPlayheadAnimation=function(){return this.playHeadAnimation_&&this.playHeadAnimation_.cancel(),this.playHeadAnimation_=null},t.prototype.startBufferAnimation=function(e,t){var i;return null==t&&(t=.5),(i=this.view_.progressBar())?(this.bufferAnimation_&&this.bufferAnimation_.cancel(),this.bufferAnimation_=new p,this.bufferAnimation_.delegate=this,this.bufferAnimation_.timingFunction=g(),this.bufferAnimation_.startValue=i.bufferValue(),this.bufferAnimation_.endValue=e,this.bufferAnimation_.duration=t,this.bufferAnimation_.start()):void 0},t.prototype.stopBufferAnimation=function(){return this.bufferAnimation_?(this.bufferAnimation_.cancel(),this.bufferAnimation_=null):void 0},t.prototype.startLoadingAnimation=function(){var e;return(e=this.view_.progressBar())&&(this.loadingAnimation_&&this.loadingAnimation_.cancel(),this.loadingAnimation_=new p,this.loadingAnimation_.delegate=this,this.loadingAnimation_.timingFunction=g(),this.loadingAnimation_.startValue=0,this.loadingAnimation_.endValue=1,this.loadingAnimation_.duration=.5,this.loadingAnimation_.repeatCount=w.MAX_INT,this.loadingAnimation_.start(),e.loadingBar().isHidden())?e.loadingBar().setHidden(!1,!0):void 0},t.prototype.stopLoadingAnimation=function(){var e;return(e=this.view_.progressBar())?e.loadingBar().setHidden(!0,!0,w.bind(this,function(){return e.loadingBar().isHidden()&&this.loadingAnimation_?(this.loadingAnimation_.cancel(),this.loadingAnimation_=null):void 0})):void 0},t.prototype.animationDidChangeValue=function(e,t){var i;if(this.view_&&(i=this.view_.progressBar())){if(e===this.playHeadAnimation_)return this.player().isPlaying()?i.setValue(t):this.stopPlayheadAnimation();if(e===this.bufferAnimation_)return i.setBufferValue(t);if(e===this.loadingAnimation_)return i.emit({didUpdateLoadingValue:[t]})}},t.prototype.shouldHideView=function(e){var i,n,o;return e||(e=this.view_),e&&e.parent()?(i=this.player(),n=e.progressBar(),o=e.volumeSlider(),this.options_.visibility!==t.Visibility.Autohide||!e.ccPane().isHidden()||n&&n.isDragging()||o&&o.isDragging()||!i.isFocusedOnVideo()||!(Math.abs(i.playbackTime()-i.duration())>.05)||this.view().isDragging()?!1:!0):!1},t.prototype.mouseExited=function(){return this.observeredPluginView&&this.observeredPluginView.removeTrackingArea(this.trackingArea),this.observeredPluginView=null,this.isMouseInsidePlayer()&&this.view().isHidden()?this.showViewAnimated(!0):void 0},t.prototype.mouseExitedPlayerBounds=function(){return t.__super__.mouseExitedPlayerBounds.apply(this,arguments),this.observeredPluginView&&this.observeredPluginView.removeTrackingArea(this.trackingArea),this.observeredPluginView=null},t.prototype.updateVolumeButton=function(e){return this.view_.volumeButton().setVolume?this.view_.volumeButton().setVolume(e):void 0},t.prototype.playerDidChangeVolume=function(e,t){var i;return e.isMuted()?void 0:(i=this.view_.volumeSlider(),i.setValue(t),this.updateVolumeButton(t))},t.prototype.playerDidChangeFullmodeSupport=function(){return this.updateReduceExpandButton_(this.view_)},t.prototype.playerDidEnterFullWindow=function(){return t.__super__.playerDidEnterFullWindow.apply(this,arguments),this.fullmodeDidChange_(),this.updateReduceExpandButton_(this.view_)},t.prototype.playerDidExitFullWindow=function(){return t.__super__.playerDidExitFullWindow.apply(this,arguments),this.fullmodeDidChange_(),this.updateReduceExpandButton_(this.view_)},t.prototype.playerDidFocusOnVideo=function(e){if(e.isInterrupted()||this.view().isDragging()){if(this.view().isHidden())return this.showViewAnimated(!0)}else if(this.options_.visibility!==t.Visibility.Visible&&this.shouldHideView())return t.__super__.playerDidFocusOnVideo.apply(this,arguments)},t.prototype.playerDidUnfocusFromVideo=function(e){var i,o,r,s,a;if(this.view_&&this.view_.parent())for(r=e.plugins(),i=!0,s=0,a=r.length;a>s;s++)if(o=r[s],o!==this&&o.isViewVisible()&&o.view().frame().instersectsRect(this.view().frame())&&!o.canMoveFromCurrentFrame())return i=!1,this.observeredPluginView=o.view(),this.trackingArea=new n(this.observeredPluginView.bounds(),{trackingInVisibleRect:!0,owner:this}),this.observeredPluginView.addTrackingArea(this.trackingArea),void 0;return t.__super__.playerDidUnfocusFromVideo.apply(this,arguments)},t.prototype.timeStringForValue=function(e){var t,i,n,o;return t=this.player().duration(),t?(o=e*t,n=parseInt(t/3600,10),i=n>0?(n+"").length:0,y(o,{hourDigits:i})):void 0},t.prototype.canShowToolTip=function(){var e;return e=this.player(),!w.mobile&&e&&e.duration()>0},t.prototype.numberOfItemsInList=function(){return this.subtitles_?this.subtitles_.tracks().length:0},t.prototype.itemTextAtIndex=function(e,t){return this.subtitles_.tracks()[t].label()},t.prototype.didSelectItemAtIndex=function(e,t){return this.subtitles_?this.subtitles_.selectTrack(this.subtitles_.tracks()[t],w.bind(this,function(){})):void 0},t.prototype.listDidEndScrolling=function(){return this.view_.ccPane_&&this.view_.ccPane_.hasParent()&&!this.view_.ccPane_.isHidden()&&!this.view_.ccPaneTrackingArea_.entered?this.view_.dismissCCPane():void 0},t}(r),v.exports=d,v.exports||m}),sublime_.define("sublime/video/plugins/controls/controls.sublime_skin",["sublime/sublime_skin","core/util","graphics/path","ui/font","graphics/rect","ui/view","graphics/size","graphics/layer","graphics/gradient","ui/button"],function(e,t,i,n,o,r,s,a,l,u){var h,p,c,d;return d=t._,h=n.Font,c={},p={},e.extend({Controls:function(t,n){var p,c,_,y,g,f,m,v,w,b,T,x,P,k,z,S,F,M,A,C,B,V,E,L,O,I,D,R,U,N,W,H,j,G,q,Q,K,Y,X,Z,J,$,et,tt,it,nt,ot,rt,st,at,lt,ut,ht,pt,ct,dt,_t,yt,gt,ft,mt,vt,wt,bt,Tt,xt,Pt,kt,zt,St,Ft,Mt,At,Ct,Bt,Vt,Et,Lt,Ot,It,Dt,Rt,Ut,Nt,Wt,Ht,jt,Gt,qt,Qt,Kt,Yt,Xt,Zt,Jt,$t,ei,ti,ii,ni;for(ht={volumePane:function(e){var t;return t=new i,e?(t.moveTo(68.991,14.998),t.lineTo(68.991,40.995),t.lineTo(39.991,40.995),t.lineTo(39.991,20.998),t.curveTo(39.991,17.998,36.967,17.998,36.967,17.998),t.lineTo(3,17.998),t.curveTo(1.343,17.998,0,16.654,0,14.998),t.lineTo(0,3),t.curveTo(0,1.343,1.343,0,3,0),t.lineTo(65.991,0),t.curveTo(67.648,0,68.991,1.343,68.991,3),t.lineTo(68.991,14.998)):(t.moveTo(65.991,17.998),t.lineTo(51.024,17.998),t.curveTo(51.024,17.998,47.994,17.998,47.994,21.028),t.lineTo(47.994,37.995),t.curveTo(47.994,39.652,46.651,40.995,44.994,40.995),t.lineTo(23.997,40.995),t.curveTo(22.34,40.995,20.997,39.652,20.997,37.995),t.lineTo(20.997,21.028),t.curveTo(20.997,17.998,17.967,17.998,17.967,17.998),t.lineTo(3,17.998),t.curveTo(1.343,17.998,0,16.654,0,14.998),t.lineTo(0,3),t.curveTo(0,1.343,1.343,0,3,0),t.lineTo(65.991,0),t.curveTo(67.648,0,68.991,1.343,68.991,3),t.lineTo(68.991,14.998),t.curveTo(68.991,16.654,67.648,17.998,65.991,17.998)),t},ccPane:function(e,t,n){var o,r;return r=new i,o=t-126*n,e?(r.moveTo(99.999*n,3*n),r.lineTo(99.999*n,o+123*n),r.curveTo(99.999*n,o+124.657*n,98.657*n,o+126*n,96.999*n,o+126*n),r.lineTo(74.999*n,o+126*n),r.curveTo(73.343*n,o+126*n,71.999*n,o+124.657*n,71.999*n,o+123*n),r.lineTo(71.999*n,o+106*n),r.curveTo(71.999*n,o+102.97*n,68.999*n,o+103*n,68.999*n,o+103*n)):(r.moveTo(99.999*n,3*n),r.lineTo(99.999*n,o+100*n),r.curveTo(99.999*n,o+101.657*n,98.657*n,o+103*n,97.001*n,o+103*n),r.lineTo(67*n,o+103*n),r.curveTo(67*n,o+103*n,64.001*n,o+102.97*n,64.001*n,o+106*n),r.lineTo(64.001*n,o+123*n),r.curveTo(64.001*n,o+124.657*n,62.658*n,o+126*n,60.999*n,o+126*n),r.lineTo(39*n,o+126*n),r.curveTo(37.344*n,o+126*n,36.001*n,o+124.657*n,36.001*n,o+123*n),r.lineTo(36.001*n,o+106*n),r.curveTo(36.001*n,o+102.97*n,33*n,o+103*n,33*n,o+103*n)),r.lineTo(3*n,o+103*n),r.curveTo(1.343*n,o+103*n,0*n,o+101.657*n,0*n,o+100*n),r.lineTo(0*n,3*n),r.curveTo(0*n,1.343*n,1.343*n,0*n,3*n,0*n),r.lineTo(97.001*n,0*n),r.curveTo(98.657*n,0*n,99.999*n,1.343*n,99.999*n,3*n),r}},H=d.mobile?new h({lineHeight:26,size:13,weight:"bold"}):new h({lineHeight:32,size:12,weight:"bold"}),D=function(t,n,o){var r,s,a,l;return r=1.4,a=i.ObliqueArrow(r),l=a.clone(),n?a.rotate(180):l.rotate(180),l.translateTo(o,o),a=a.merge(l),a.center(t.size()),s=e.componentLayer(),s.setPath(a),t.setLayers([s])},I=function(e,t){return null==t&&(t=8),D(e,!1,t)},U=function(e,t){return null==t&&(t=8),D(e,!0,t)},Dt={"font-family":"Helvetica,Arial,sans-serif","font-style":"normal",color:"#d5d5d5","text-shadow":"#000 1px 0 1px"},Ut=t.timeLabel(),Ut.setFrame(new o(0,0,40,25)),Ut.css(Dt),Ut.setFont(H),xt=t.remainingTimeLabel(),xt.setFrame(new o(0,0,40,25)),xt.setAutoresizingMask(r.AutoresizingMask.FlexibleRightMargin),xt.css(Dt),xt.setFont(H),d.mobile?(E=50,t.margins.left=17,t.margins.right=17,t.margins.component=18):(E=30,t.margins.left=9,t.margins.right=9,t.margins.component=14),Kt=new s(n.width,E),t.setFrame(new o(0,n.height-Kt.height,Kt.width,Kt.height)),f=a.layer(),ut=i.Rect(0,1,Kt.width,E-1),f.setPath(ut),f.setInnerShadow({angle:90,distance:1,color:e.palette().background1.contrastColor1.colorWithAlpha(.15)}),f.setGradient(e.styles().floatingBackground.gradient()),f.setDropShadow({distance:1,angle:-90,size:0,color:e.palette().background1.color3}),t.setLayers([f]),g=t,t.on({didUpdateFrame:function(){return ut=i.Rect(0,1,g.size().width,E-1),f.setPath(ut)}}),pt=t.pauseButton(),pt.setFrame(new o(0,0,E,E)),d.mobile?(ut=i.Rect(0,0,5,16),ut.repeat(2,4)):(ut=i.Rect(0,0,5,14),ut.repeat(2,4)),ut.center(pt.size()),$=e.componentLayer(),$.setPath(ut),pt.setLayers([$]),ct=ut,pt.intrinsicSize=function(){return ct.size()},dt=t.playButton(),dt.setFrame(new o(0,0,E,E)),$=e.componentLayer(),ut=d.mobile?i.Triangle(0,0,16,17):i.Triangle(0,0,13,14),ut.center(dt.size()),$.setPath(ut),dt.setLayers([$]),dt.intrinsicSize=function(){return ct.size()},Zt=t.volumePane(),Zt.setFrame(new o(Kt.width-50-24,-8,70,50)),Zt.setAutoresizingMask(r.AutoresizingMask.FlexibleLeftMargin),$=a.layer(),$.setStroke({width:1,color:e.palette().background1.color3}),$.setGradient({colors:{0:e.palette().background1.color2.colorWithDeltaLightness(12),1:e.palette().background1.color1.colorWithDeltaLightness(20)}}),$.setDropShadow({size:7,color:e.palette().background1.color3,spread:20}),$.setInnerShadow({angle:90,distance:1,color:e.palette().background1.contrastColor1.colorWithAlpha(.15)}),Jt=$,Qt=function(){return ut=ht.volumePane(Zt.shapeL),ut.center(Zt.size()),Jt.setPath(ut)},Qt(),Zt.setLayers([$]),Zt.on({didChangeShape:Qt}),N=t.expandButton(),N.setFrame(new o(0,0,E,E)),N.setAutoresizingMask(r.AutoresizingMask.FlexibleLeftMargin),I(N),Tt=t.reduceButton(),Tt.setFrame(new o(0,0,E,E)),Tt.setAutoresizingMask(r.AutoresizingMask.FlexibleLeftMargin),U(Tt),Rt=t.timeButton(),Rt.label().setFont(H),Rt.setAutoresizingMask(r.AutoresizingMask.FlexibleRightMargin),Rt.setFrame(new o(E,0,40,E)),Rt.label().css(Dt),Rt.label().setFrame(Rt.bounds()),b=t.ccButton(),d.mobile?(W=1.2,C=1.5):(W=1,C=1),x=Math.round(28*C+2),b.setFrame(new o(0,0,x,E-4)),ut=new i,ut.moveTo(18.212*W,8.517*W),ut.curveTo(18.02*W,9.724*W,17.367*W,10.989*W,16.691*W,11.483*W),ut.curveTo(15.192*W,12.576*W,13.041*W,12.439*W,11.757*W,11.161*W),ut.curveTo(10.743*W,10.149*W,10.191*W,8.332*W,10.315*W,6.48*W),ut.curveTo(10.507*W,3.858*W,11.712*W,2.087*W,13.56*W,1.719*W),ut.curveTo(14.246*W,1.581*W,14.416*W,1.581*W,15.182*W,1.741*W),ut.curveTo(16.082*W,1.938*W,16.837*W,2.409*W,17.31*W,3.064*W),ut.curveTo(17.727*W,3.628*W,18.155*W,4.836*W,18.155*W,5.399*W),ut.lineTo(18.155*W,5.744*W),ut.lineTo(16.95*W,5.71*W),ut.lineTo(15.745*W,5.675*W),ut.lineTo(15.677*W,5.33*W),ut.curveTo(15.519*W,4.56*W,15.035*W,4.122*W,14.325*W,4.122*W),ut.curveTo(13.818*W,4.122*W,13.48*W,4.41*W,13.187*W,5.077*W),ut.curveTo(12.974*W,5.583*W,12.929*W,5.882*W,12.929*W,6.998*W),ut.curveTo(12.917*W,8.551*W,13.154*W,9.264*W,13.751*W,9.574*W),ut.curveTo(14.607*W,10.034*W,15.43*W,9.608*W,15.688*W,8.563*W),ut.lineTo(15.812*W,8.033*W),ut.lineTo(17.052*W,8.033*W),ut.lineTo(18.291*W,8.033*W),ut.lineTo(18.212*W,8.517*W),ut.moveTo(9.56*W,8.573*W),ut.curveTo(9.347*W,10.426*W,8.13*W,11.863*W,6.53*W,12.162*W),ut.curveTo(4.931*W,12.461*W,3.32*W,11.725*W,2.453*W,10.299*W),ut.curveTo(1.788*W,9.206*W,1.507*W,6.791*W,1.867*W,5.238*W),ut.curveTo(2.295*W,3.363*W,3.455*W,2.006*W,4.875*W,1.707*W),ut.curveTo(6.463*W,1.374*W,8.197*W,2.121*W,8.975*W,3.479*W),ut.curveTo(9.212*W,3.893*W,9.583*W,5.169*W,9.595*W,5.583*W),ut.curveTo(9.595*W,5.698*W,9.279*W,5.732*W,8.366*W,5.732*W),ut.lineTo(7.139*W,5.732*W),ut.lineTo(7.059*W,5.308*W),ut.curveTo(7.015*W,5.054*W,6.835*W,4.732*W,6.609*W,4.502*W),ut.curveTo(6.306*W,4.191*W,6.147*W,4.122*W,5.765*W,4.122*W),ut.curveTo(4.818*W,4.122*W,4.301*W,5.157*W,4.301*W,7.044*W),ut.curveTo(4.301*W,8.344*W,4.446*W,8.896*W,4.92*W,9.379*W),ut.curveTo(5.652*W,10.126*W,6.722*W,9.758*W,7.037*W,8.631*W),ut.lineTo(7.195*W,8.091*W),ut.lineTo(8.412*W,8.056*W),ut.lineTo(9.628*W,8.022*W),ut.lineTo(9.56*W,8.573*W),ut.moveTo(19.901*W,3.694*W),ut.curveTo(19.563*W,.794*W,18.978*W,.311*W,15.445*W,0*W),ut.curveTo(13.916*W,W*-.127,6.084*W,W*-.127,4.509*W,0*W),ut.curveTo(1.888*W,.229*W,1.066*W,.563*W,.582*W,1.657*W),ut.curveTo(.435*W,1.991*W,.256*W,2.521*W,.199*W,2.831*W),ut.curveTo(.008*W,3.764*W,W*-.07,8.08*W,.076*W,9.634*W),ut.curveTo(.323*W,12.454*W,.875*W,13.18*W,2.978*W,13.536*W),ut.curveTo(4.61*W,13.801*W,8.604*W,13.962*W,11.732*W,13.882*W),ut.curveTo(18.269*W,13.721*W,19.137*W,13.421*W,19.732*W,11.223*W),ut.curveTo(19.98*W,10.29*W,20.093*W,5.387*W,19.901*W,3.694*W),ut.center(b.size()),$=e.componentLayer(),at=new l({colors:{0:"#555555",1:"#767676"}}),$.setPath(ut),b.setLayers([$]),T=$,L=function(e){return e===u.State.Selected?T.setGradient(null):(T.setOuterGlow(null),T.setColorOverlay(null),T.setGradient(at)),b.setNeedsDisplay()},L(b.state()),b.on({didChangeState:L}),X=18*C,it=5*C,P=5*C,Bt=d.mobile?25:4,St=d.mobile?8:Bt,Ft=5,rt=4,F=t.ccPane(),k=F.listView(),st=k.items().length,Ot=st>rt,Q=st-rt,zt=rt/st,k.scrollbarWidth=St,k.scrollbarMargin=Ft,k.scrollbarEnabled=Ot,nt=Math.min(st*X,rt*X),kt=Math.round(zt*nt),k.scrollableHeight=X*Q,F.scaleFactor=C,B=100*C+2,M=60*C+nt,F.setFrame(new o(0,0,B,M)),F.setAutoresizingMask(r.AutoresizingMask.FlexibleLeftMargin),$=a.layer(),$.setStroke({width:1,color:e.palette().background1.color3}),$.setGradient({colors:{0:e.palette().background1.color3.colorWithDeltaLightness(13),1:e.palette().background1.color3.colorWithDeltaLightness(33)}}),$.setDropShadow({size:7,color:e.palette().background1.color3,spread:20}),$.setInnerShadow({angle:90,distance:1,color:e.palette().background1.contrastColor1.colorWithAlpha(.15)}),A=$,qt=function(){return ut=ht.ccPane(F.shapeL,M,C),ut.center(F.size()),A.setPath(ut)},qt(),Et=a.layer(),Et.setPath(i.Rect(P,M-50*C,B-2*P,1)),Et.setDropShadow({distance:1,size:0,color:"rgba(255,255,255,0.13)"}),Et.setColor("rgba(0,0,0,0.5)"),F.setLayers([$,Et]),F.on({didChangeShape:qt}),tt=it+P,Y=new h({lineHeight:X,size:d.mobile?15:11,weight:"bold"}),Z={"font-family":"Helvetica,Arial,sans-serif","font-style":"normal","-webkit-font-smoothing":"antialiased"},J={"text-shadow":"rgba(0,0,0,0.5) 0px -1px 0",color:"#cecece"},Vt={"text-shadow":"rgba(0,0,0,0.5) 0px 1px 1px",color:"#ffffff"},d.extend(Z,J),y=function(e){var t,n,o;return n=a.layer(),o=e.size(),n.setPath(i.Rect(0,0,o.width,o.height,2)),n.setColor("rgba(0,0,0,0.5)"),n.setInnerShadow({color:"rgba(0,0,0,0.8)",distance:1,size:2}),n.setDropShadow({color:"rgba(255,255,255,0.15)",size:0,distance:1}),t=a.layer(),ut=i.Circle(o.width-8*C,0,2.5),ut.centerVertically(o),t.setPath(ut),t.setGradient({colors:{0:"#c2c2c2",1:"#ffffff"}}),t.setDropShadow({color:"#000",distance:1,size:1}),e.setLayers([n,t]),e.label().css(Vt)},z=F.offButton(),z.label().css(Z),z.label().setFont(Y),z.setFrame(new o(P,M-X-28*C,B-2*P,X)),j=z.bounds(),j.origin.x=it,j.size.width-=it,z.label().setFrame(j),$=a.layer(),ut=i.Rect(0,0,20,20),$.setPath(ut),z.setLayers([$]),S=$,O=function(e){return e===u.State.Selected?y(z):(z.label().css(J),z.setLayers([]))},O(z.state()),z.on({didChangeState:O}),k.setFrame(new o(P,P,B-2*P,nt)),k.itemHeight=X,ni=k.items(),ti=0,ii=ni.length;ii>ti;ti++)K=ni[ti],j=K.bounds(),j.origin.x=it,j.size.width-=it,K.label().setFrame(j),K.label().css(Z),K.label().setFont(Y);return k.layoutSubviews(),(K=k.selectedItem())&&y(K),k.on({didUnselectItem:function(e){return e.setLayers([]),e.label().css(J)}}),k.on({didSelectItem:function(e){return y(e)}}),Ot&&(Pt=k.scrollbar(),lt=d.mobile?Bt-St:Bt,Pt.setFrame(new o(k.frame().size.width-lt,0,Bt,k.frame().size.height)),Mt=Math.round(St/2),ut=i.Rect(0,0,St,Pt.size().height,Mt),ut.centerHorizontally(Pt.size()),$=a.layer(),$.setColor("rgba(0,0,0,0.5)"),$.setInnerShadow({color:"rgba(0,0,0,0.8)",distance:1,size:2}),$.setDropShadow({color:"rgba(255,255,255,0.15)",size:0,distance:1}),$.setPath(ut),Pt.setLayers([$]),Pt.setTrackingMargin(kt/2),Ct=Pt.trackView(),At=a.layer(),At.setGradient({colors:{0:"#c2c2c2",1:"#ffffff"}}),Ct.setLayers([At]),Pt.on({didUpdateTrackPosition:function(e){return ut=i.Rect(0,e-.5*kt,St,kt,Mt),ut.centerHorizontally(Pt.size()),At.setPath(ut)}})),G=t.hdButton(),G.setFrame(new o(0,0,E,E)),ut=new i,ut.moveTo(2.444*W,0*W),ut.lineTo(5.486*W,0*W),ut.lineTo(4.615*W,3.211*W),ut.lineTo(7.397*W,3.211*W),ut.lineTo(8.269*W,0*W),ut.lineTo(11.31*W,0*W),ut.lineTo(8.866*W,9.1*W),ut.lineTo(5.824*W,9.1*W),ut.lineTo(6.695*W,5.837*W),ut.lineTo(3.913*W,5.837*W),ut.lineTo(3.042*W,9.1*W),ut.lineTo(0*W,9.1*W),ut.lineTo(2.444*W,0*W),ut.moveTo(14.794*W,6.448*W),ut.curveTo(15.717*W,6.448*W,16.51*W,6.175*W,16.978*W,5.707*W),ut.curveTo(17.355*W,5.33*W,17.628*W,4.719*W,17.628*W,4.16*W),ut.curveTo(17.628*W,3.666*W,17.485*W,3.341*W,17.252*W,3.107*W),ut.curveTo(16.965*W,2.821*W,16.51*W,2.652*W,15.782*W,2.652*W),ut.lineTo(15.275*W,2.652*W),ut.lineTo(14.261*W,6.448*W),ut.lineTo(14.794*W,6.448*W),ut.moveTo(12.948*W,0*W),ut.lineTo(16.172*W,0*W),ut.curveTo(17.94*W,0*W,19.045*W,.481*W,19.734*W,1.17*W),ut.curveTo(20.41*W,1.846*W,20.722*W,2.73*W,20.722*W,3.835*W),ut.curveTo(20.722*W,5.2*W,20.202*W,6.448*W,19.227*W,7.423*W),ut.curveTo(18.135*W,8.515*W,16.562*W,9.1*W,14.456*W,9.1*W),ut.lineTo(10.504*W,9.1*W),ut.lineTo(12.948*W,0*W),p=ut,p.center(G.size()),$=e.componentLayer(),$.setGradient(at),$.setPath(p),G.setLayers([$]),q=$,R=function(e){return e===u.State.Selected?(q.setOuterGlow({color:"rgba(255, 255, 255, 0.3)",size:12}),q.setColorOverlay("#fff")):(q.setOuterGlow(null),q.setColorOverlay(null),q.setGradient(at)),G.setNeedsDisplay()},R(G.state()),G.on({didChangeState:R}),yt=t.progressBar(),gt=o.zero(),gt.size.height=25,gt.size.width=190,gt.origin.x=Math.round((Kt.width-gt.size.width)/2),gt.origin.y=56,ft=8,wt=.5*ft,d.mobile?(_t=13,vt=13):(_t=wt,vt=0),yt.setTrackingMargin(_t),yt.setFrame(gt),yt.setAutoresizingMask(r.AutoresizingMask.FlexibleWidth),mt=a.layer(),ot=a.layer(),Lt=function(){return ut=i.Rect(vt,0,yt.size().width-2*vt,ft,ft/2),ut.center(yt.size()),mt.setPath(ut),ot.setClippath(ut)},Lt(),mt.setGradient({colors:{0:"#797979",1:"#515151"}}),mt.setStroke({width:1,color:"rgba(0,0,0,0.65)"}),mt.setInnerShadow({angle:90,distance:1,size:4,color:"rgba(0,0,0,0.25)"}),mt.setDropShadow({distance:2,size:0,color:"rgba(255,255,255,0.06)"}),yt.setLayers([mt]),yt.on({didUpdateFrame:Lt}),ot.setColor("rgba(0,0,0,0.2)"),yt.loadingBar().setLayers([ot]),yt.on({didUpdateLoadingValue:function(e){var t,n,o,r,s,a;return r=new i,r.rightBy(10),r.lineBy(-8,8),r.leftBy(10),r.lineBy(8,-8),t=2,s=r.size().width,a=e*(s+t),n=yt.size().width/s+2,o=-s+a,r.repeat(n,t),r.centerVertically(yt.size()),r.setOrigin(o,r.origin().y),ut=i.Rect(vt,0,yt.size().width-2*vt,ft,ft/2),ut.center(yt.size()),ot.setClippath(ut),ot.setPath(r)}}),v=yt.bufferBar(),w=a.layer(),w.setGradient({colors:{0:"#404040",1:"#6a6a6a"}}),v.setLayers([w]),yt.on({didUpdateBufferValue:function(e){var t;return t=Math.max(6,(v.size().width-2*vt)*e),ut=i.Rect(vt,0,t,ft,ft/2),ut.centerVertically(v.size()),w.setPath(ut)}}),wt=ft/2,Gt=yt.trackView(),jt=a.layer(),jt.setGradient(e.styles().component.gradient()),Ht=a.layer(),d.mobile?Gt.setLayers([jt]):(Ht.setGradient({colors:{0:"#060606",1:"#2e2e2e"}}),Ht.setStroke({width:1,color:"#000"}),Gt.setLayers([jt,Ht])),yt.on({didUpdateTrackPosition:function(e){var t;return t=Math.max(2*wt,e-vt),ut=i.Rect(vt,0,t,ft,wt),ut.centerVertically(Gt.size()),jt.setPath(ut),ut=i.Circle(e,0,wt),ut.centerVertically(Gt.size()),Ht.setPath(ut)}}),Wt=t.progressBar().toolTipView(),Nt=d.clone(Dt),Nt["text-align"]="center",Wt.label().css(Nt),j=new o(0,-18,44,36),Wt.setFrame(j),Wt.label().setFont(new h({lineHeight:19,size:11,weight:"bold"})),ut=new i,ut.moveTo(38.679,19.683),ut.lineTo(24.312,19.683),ut.lineTo(20.997,22.997),ut.lineTo(17.682,19.683),ut.lineTo(3.315,19.683),ut.curveTo(1.484,19.683,0,18.214,0,16.402),ut.lineTo(0,3.28),ut.curveTo(0,1.469,1.484,0,3.315,0),ut.lineTo(38.679,0),ut.curveTo(40.51,0,41.995,1.469,41.995,3.28),ut.lineTo(41.995,16.402),ut.curveTo(41.995,18.214,40.51,19.683,38.679,19.683),m=a.layer(),m.setColor(e.palette().background1.color2.colorWithAlpha(.8)),m.setStroke({width:1,color:e.palette().background1.color3}),m.setDropShadow({color:e.palette().background1.color3.colorWithAlpha(.8),size:8,spread:0,distance:0}),ut.centerHorizontally(j.size),m.setPath(ut),ut=i.Circle(21,31,5),ut.centerHorizontally(j.size),V=a.layer(),V.setPath(ut),V.setColor(e.palette().background1.color3.colorWithAlpha(.5)),Wt.setLayers([m,V]),Yt=t.volumeButton(),Yt.volumeButtonTest=!0,Yt.setFrame(new o(t.size().width-50,0,E,E)),Yt.setAutoresizingMask(r.AutoresizingMask.FlexibleLeftMargin),ut=new i,ut.moveTo(0,4),ut.rightBy(5),ut.lineBy(6,-4),ut.downBy(15),ut.lineBy(-6,-4),ut.leftBy(5),ut.closePath(),_=8,c=i.Rect(14,0,5,1),c.repeat(_,0,1),ut=ut.merge(c),ut.center(Yt.size()),$=e.componentLayer(),$.setPath(ut),Yt.setLayers([$]),et=a.layer(),et.setGradient({colors:{0:"rgba(0,0,0,0.51)",1:"rgba(0,0,0,0.68)"}}),$.setMask(et),Xt=$,Yt.on({didChangeVolume:function(e){var t,n;return t=Math.round(_*(1-e)),n=i.Rect(14,0,5,1),n.repeat(t,0,1),n.setOrigin(Xt.path().frame().maxX()-n.size().width,Xt.path().origin().y),et.setPath(n)}}),It=t.volumeSlider(),It.setFrame(new o((Zt.bounds().size.width-58)/2,10,59,8)),ut=i.Rect(0,0,It.size().width,8,4),ut.center(It.size()),$=a.layer(),$.setPath(ut),$.setGradient({colors:{0:e.palette().background1.color1.colorWithAlpha(.89),1:e.palette().background1.color2.colorWithAlpha(.89)}}),$.setDropShadow({angle:90,distance:2,color:e.palette().background1.contrastColor1.colorWithAlpha(.1)}),$.setStroke({width:1,color:e.palette().background1.color3}),It.setLayers([$]),bt=4,It.setTrackingMargin(bt),ei=It.trackView(),$t=a.layer(),$t.setGradient({colors:{0:e.palette().component1.color2,1:e.palette().component1.color1}}),$t.setStroke({width:1,color:e.palette().background1.color3}),ei.setLayers([$t]),It.on({didUpdateTrackPosition:function(e){return bt>e&&(e=bt),ut=i.Circle(e,0,bt),ut.centerVertically(ei.size()),$t.setPath(ut)}})}}),c.exports||p});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("sublime/video/plugins/controls/inline_controls_view",["ui/tracking_area","ui/view","ui/slider","sublime/video/plugins/controls/abstract_controls_view","core/util","graphics/point","sublime/video/plugins/controls/volume_button"],function(e,t,i,n,o,r,s){var a,l,u,h,p;return l=i.Slider,p=o._,h={},u={},a=function(i){function n(){n.__super__.constructor.apply(this,arguments),this.leftComponents_={},this.centerComponent_=null,this.rightComponents_={},this.componentOffsets_={},this.componentMargins_={},this.volumeEnabled_=!0,this.margins={top:0,bottom:0,left:15,component:15,right:15},this.loadComponents_(),this.css({"z-index":99})}return __extends(n,i),n.className="InlineControlsView",n.prototype.layoutSubviews=function(){return this.layoutComponents_(),n.__super__.layoutSubviews.apply(this,arguments)},n.prototype.setComponentOffset=function(e,t){return this.componentOffsets_[e]=t},n.prototype.setMarginBetweenComponents=function(e,t,i){var n;return 0>i?(delete this.componentMargins_[e],delete this.componentMargins_[t]):(n=this.componentMargins_[e],n||(n={},this.componentMargins_[e]=n),n[t]=i,n=this.componentMargins_[t],n||(n={},this.componentMargins_[t]=n),n[e]=i)},n.prototype.layoutComponents_=function(){var e,t,i;return e=this.bounds(),e.size.isZero()?void 0:(t=this.layoutLeftComponents_(e),i=this.layoutRightComponents_(e),this.layoutCenterComponent_(e,t,i),p.mobile?void 0:this.layoutVolumePane())},n.prototype.layoutRightComponents_=function(e){var i,n,o,s,a,l,u,h,c,d,_,y,g,f,m;for(_=this.margins.right,l=p.keys(this.rightComponents_).sort().reverse(),d=null,y=0,f=l.length;f>y;y++)for(s=l[y],a=this.rightComponents_[s],s=g=0,m=a.length;m>g;s=++g)o=a[s],d&&(h=this.componentMargins_[o]&&this.componentMargins_[o][d]?this.componentMargins_[o][d]:this.margins.component,_+=h),o.setAutoresizingMask(t.AutoresizingMask.FlexibleLeftMargin),n=o.frame(),0!==n.size.area()&&(i=o.size(),u=o.intrinsicSize(),_+=u.width,c=this.componentOffsets_[o]||r.zero(),n.origin.x=Math.round(e.maxX()-_-.5*(i.width-u.width)+c.x),n.origin.y=Math.round(e.origin.y+.5*(e.size.height-i.height)+c.y),o.setFrame(n),o.parent()!==this&&this.append(o),d=o);return _},n.prototype.layoutLeftComponents_=function(e){var i,n,o,s,a,l,u,h,c,d,_,y,g,f,m;for(h=this.margins.left,l=p.keys(this.leftComponents_).sort().reverse(),_=null,y=0,f=l.length;f>y;y++)for(s=l[y],a=this.leftComponents_[s],g=0,m=a.length;m>g;g++)o=a[g],_&&(c=this.componentMargins_[o]&&null!=this.componentMargins_[o][_]?this.componentMargins_[o][_]:this.margins.component,h+=c),o.setAutoresizingMask(t.AutoresizingMask.FlexibleRightMargin),n=o.frame(),0!==n.size.area()&&(i=o.size(),u=o.intrinsicSize(),d=this.componentOffsets_[o]||r.zero(),n.origin.x=Math.round(h-.5*(i.width-u.width)+d.x),n.origin.y=Math.round(e.origin.y+.5*(e.size.height-i.height)+d.y),h+=u.width,o.setFrame(n),o.parent()!==this&&this.append(o),_=o);return h},n.prototype.layoutCenterComponent_=function(e,i,n){var o,s,a,l,u;if(i+=this.margins.component,n+=this.margins.component,this.centerComponent_){if(this.centerComponent_.setAutoresizingMask(t.AutoresizingMask.FlexibleWidth),s=this.centerComponent_.frame(),o=this.centerComponent_.size(),l=this.centerComponent_.intrinsicSize(),a=Math.round(.5*(o.width-l.width)),u=this.componentOffsets_[this.centerComponent_]||r.zero(),s.origin.x=Math.round(i-a+u.x),s.size.width=e.size.width-n-i+2*a,70>s.size.width)return this.centerComponent_.setHidden(!0,!0);if(s.origin.y=Math.round(e.origin.y+.5*(e.size.height-s.size.height)+u.y),this.centerComponent_.setFrame(s),this.centerComponent_.parent()!==this&&this.append(this.centerComponent_),this.centerComponent_.isHidden())return this.centerComponent_.setHidden(!1,!0)
}},n.prototype.addLeftComponent=function(e,t){var i;return null==t&&(t=0),this.removeComponent(e),i=this.leftComponents_[t],i||(i=[],this.leftComponents_[t]=i),i.push(e)},n.prototype.setCenterComponent=function(e){return this.removeComponent(e),this.centerComponent_=e,this.layoutSubviews()},n.prototype.addRightComponent=function(e,t){var i;return null==t&&(t=0),this.removeComponent(e),i=this.rightComponents_[t],i||(i=[],this.rightComponents_[t]=i),i.push(e)},n.prototype.removeComponent=function(e){var t,i,n,o,r;if(t=!1,this.centerComponent_===e)this.centerComponent_=null,t=!0;else{o=this.leftComponents_;for(i in o)if(n=o[i],p.contains(n,e)){p.remove(n,e),t=!0;break}if(!t){r=this.rightComponents_;for(i in r)if(n=r[i],p.contains(n,e)){p.remove(n,e),t=!0;break}}}return t?e.removeFromParent():void 0},n.prototype.loadComponents_=function(){return this.addLeftComponent(this.pauseButton(),4),p.mobile?(this.addLeftComponent(this.timeLabel()),this.addRightComponent(this.remainingTimeLabel(),0)):(this.addLeftComponent(this.timeButton()),this.volumeEnabled_&&this.addRightComponent(this.volumeButton(),2)),this.setCenterComponent(this.progressBar())},n.prototype.volumePane=function(){return this.volumePane_||(this.volumePane_=new t,this.volumePane_.shapeL=!1,this.volumePane_.mouseExited=p.bind(this,this.dismissVolumePane),this.volumePane_.setHidden(!0)),this.volumePane_},n.prototype.showPlayButton=function(){return this.removeComponent(this.pauseButton()),this.addLeftComponent(this.playButton(),4),this.layoutSubviews()},n.prototype.showPauseButton=function(){return this.removeComponent(this.playButton()),this.addLeftComponent(this.pauseButton(),4),this.layoutSubviews()},n.prototype.showExpandButton=function(){return this.removeComponent(this.reduceButton()),this.addRightComponent(this.expandButton(),4),this.layoutSubviews()},n.prototype.showReduceButton=function(){return this.removeComponent(this.expandButton()),this.addRightComponent(this.reduceButton(),4),this.layoutSubviews()},n.prototype.showHDButton=function(){return this.addRightComponent(this.hdButton(),1),this.layoutSubviews()},n.prototype.showCCButton=function(){return this.addRightComponent(this.ccButton(),2),this.layoutSubviews()},n.prototype.didMoveToRootView=function(){var t;return n.__super__.didMoveToRootView.apply(this,arguments),p.mobile?void 0:this.volumeEnabled_?(this.volumeButton().hasParent()&&(this.volumeButton().removeAllTrackingAreas(),t=new e(this.volumeButton().bounds(),{trackingInVisibleRect:!0}),this.volumeButton().addTrackingArea(t)),this.updateVolumePaneTrackingArea()):void 0},n.prototype.willRemoveFromRootView=function(){},n.prototype.setTimeInfo=function(e,t){return this.timeButton_&&this.timeButton().setTime(e,t),this.timeLabel_&&this.timeLabel().setText(e),this.remainingTimeLabel_?this.remainingTimeLabel().setText(t):void 0},n.prototype.setTimeLabelIntrinsicSizeForString=function(e){return n.__super__.setTimeLabelIntrinsicSizeForString.call(this,e),this.layoutSubviews()},n.prototype.setVolumeEnabled=function(e){return this.volumeEnabled_=e,e?void 0:(this.removeVolumeComponents_(),this.layoutComponents_())},n.prototype.removeVolumeComponents_=function(){return this.volumeButton_?this.removeComponent(this.volumeButton()):void 0},n.prototype.volumeButton=function(){return this.volumeButton_||(this.volumeButton_=new s,this.volumeButton_.mouseEntered=p.bind(this,this.didEnterVolumeButton_),this.volumeButton_.numberOfBars=6,this.volumeButton_.numberOfActiveBars=3),this.volumeButton_},n.prototype.volumePane=function(){return this.volumePane_||(this.volumePane_=new t,this.volumePane_.shapeL=!1,this.volumePane_.mouseExited=p.bind(this,this.dismissVolumePane),this.volumePane_.setHidden(!0)),this.volumePane_},n.prototype.volumeSlider=function(){return this.volumeSlider_||(this.volumeSlider_=new l),this.volumeSlider_},n.prototype.presentVolumePane_=function(){return this.volumePane_.setHidden(!1)},n.prototype.dismissVolumePane=function(){return this.volumeSlider().isDragging()?void 0:this.volumePane_.setHidden(!0)},n.prototype.didEndDragging=function(e,t){return e===this.volumeSlider()&&(this.volumePane().bounds().containsPoint(t.locationInView(this.volumePane()))||this.dismissVolumePane()),this.delegate_.sliderDidEndDragging(e,t)},n.prototype.didEnterVolumeButton_=function(){return this.presentVolumePane_()},n.prototype.layoutVolumePane=function(){var e,t,i;return this.volumeEnabled_&&this.volumePane_&&this.volumeButton_&&this.volumeButton_.hasParent()?(e=this.volumeButton_.frame(),t=this.volumePane_.frame(),i=(t.size.width-e.size.width)/2,this.bounds().maxX()-e.minX()<e.size.width+i?(this.volumePane_.shapeL||(this.volumePane_.shapeL=!0,this.updateVolumePaneTrackingArea(),this.volumePane_.setNeedsDisplay(),this.volumePane_.emit({didChangeShape:null})),t.origin.x=e.maxX()-t.size.width):(this.volumePane_.shapeL&&(this.volumePane_.shapeL=!1,this.updateVolumePaneTrackingArea(),this.volumePane_.setNeedsDisplay(),this.volumePane_.emit({didChangeShape:null})),t.origin.x=e.midX()-Math.round(t.size.width/2)),this.volumePane().hasParent()||this.append(this.volumePane(),{before:this.volumeButton()}),this.volumeSlider().hasParent()||this.volumePane().append(this.volumeSlider()),t.origin.y=e.size.height-t.size.height,this.volumePane_.setFrame(t)):void 0},n.prototype.updateVolumePaneTrackingArea=function(){var e,t;return t=this.volumePane(),t.parent()&&this.rootView()?(t.removeAllTrackingAreas(),e=this.trackingAreaForPane(t),this.volumePaneTrackingArea_=e,t.addTrackingArea(this.volumePaneTrackingArea_)):void 0},n}(n),h.exports=a,h.exports||u});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("sublime/video/plugins/controls/progress_bar",["ui/tracking_area","ui/view","ui/button","ui/slider","core/util","graphics/rect","graphics/point"],function(e,t,i,n,o,r,s){var a,l,u,h,p;return l=n.Slider,p=o._,h={},u={},a=function(n){function o(){o.__super__.constructor.apply(this,arguments),this.delegate_=null,this.bufferValue_=0,this.canSeekOutsideBufferBounds_=!0,this.toolTipEnabled_=!1,this.on({didUpdateFrame:function(){return this.emit({didUpdateBufferValue:[this.bufferValue_]})}})}return __extends(o,n),o.className="ProgressBar",o.prototype.setSeekOutsideBufferBounds=function(e){return this.canSeekOutsideBufferBounds_=e},o.prototype.setEnableToolTip=function(e){return this.toolTipEnabled_=e},o.prototype.bufferBar=function(){return this.bufferBar_||(this.bufferBar_=new t,this.bufferBar_.setUserInteractionEnabled(!1)),this.bufferBar_},o.prototype.loadingBar=function(){return this.loadingBar_||(this.loadingBar_=new t,this.loadingBar_.setUserInteractionEnabled(!1),this.loadingBar_.setHidden(!0)),this.loadingBar_},o.prototype.toolTipView=function(){return this.toolTipView_||(this.toolTipView_=new i,this.toolTipView_.setUserInteractionEnabled(!1),this.toolTipView_.setHidden(!0)),this.toolTipView_},o.prototype.didRemoveFromWindow_=function(){return o.__super__.didRemoveFromWindow_.apply(this,arguments),null!=this.barTrackingArea_?this.removeTrackingArea(this.barTrackingArea_):void 0},o.prototype.didMoveToWindow=function(){var t;return o.__super__.didMoveToWindow.apply(this,arguments),this.toolTipEnabled_?(null!=this.barTrackingArea_&&this.removeTrackingArea(this.barTrackingArea_),this.barTrackingArea_=null,t=new e(this.bounds(),{trackingInVisibleRect:!0,mouseMovedEnabled:!0,mouseDragEnabled:!0}),this.barTrackingArea_=t,this.addTrackingArea(t)):void 0},o.prototype.layoutSubviews=function(){var e,t;return this.loadingBar().hasParent()||this.append(this.loadingBar()),t=this.size(),e=r.zero(),e.size.height=t.height,e.size.width=t.width,this.loadingBar().setFrame(e),this.layoutBufferBar(),this.toolTipEnabled_&&this.append(this.toolTipView()),o.__super__.layoutSubviews.apply(this,arguments)},o.prototype.layoutBufferBar=function(){var e,t;return this.bufferBar().hasParent()||this.append(this.bufferBar()),t=this.size(),e=r.zero(),e.size.height=t.height,e.size.width=t.width,this.bufferBar().setFrame(e)},o.prototype.layoutSublayers_=function(){return o.__super__.layoutSublayers_.apply(this,arguments)},o.prototype.setDelegate=function(e){return this.delegate_=e},o.prototype.bufferValue=function(){return this.bufferValue_},o.prototype.bufferWidth=function(){var e;return e=Math.round((this.size().width-2)*this.bufferLayer_.progress),isFinite(e)&&!isNaN(e)?e:0},o.prototype.setBufferValue=function(e){return this.bufferValue_=p.isNumber(e)?e:0,this.emit({didUpdateBufferValue:[this.bufferValue_]})},o.prototype.baseCss=function(){var e;return e=o.__super__.baseCss.apply(this,arguments),p.extend(e,{"z-index":2}),e},o.prototype.drawBufferLayer_=function(){},o.prototype.drawPlaybackLayer_=function(){},o.prototype.handleOrigin=function(){},o.prototype.setHandlePosition_=function(){return this.layoutPlaybackBar()},o.prototype.mouseEntered=function(e){var t;return t=e.locationInView(this),this.toolTipEnabled_&&this.hasParent()&&!this.isHidden()&&(this.updateToolTip_(e),this.toolTipView().isHidden()&&this.delegate_.canShowToolTip())?this.showToolTip_():void 0},o.prototype.mouseMoved=function(e){var t;return t=e.locationInView(this),this.toolTipEnabled_&&this.hasParent()&&!this.isHidden()&&(this.updateToolTip_(e),this.toolTipView().isHidden()&&this.delegate_.canShowToolTip())?this.showToolTip_():void 0},o.prototype.mouseExited=function(){return this.toolTipView().isHidden()||this.isDragging()?void 0:this.toolTipView().setHidden(!0)},o.prototype.mouseUp=function(){return this.isDragging()&&this.toolTipEnabled_&&!this.toolTipView().isHidden()&&this.barTrackingArea_&&!this.barTrackingArea_.entered&&this.toolTipView().setHidden(!0),o.__super__.mouseUp.apply(this,arguments)},o.prototype.updateToolTip_=function(e){var t,i,n,o;return i=e.locationInView(this),n=this.valueForEvent(e),o=this.trackPositionForValue_(n),t=this.toolTipView().frame(),t.origin=new s(o-t.size.width/2,t.origin.y),this.toolTipView().setFrame(t),this.toolTipView().label().setText(this.delegate_.timeStringForValue(n))},o.prototype.updateValue_=function(e,t){return o.__super__.updateValue_.apply(this,arguments),this.toolTipEnabled_&&this.barTrackingArea_&&!this.barTrackingArea_.entered?this.updateToolTip_(t):void 0},o.prototype.showToolTip_=function(){return this.toolTipView().setHidden(!1)},o}(l),h.exports=a,h.exports||u});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("sublime/video/plugins/controls/time_button",["ui/tracking_area","ui/button","core/util"],function(e,t,i){var n,o,r,s;return s=i._,r={},o={},n=function(t){function i(){i.__super__.constructor.apply(this,arguments),this.timeToggledDuringHoverSession_=!1,this.displaySecondaryTime_=!1,this.label().setText("00:00"),this.onMouseUpInside(s.bind(this,this.didTap_)),this.mainTime_="",this.secondaryTime_=""}return __extends(i,t),i.className="TimeButton",i.prototype.setIntrinsicSizeForString=function(e){var t;return this.label().setIntrinsicSizeForString(e),t=this.frame(),t.size.width=this.intrinsicSize().width,this.setFrame(t),this.label().setFrame(this.bounds())},i.prototype.didTap_=function(){return this.timeToggledDuringHoverSession_=!this.timeToggledDuringHoverSession_},i.prototype.didMoveToRootView=function(){var t;return i.__super__.didMoveToRootView.apply(this,arguments),t=new e(this.bounds(),{trackingInVisibleRect:!0}),this.addTrackingArea(t)},i.prototype.willRemoveFromRootView=function(){return this.removeAllTrackingAreas()},i.prototype.intrinsicSize=function(){return this.label().intrinsicSize()},i.prototype.mouseEntered=function(){return this.toogleDisplayTime_()},i.prototype.mouseExited=function(){return this.timeToggledDuringHoverSession_||this.toogleDisplayTime_(),this.timeToggledDuringHoverSession_=!1},i.prototype.setTime=function(e,t){return this.mainTime_=e,this.secondaryTime_=t,this.updateLabel_()},i.prototype.toogleDisplayTime_=function(){return this.displaySecondaryTime_=!this.displaySecondaryTime_,this.updateLabel_()},i.prototype.updateLabel_=function(){var e,t,i,n;return n=this.displaySecondaryTime_?this.secondaryTime_:this.mainTime_,this.label().setText(n),i=this.size(),t=this.label().intrinsicSize(),i.width!==t.width?(e=this.frame(),e.size.width=t.width,this.setFrame(e)):void 0},i}(t),r.exports=n,r.exports||o});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("sublime/video/plugins/controls/volume_button",["ui/button"],function(e){var t,i,n;return n={},i={},t=function(e){function t(){t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.className="VolumeButton",t.prototype.setVolume=function(e){return this.emit({didChangeVolume:[e]})},t}(e),n.exports=t,n.exports||i});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("sublime/video/plugins/cuepoints/cue_zones",["sublime/video/video_controller_plugin","core/util","sublime/video/video_controller"],function(e,t,i){var n,o,r,s,a;return a=t._,o=i.VideoController,s={},r={},n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.className="CueZones",t.kind="cuezones",t.prototype.load=function(e,i,n){return null==e&&(e={}),null==i&&(i={}),t.__super__.load.apply(this,arguments),this.groups_={},this.anonymousGroupId_=0,this.delegate().addAPI({cuezones:{addGroup:a.bind(this,this.addGroup),removeGroup:a.bind(this,this.removeGroup),removeAllGroups:a.bind(this,this.removeAllGroups),goTo:a.bind(this,this.goTo)}}),n?n():void 0},t.prototype.generateGroupId_=function(){return this.anonymousGroupId_++,"acg_"+this.anonymousGroupId_},t.prototype.addGroup=function(e){var t;return null==e&&(e={}),t={id:e.id||this.generateGroupId_(),cuezones:a.clone(e.cuezones),initialized:!1,entered:!1,events:{enter:a.isFunction(e.onenter)?e.onenter:null,exit:a.isFunction(e.onexit)?e.onexit:null}},this.player().duration()>0&&this.initializeGroup_(t),this.groups_[t.id]=t},t.prototype.goTo=function(e){var t,i,n,r,s,l,u,h,p;if(a.isString(e)&&(h=e.split("."),i=h[0],n=h[1],t=this.groups_[i],t&&t.initialized))for(p=t.cuezones,l=0,u=p.length;u>l;l++)if(s=p[l],s.id===n)return r=this.player().interrupt(this,o.InterruptReason.UserInteraction),this.player().seekTo(s.computedFrom),this.player().releaseInterruptLock(r),void 0},t.prototype.playerDidLoadMetadata=function(){var e,t,i;i=this.groups_;for(t in i)e=i[t],e.initialized||this.initializeGroup_(e);return a.undef},t.prototype.computeTime_=function(e){return 0>e?this.player().duration()+e:e},t.prototype.initializeGroup_=function(e){var t,i,n,o,r,s,l,u;if(e.initialized=!0,a.isArray(e.cuezones))for(n=e.cuezones,t=n.length,o=l=0,u=n.length;u>l;o=++l){if(i=n[o],a.isNumber(i.from))i.computedFrom=this.computeTime_(i.from);else{if(s=o>0?n[o-1].to:0,!a.isNumber(s))return e.cuezones=[],void 0;i.computedFrom=this.computeTime_(s)}if(a.isNumber(i.to))i.computedTo=this.computeTime_(i.to);else{if(r=t-1>o?n[o+1].from:this.player().duration(),!a.isNumber(r))return e.cuezones=[],void 0;i.computedTo=this.computeTime_(r)}}else e.cuezones=[]},t.prototype.removeGroup=function(e){return null!=e&&delete this.groups_[e],a.undef},t.prototype.removeAllGroups=function(){return this.groups_={},a.undef},t.prototype.playerDidUpdatePlaybackTime=function(){var e;return e=this.player().playbackTime(),this.updateCuezonesForTime(e)},t.prototype.updateCuezonesForTime=function(e){var t,i,n,o,r,s,l,u,h,p;e=.01*Math.round(100*e),l=this.player(),u=l.API(),h=this.groups_,p=[];for(n in h)i=h[n],i.initialized?(r=i.events.enter,s=i.events.exit,p.push(function(){var l,h,p,c;for(p=i.cuezones,c=[],o=l=0,h=p.length;h>l;o=++l)t=p[o],t.entered?t.computedFrom>e||e>=t.computedTo?(t.entered=!1,s?c.push(s(u,n,a.clone(t),o)):c.push(void 0)):c.push(void 0):e>=t.computedFrom&&t.computedTo>e?(t.entered=!0,r?c.push(r(u,n,a.clone(t),o)):c.push(void 0)):c.push(void 0);return c}())):p.push(void 0);return p},t}(e),s.exports=n,s.exports||r});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("sublime/video/plugins/embed/embed",["ui/view","ui/button","ui/view_controller","core/util","core/options","sublime/video/video_controller_plugin","sublime/video/plugins/embed/embed_pane","media/video/video","graphics/size","sublime/video/video_controller"],function(e,t,i,n,o,r,s,a,l,u){var h,p,c,d,_;return _=n._,p=u.VideoController,d={},c={},h=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return __extends(r,n),r.className="Embed",r.kind="embed",r.prototype.defaultOptions=function(){return{size:null,url:null,type:"manual"}},r.prototype.defaultAllowedOptions=function(){return{size:{name:"embedSize",type:o.OptionType.String},url:{name:"embedUrl",type:o.OptionType.String},type:{name:"embedType",type:o.OptionType.String,values:["manual"]}}},r.prototype.shouldDisplayEmbedButton=function(){var e,t,i;if("auto"!==this.options_.type)return this.options_.url&&this.options_.url.length>0;if(i=this.player().video().uidOrigin(),i===a.ParamOrigin.Attribute?(t=this.player().video().uid(),/^[a-z0-9_\-]{1,64}$/i.test(t)||(e='Invalid data-uid "'+t+'"')):e="Missing data-uid",!e)return!0;try{return _.warn(""+e+" for auto embed. More info at http://cl.ly/NZRP")}catch(n){}},r.prototype.load=function(e,t,i){return null==e&&(e={}),null==t&&(t={}),r.__super__.load.apply(this,arguments),this.shouldDisplayEmbedButton()&&!this.player().isStopped()&&this.presentEmbedButton(),i?i():void 0},r.prototype.unload=function(){return this.paneController_&&(this.dismissPaneController_(),this.paneController_=null),r.__super__.unload.apply(this,arguments)},r.prototype.playerDidStart=function(e){return r.__super__.playerDidStart.apply(this,arguments),this.shouldDisplayEmbedButton()&&this.button().parent()!==e.contentView()?this.presentEmbedButton():void 0},r.prototype.playerDidStop=function(e){return this.button().parent()===e.contentView()?this.button().removeFromParent():void 0},r.prototype.button=function(){return this.view()},r.prototype.loadView=function(){return this.view_||(this.view_=new t,this.view_.onMouseUpInside(_.bind(this,function(){return this.player().emit({"embed:click":null}),this.presentEmbedPane_()}))),this.view_},r.prototype.isSharingInstalled=function(){var e,t,i,n;for(n=this.player().plugins(),t=0,i=n.length;i>t;t++)if(e=n[t],"sharing"===e.constructor.kind&&e.shouldDisplaySharingButton())return!0;return!1},r.prototype.presentEmbedButton=function(){return this.player().addPluginView(this.button())},r.prototype.paneController=function(){return this.paneController_||(this.paneController_=new i,this.paneController_.loadView=_.bind(this.paneController_,function(){return this.view_||(this.view_=new s,this.view_.setAutoresizingMask(e.AutoresizingMask.FlexibleWidth|e.AutoresizingMask.FlexibleHeight)),this.view_}),this.paneController_.view().onMouseUpInside(_.bind(this,function(){return this.dismissPaneController_()})),this.paneController_.view().widthTextField().setDelegate(this),this.paneController_.view().heightTextField().setDelegate(this)),this.paneController_},r.prototype.embedCode=function(e,t,i){return null==t&&(t=640),null==i&&(i=360),'<iframe src="'+e+'" width="'+t+'" height="'+i+'" frameborder="0" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe>'},r.prototype.autoembedsPath=function(){return"//www.npr.org/news/graphics/2012/10/popup-pres/e/"},r.prototype.autoembedUrl=function(){var e,t;return e=this.player().delegate().config().token,t=this.player().video().uid(),this.autoembedsPath()+(""+e+"/"+t+".html")},r.prototype.embedUrl=function(){return"auto"===this.options_.type?this.autoembedUrl():this.options_.url},r.prototype.textFieldDidUpdateValue=function(e,t){var i,n,o;return n=this.paneController_.view(),o=n.widthTextField(),i=n.heightTextField(),e===o?i.setText(Math.round(parseInt(t)/this.embedSize_.width*this.embedSize_.height)||this.embedSize_.height):e===i&&o.setText(Math.round(parseInt(t)/this.embedSize_.height*this.embedSize_.width)||this.embedSize_.width),this.paneController_.view().textField().setText(this.embedCode(this.embedUrl(),o.text(),i.text()))},r.prototype.parseSize=function(){var e,t,i,n,o;return n=this.options_.size||"",(t=n.match(/^(\d+\.?\d*)(?:x(\d+))?$/i))&&(o=parseInt(t[1]),e=parseInt(t[2]),!isNaN(o)&&o>200)?(i=new l(o,void 0),!isNaN(e)&&e>120&&(i.height=e),i):void 0},r.prototype.defaultEmbedSize=function(e){var t,i,n,o,r;return r=e.video(),o=e.size(),(t=r.metadata())&&(n=t.size,o.height=o.width*n.height/n.width),i=this.parseSize(),i&&(o.height=_.isNumber(i.height)?i.height:i.width*o.height/o.width,o.width=i.width),o},r.prototype.presentEmbedPane_=function(){var e,t,i;return t=this.player(),this.embedSize_=this.defaultEmbedSize(t),i=Math.round(this.embedSize_.width),e=Math.round(this.embedSize_.height),this.paneController_.view().widthTextField().setText(i),this.paneController_.view().heightTextField().setText(e),this.paneController_.view().textField().setText(this.embedCode(this.embedUrl(),i,e)),this.interruptLockId_=t.interrupt(this,p.InterruptReason.PlayerLostFocus),t.presentModalViewController(this.paneController())},r.prototype.dismissPaneController_=function(){var e;return e=this.player(),e.dismissModalViewController(),e.releaseInterruptLock(this.interruptLockId_)},r}(r),d.exports=h,d.exports||c}),sublime_.define("sublime/video/plugins/embed/embed.sublime_skin",["sublime/sublime_skin","graphics/size","graphics/rect","graphics/point","ui/view","graphics/path","ui/font"],function(e,t,i,n,o,r,s){var a,l,u;return a=s.Font,u={},l={},e.extend({Embed:function(s,l){var u,h,p,c,d,_,y,g,f,m,v,w,b,T,x,P,k,z;return P=new t(38,38),T=i.zero(),x=new n(10,10),T.origin=this.isSharingInstalled()?new n(l.width-P.width-x.x,x.y+49):new n(l.width-P.width-x.x,x.y),T.size=P,s.setAutoresizingMask(o.AutoresizingMask.FlexibleLeftMargin|o.AutoresizingMask.FlexibleBottomMargin),s.setFrame(T),c=s,u=e.floatingBackgroundLayer(),m=r.Rect(0,0,P.width,P.height,4),u.setPath(m),d=e.componentLayer(),m=r.EmbedIcon(0,0,16),m.center(c.size()),d.setPath(m),c.setLayers([u,d]),f=this.paneController().view(),v={"font-style":"normal",color:"#fff","text-shadow":"rgba(0,0,0,0.75) 1px 1px 1px","text-align":"center"},_=new a({lineHeight:28,size:28,weight:"bold"}),b=f.label(),b.css(v),b.setFont(_),v={"font-style":"normal",color:"#fff","text-shadow":"rgba(0,0,0,.75) 0 -1px 0","text-align":"center"},_=new a({family:["Monaco","Courier","monospace"],lineHeight:40,size:12,weight:"normal"}),p=function(t,i,n){var o;return o=e.inputLayer(),t.on({didUpdateFrame:function(){return m=r.Rect(0,0,t.size().width,t.size().height,4),o.setPath(m)}}),i&&t.cssText(i),n&&t.setFont(n),o},k=f.widthTextField(),k.setLayers([p(k,v,_)]),y=f.heightTextField(),y.setLayers([p(y,v,_)]),w=f.textField(),g=e.componentLayer(),w.setLayers([p(w,v,_),g]),w.on({didUpdateFrame:function(){return m=r.EmbedIcon(0,0,.35*w.size().height),m.centerVertically(w.size(),10,1),g.setPath(m)}}),w.cssText(v),w.setFont(_),v["text-align"]="right",_=new a({lineHeight:40,size:14,weight:"normal"}),b=f.sizeLabel(),b.css(v),b.setFont(_),z=f.xView(),h=e.componentLayer(),z.setLayers([h]),z.on({didUpdateFrame:function(){return m=r.CrossIcon(0,0,10),m.center(z.size()),h.setPath(m)}})}}),u.exports||l});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("sublime/video/plugins/embed/embed_pane",["ui/view","ui/label","ui/button","ui/text_field","core/util","graphics/size","graphics/rect"],function(e,t,i,n,o,r,s){var a,l,u,h,p;return l=t.Label,p=o._,h={},u={},a=function(t){function i(){i.__super__.constructor.apply(this,arguments)}return __extends(i,t),i.className="EmbedPane",i.prototype.didMoveToParent=function(){return this.parent()?this.setFrame(this.parent().bounds()):void 0},i.prototype.label=function(){return this.label_||(this.label_=new l,this.label_.setText("Embed this video")),this.label_},i.prototype.sizeLabel=function(){return this.sizeLabel_||(this.sizeLabel_=new l,this.sizeLabel_.setText("Size:")),this.sizeLabel_},i.prototype.textField=function(){return this.textField_||(this.textField_=new n,p.mobile||this.textField_.setEditable(!1),this.textField_.setShowIcon(!0)),this.textField_},i.prototype.widthTextField=function(){return this.widthTextField_||(this.widthTextField_=new n,this.widthTextField_.allowIntegersOnly(),this.widthTextField_.setMaxLength(4)),this.widthTextField_},i.prototype.heightTextField=function(){return this.heightTextField_||(this.heightTextField_=new n,this.heightTextField_.allowIntegersOnly(),this.heightTextField_.setMaxLength(4)),this.heightTextField_},i.prototype.xView=function(){return this.xView_||(this.xView_=new e),this.xView_},i.prototype.layoutSubviews=function(){var e,t,i,n,o,a,l,u,h,p,c,d,_,y,g;return this.label().parent()!==this&&this.append(this.label()),this.xView().parent()!==this&&this.append(this.xView()),this.sizeLabel().parent()!==this&&this.append(this.sizeLabel()),this.textField().parent()!==this&&this.append(this.textField()),this.widthTextField().parent()!==this&&this.append(this.widthTextField()),this.heightTextField().parent()!==this&&this.append(this.heightTextField()),c=this.size(),u=30,o=this.label(),l=new r(c.width-40,30),y=350>c.width?35:40,g=Math.min(550,c.width-2*u),a=350>c.width?0:6,h=15,p=Math.round(.5*(c.height-(l.height+a+h+y+h+y))),15>p?(o.removeFromParent(),l.height=0):o.setFrame(new s(Math.round(.5*(c.width-l.width)),p,l.width,l.height)),p+=l.height+a+h,this.textField().setFrame(new s(Math.round(.5*(c.width-g)),p,g,y)),t=60,i=p+y+h,e=Math.round(.5*c.width),n=17,this.widthTextField().setFrame(new s(e-t-n,i,t,y)),this.heightTextField().setFrame(new s(e+n,i,t,y)),this.xView().setFrame(new s(e-n,i,2*n,y)),d=this.sizeLabel(),250>c.width?d.removeFromParent():(_=60,d.setFrame(new s(this.widthTextField().frame().minX()-_-10,i,_,y)))},i}(i),h.exports=a,h.exports||u});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("sublime/video/plugins/google_analytics/google_analytics",["core/util","core/url","core/options","sublime/video/video_controller_plugin","sublime/video/video_controller","media/video/video","core/log"],function(e,t,i,n,o,r,s){var a,l,u,h,p;return p=e._,l=o.VideoController,h={},u={},a=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return __extends(n,e),n.className="GoogleAnalytics",n.kind="googleAnalytics",n.condition={UISupport:l.PluginUISupport.None},n.prototype.defaultOptions=function(){return{account:null}},n.prototype.defaultAllowedOptions=function(){return{account:{name:"googleAnalyticsAccount",type:i.OptionType.String}}},n.prototype.load=function(e,t,i){var o;if(null==e&&(e={}),null==t&&(t={}),n.__super__.load.apply(this,arguments),o=this.initTracker_(),o&&!this.initUniversalAnalyticsTracker_()){this.error_=o;try{s.warn("SublimeVideo: "+o)}catch(r){}}else this.listenPlayerEvents_(),this.queueEvent_("Video load",null,!0);return i?i():void 0},n.prototype.initTracker_=function(){var e,t,i;if(!(t=window._gat))return"Can't find Google Analytics object `_gat`";if(null==window._gaq)return"Can't find Google Analytics object `_gaq`";if(null===this.options_.account)try{i=window._gat._getTrackerByName(),this.options_.account=i._getAccount()}catch(n){}return null==this.options_.account||"UA-XXXXX-X"===this.options_.account?"Google Analytics account not speficied":(this.trackerName_="sublimeTracker",e=t._createTracker(this.options_.account,this.trackerName_),null)},n.prototype.initUniversalAnalyticsTracker_=function(){return null==window.ga?!1:(this._universalAnalytics=!0,!0)},n.prototype.listenPlayerEvents_=function(){var e;return e=p.bind(this,this.queueEvent_),this.player().on({"logo:click":function(){return e("Logo click")},"embed:click":function(){return e("Embed pane open")},"sharing:click":function(t){return null!=t?e("Sharing click - "+p.capitalize(t)):e("Sharing pane open")}})},n.prototype.shouldTrack_=function(){return!this.error_&&"production"===this.player().delegate().config().env},n.prototype.isExternalSource_=function(){var e,i,n,o,r,s,a,l;if(null==this.externalSource_)for(r=p.embed?document.referrer:document.location.href,this.externalSource_=!0,o=t.parse(r),i=o.host(),l=this.player().delegate().license().hosts,s=0,a=l.length;a>s;s++)if(e=l[s],n=RegExp(""+e),n.test(i)){this.externalSource_=!1;break}return this.externalSource_},n.prototype.videoUID_=function(){var e;return this.player().video().uidOrigin()===r.ParamOrigin.Attribute&&(e=this.player().video().uid(),/^[a-z0-9_\-]{1,64}$/i.test(e))?e:void 0},n.prototype.queueEvent_=function(e,t,i){var n,o,r,s,a,l,u;return this.shouldTrack_()&&(l=this.videoUID_(),null!=l)?(a=this.player(),n=this.isExternalSource_()?"SublimeVideo - External Sources":"SublimeVideo",s=a.video().name()||"untitled",r=""+s+" ("+l+")",this._universalAnalytics?window.ga("send","event",n,e,r,t,{nonInteraction:null!=i}):(o=[""+this.trackerName_+"._trackEvent",n,e,r,t],null!=i&&o.push(i),(u=window._gaq)?u.push(o):void 0)):void 0},n.prototype.queueFullmodeEvent_=function(){return this.queueEvent_("Fullmode enter",null,!0)},n.prototype.queueSourceQualityEvent_=function(){var e;return e=this.player().playingQuality(),"hd"===e&&(e="HD"),this.queueEvent_("Quality select - "+e,null,!0)},n.prototype.playerDidEnd=function(){return this.queueEvent_("Video end",null,!0)},n.prototype.playerDidStart=function(){var e,t,i;return t=window.event,e=null!=t&&("click"===(i=t.type)||"mouseup"===i||"touchend"===i),this.queueEvent_("Video start",null,!e)},n.prototype.playerDidLoadMetadata=function(){return this.queueSourceQualityEvent_()},n.prototype.playerDidChangeQuality=function(){return this.queueSourceQualityEvent_()},n.prototype.playerDidEnterFullWindow=function(){return this.queueFullmodeEvent_()},n.prototype.playerDidEnterFullscreen=function(){return this.queueFullmodeEvent_()},n}(n),h.exports=a,h.exports||u});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("sublime/video/plugins/logo/logo",["core/util","core/image_importer","core/options","graphics/point","graphics/size","graphics/rect","ui/content_mode","ui/tracking_area","ui/view","ui/button","ui/image_view","sublime/video/video_controller_plugin","animations/timer_animation","media/video/video"],function(e,t,i,n,o,r,s,a,l,u,h,p,c,d){var _,y,g,f;return f=e._,g={},y={},_=function(e){function p(){p.__super__.constructor.apply(this,arguments),this.badgeDuration_=10}return __extends(p,e),p.className="BadgeController",p.Visibility={Visible:"visible",Autohide:"autohide"},p.Type={SublimeVideo:"sv",Custom:"custom"},p.kind="logo",p.Position={BottomRight:"bottom-right",BottomLeft:"bottom-left",TopRight:"top-right",TopLeft:"top-left"},p.prototype.defaultOptions=function(){return{visibility:p.Visibility.Autohide,position:p.Position.BottomRight,type:p.Type.SublimeVideo,imageUrl:null,padding:new n(10,10)}},p.prototype.compoundDataSettings=function(){var e;return e=this.defaultAllowedOptions(),{logo:[e.type,e.visibility,e.position,e.linkUrl]}
},p.prototype.defaultAllowedOptions=function(){var e;return e=this.player().video().technology()===d.Technology.YouTube?[p.Position.BottomLeft]:[p.Position.BottomRight],{visibility:{name:"logoVisibility",type:i.OptionType.String,values:[p.Visibility.Autohide,p.Visibility.Visible]},position:{name:"logoPosition",type:i.OptionType.String,values:e},type:{name:"logoType",type:i.OptionType.String,values:[p.Type.SublimeVideo]},linkUrl:{name:"logoLinkUrl",type:i.OptionType.Url},imageUrl:{name:"logoImageUrl",type:i.OptionType.Url,values:[]},padding:{name:"logoPadding",type:i.OptionType.String,values:[]}}},p.prototype.logoImageSize_=function(){var e,t;return t=o.zero(),this.isViewLoaded()&&(this.hasActionOnClick()?(e=this.view().imageView())&&(t=e.imageSize()):t=this.view().imageSize()),t},p.prototype.optimalViewFrame_=function(){var e,t,i,o;return o=this.player().view().bounds().size,e=this.logoImageSize_(),t=this.options_.padding,e.width+=2*t.x,e.height+=2*t.y,i=r.zero(),i.size=e,this.options_.position===p.Position.BottomRight?i.origin=new n(o.width-e.width,o.height-e.height):this.options_.position===p.Position.BottomLeft?i.origin=new n(0,o.height-e.height):this.options_.position===p.Position.TopRight&&(i.origin=new n(o.width-e.width)),i},p.prototype.canMoveFromCurrentFrame=function(){return!this.isMouseOver_},p.prototype.loadView=function(){return this.view_=this.hasActionOnClick()?new u:new h,this.view_.setContentMode(s.Center),this.view_.mouseEntered=f.bind(this,function(){return this.isMouseOver_=!0}),this.view_.mouseExited=f.bind(this,function(){return this.isMouseOver_=!1,this.hideBadgeOnMouseExited_?(this.hideBadgeOnMouseExited_=!1,this.unload()):void 0})},p.prototype.playerDidStop=function(){return clearTimeout(this.badgeTimer_),this.view_?(this.view_.removeAllTrackingAreas(),this.view_.removeFromParent()):void 0},p.prototype.imagePathForCurrentPosition_=function(){var e,t;return this.options_.type===p.Type.SublimeVideo?(e="right",((t=this.options_.position)===p.Position.TopLeft||t===p.Position.BottomLeft)&&(e="left"),this.player().delegate().config().host+("/c/sa/2.6.5/sublimevideo-logo-"+e+"@2x.png")):this.options_.imageUrl},p.prototype.loadLogo_=function(e){var i;return i=new t(this.imagePathForCurrentPosition_()),i.on({end:e}),i.start()},p.prototype.showLogo_=function(){return this.view()._image()?this.presentView_():this.loadLogo_(f.bind(this,function(e,t){return t?(this.view().setImage(t),this.presentView_()):void 0}))},p.prototype.playerDidStart=function(){return this.showLogo_()},p.prototype.playerDidExitFullWindow=function(){return p.__super__.playerDidExitFullWindow.apply(this,arguments),this.cancelFrameAnimation_(),this.layoutBadge_()},p.prototype.playerDidExitFullscreen=function(){return p.__super__.playerDidExitFullscreen.apply(this,arguments),this.cancelFrameAnimation_(),this.layoutBadge_()},p.prototype.playerDidEnterFullWindow=function(){return p.__super__.playerDidEnterFullWindow.apply(this,arguments),this.cancelFrameAnimation_(),this.layoutBadge_()},p.prototype.playerDidEnterFullscreen=function(){return p.__super__.playerDidEnterFullscreen.apply(this,arguments),this.cancelFrameAnimation_(),this.layoutBadge_()},p.prototype.hasActionOnClick=function(){return this.options_.type===p.Type.SublimeVideo||null!=this.options_.linkUrl},p.prototype.appendPluginViewToPlayer_=function(e){return this.player().contentView().append(e,{index:0})},p.prototype.presentView_=function(e){var t,i,n,o,r,s;return null==e&&(e=0),r=this.view(),t=this.player(),n=t.delegate().config().token,this.hasActionOnClick()&&this.view_.onMouseUpInside(f.bind(this,function(){var e;return this.options_.type===p.Type.Custom&&t.emit({"logo:click":null}),e=this.options_.type===p.Type.SublimeVideo?"http://ref.sublimevideo.net/b/"+n:this.options_.linkUrl,e?window.open(e):void 0})),r.setAlpha(e),this.options_.visibility===p.Visibility.Autohide&&(this.badgeTimer_=setTimeout(f.bind(this,this.badgeTimerDidFire_),1e3*this.badgeDuration_)),(s=this.options_.position)===p.Position.TopLeft||s===p.Position.BottomLeft?r.setAutoresizingMask(l.AutoresizingMask.FlexibleTopMargin):r.setAutoresizingMask(l.AutoresizingMask.FlexibleLeftMargin|l.AutoresizingMask.FlexibleTopMargin),i=t.view().bounds().size,this.appendPluginViewToPlayer_(r),this.layoutBadge_(),o=new a(this.view_.bounds(),{trackingInVisibleRect:!0}),this.view_.removeAllTrackingAreas(),this.view_.addTrackingArea(o),r.setAlpha(1,.5)},p.prototype.controls=function(){var e,t,i,n;for(n=this.player().plugins(),t=0,i=n.length;i>t;t++)if(e=n[t],"controls"===e.constructor.kind)return e;return null},p.prototype.layoutBadge_=function(e){var t,i,n,o,r,s,a;return null==e&&(e=0),a=this.view(),o=this.optimalViewFrame_(),(t=this.controls())&&(s=t.view().frame(),t.view().parent()&&!t.view().isHidden()&&s.instersectsRect(o)&&(o.origin.y=s.origin.y-o.size.height)),0>=e?a.setFrame(o):(this.cancelFrameAnimation_(),r=new c,r.startValue=0,r.endValue=1,r.duration=e,i=this.view().frame(),n=o.clone(),n.origin.x-=i.origin.x,n.origin.y-=i.origin.y,n.size.width-=i.size.width,n.size.height-=i.size.height,r.onChangeValue=f.bind(this,function(e){var t;return t=i.clone(),t.origin.x+=e*n.origin.x,t.origin.y+=e*n.origin.y,t.size.width+=e*n.size.width,t.size.height+=e*n.size.height,this.view().setFrame(t)}),this.frameAnimation_=r,r.start())},p.prototype.badgeTimerDidFire_=function(){return this.isMouseOver_?this.hideBadgeOnMouseExited_=!0:this.unload()},p.prototype.playerDidFocusOnVideo=function(){},p.prototype.playerDidUnfocusFromVideo=function(){},p.prototype.validatePosition_=function(){return this.options_.position===p.Position.BottomRight&&this.player().video().technology()===d.Technology.YouTube?this.options_.position="html5"===this.skin_.name?p.Position.TopLeft:p.Position.BottomLeft:void 0},p.prototype.load=function(e,t,i){return null==e&&(e={}),null==t&&(t={}),p.__super__.load.apply(this,arguments),this.controlsTag_="controls",this.validatePosition_(),i?i():void 0},p.prototype.unload=function(){return this.view_&&this.view_.hasParent()?(this.view_.setUserInteractionEnabled(!1),this.view_.removeAllTrackingAreas(),this.view_.setAlpha(0,.8),setTimeout(f.bind(this,function(){return this.view_.removeFromParent()}),800)):void 0},p.prototype.cancelFrameAnimation_=function(){return this.frameAnimation_?(this.frameAnimation_.cancel(),this.frameAnimation_.onChangeValue=null,this.frameAnimation_=null):void 0},p.prototype.playerPluginDidChangeFrame=function(e,t,i){return t.tag===this.controlsTag_?this.isViewLoaded()&&this.view().parent()?this.layoutBadge_(i):void 0:void 0},p}(p),g.exports=_,g.exports||y});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("sublime/video/plugins/poster/start_controller",["sublime/video/video_controller","sublime/video/video_controller_plugin","ui/content_mode","ui/view","ui/button","ui/image_view","core/util","core/image_importer","core/options","media/video/video","sublime/video/plugins/poster/start_view","graphics/context","graphics/rect"],function(e,t,i,n,o,r,s,a,l,u,h,p,c){var d,_,y,g,f,m,v,w;return g=e.VideoController,f=e.VideoOwnership,w=s._,d=p.CurrentGraphicsTechnology,_=p.GraphicsTecnology,v={},m={},y=function(e){function t(){this.view_=null}return __extends(t,e),t.className="StartController",t.condition={UISupport:g.PluginUISupport.None},t.kind="initial",t.OverlayVisibility={Autofade:"autofade",Visible:"visible"},t.prototype.tag="initial",t.prototype.defaultOptions=function(){return{overlayVisibility:t.OverlayVisibility.Autofade,overlayColor:"black",overlayEnable:!0}},t.prototype.compoundDataSettings=function(){var e;return e=this.defaultAllowedOptions(),{initialOverlay:[e.overlayVisibility,e.overlayColor]}},t.prototype.defaultAllowedOptions=function(){return{overlayEnable:{name:"initialOverlayEnable",type:l.OptionType.Boolean},overlayVisibility:{name:"initialOverlayVisibility",type:l.OptionType.String,values:[t.OverlayVisibility.Visible,t.OverlayVisibility.Autofade]},overlayColor:{name:"initialOverlayColor",type:l.OptionType.Color,values:["black"]}}},t.prototype.presentView=function(){var e;return this.view().disabled=!1,this.view().setAlpha(1),this.viewPresented_=!0,w.mobile&&this.view().setNoOverlay(),this.view().setOverlayColor(this.options_.overlayColor),this.view().setFrame(this.player().view().bounds()),this.player().addPluginView(this.view()),this.isYoutube_()&&(e=this.youtubeButton(),e._image()&&!this.youtubeLogoPresented_)?this.presentYoutubeButton():void 0},t.prototype.dismissView=function(){return this.viewPresented_=!1,this.isViewLoaded()?this.view_.removeFromParent():void 0},t.prototype.load=function(e,i,n){return null==e&&(e={}),null==i&&(i={}),t.__super__.load.apply(this,arguments),this.player().isStopped()&&this.player().isReady()&&(this.player().shouldAutoplay()||this.presentView()),n()===n},t.prototype.unload=function(){return this.dismissView()},t.prototype.playerDidInitializeVideo=function(e){return e.isStopped()&&!this.player().shouldAutoplay()?this.presentView():void 0},t.prototype.playerWillStart=function(){},t.prototype.playerDidStart=function(e){return e.videoOwnership()!==f.None&&e.supportsInlinePlayback()?this.dismissView():void 0},t.prototype.playerDidPlay=function(){},t.prototype.playerDidPause=function(e){return e.supportsInlinePlayback()?void 0:(this.view().disabled=!1,this.view().setAlpha(1))},t.prototype.playerDidInterrupt=function(){},t.prototype.playerDidStartPlaying=function(){},t.prototype.playerDidUpdatePlaybackTime=function(){},t.prototype.playerDidUpdateBuffer=function(){},t.prototype.playerWillStop=function(e){return e.videoOwnership()!==f.None&&e.supportsInlinePlayback()?this.presentView():void 0},t.prototype.didTapButton_=function(){var e;return this.buttonTapped_=!0,e=this.player(),e.isStopped()||e.isEnded()?e.start():e.play(),this.player().videoOwnership()!==f.None?(this.view().setAlpha(.5),this.view().disabled=!0):void 0},t.prototype.viewClass=function(){return h},t.prototype.shouldLoadPlayButtonImage_=function(){return d===_.None},t.prototype.playButtomImagePath_=function(){return this.player().delegate().config().host+"/c/sa/2.6.5/play_button.png"},t.prototype.isYoutube_=function(){return this.player().video().technology()===u.Technology.YouTube},t.prototype.youtubeLogoImagePath_=function(){return this.player().delegate().config().host+"/c/sa/2.6.5/yt-badge-50.png"},t.prototype.loadView=function(){var e,t,o,s,l;return this.view_||(o=this.player(),e=this.viewClass(),s=new e,s.setDelegate(this),this.options_.overlayEnable||s.setNoOverlay(),s.setAutoresizingMask(n.AutoresizingMask.FlexibleWidth|n.AutoresizingMask.FlexibleHeight),s.onMouseUpInside(w.bind(this,this.didTapButton_)),this.isYoutube_()&&(l=new a(this.youtubeLogoImagePath_()),l.on({end:w.bind(this,function(e,t){var i;return t&&(i=this.youtubeButton(),i.setImage(t),this.viewPresented_)?this.presentYoutubeButton():void 0})}),l.start()),this.shouldLoadPlayButtonImage_()&&(t=new a(this.playButtomImagePath_()),t.on({end:function(e,t){var o;return t?(o=new r,o.setImage(t),o.setFrame(s.bounds()),o.setAutoresizingMask(n.AutoresizingMask.FlexibleWidth|n.AutoresizingMask.FlexibleHeight),o.setContentMode(i.Center),s.append(o)):void 0}}),t.start()),this.view_=s),this.view_},t.prototype.youtubeButton=function(){var e,t;return this.youtubeButton_||(e=new o,t=this.player().videoOptions().youtubeId,e.onMouseUpInside(function(){return window.open("http://youtube.com/watch?v="+t)}),e.setAutoresizingMask(n.AutoresizingMask.FlexibleLeftMargin|n.AutoresizingMask.FlexibleTopMargin),e.setAlpha(0),this.youtubeButton_=e),this.youtubeButton_},t.prototype.presentYoutubeButton=function(){return this.youtubeLogoPresented_=!0,this.youtubeButton_.setFrame(new c(this.view_.bounds().size.width-86,this.view_.bounds().size.height-40,82,30)),this.view_.append(this.youtubeButton_),this.youtubeButton_.setAlpha(1,1)},t.prototype.pageScaleWillChange_=function(){},t.prototype.pageScaleDidChange_=function(){return this.updateSkin()},t.prototype.playerDidFocusOnVideo=function(){},t.prototype.playerDidUnfocusFromVideo=function(){},t.prototype.mouseDidEnterView=function(e){return this.options_.overlayEnable&&this.options_.overlayVisibility===t.OverlayVisibility.Autofade?e.fadeInOverlay():void 0},t.prototype.mouseDidExitView=function(e){return this.options_.overlayEnable&&this.options_.overlayVisibility===t.OverlayVisibility.Autofade?e.fadeOutOverlay():void 0},t}(t),v.exports=y,v.exports||m}),sublime_.define("sublime/video/plugins/poster/start_controller.sublime_skin",["sublime/sublime_skin","ui/view","graphics/size","graphics/path"],function(e,t,i,n){var o,r;return r={},o={},e.extend({StartController:function(o){var r,s,a,l,u,h,p;return o.setAutoresizingMask(t.AutoresizingMask.FlexibleWidth|t.AutoresizingMask.FlexibleHeight),o.setFrame(o.parent().bounds()),p=o.size(),l=o.playButton(),l.setAutoresizingMask(t.AutoresizingMask.FlexibleLeftMargin|t.AutoresizingMask.FlexibleRightMargin|t.AutoresizingMask.FlexibleTopMargin|t.AutoresizingMask.FlexibleBottomMargin),u=64,l.center({size:new i(u,u),view:o}),h=n.Rect(0,0,u,u,10),h.center(l.size()),r=e.floatingBackgroundLayer(h),s=e.componentLayer(),a=n.Triangle(0,0,31,32),a.center(l.size()),s.setPath(a),l.setLayers([r,s])}}),r.exports||o});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("sublime/video/plugins/poster/start_view",["ui/tracking_area","ui/view","ui/button"],function(e,t,i){var n,o,r;return r={},o={},n=function(i){function n(){n.__super__.constructor.apply(this,arguments),this.imageElement_=null,this.startButton_=null,this.setOverlayDefaultAlpha(.3),this.delegate_=null}return __extends(n,i),n.className="StartView",n.prototype.setDelegate=function(e){return this.delegate_=e},n.prototype.setNoOverlay=function(){return this.noOverlay_=!0,this.overlayView_&&this.overlayView_.parent()?this.overlayView_.removeFromParent():void 0},n.prototype.setOverlayDefaultAlpha=function(e){return this.defaultOverlayAlpha_=e,this.overlayView().setAlpha(this.defaultOverlayAlpha_)},n.prototype.setOverlayColor=function(e){return this.overlayView().css({background:e})},n.prototype.overlayView=function(){return this.overlayView_||(this.overlayView_=new t,this.overlayView_.setAutoresizingMask(t.AutoresizingMask.FlexibleWidth|t.AutoresizingMask.FlexibleHeight),this.overlayView_.css({background:"black"})),this.overlayView_},n.prototype.playButton=function(){return this.playButton_||(this.playButton_=new t,this.playButton_.setUserInteractionEnabled(!1)),this.playButton_},n.prototype.didMoveToRootView=function(){var t;return n.__super__.didMoveToRootView.apply(this,arguments),t=new e(this.bounds(),{trackingInVisibleRect:!0}),this.addTrackingArea(t)},n.prototype.didRemoveFromWindow=function(){return this.fadeOutOverlay()},n.prototype.willRemoveFromRootView=function(){return this.removeAllTrackingAreas()},n.prototype.layoutSubviews=function(){return this.contentView().hasParent()||this.append(this.contentView()),this.contentView().setFrame(this.bounds()),this.noOverlay_||(this.overlayView().hasParent()&&this.overlayView_.parent()!==this.contentView_||this.contentView().append(this.overlayView_,{index:0}),this.overlayView().setFrame(this.bounds())),this.playButton().hasParent()?void 0:this.contentView().append(this.playButton_)},n.prototype.fadeInOverlay=function(){return this.noOverlay_?void 0:this.overlayView().setAlpha(0,.5)},n.prototype.fadeOutOverlay=function(){return this.noOverlay_?void 0:this.overlayView().setAlpha(this.defaultOverlayAlpha_,.5)},n.prototype.mouseEntered=function(){return this.delegate_?this.delegate_.mouseDidEnterView(this):void 0},n.prototype.mouseExited=function(){return this.delegate_?this.delegate_.mouseDidExitView(this):void 0},n}(i),r.exports=n,r.exports||o});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("sublime/video/plugins/sharing/embed_controller",["ui/view","ui/view_controller","sublime/video/plugins/sharing/embed_view"],function(e,t,i){var n,o,r;return r={},o={},n=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return __extends(n,t),n.className="EmbedController",n.prototype.loadView=function(){return this.view_=new i,this.view_.setAutoresizingMask(e.AutoresizingMask.FlexibleLeftMargin|e.AutoresizingMask.FlexibleTopMargin|e.AutoresizingMask.FlexibleRightMargin|e.AutoresizingMask.FlexibleBottomMargin),this.view_.titleLabel().setText("Embed this video")},n.prototype.didTapModalBackgroundView=function(){return this.didTapCloseButton?this.didTapCloseButton():void 0},n.prototype.embedCode=function(){return'<iframe src="'+this.options_.embedUrl+'" width="'+this.options_.embedWidth+'" height="'+this.options_.embedHeight+'" frameborder="0" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe>'},n.prototype.setOptions=function(e){return this.options_=e,this.view().textArea().setText(this.embedCode())},n}(t),r.exports=n,r.exports||o});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("sublime/video/plugins/sharing/embed_view",["ui/view","ui/label","ui/text_area","graphics/size","graphics/point","core/util","graphics/rect"],function(e,t,i,n,o,r,s){var a,l,u,h,p;return l=t.Label,p=r._,h={},u={},a=function(t){function r(){r.__super__.constructor.apply(this,arguments),this.maxSize_=new n(330,235),this.css({cursor:"default"}),this.textAreaInset=new o(15,15),this.marginBetweenTitleAndCodeView=20}return __extends(r,t),r.className="EmbedView",r.prototype.titleLabel=function(){return this.titleLabel_||(this.titleLabel_=new l),this.titleLabel_},r.prototype.codeView=function(){return this.codeView_||(this.codeView_=new e),this.codeView_},r.prototype.textArea=function(){return this.textArea_||(this.textArea_=new i,p.iOS||this.textArea_.setEditable(!1)),this.textArea_},r.prototype.resizeToFit_=function(){var e,t;return e=s.zero(),t=this.parentSize(),e.size.height=Math.min(this.maxSize_.height,t.height-30),e.size.width=Math.min(this.maxSize_.width,t.width-30),e.origin.x=Math.round(.5*(t.width-e.size.width)),e.origin.y=Math.round(.5*(t.height-e.size.height)),this.setFrame(e)},r.prototype.didMoveToRootView=function(){return this.resizeToFit_()},r.prototype.parentDidResize=function(){return this.resizeToFit_()},r.prototype.layoutSubviews=function(){var e,t;return this.size().isZero()?void 0:(this.titleLabel().parent()!==this&&this.append(this.titleLabel()),this.titleLabel().setFrame(new s(0,0,this.size().width,40)),this.codeView().parent()!==this&&this.append(this.codeView()),t=40,e=this.marginBetweenTitleAndCodeView,this.codeView().setFrame(new s(0,t+e,this.size().width,this.size().height-t-e-10)),this.textArea().parent()!==this&&this.codeView().append(this.textArea()),this.textArea().setFrame(this.codeView().bounds().inset(this.textAreaInset.x,this.textAreaInset.y)))},r}(e),h.exports=a,h.exports||u});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("sublime/video/plugins/sharing/sharing_buttons",["sublime/video/video_controller_plugin","core/util","core/options","sublime/video/plugins/sharing/sharing_buttons_view","sublime/video/plugins/sharing/embed_controller","sublime/video/video_controller"],function(e,t,i,n,o,r){var s,a,l,u,h;return h=t._,a=r.VideoController,u={},l={},s=function(e){function t(){this.setHiddenOnMouseExit(!0)}return __extends(t,e),t.className="SharingButtons",t.kind="sharing",t.prototype.defaultOptions=function(){var e,t;return e=this.player(),t=e.view().size(),{twitterUrl:null,facebookUrl:null,embedUrl:null,embedWidth:t.width,embedHeight:t.height}},t.prototype.defaultAllowedOptions=function(){return{defaultText:{name:"sharingDefaultText",type:i.OptionType.String},twitterUrl:{name:"sharingTwitterUrl",type:i.OptionType.String},facebookUrl:{name:"sharingFacebookUrl",type:i.OptionType.String},embedUrl:{name:"sharingEmbedUrl",type:i.OptionType.String},embedWidth:{name:"sharingEmbedWidth",type:i.OptionType.Integer},embedHeight:{name:"sharingEmbedHeight",type:i.OptionType.Integer}}},t.prototype.load=function(e,i,n){return null==e&&(e={}),null==i&&(i={}),t.__super__.load.apply(this,arguments),this.player().isStopped()||this.appendView(),n?n():void 0},t.prototype.unload=function(){return this.embedController_&&(this.dismissEmbedController_(),this.embedController_=null),t.__super__.unload.apply(this,arguments)},t.prototype.appendView=function(){var e,t,i,n,o;return null==this.options_.twitterUrl&&this.view().disableTwitterButton(),null==this.options_.facebookUrl&&this.view().disableFacebookButton(),null==this.options_.embedUrl&&this.view().disableEmbedButton(),n=550,e=420,i=Math.round(.5*(screen.height-e)),t=Math.round(.5*(screen.width-n)),o="scrollbars=yes,resizable=yes,toolbar=no,location=yes,width="+n+",height="+e+",left="+t+",top="+i,this.view().twitterButton().onMouseUpInside(h.bind(this,function(){return window.open("https://twitter.com/intent/tweet?text="+encodeURIComponent(this.options_.defaultText)+"&url="+encodeURIComponent(this.options_.twitterUrl),"intent",o)})),this.view().facebookButton().onMouseUpInside(h.bind(this,function(){return window.open("https://www.facebook.com/share.php?u="+encodeURIComponent(this.options_.facebookUrl),"facebook",o)})),this.view().embedButton().onMouseUpInside(h.bind(this,this.presentEmbedController_)),this.player().addPluginView(this.view())},t.prototype.playerDidStart=function(e){return t.__super__.playerDidStart.apply(this,arguments),this.view().parent()!==e.contentView()?this.appendView():void 0},t.prototype.playerDidStop=function(){return this.view_.removeFromParent()},t.prototype.loadView=function(){return this.view_||(this.view_=new n),this.view_},t.prototype.embedController=function(){return this.embedController_||(this.embedController_=new o,this.embedController_.didTapCloseButton=h.bind(this,this.dismissEmbedController_),this.embedController_.setOptions(this.options_)),this.embedController_},t.prototype.presentEmbedController_=function(){var e;return e=this.player(),this.interruptLockId_=e.interrupt(this,a.InterruptReason.PlayerLostFocus),e.presentModalViewController(this.embedController())},t.prototype.dismissEmbedController_=function(){var e;return e=this.player(),e.dismissModalViewController(),e.releaseInterruptLock(this.interruptLockId_)},t.prototype.playerCanResumePlayback=function(){return this.player().modalViewController()!==this.embedController()},t.prototype.playerDidFocusOnVideo=function(){return t.__super__.playerDidFocusOnVideo.apply(this,arguments)},t.prototype.playerDidUnfocusFromVideo=function(){return t.__super__.playerDidUnfocusFromVideo.apply(this,arguments)},t}(e),u.exports=s,u.exports||l}),sublime_.define("sublime/video/plugins/sharing/sharing_buttons.sublime_skin",["sublime/sublime_skin","core/util","graphics/point","ui/view","graphics/rect","graphics/path","graphics/layer","ui/font"],function(e,t,i,n,o,r,s,a){var l,u,h,p;return p=t._,l=a.Font,h={},u={},e.extend({SharingButtons:function(t,a){var u,h,c,d,_,y,g,f,m,v,w,b,T,x,P,k,z,S,F,M,A;return p.mobile?(d=50,h=150,P=new i(14,14)):(d=38,h=114,P=new i(9,9)),t.buttonMargins=0,t.setAutoresizingMask(n.AutoresizingMask.FlexibleLeftMargin|n.AutoresizingMask.FlexibleBottomMargin),t.setFrame(new o(a.width-d-P.x,P.y,d,h)),u=e.floatingBackgroundLayer(),k=r.Rect(0,0,d,h,4),u.setPath(k),_=s.layer(),_.setColor("#000000"),_.setDropShadow({color:"rgba(255,255,255,0.1)",size:0,distance:1}),y=r.Rect(0,0,d,1),p.mobile?(y.repeat(2,0,49),y.translateBy(0,49)):(y.repeat(2,0,37),y.translateBy(0,37)),_.setPath(y),t.setLayers([u,_]),M=t.twitterButton(),M.setFrame(new o(0,0,d,d)),A=e.componentLayer(),k=r.TwitterLogo(0,0,19),k.center(M.size(),1,0),A.setPath(k),M.setLayers([A]),b=t.facebookButton(),b.setFrame(new o(0,0,d,d-1)),T=e.componentLayer(),k=r.FacebookLogo(0,0,21),k.center(b.size(),0,1),T.setPath(k),b.setLayers([T]),f=t.embedButton(),f.setFrame(new o(0,0,d,d-1)),m=e.componentLayer(),k=new r,k.moveTo(6.98,13.998),k.lineTo(0,6.999),k.lineTo(6.98,0),k.lineTo(9.36,2.386),k.lineTo(4.759,6.999),k.lineTo(9.36,11.612),k.lineTo(6.98,13.998),k.moveTo(15.017,13.998),k.lineTo(12.637,11.612),k.lineTo(17.238,6.999),k.lineTo(13.574,3.326),k.lineTo(12.637,2.386),k.lineTo(15.017,0),k.lineTo(15.955,.94),k.lineTo(21.997,6.999),k.lineTo(15.017,13.998),k.center(f.size(),0,0),m.setPath(k),f.setLayers([m]),w=this.embedController().view(),w.marginBetweenTitleAndCodeView=5,v=w.titleLabel(),x=new l({family:["HelveticaNeue","Helvetica","Arial","sans-serif"],lineHeight:30,size:26,weight:"bold"}),F={color:"#fff","text-shadow":"rgba(0,0,0,0.5) 0 1px 4px","text-align":"center","-webkit-font-smoothing":"antialiased"},v.setFont(x),v.css(F),g=w.codeView(),c=e.floatingBackgroundLayer(),S=s.layer(),S.setColor("rgba(98,98,98,.6)"),S.setStroke({width:1,color:"#000"}),S.setInnerShadow({color:"rgba(0,0,0,0.75)",distance:2,size:10}),S.setDropShadow({color:"rgba(255,255,255,0.1)",size:0,distance:2}),g.setLayers([c,S]),g.on({didUpdateFrame:function(){var e,t;return e=1,k=r.Rect(0,e,g.size().width,g.size().height-e,4),c.setPath(k),t=9,k=r.Rect(t,t+e,g.size().width-2*t,g.size().height-2*t-e,3),S.setPath(k)}}),w.textAreaInset=new i(22,20),z=w.textArea(),F={"font-family":"Monaco, Courrier, monospace","font-size":"13px","line-height":"22px",color:"#fff","text-shadow":"rgba(0,0,0,0.3) 0 -1px 0"},z.css(F)}}),h.exports||u});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("sublime/video/plugins/sharing/sharing_buttons_view",["ui/view","ui/button","core/util"],function(e,t,i){var n,o,r,s;return s=i._,r={},o={},n=function(e){function i(){i.__super__.constructor.apply(this,arguments),this.components_=[],this.twitterButtonEnabled_=!0,this.facebookButtonEnabled_=!0,this.embedButtonEnabled_=!0,this.buttonMargins=5,this.freeLayout=!1,this.loadComponents_()}return __extends(i,e),i.className="SharingButtonsView",i.prototype.didMoveToRootView=function(){return this.layoutSubviews()},i.prototype.twitterButton=function(){return this.twitterButton_||(this.twitterButton_=new t),this.twitterButton_},i.prototype.facebookButton=function(){return this.facebookButton_||(this.facebookButton_=new t),this.facebookButton_},i.prototype.embedButton=function(){return this.embedButton_||(this.embedButton_=new t),this.embedButton_},i.prototype.disableTwitterButton=function(){return this.twitterButtonEnabled_=!1},i.prototype.disableFacebookButton=function(){return this.facebookButtonEnabled_=!1},i.prototype.disableEmbedButton=function(){return this.embedButtonEnabled_=!1},i.prototype.loadComponents_=function(){return this.twitterButtonEnabled_&&this.addComponent_(this.twitterButton()),this.facebookButtonEnabled_&&this.addComponent_(this.facebookButton()),this.embedButtonEnabled_?this.addComponent_(this.embedButton()):void 0},i.prototype.addComponent_=function(e,t){return t?s.insertAt(this.components_,e,t):this.components_.push(e)},i.prototype.layoutSubviews=function(){var e,t,n,o,r,s,a;for(i.__super__.layoutSubviews.apply(this,arguments),n=0,s=this.components_,a=[],o=0,r=s.length;r>o;o++)e=s[o],this.freeLayout||(t=e.frame(),t.origin.y=n,e.setFrame(t),n+=t.size.height+this.buttonMargins),a.push(this.append(e));return a},i}(e),r.exports=n,r.exports||o});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("sublime/video/plugins/social_sharing/social_sharing",["ui/view","ui/button","ui/view_controller","core/util","core/options","sublime/video/video_controller_plugin","sublime/video/plugins/social_sharing/social_sharing_pane","sublime/video/video_controller"],function(e,t,i,n,o,r,s,a){var l,u,h,p,c;return c=n._,u=a.VideoController,p={},h={},l=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return __extends(r,n),r.className="SocialSharing",r.kind="sharing",r.IconStyle={Default:"default",Alternative:"alt"},r.prototype.defaultOptions=function(){return{icon:r.IconStyle.Default,url:null,title:null,text:null,buttons:[s.Buttons.Twitter,s.Buttons.Facebook,s.Buttons.GooglePlus,s.Buttons.Pinterest],linkEnable:!0,twitterVia:null,twitterText:null,image:"auto"}},r.prototype.defaultAllowedOptions=function(){return{icon:{name:"sharingIcon",type:o.OptionType.String,values:[r.IconStyle.Default,r.IconStyle.Alternative]},url:{name:"sharingUrl",type:o.OptionType.String},title:{name:"sharingTitle",type:o.OptionType.String},text:{name:"sharingText",type:o.OptionType.String},image:{name:"sharingImage",type:o.OptionType.String},buttons:{name:"sharingButtons",type:o.OptionType.Array,separator:/\s+/,item:{type:o.OptionType.String,values:[s.Buttons.Twitter,s.Buttons.Facebook,s.Buttons.GooglePlus,s.Buttons.Pinterest]}},linkEnable:{name:"sharingLinkEnable",type:o.OptionType.Boolean,values:[!1,!0]},twitterVia:{name:"sharingTwitterVia",type:o.OptionType.String},twitterText:{name:"sharingTwitterText",type:o.OptionType.String}}},r.prototype.shouldDisplaySharingButton=function(){return this.options_.url&&(this.buttonsOrder().length>0||this.options_.linkEnable)},r.prototype.shouldDisplayLink=function(){return this.options_.linkEnable&&this.options_.url},r.prototype.buttonsOrder=function(){return this.buttonsOrder_||(this.buttonsOrder_=this.options_.buttons),this.buttonsOrder_},r.prototype.load=function(e,t,i){return null==e&&(e={}),null==t&&(t={}),r.__super__.load.apply(this,arguments),this.shouldDisplaySharingButton()&&!this.player().isStopped()&&this.presentSharingButton(),i?i():void 0},r.prototype.unload=function(){return this.paneController_&&(this.dismissPaneController_(),this.paneController_=null),r.__super__.unload.apply(this,arguments)},r.prototype.playerDidStart=function(e){return r.__super__.playerDidStart.apply(this,arguments),this.shouldDisplaySharingButton()&&this.button().parent()!==e.contentView()?this.presentSharingButton():void 0},r.prototype.playerDidStop=function(e){return this.button().parent()===e.contentView()?this.button().removeFromParent():void 0},r.prototype.button=function(){return this.view()},r.prototype.loadView=function(){return this.view_||(this.view_=new t,this.view_.onMouseUpInside(c.bind(this,function(){return this.player().emit({"sharing:click":null}),this.presentSharingPane_()}))),this.view_},r.prototype.presentSharingButton=function(){return this.player().addPluginView(this.button())},r.prototype.didTapButton=function(e){switch(e){case s.Buttons.Twitter:this.shareOnTwitter();break;case s.Buttons.Facebook:this.shareOnFacebook();break;case s.Buttons.GooglePlus:this.shareOnGooglePlus();break;case s.Buttons.Pinterest:this.shareOnPinterest()}return this.player().emit({"sharing:click":[e]})},r.prototype.browserWindowOptions=function(e,t){var i,n;return null==e&&(e=550),null==t&&(t=370),n=Math.round(.5*(screen.height-t)),i=Math.round(.5*(screen.width-e)),"scrollbars=yes,resizable=yes,toolbar=no,location=yes,width="+e+",height="+t+",left="+i+",top="+n},r.prototype.encodedText=function(){return this.encodedString_(this.options_.text||"")},r.prototype.encodedTitle=function(){return this.encodedString_(this.options_.title||"")},r.prototype.encodedString_=function(e){return encodeURIComponent(e)
},r.prototype.encodedUrl=function(){return encodeURIComponent(this.options_.url)},r.prototype.paramString=function(e){var t,i,n;i=[];for(t in e)n=e[t],i.push(""+t+"="+n);return i.join("&")},r.prototype.shareOnFacebook=function(){var e,t,i,n,o;return o={app_id:"469681536424865",display:"popup",redirect_uri:encodeURIComponent("http://test.sublimevideo.net/close-window"),link:this.encodedUrl()},(i=this.encodedTitle())&&(o.name=i),(e=this.encodedText())&&(o.description=e),(t=this.encodedThumbUrl_(s.Buttons.Facebook))&&(o.picture=t),n=this.paramString(o),window.open("https://www.facebook.com/dialog/feed?"+n,"",this.browserWindowOptions())},r.prototype.shareOnGooglePlus=function(){return window.open("https://plus.google.com/share?url="+this.encodedUrl(),"",this.browserWindowOptions())},r.prototype.firstPosterFrame_=function(){var e;return e=this.player().video().imageUrls(),e.length>0?encodeURIComponent(e[0]):void 0},r.prototype.encodedThumbUrl_=function(e){switch(this.options_.image){case"poster":return this.firstPosterFrame_();case"auto":return e===s.Buttons.Pinterest?this.firstPosterFrame_():null;default:return encodeURIComponent(this.options_.image)}},r.prototype.shareOnPinterest=function(){var e,t,i,n;return n={},(e=this.encodedText())&&(n.description=e),n.url=this.encodedUrl(),(t=this.encodedThumbUrl_(s.Buttons.Pinterest))&&(n.media=t),i=this.paramString(n),window.open("http://pinterest.com/pin/create/button/?"+i,"",this.browserWindowOptions(630,250))},r.prototype.textForTwitter_=function(){var e;return e="",this.options_.twitterText?e=this.options_.twitterText:this.options_.text&&(e=this.options_.text),encodeURIComponent(e)},r.prototype.shareOnTwitter=function(){var e,t;return e=this.textForTwitter_(),t=this.options_.twitterVia?"&via="+encodeURIComponent(this.options_.twitterVia):"",window.open("https://twitter.com/intent/tweet?text="+e+t+"&url="+encodeURIComponent(this.options_.url),"",this.browserWindowOptions())},r.prototype.paneController=function(){var t;return this.paneController_||(this.paneController_=new i,t=this.buttonsOrder(),this.paneController_.loadView=c.bind(this.paneController_,function(){return this.view_||(this.view_=new s,this.view_.setAutoresizingMask(e.AutoresizingMask.FlexibleWidth|e.AutoresizingMask.FlexibleHeight),this.view_.setButtonsOrder(t)),this.view_}),this.paneController_.view().setDelegate(this),this.paneController_.view().setLinkEnabled(this.options_.linkEnable),this.paneController_.view().onMouseUpInside(c.bind(this,function(){return this.dismissPaneController_()})),this.shouldDisplayLink()&&(this.paneController_.view().setLinkEnabled(!0),this.paneController_.view().textField().setText(this.options_.url))),this.paneController_},r.prototype.presentSharingPane_=function(){var e;return e=this.player(),this.interruptLockId_=e.interrupt(this,u.InterruptReason.PlayerLostFocus),e.presentModalViewController(this.paneController())},r.prototype.dismissPaneController_=function(){var e;return e=this.player(),e.dismissModalViewController(),e.releaseInterruptLock(this.interruptLockId_)},r.prototype.isValidButton_=function(e){var t,i,n,o;for(i=c.values(s.Buttons),n=0,o=i.length;o>n;n++)if(t=i[n],e===t)return!0},r}(r),p.exports=l,p.exports||h}),sublime_.define("sublime/video/plugins/social_sharing/social_sharing.sublime_skin",["sublime/sublime_skin","sublime/video/plugins/social_sharing/social_sharing","graphics/size","graphics/rect","graphics/point","ui/view","ui/font","graphics/path"],function(e,t,i,n,o,r,s,a){var l,u,h;return l=s.Font,h={},u={},e.extend({SocialSharing:function(s,u){var h,p,c,d,_,y,g,f,m,v,w,b,T,x;return x=new i(38,38),b=n.zero(),T=new o(10,10),b.origin=new o(u.width-x.width-T.x,T.y),b.size=x,s.setAutoresizingMask(r.AutoresizingMask.FlexibleLeftMargin|r.AutoresizingMask.FlexibleBottomMargin),s.setFrame(b),v={"font-style":"normal",color:"#aeaeae","text-shadow":"rgba(0,0,0,0.75) 1px 1px 1px","text-align":"center"},c=new l({lineHeight:20,size:12,weight:"bold"}),f=s,h=e.floatingBackgroundLayer(),g=a.Rect(0,0,x.width,x.height,4),h.setPath(g),m=e.componentLayer(),this.options_.icon===t.IconStyle.Alternative?(g=a.SharingIcon(0,0,f.size().width-21),g.center(f.size())):(g=a.SharingIconAlt(0,0,f.size().width-20),g.center(f.size(),1,-1)),m.setPath(g),f.setLayers([h,m]),y=this.paneController().view(),p=function(t,i){var n,o,r;return o=t.icon(),n=e.componentLayer(),o.on({didUpdateFrame:function(){return g=i(0,0,o.size().height-15),g.center(o.size()),n.setPath(g)}}),o.setLayers([n]),r=t.textLabel(),r.css(v),r.setFont(c)},p(y.twitterButton(),a.TwitterLogo),p(y.facebookButton(),a.FacebookLogo),p(y.googlePlusButton(),a.GooglePlusLogo),p(y.pinterestButton(),a.PinterestLogo),_=e.componentLayer(),w=y.textField(),d=e.inputLayer(),w.on({didUpdateFrame:function(){return g=a.Rect(0,0,w.size().width,w.size().height,4),d.setPath(g),g=a.LinkIcon(0,0,.5*w.size().height),g.centerVertically(w.size(),10,1),_.setPath(g)}}),w.setLayers([d,_]),c=new l({family:["Monaco","Courier","monospace"],lineHeight:40,size:12,weight:"normal"}),v={"font-style":"normal",color:"#fff","text-shadow":"rgba(0,0,0,.75) 0 -1px 0"},w.cssText(v),w.setFont(c)}}),h.exports||u});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("sublime/video/plugins/social_sharing/social_sharing_button",["ui/view","ui/label","ui/button","graphics/rect"],function(e,t,i,n){var o,r,s,a;return o=t.Label,a={},s={},r=function(t){function i(){i.__super__.constructor.apply(this,arguments),this.showTextLabel_=!0}return __extends(i,t),i.className="SocialSharingButton",i.prototype.textLabel=function(){return this.textLabel_||(this.textLabel_=new o),this.textLabel_},i.prototype.icon=function(){return this.icon_||(this.icon_=new e,this.icon_.setUserInteractionEnabled(!1)),this.icon_},i.prototype.setShowTextLabel=function(e){return this.showTextLabel_=e},i.prototype.layoutSubviews=function(){var e,t,i,o;return o=this.size(),this.showTextLabel_?35>o.height-20?(e=this.icon(),e.parent()!==this&&this.append(e),e.setFrame(new n(0,0,o.width,o.height)),this.textLabel().removeFromParent()):(e=this.icon(),e.parent()!==this&&this.append(e),e.setFrame(new n(0,0,o.width,o.height-20)),i=this.textLabel(),i.parent()!==this&&this.append(i),i.setFrame(new n(0,o.height-20,o.width,20))):(e=this.icon(),e.parent()!==this&&this.append(e),t=.7*o.width,e.setFrame(new n(Math.round(.5*(o.width-t)),Math.round(.5*(o.height-t)),t,t)))},i}(i),a.exports=r,a.exports||s});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("sublime/video/plugins/social_sharing/social_sharing_pane",["ui/button","ui/text_field","sublime/video/plugins/social_sharing/social_sharing_button","core/util","graphics/size","graphics/point","graphics/rect"],function(e,t,i,n,o,r,s){var a,l,u,h;return h=n._,u={},l={},a=function(e){function n(){n.__super__.constructor.apply(this,arguments),this.allButtons_={},this.allButtons_[n.Buttons.Twitter]=this.twitterButton(),this.allButtons_[n.Buttons.Facebook]=this.facebookButton(),this.allButtons_[n.Buttons.GooglePlus]=this.googlePlusButton(),this.allButtons_[n.Buttons.Pinterest]=this.pinterestButton(),this.linkEnabled_=!1}return __extends(n,e),n.className="SocialSharingPane",n.Buttons={Twitter:"twitter",Facebook:"facebook",GooglePlus:"google+",Pinterest:"pinterest"},n.prototype.setDelegate=function(e){return this.delegate_=e},n.prototype.twitterButton=function(){return this.twitterButton_||(this.twitterButton_=new i,this.twitterButton_.textLabel().setText("Twitter"),this.twitterButton_.onMouseUpInside(h.bind(this,function(){return this.delegate_?this.delegate_.didTapButton(n.Buttons.Twitter):void 0}))),this.twitterButton_},n.prototype.facebookButton=function(){return this.facebookButton_||(this.facebookButton_=new i,this.facebookButton_.textLabel().setText("Facebook"),this.facebookButton_.onMouseUpInside(h.bind(this,function(){return this.delegate_?this.delegate_.didTapButton(n.Buttons.Facebook):void 0}))),this.facebookButton_},n.prototype.googlePlusButton=function(){return this.googlePlusButton_||(this.googlePlusButton_=new i,this.googlePlusButton_.textLabel().setText("Google+"),this.googlePlusButton_.onMouseUpInside(h.bind(this,function(){return this.delegate_?this.delegate_.didTapButton(n.Buttons.GooglePlus):void 0}))),this.googlePlusButton_},n.prototype.pinterestButton=function(){return this.pinterestButton_||(this.pinterestButton_=new i,this.pinterestButton_.textLabel().setText("Pinterest"),this.pinterestButton_.onMouseUpInside(h.bind(this,function(){return this.delegate_?this.delegate_.didTapButton(n.Buttons.Pinterest):void 0}))),this.pinterestButton_},n.prototype.textField=function(){return this.textField_||(this.textField_=new t,h.mobile||this.textField_.setEditable(!1),this.textField_.setShowIcon(!0)),this.textField_},n.prototype.setButtonsOrder=function(e){return this.buttonsOrder_=e},n.prototype.setLinkEnabled=function(e){return this.linkEnabled_=e},n.prototype.didMoveToParent=function(){return this.parent()?this.setFrame(this.parent().bounds()):void 0},n.prototype.layoutSubviews=function(){var e,t,i,n,a,l,u,h,p,c,d,_,y,g,f,m,v,w,b,T,x;for(v=this.size(),y=30,t=this.buttonsOrder_.length,h=110,l=Math.min(h,Math.round((v.width-2*y)/4)),m=l/h,a=new o(l,90*m),f=new o(Math.min(550,v.width-2*y),Math.max(35,40*m)),u=30,220>v.height&&(u-=Math.min(10,220-v.height)),c=t*a.width,d=0,t>0&&(d+=a.height),t>0&&this.linkEnabled_>0&&(d+=u),this.linkEnabled_>0&&(d+=f.height),n=new r(Math.round(.5*(this.size().width-c)),Math.round(.5*(v.height-d))),w=t>0?n.y+a.height+u:Math.round(.5*(v.height-d)),g=new r(Math.round(.5*(this.size().width-f.width)),w),x=this.buttonsOrder_,_=b=0,T=x.length;T>b;_=++b)i=x[_],e=this.allButtons_[i],e&&(p=s.zero(),p.size=a,p.origin.x=n.x+a.width*_,p.origin.y=n.y,e.setFrame(p),e.parent()!==this&&this.append(e));return this.linkEnabled_&&(p=s.zero(),p.origin=g,p.size=f,this.textField().setFrame(p),this.textField().parent()!==this)?this.append(this.textField()):void 0},n}(e),u.exports=a,u.exports||l});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("sublime/video/plugins/stats/stats_controller",["core/util","sublime/video/video_controller_plugin","sublime/stats_util","sublime/video/video_controller","sublime/stats/video_start_request","sublime/stats/stats_sender"],function(e,t,i,n,o,r){var s,a,l,u,h;return h=e._,a=n.VideoController,u={},l={},s=function(e){function t(){t.__super__.constructor.apply(this,arguments),this.licenseTypeParam_=null,this.siteToken_=null}return __extends(t,e),t.className="StatsController",t.condition={UISupport:a.PluginUISupport.None},t.kind="stats",t.prototype.load=function(e,n,o){var r;return null==e&&(e={}),null==n&&(n={}),t.__super__.load.apply(this,arguments),r=this.player().delegate(),this.licenseTypeParam_=i.licenseTypeToParam(r.licenseType()),this.siteToken_=r.config().token,o?o():void 0},t.prototype.playerDidStartPlaying=function(e){return e.video().metadata()&&!this.viewRequestSent_?this.sendViewRequest_(e):void 0},t.prototype.playerDidLoadMetadata=function(e){return!e.isStopped()||this.viewRequestSent_?this.sendViewRequest_(e):void 0},t.prototype.playerDidEnd=function(){return this.viewRequestSent_=!1},t.prototype.playerDidStop=function(){return this.viewRequestSent_=!1},t.prototype.sendViewRequest_=function(e){var t;return this.viewRequestSent_=!0,t=new o(e.delegate().delegate(),e),r.sharedInstance().send(t)},t}(t),u.exports=s,u.exports||l});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("sublime/video/plugins/subtitles/subtitles",["ui/view","core/util","sublime/video/video_controller_plugin","sublime/video/plugins/subtitles/subtitles_view","sublime/video/plugins/subtitles/text_track","graphics/rect","animations/timer_animation"],function(e,t,i,n,o,r,s){var a,l,u,h;return h=t._,u={},l={},a=function(t){function i(){i.__super__.constructor.apply(this,arguments),this.tracks_=[]}return __extends(i,t),i.className="Subtitles",i.kind="subtitles",i.prototype.load=function(e,t,n){return null==e&&(e={}),null==t&&(t={}),i.__super__.load.apply(this,arguments),this.setTracks_(),this.player().isStopped()||this.showDefaultTrack(),n?n():void 0},i.prototype.unload=function(){return this.turnOff(),this.view().setDelegate(null),this.cancelFrameAnimation_(),this.tracks_=null,i.__super__.unload.apply(this,arguments)},i.prototype.defaultTrack=function(){return this.defaultTrack_},i.prototype.setTracks_=function(){var e,t,i,n,r,s;for(this.defaultTrack_=null,i=h.toArray(this.player()._element().getElementsByTagName("track")),s=[],n=0,r=i.length;r>n;n++)t=i[n],e=new o(t),e.kind()===o.Kind.Subtitles||e.kind()===o.Kind.Captions?(e.isDefault()&&(this.defaultTrack_=e),s.push(this.tracks_.push(e))):s.push(void 0);return s},i.prototype.tracks=function(){return this.tracks_},i.prototype.turnOff=function(){return this.selectedTrack_=null,this.view().setHidden(!0),this.emit({off:null})},i.prototype.turnOn=function(){return this.selectTrack(this.tracks()[0])},i.prototype.selectedTrack=function(){return this.selectedTrack_},i.prototype.showDefaultTrack=function(){return this.defaultTrack()?this.selectTrack(this.defaultTrack()):void 0},i.prototype.selectTrack=function(e,t){return e.load(h.bind(this,function(i){return e.readyState()===o.ReadyState.Loaded&&(this.selectedTrack_=e,this.emit({didSelectTrack:[e,h.indexOf(this.tracks_,e)]}),this.player().video().hasLoadedMetadata()?this.appendView():this.waitingForMetadata_=!0),i?this.emit({didSelectTrack:[null,null,i]}):this.emit({didSelectTrack:[e,h.indexOf(this.tracks_,e)]}),t?t(i):void 0}))},i.prototype.playerDidLoadMetadata=function(){return this.waitingForMetadata_?(this.waitingForMetadata_=!1,this.appendView()):void 0},i.prototype.playerDidStart=function(){return this.showDefaultTrack()},i.prototype.playerDidUpdatePlaybackTime=function(){var e;return e=this.player().playbackTime(),this.updateTextTrackCueForTime(e)},i.prototype.playerDidFocusOnVideo=function(){},i.prototype.playerDidUnfocusFromVideo=function(){},i.prototype.controls=function(){var e,t,i,n;for(n=this.player().plugins(),t=0,i=n.length;i>t;t++)if(e=n[t],"controls"===e.constructor.kind)return e;return null},i.prototype.playerPluginDidChangeFrame=function(e,t,i){return"controls"===t.constructor.kind?this.layoutView_(i):void 0},i.prototype.loadView=function(){return this.view_||(this.view_=new n,this.view_.setAutoresizingMask(e.AutoresizingMask.FlexibleWidth|e.AutoresizingMask.FlexibleTopMargin),this.view_.setUserInteractionEnabled(!1),this.view_.setDelegate(this),this.view_.prepareForStyleInjection(this.player().id())),this.view_},i.prototype.appendView=function(){return this.view().setHidden(!1),this.layoutView_(),this.view().hasParent()?void 0:this.player().addPluginView(this.view())},i.prototype.lineHeightForSubtitlesView=function(){var e,t,i;return i=this.player().video(),t=16,e=this.player().video().size().height/t},i.prototype.layoutView_=function(e){var t,i,n,o,a,l,u,p,c,d;return u=this.player().size(),p=.8,l=(1-p)*u.width/2,d=u.width*p,c=u.height,t=this.controls(),t&&!t.view().isHidden()&&(c-=t.view().bounds().size.height),c-=10,o=new r(l,0,d,c),e?(this.cancelFrameAnimation_(),a=new s,a.startValue=0,a.endValue=1,a.duration=e,i=this.view().frame(),n=o.clone(),n.origin.x-=i.origin.x,n.origin.y-=i.origin.y,n.size.width-=i.size.width,n.size.height-=i.size.height,a.onChangeValue=h.bind(this,function(e){var t;return t=i.clone(),t.origin.x+=e*n.origin.x,t.origin.y+=e*n.origin.y,t.size.width+=e*n.size.width,t.size.height+=e*n.size.height,this.view().setFrame(t)}),this.frameAnimation_=a,a.start()):(this.cancelFrameAnimation_(),this.view().setFrame(o))},i.prototype.cancelFrameAnimation_=function(){return this.frameAnimation_?(this.frameAnimation_.cancel(),this.frameAnimation_.onChangeValue=null,this.frameAnimation_=null):void 0},i.prototype.playerDidExitFullWindow=function(){return i.__super__.playerDidExitFullWindow.apply(this,arguments),this.cancelFrameAnimation_()},i.prototype.playerDidExitFullscreen=function(){return i.__super__.playerDidExitFullscreen.apply(this,arguments),this.cancelFrameAnimation_()},i.prototype.updateTextTrackCueForTime=function(e){var t,i,n,o,r,s,a;if(this.selectedTrack_){for(e=.01*Math.round(100*e),o=this.player(),n=this.selectedTrack_.cues(),t=null,s=0,a=n.length;a>s;s++)if(i=n[s],e>=i.startTime&&i.endTime>e){t=i;break}return t!==this.activeCue_?(r=t?t.text():"",this.view().setText(r),this.activeCue_=t):void 0}},i}(i),u.exports=a,u.exports||l}),sublime_.define("sublime/video/plugins/subtitles/subtitles.sublime_skin",["sublime/sublime_skin"],function(e){var t,i;return i={},t={},e.extend({Subtitles:function(){}}),i.exports||t});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("sublime/video/plugins/subtitles/subtitles_pane",["ui/view","ui/button","ui/list_view"],function(e,t,i){var n,o,r;return r={},o={},n=function(e){function n(){n.__super__.constructor.apply(this,arguments)}return __extends(n,e),n.className="SubtitlesPane",n.prototype.offButton=function(){return this.offButton_||(this.offButton_=new t,this.offButton_.label().setText("Off"),this.offButton_.setDisableLabelAutoLayout(!0)),this.offButton_},n.prototype.listView=function(){return this.listView_||(this.listView_=new i),this.listView_},n.prototype.layoutSubviews=function(){return this.listView().parent()!==this&&this.append(this.listView()),this.offButton().parent()!==this&&this.append(this.offButton()),n.__super__.layoutSubviews.apply(this,arguments)},n}(e),r.exports=n,r.exports||o});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("sublime/video/plugins/subtitles/subtitles_view",["ui/font","ui/style","ui/view","core/dom","core/util"],function(e,t,i,n,o){var r,s,a,l,u;return r=e.Font,u=o._,l={},a={},s=function(e){function o(){o.__super__.constructor.apply(this,arguments),this.css({"pointer-events":"none"})}return __extends(o,e),o.className="SubtitlesView",o.prototype.prepareForStyleInjection=function(e){var i;return i="sublimevideo-subtitles"+e,this.className_=i,n.addClass(this._element(),i),this.font_=new r,this._styleTag_=t.injectStyle(t.cssStringForHash(this.font_._toCss(),i,{children:!0}))},o.prototype.className=function(){return this.className_},o.prototype.setDelegate=function(e){return this.delegate_=e},o.prototype.delegate=function(){return this.delegate_},o.prototype.setFont=function(e){var i;return this.font_=e,i=this.font_._toCss(),t.setStyleToTag(this._styleTag_,t.cssStringForHash(i,this.className(),{children:!0}))},o.prototype.font=function(){return this.font_},o.prototype.setText=function(e){var t,i,o;return this.text_=e,o=this._textEl(),i=o.parentNode,i.parentNode!==this._element()&&n.appendChild(this._element(),i),t=function(){return o.innerHTML=e},u.IE?setTimeout(t,0):t(),u.isEmptyString(e)?n.removeNode(i):this.layoutSubviews()},o.prototype.text=function(){return this.text_},o.prototype._textEl=function(){var e;return this._textEl_||(this._textWrapEl_=n.create("span"),i.setCssToElement(this._textWrapEl_,{display:"block",position:"absolute",left:"0",bottom:"0",width:"100%"}),this._textEl_=n.create("span"),e={"font-size":"100%","font-style":"normal","word-wrap":"normal",color:"#fff","white-space":"normal","text-align":"center",display:"inline","-webkit-font-smoothing":"antialiased"},u.extend(e,{"background-color":"rgba(10,10,10, 0.8)",padding:"3px 10px 5px","border-radius":"5px",display:"inline-block"}),u.ltIE9&&u.extend(e,{"background-color":"rgb(10,10,10)"}),i.setCssToElement(this._textEl_,e),n.appendChild(this._textWrapEl_,this._textEl_)),this._textEl_},o.prototype.layoutSubviews=function(){var e,t,n;return this.parent()?(t=this.delegate().lineHeightForSubtitlesView(this),n=1.32,e=Math.round(1*t/n),this.font_.size!==e&&this.font_.lineHeight!==t?(this.font_.size=e,this.font_.lineHeight=t,this.setFont(this.font_),i.addCssToElement(this._textEl(),{"border-radius":""+.22*t+"px"})):void 0):void 0},o}(i),l.exports=s,l.exports||a}),sublime_.define("sublime/video/plugins/subtitles/text_track",["core/util","core/dom","core/url","core/ajax","sublime/video/plugins/subtitles/text_track_parser"],function(e,t,i,n,o){var r,s,a,l,u;return u=e._,r=n.Ajax,l={},a={},s=function(){function e(n){var o,r;this._element_=n,this.readyState_=e.ReadyState.None,this.kind_=this.extractKind_(n),this.src_=i.absolutePath(t.attribute(n,"src")),r=t.attribute(n,"srclang"),this.languageCode_=r&&!u.isEmptyString(r)?r.split("-")[0]:null,o=t.attribute(n,"label"),o||(o=this.language()||""),this.label_=o,this.isDefault_=null!==n.getAttribute("default"),this.mode_=e.Mode.Disabled,this.activeCues_=[],this.cues_=[]}return e.className="TextTrack",e.ReadyState={None:0,Loading:1,Loaded:2,Error:3},e.Mode={Disabled:0,Hidden:1,Showing:2},e.Kind={Subtitles:"subtitles",Captions:"captions",Descriptions:"descriptions",Chapters:"chapters",Metadata:"metadata"},e.Language={af:"Afrikaans",ar:"Arabic",bg:"Bulgarian",bn:"Bengali",bs:"Bosnian",ca:"Catalan",cs:"Czech",da:"Danish",de:"German",el:"Greek",en:"English",es:"Spanish",fa:"Persian",fi:"Finnish",fr:"French",gu:"Gujarati",he:"Hebrew",hi:"Hindi",hr:"Croatian",hu:"Hungarian",id:"Indonesian",is:"Icelandic",it:"Italian",ja:"Japanese",kn:"Kannada",ko:"Korean",lv:"Latvian",ml:"Malayalam",mr:"Marathi",nb:"Norwegian",nl:"Dutch",or:"Oriya",pa:"Punjabi",pl:"Polish",pt:"Portuguese",ru:"Russian",si:"Sinhalese",sk:"Slovak",sq:"Albanian",sr:"Serbian",sv:"Swedish",ta:"Tamil",te:"Telugu",th:"Thai",uk:"Ukrainian",zh:"Chinese"},e.prototype.extractKind_=function(i){var n,o,r,s;if(o=t.attribute(i,"kind")){s=e.Kind;for(n in s)if(r=s[n],o===r)return o}return e.Kind.Subtitles},e.prototype._element=function(){return this._element_},e.prototype.cues=function(){return this.cues_},e.prototype.readyState=function(){return this.readyState_},e.prototype.kind=function(){return this.kind_},e.prototype.src=function(){return this.src_},e.prototype.language=function(){return this.language_||(this.language_=e.Language[this.languageCode_]),this.language_},e.prototype.label=function(){return this.label_},e.prototype.isDefault=function(){return this.isDefault_},e.prototype.load=function(t){return this.readyState_===e.ReadyState.None?(this.readyState_=e.ReadyState.Loading,r.get(this.src_,u.bind(this,function(i,n){return i||null==n?(this.error_=i,this.readyState_=e.ReadyState.Error):(this.cues_=o.parse(n),this.readyState_=e.ReadyState.Loaded),t?t(i):void 0}))):e.ReadyState.Loaded&&t?t(this.error_):void 0},e}(),l.exports=s,l.exports||a}),sublime_.define("sublime/video/plugins/subtitles/text_track_cue",[],function(){var e,t,i;return i={},t={},e=function(){function e(e,t,i){this.startTime=e,this.endTime=t,this.settings_=i}return e.className="TextTrackCue",e.parse=function(t){return e.parseTimingsAndSettings(t)},e.parseTimingsAndSettings=function(t){var i,n,o,r,s;return s=/^(\d{2})?:?(\d{2}):(\d{2})[.,](\d+)\s+--\>\s+(\d{2})?:?(\d{2}):(\d{2})[.,](\d+)\s*(.*)/,n=t.match(s),n?(r=e.timeComponentsToSeconds(n.slice(1,5)),i=e.timeComponentsToSeconds(n.slice(5,9)),o=e.parseSettings(n[9]),i>r?new e(r,i,o):null):null},e.parseSettings=function(e){return e},e.timeComponentsToSeconds=function(e){return 3600*parseInt(e[0]||0,10)+60*parseInt(e[1]||0,10)+parseInt(e[2]||0,10)+parseFloat("0."+(e[3]||0))},e.prototype.setText=function(e){return this.text_=e},e.prototype.text=function(){return this.text_},e}(),i.exports=e,i.exports||t}),sublime_.define("sublime/video/plugins/subtitles/text_track_parser",["core/util","sublime/video/plugins/subtitles/text_track_cue"],function(e,t){var i,n,o,r;return r=e._,o={},n={},i=function(){function e(){}return e.className="TextTrackParser",e.parse=function(e){var i,n,o,s,a,l;for(n=[],r.ltIE9?(a=e.split("\r\n"),2>a.length&&(a=e.split("\n"),2>a.length&&(a=e.split("\r")))):a=e.split(/\r\n?|\n/),o=0;a.length>o;){if(s=a[o],-1!==s.indexOf("-->")){for(i=t.parse(s),o++,l=[];""!==a[o]&&void 0!==a[o]&&-1===a[o].indexOf("-->");)l.push(a[o]),o++;i&&(i.setText(l.join("<br>")),n.push(i))}o++}return n},e}(),o.exports=i,o.exports||n});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},__indexOf=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};sublime_.define("sublime/video/video_app_plugin",["core/util","core/dom","sublime/license_validator","core/options","sublime/api","sublime/app_plugin","sublime/video/video_controller","ui/content_mode","ui/event","ui/view","graphics/rect","graphics/size","media/video/video","sublime/video_manager","sublime/stats/stats_sender","sublime/stats/video_load_request","sublime/stats/stats_responder"],function(e,t,i,n,o,r,s,a,l,u,h,p,c,d,_,y,g){var f,m,v,w,b,T,x,P,k;return k=e._,f=o.Api,v=o.DeprecatedApi,m=r.AppPlugin,T=s.VideoController,w=l.Event,P={},x={},b=function(e){function o(){var e,t;o.__super__.constructor.apply(this,arguments),e=g.sharedInstance(),e.setDelegate(this),t=_.sharedInstance(),t.on({response:function(t){return e.handleResponse(t)}}),this.userInfo_=[],this.simultaneousPlaybacksAllowed_=!1}return __extends(o,e),o.className="VideoAppPlugin",o.prototype.defaultOptions=function(){return{forceFlash:!1,fullmodePriority:u.Fullmode.Screen,onEnd:T.OnEndAction.Nothing,fullmodeEnable:!0,volumeEnable:!0,autoplay:!1,kit:this.defaultKit().name}},o.prototype.defaultAllowedOptions=function(){return{forceFlash:{name:"forceFlash",type:n.OptionType.Boolean,values:[!1,!0]},fullmodePriority:{name:"fullmodePriority",type:n.OptionType.String,values:[u.Fullmode.Screen,u.Fullmode.Window]},fullmodeEnable:{name:"fullmodeEnable",type:n.OptionType.Boolean,values:[!1,!0]},onEnd:{name:"onEnd",type:n.OptionType.String,values:[T.OnEndAction.Nothing,T.OnEndAction.Replay,T.OnEndAction.Stop]},volumeEnable:{name:"volumeEnable",type:n.OptionType.Boolean,values:[!1,!0]},autoplay:{name:"autoplay",type:n.OptionType.Boolean,values:[!1,!0]},kit:{name:"playerKit",type:n.OptionType.String,values:k.keys(this.delegate().availableKits())}}},o.prototype.playerForUID=function(e){var t,i,n,o,r;for(r=this.controllers_,n=0,o=r.length;o>n;n++)if(t=r[n],(i=t.video())&&i.uid()===e)return t},o.prototype.insertPlayerAfterElement_=function(e,t,i){return e.appendTo(t,i)},o.prototype.sendLoadStats=function(e){var t,i,n,o,r;for(r=[],n=0,o=e.length;o>n;n++)t=e[n],i=new y(this.delegate(),t),r.push(_.sharedInstance().send(i));return r},o.prototype.didPreparedController=function(e){return o.__super__.didPreparedController.apply(this,arguments),e?this.sendLoadStats([e]):void 0},o.prototype.isMainOrExtraLicense=function(){return this.licenseType()===i.LicenseType.Main||this.licenseType()===i.LicenseType.Extra},o.prototype.main=function(e){var i,n,o,r,s,a,l,u,h,p,c,d;if(this.playerPlugins_=k.values(this.defaultKit().plugins.videoPlayer.plugins),this.exportDeprecatedAPI_(),this.exportAPI_(),i=[],s=t.elementsByTagNameAndClass("video","sublime"),o=s.length,n=null,r=null,1>s.length){if(e)return e()}else{for(a=[],l=0,h=s.length;h>l;l++)d=s[l],t.hasClass(d,"lightbox")||t.hasClass(d,"zoom")||a.push(d);if(!(1>a.length)){for(c=[],u=0,p=a.length;p>u;u++)d=a[u],c.push(this.prepareControllerForElement(d,{append:!0},k.bind(this,function(t){return o--,this.controllers_.push(t),t&&i.push(t),t&&this.emitAPIEvent("ready",t.API()),0===o&&(this.sendLoadStats(i),e)?e():void 0})));return c}if(e)return e()}},o.prototype.setPositioningFromElement_=function(e,t){var i,n,o;return n=function(e,t){var i;return i=k.style(e,"margin-"+t),k.isEmptyString(i)?k.computedStyle(e,"margin-"+t):i},i={},k.extend(i,{display:"block",marginTop:n(t,"top"),marginBottom:n(t,"bottom"),marginLeft:n(t,"left"),marginRight:n(t,"right")}),o=k.computedStyle(t,"position"),"static"!==o&&k.extend(i,{top:k.computedStyle(t,"top"),bottom:k.computedStyle(t,"bottom"),left:k.computedStyle(t,"left"),right:k.computedStyle(t,"right")}),e.setMandatoryCss(i)},o.prototype.setSizingFromElement_=function(e,i,n){var o,r,s,l,u,c,d,_,y;return e.css({position:"relative"}),s=h.zero(),u=t.data(i),o=u.autoresize,r=["fit","fill"],!n||__indexOf.call(r,o)>=0||this.setPositioningFromElement_(e,i),_=p.defaultSize(),"fill"===o?(c=k.contentSize(i.parentNode),_.width=c.width,_.height=c.height,e.setContentMode(a.ScaleToFill)):(y=i.getAttribute("width"),/^\d+(\.\d*)?(px)?$/.test(y)&&y>0&&(_.width=parseFloat(y)),l=i.getAttribute("height"),/^\d+(\.\d*)?(px)?$/.test(l)&&l>0&&(_.height=parseFloat(l)),"fit"===o&&(c=k.contentSize(i.parentNode),d=_.height/_.width,c.width>0&&d>0&&(_.width=c.width,_.height=c.width*d),e.setContentMode(a.ScaleAspectFit))),s.size=_,e.setFrame(s)},o.prototype._validElement=function(e){return"VIDEO"===t.nodeName(e)?e:void 0},o.prototype.prepareControllerForElement=function(e,i,n){var o,r,s,a,l,u,h,p;return null==i&&(i={}),r=i.append,a=e.parentNode,h=t.previousElementSibling(e),p=this.isSingleUIElement(e),s={parentNode:a,prevChild:h,singleUIElement:p,forcedFullwindow:p},this.userInfo_.push(s),l=new T,u=l.view(),this.setSizingFromElement_(u,e,r),r&&u.appendTo(a,{afterChild:h}),l.setDelegate(this),s.content=l,p&&(this.installSingleUIElementStyle(),l.enterFullWindow()),this.delegate_.isLicenseValid()||(o=this.licenseAlert(),l.abortWithAlert(o)),l.setVideoForElement(e,k.bind(this,function(){return n?n(l):void 0}))},o.prototype.infoForPlayer=function(e){var t,i,n,o;for(o=this.userInfo_,i=0,n=o.length;n>i;i++)if(t=o[i],t.content===e)return t},o.prototype.canExitFullwindow=function(e){var t;return t=this.infoForPlayer(e),!(t&&t.forcedFullwindow)},o.prototype.playerWillStartPlaying=function(e){var t,i,n,o,r;if(!this.simultaneousPlaybacksAllowed_){for(o=this.controllers_,r=[],i=0,n=o.length;n>i;i++)t=o[i],e!==t?t.isPlaying()||t.isInterrupted()?r.push(t.pause()):r.push(void 0):r.push(void 0);return r}},o.prototype.playerDidPause=function(e){return this.lastPausedPlayer_=e},o.prototype.playerDidStart=function(e){var t,i,n,o,r;for(o=this.onStartObservers_,r=[],i=0,n=o.length;n>i;i++)t=o[i],r.push(t(this.svDict_(e)));return r},o.prototype.playerDidEndPlaying=function(e){var t,i,n,o,r;for(o=this.onEndObservers_,r=[],i=0,n=o.length;n>i;i++)t=o[i],r.push(t(this.svDict_(e)));return r},o.prototype.playerDidStop=function(e){var t,i,n,o,r;for(o=this.onStopObservers_,r=[],i=0,n=o.length;n>i;i++)t=o[i],r.push(t(this.svDict_(e)));return r},o.prototype.exportAPI_=function(){return this.delegate_.isLicenseValid()?(f("player",this,this.APIObjectForElement),f("players.on",this,this.onAPIEvent_)):void 0},o.prototype.exportDeprecatedAPI_=function(){return this.onStartObservers_=[],this.onEndObservers_=[],this.onStopObservers_=[],this.delegate_.isLicenseValid()&&(v("pause",this,this.pauseAllVideos_),v("play",this,this.playVideo_),v("stop",this,this.stopAllVideos_),v("onStart",this,this.addOnStartObserver_),v("onEnd",this,this.addOnEndObserver_),v("onStop",this,this.addOnStopObserver_)),v("resize",this,this.resizeVideo_),v("prepare",this,this.prepareVideo_),v("prepareAndPlay",this,this.prepareAndPlayVideo_),v("unprepare",this,this.unprepareVideo_)},o.prototype.prepareAndPlayVideo_=function(e){return this.prepareVideo_(e,{autoplay:!0})
},o.prototype.prepareVideo_=function(e,i){var n,o;return null==i&&(i={}),o=t.element(e),o&&(t.hasClass(o,"lightbox")||t.hasClass(o,"zoom"))?(n=t.previousElementSibling(o),n&&"A"===t.nodeName(n)&&this.delegate_.prepare_(n,function(e){return e&&i.autoplay?e.open():void 0})):this.prepareElement(e,k.bind(this,function(t,n){var o;if(t);else if(o=(new Date).getTime(),i.autoplay&&(n.canPlayWithoutUserInteration()||w.userDidClick()))return this.playVideo_(e)})),k.undef},o.prototype.unprepareController=function(e){var i,n,r,s,a,l,h;return o.__super__.unprepareController.apply(this,arguments),e?(e.stop(),e===this.lastPausedPlayer_&&(this.lastPausedPlayer_=null),a=e.view()._element(),h=e.video()._videoElement(),u.addCssToElement(h,{display:"none"}),i=this.infoForPlayer(e),s=i.parentNode,l=i.prevChild,document.defaultView&&document.defaultView.getComputedStyle(document.body,null)["background-attachment"],n=k.clone(e.initialVideoAttributes()),e.release(),r=d.sharedInstance().originalElement(h),r!==h?(e.resetVideoAttributes(r,n),t.removeNode(h),h.src=""):l?t.insertSiblingAfter(r,l):s&&t.insertChildAt(s,r,0),t.removeNode(a),k.remove(this.userInfo_,i),r.style.display="none"):void 0},o.prototype.unprepareVideo_=function(e){var t,i,n,o,r;if(null!=e)return t=this.existingController(e),this.unprepareController(t);for(r=k.clone(this.controllers_),n=0,o=r.length;o>n;n++)i=r[n],this.unprepareVideo_(i.video()._videoElement());return this.userInfo_=[]},o.prototype.playVideo_=function(e){var i,n,o,r;if(i=this.existingController(e)){if(i.isPaused())return i.play();if(i.isStopped()&&i.canPlayViaAPI())return i.start()}else{if(r=t.element(e),(t.hasClass(r,"lightbox")||t.hasClass(r,"zoom"))&&(o=t.previousElementSibling(r),o&&"A"===t.nodeName(o)&&(n=this.delegate_.APIObject_(o),n&&n.open)))return n.open(),void 0;if(this.lastPausedPlayer_)return this.lastPausedPlayer_.play(),this.lastPausedPlayer_=null}},o.prototype.svDict_=function(e){var t;return t=e.video(),t?{element:e._element(),mode:t.technology()===c.Technology.HTML5?"html5":"flash"}:void 0},o.prototype.stopAllVideos_=function(){var e,t,i,n;for(n=this.controllers_,t=0,i=n.length;i>t;t++)e=n[t],e.stop();return 1},o.prototype.pauseAllVideos_=function(){var e,t,i,n;for(n=this.controllers_,t=0,i=n.length;i>t;t++)e=n[t],e.pause();return 1},o.prototype.resizeVideo_=function(e,t,i){var n,o,r;return n=this.existingController(e),n&&(o=p.defaultSize(),r=n.size(),k.isNumber(t)&&(r.width=Math.max(o.width,t)),k.isNumber(i)&&(r.height=Math.max(o.height,i)),n.setSize(r)),k.undef},o.prototype.addOnStartObserver_=function(e){return k.isFunction(e)?this.onStartObservers_.push(e):void 0},o.prototype.addOnEndObserver_=function(e){return k.isFunction(e)?this.onEndObservers_.push(e):void 0},o.prototype.addOnStopObserver_=function(e){return k.isFunction(e)?this.onStopObservers_.push(e):void 0},o}(m),P.exports=b,P.exports||x});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},__indexOf=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};sublime_.define("sublime/video/video_controller",["core/util","core/dom","core/events","core/event_emitter","core/plugin_manager","core/user_defaults","graphics/size","graphics/rect","ui/content_mode","ui/event","ui/view","ui/view_controller","ui/tap_gesture_recognizer","ui/pinch_gesture_recognizer","media/video/video","media/video/video_picker","media/media_item","media/media_source","sublime/alert","sublime/video/video_view"],function(e,t,i,n,o,r,s,a,l,u,h,p,c,d,_,y,g,f,m,v){var w,b,T,x,P,k,z,S,F,M;return M=e._,b=n.EventEmitter,w=u.Event,T=g.MediaItem,P=g.MediaItemPauseReason,x=g.MediaItemFinishReason,F={},S={},z={Full:2,Partial:1,None:0},k=function(e){function n(){switch(n.__super__.constructor.apply(this,arguments),this.videoOwnership_=this.videoOwnershipForCurrentPlatform_(),this.id_=n.NEXT_ID++,this.video_=null,this.originalVideoElement_=null,this.playbackState_=n.PLAYBACK_STATE.STOPPED,this.availableQualities_=[],this.error_=null,this.API_=null,this.bindedOnKeyDown_=M.bind(this,this.onKeyDown_),this.kit_=null,this.mouseInside_=!1,this.interruptLocks_=[],this.reduceViewObservers_=[],this.contentView_=null,this.videoOwnership_){case z.Full:this.pluginUISupport_=n.PluginUISupport.Full;break;case z.OnStop:this.pluginUISupport_=n.PluginUISupport.OnStop;break;default:this.pluginUISupport_=n.PluginUISupport.None}this.pluginManager_=new o(this)}return __extends(n,e),n.className="VideoController",n.NativeVideoAPISupport={None:0,Play:1,Full:2},n.PluginUISupport={None:0,OnStop:1,Full:2},n.OnEndAction={Nothing:"nothing",Replay:"replay",Stop:"stop"},n.VolumeKey="volume",n.NEXT_ID=0,n.ScaleMode={None:0,Width:1,All:2},n.PLAYBACK_STATE={STOPPED:0,PLAYING:1,INTERRUPTED:2,PAUSED:3,ENDED:4},n.InterruptReason={Unknown:"unknown",NoMediaData:"no media data",UserInteraction:"user interaction",PlayerLostFocus:"player lost focus",QualityChange:"chaning video quality"},n.prototype._element=function(){return this.originalVideoElement_},n.prototype._usedVideoElement=function(){return this.video_?this.video_._videoElement():void 0},n.prototype.isMouseInside=function(){return this.mouseInside_},n.prototype.abortWithAlert=function(e){return this.canReduceView()&&this.reduceView(),e.setFrame(this.contentView().bounds()),e.setAutoresizingMask(h.AutoresizingMask.FlexibleHeight|h.AutoresizingMask.FlexibleWidth),this.uninstallCurrentKit_(),this.view().append(e),this.aborted_=!0},n.prototype.API=function(){return this.API_||(this.APIEventEmitter_=new b,this.API_={on:M.bind(this,this.onAPIEvent_)}),this.API_},n.prototype.onAPIEvent_=function(){var e;return 1===arguments.length&&M.isObject(arguments[0])?e=arguments[0]:2===arguments.length&&M.isString(arguments[0])&&M.isFunction(arguments[1])&&(e={},e[arguments[0]]=arguments[1]),this.APIEventEmitter_.on(e),M.undef},n.prototype.emitAPIEvent=function(){var e,t,i;return i={},e=Array.prototype.slice.call(arguments),t=e.shift(),i[t]=e,this.APIEventEmitter_.emit(i)},n.prototype.addAPI=function(e){return M.extend(this.API(),e)},n.prototype.removeAPI=function(e){var t,i,n,o,r;for(o=M.keys(e),r=[],i=0,n=o.length;n>i;i++)t=o[i],r.push(delete this.API()[t]);return r},n.prototype.issueCH01=function(){return M.Chrome&&this.video().technology()===_.Technology.HTML5&&0>M.compareVersions(M.version,"537.1")},n.prototype.issueFF02=function(){return M.Firefox&&this.video().technology()===_.Technology.HTML5&&0>M.compareVersions(M.version,"2.0")},n.prototype.canPlayWithoutUserInteration=function(){return!M.mobile},n.prototype.playingQuality=function(){return this.video_?this.video_.quality():void 0},n.prototype.availableQualities=function(){return this.availableQualities_},n.prototype.setPlaybackQuality=function(e){return this.video_&&M.contains(this.availableQualities_,e)&&!this.video_.isChangingQuality()?this.video_.setQuality(e):void 0},n.prototype.contentView=function(){return this.contentView_||(this.contentView_=new h,this.contentView_.setAutoresizingMask(h.AutoresizingMask.FlexibleHeight|h.AutoresizingMask.FlexibleWidth),this.tapGestureRecognizer_=new c,this.tapGestureRecognizer_.handleGesture=M.bind(this,function(e){return this.delegate_?this.didTapPlayerView(this,e):void 0}),this.contentView_.addGestureRecognizer(this.tapGestureRecognizer_),M.gtIE8?this.contentView_.setBackgroundColor("rgba(0,0,0,0)"):M.IE8&&(this.contentView_.setBackgroundColor("rgb(0,0,0)"),this.contentView_.setAlpha(0))),this.contentView_},n.prototype.contextMenuOnPlayerView=function(e,t){return this.pluginManager_.makePerform(M.bind(this,function(e){return e.contextMenuDidFire(this,t)}))},n.prototype.isYoutube_=function(){return this.video_&&this.video_.technology()===_.Technology.YouTube},n.prototype.videoOwnershipForCurrentPlatform_=function(){return M.iPad&&M.compareVersions(M.OSVersion,"5")>=0||M.Android&&(M.compareVersions(M.OSVersion,"4.1")>=0||M.Chrome&&M.compareVersions(M.OSVersion,"4")||M.FirefoxAndroidTablet)||!M.mobile?z.Full:M.mobile&&(M.iOS&&M.compareVersions(M.OSVersion,"4")>=0||M.Android&&M.compareVersions(M.OSVersion,"3.0")>=0||M.Silk||M.WindowsPhone&&M.compareVersions(M.OSVersion,"7.5")>=0||M.Android&&M.Firefox&&M.compareVersions(M.version,"19")>=0)?z.Partial:z.None},n.prototype.size=function(){return this.view_?this.view().bounds().size:s.zero()},n.prototype.setSize=function(e){var t;return this.isFullscreen()||this.isFullWindow()?void 0:(t=a.zero(),t.size=e,this.view().setFrame(t),this.view().setContentMode(l.TopLeft))},n.prototype.videoOwnership=function(){return this.videoOwnership_},n.prototype.pluginForKind=function(e){var t,i,n,o;for(o=this.plugins(),i=0,n=o.length;n>i;i++)if(t=o[i],t.constructor.kind===e)return t;return null},n.prototype.shouldLoadPlugin=function(e,t){var i,n,o,r;return this.aborted_?!1:e.condition.UISupport>this.pluginUISupport_?!1:(r=!1,i=t.allowedSettings.enable.values,n=t.settings.enable,M.isArray(i)&&i.length>0&&(__indexOf.call(i,n)>=0||(n=i[0])),o=this.videoOptions()[e.kind+"Enable"],null!=o?(o=M.parseBoolean(o),r=!i||__indexOf.call(i,o)>=0?o:n):r=n,r)},n.prototype.shouldImportPlugin=function(){return!0},n.prototype.willLoadPlugin=function(e){return this.skin_?e.setSkin(this.skin_):void 0},n.prototype.didLoadPlugin=function(e){var t,i,n,o;if(this.pluginReadyObs_&&this.pluginReadyObs_[e.constructor.kind]){for(o=this.pluginReadyObs_[e.constructor.kind],i=0,n=o.length;n>i;i++)t=o[i],t(e);return delete this.pluginReadyObs_[e.constructor.kind]}},n.prototype.pluginReady=function(e,t){var i,n,o,r;for(r=this.plugins(),n=0,o=r.length;o>n;n++)if(i=r[n],i.constructor.kind===e)return t(i);return this.pluginReadyObs_||(this.pluginReadyObs_={}),this.pluginReadyObs_[e]||(this.pluginReadyObs_[e]=[]),this.pluginReadyObs_[e].push(t)},n.prototype.setDelegate=function(e){return this.delegate_=e},n.prototype.delegate=function(){return this.delegate_},n.prototype.plugins=function(){return M.values(this.pluginManager_.plugins())},n.prototype.enterFullWindow=function(){return h.supportsFullWindow()?this.view().enterFullWindow():void 0},n.prototype.expandView=function(e){var t,n;if(n=this._usedVideoElement(),M.mobile){if(this.isYoutube_())return this.view().enterFullWindow();if(n.webkitSupportsFullscreen){t=M.bind(this,function(){return this.startVideoFocusTimer(),i.unlisten(n,"webkitendfullscreen",t)}),this.unfocusFromVideo(),i.listen(n,"webkitendfullscreen",t);try{return n.webkitEnterFullscreen()}catch(o){}}}else{if(e||(e=this.options_.fullmodePriority),e===h.Fullmode.Screen&&h.supportsFullscreen())return this.view().enterFullscreen();if(h.supportsFullWindow())return this.view().enterFullWindow()}},n.prototype.isFullscreen=function(){return this.isViewLoaded()&&this.view().isFullscreen()},n.prototype.isFullWindow=function(){return this.isViewLoaded()&&this.view().isFullWindow()},n.prototype.reduceView=function(e){return e&&this.reduceViewObservers_.push(e),this.view().isFullscreen()?this.view().exitFullscreen():this.view().isFullWindow()?this.view().exitFullWindow():void 0},n.prototype.pluginFramesExcluded=function(e){var t,i,n,o;t=[],o=this.pluginManager_.plugins();for(i in o)n=o[i],n!==e&&n.isViewLoaded()&&n.view().parent()&&!n.view().isHidden()&&t.push(n.view().frame());return t},n.prototype.pluginManager=function(){return this.pluginManager_},n.prototype.pluginDidChangeFrame=function(e,t){return this.pluginManager_.makePerform(M.bind(this,function(i){return i.playerPluginDidChangeFrame(this,e,t)}))},n.prototype.skin=function(){return this.skin_},n.prototype.setSkin=function(e){return this.skin_=e,this.pluginManager_.makePerform(function(t){return t.setSkin(e)})},n.prototype.setPlugins=function(e,t){return this.pluginManager_.registerPlugins(M.values(e),t)},n.prototype.canPlayViaAPI=function(){var e;return e=this.isYoutube_()&&M.iOS&&0>M.compareVersions(M.OSVersion,"6"),!e&&(this.canPlayWithoutUserInteration()||w.userDidClick())},n.prototype.shouldAutoplay=function(){return this.options_.autoplay&&this.canPlayViaAPI()},n.prototype.supportsInlinePlayback=function(){return M.mobile?M.iPad||M.Android&&(M.compareVersions(M.OSVersion,"3")>=0||M.FirefoxAndroidTablet||M.Firefox&&M.compareVersions(M.version,"19")>=0)&&!M.Silk:!0},n.prototype.id=function(){return this.id_},n.prototype.loadView=function(){var e;return this.view_=new v(this.id()),this.view_.setMinSize(new s(130,90)),e=s.defaultSize(),this.view_.setFrame(new a(0,0,e.width,e.height)),this.view_.setDelegate(this),this.view_},n.prototype.mute=function(){return this.isVolumeEnabled()?this.muted_?void 0:(this.muted_=!0,this.volumeBeforeMuting_=this.volume(),this.setVolume(0),this.pluginManager_.makePerform(M.bind(this,function(e){return e.playerDidMute(this)}))):void 0},n.prototype.isMuted=function(){return this.muted_},n.prototype.unmute=function(){return this.isVolumeEnabled()?this.muted_?(this.muted_=!1,this.setVolume(this.volumeBeforeMuting_),this.pluginManager_.makePerform(M.bind(this,function(e){return e.playerDidUnmute(this)}))):void 0:void 0},n.prototype.onKeyDown_=function(e,o){var r,s,a,l,u,h,p,c,d;if(this.isMouseInside()&&(u=o.shiftKey||o.ctrlKey||o.altKey||o.metaKey,this.pluginManager_.makePerform(M.bind(this,function(t){return t.keyDownWithMouseInsidePlayer(this,e)})),s=new w(null,o),h=t.nodeName(s._targetElement()),"INPUT"!==h&&"TEXTAREA"!==h))switch(a=this.isInterrupted()&&this.interruptReason()!==n.InterruptReason.NoMediaData,e){case i.Keys.Zero:case i.Keys.One:case i.Keys.Two:case i.Keys.Three:case i.Keys.Four:case i.Keys.Five:case i.Keys.Six:case i.Keys.Seven:case i.Keys.Eight:case i.Keys.Nine:if(u)return;return r=this.duration(),this.isStopped()||0>=r||a||(p=M.round(.1*(e-i.Keys.Zero),1),this.seekTo(r*p)),s.preventDefault();case i.Keys.UpArrow:if(u)return;return this.isVolumeEnabled()&&!this.isStopped()&&(d=this.volume(),1>d&&(d=Math.min(1,d+.05),this.isMuted()&&this.unmute(),this.setVolume(d))),s.preventDefault();case i.Keys.DownArrow:if(u)return;return this.isVolumeEnabled()&&!this.isStopped()&&(d=this.volume(),d>0&&(d=Math.max(0,d-.05),this.isMuted()&&this.unmute(),this.setVolume(d))),s.preventDefault();case i.Keys.H:if(u)return;return this.isStopped()||(this.isPlaying()||this.isPaused()||this.isInterrupted())&&(this.playingQuality()===f.Quality.Base?this.setPlaybackQuality(f.Quality.HD):this.setPlaybackQuality(f.Quality.Base)),s.preventDefault();case i.Keys.M:if(u)return;return this.isStopped()||(this.isMuted()?this.unmute():this.mute()),s.preventDefault();case i.Keys.F:if(o.shiftKey||o.ctrlKeyor||o.metaKey)return;return this.transitioningFullmode_()||(this.canReduceView()?this.reduceView():this.canExpandView()&&(o.altKey?(c=this.invertedFullmodePriority_(),this.expandView(c)):this.expandView())),s.preventDefault();case i.Keys.SpaceBar:if(u)return;return this.isPlaying()||this.isInterrupted()?this.pause():this.isPaused()?this.play():(this.isStopped()||this.isEnded())&&this.start(),s.preventDefault();case i.Keys.LeftArrow:if(u)return;return this.isStopped()||a||(l=o.shiftKey?10:5,this.seekTo(Math.max(0,this.playbackTime()-l))),s.preventDefault();case i.Keys.RightArrow:if(u)return;return this.isStopped()||a||(l=o.shiftKey?10:5,this.seekTo(Math.min(this.duration(),this.playbackTime()+l))),s.preventDefault()}},n.prototype.invertedFullmodePriority_=function(){return this.options_.fullmodePriority===h.Fullmode.Screen?h.Fullmode.Window:h.Fullmode.Screen},n.prototype.transitioningFullmode_=function(){return this.exitingFullwindow_||this.exitingFullscreen_||this.enteringFullscreen_||this.enteringFullwindow_},n.prototype.mouseEnteredPlayerView=function(e,t){return this.exitingFullwindow_||this.exitingFullscreen_||this.unfocusFromVideo(),this.mouseInside_=!0,this.pluginManager_.makePerform(M.bind(this,function(e){return e.mouseEnteredPlayerBounds(this,t)}))},n.prototype.mouseExitedPlayerView=function(e,t){return this.exitingFullwindow_||this.exitingFullscreen_||!this.isPlaying()&&!this.isInterrupted()||this.isInterrupted()&&this.interruptReason()===n.InterruptReason.PlayerLostFocus||this.focusOnVideo(),this.mouseInside_=!1,this.pluginManager_.makePerform(M.bind(this,function(e){return e.mouseExitedPlayerBounds(this,t)}))},n.prototype.didTapPlayerView=function(e,t){var i;if(M.touch){if(this.isFocusedOnVideo())return this.unfocusFromVideo(),this.startVideoFocusTimer();if(this.isPlaying()||this.isInterrupted())return this.focusOnVideo()}else{if(!this.doubleTapPossible_)return this.doubleTapPossible_=!0,this.doubleTapTimer_=setTimeout(M.bind(this,function(){return this.doubleTapPossible_=!1,this.isPaused()?this.play():this.isPlaying()||this.isInterrupted()?this.pause():void 0}),200);if(this.doubleTapTimer_&&(clearTimeout(this.doubleTapTimer_),this.doubleTapTimer_=null),this.doubleTapPossible_=!1,this.canReduceView())return this.reduceView();if(this.canExpandView())return t.altKeyPressed()&&(i=this.invertedFullmodePriority_()),this.emit({"controls:fullmode":null}),this.expandView(i)}},n.prototype.video=function(){return this.video_},n.prototype.playbackTime=function(){return this.video_?this.video_.playbackTime():0},n.prototype.canSeekOutsideBufferBounds=function(){return this.video_.canSeekOutsideBufferBounds()},n.prototype.hasBufferedDataToPlay=function(){return this.video_.loadState()===T.LOAD_STATE.PLAY_THROUGH_OK||this.video_.isStreaming()},n.prototype.isPlaying=function(){return this.playbackState_===n.PLAYBACK_STATE.PLAYING},n.prototype.isPaused=function(){return this.playbackState_===n.PLAYBACK_STATE.PAUSED},n.prototype.isEnded=function(){return this.playbackState_===n.PLAYBACK_STATE.ENDED},n.prototype.isInterrupted=function(){return this.playbackState_===n.PLAYBACK_STATE.INTERRUPTED},n.prototype.isStopped=function(){return this.playbackState_===n.PLAYBACK_STATE.STOPPED},n.prototype.isSeeking=function(){return this.video_&&this.video_.isSeeking()},n.prototype.interruptLockHolder=function(){},n.prototype.releaseVideoLock=function(){var e;return e=this.videoInterruptLock_,this.videoInterruptLock_=null,this.releaseInterruptLock(e)},n.prototype.releaseInterruptLock=function(e){var t,i,n,o,r,s,a;for(o=!1,t=null,a=this.interruptLocks_,r=0,s=a.length;s>r;r++)if(i=a[r],i.id===e){M.remove(this.interruptLocks_,i),o=!0,t=i.reason;break}if(o&&this.isInterrupted()){if(1>this.interruptLocks_.length)return this.play();if(n=this.interruptReason(),n!==t&&this.pluginManager_.makePerform(M.bind(this,function(e){return e.playerDidChangeInterruptReason(this,n)})),!this.video_.isPaused())return this.video_.pause()}},n.prototype.interruptReason=function(){return this.interruptLocks_.length>0?this.interruptLocks_[0].reason:void 0},n.prototype.interrupt=function(e,t){var i;return null==t&&(t=n.InterruptReason.Unknown),this.videoOwnership_===z.Full?(t===n.InterruptReason.NoMediaData&&e!==this&&(t=n.InterruptReason.Unknown),i=parseInt(1e4*Math.random()),this.interruptLocks_.push({id:i,holder:e,reason:t}),this.isPlaying()?(this.setPlaybackState_(n.PLAYBACK_STATE.INTERRUPTED),t!==n.InterruptReason.NoMediaData&&this.video_.pause(),this.pluginManager_.makePerform(M.bind(this,function(e){return e.playerDidInterrupt(this,t)}))):this.isInterrupted()&&this.video_.isInterrupted()&&t!==n.InterruptReason.NoMediaData&&this.video_.pause(),i):void 0},n.prototype.videoWillStartSettingPlaybackTime=function(){},n.prototype.videoDidStartSettingPlaybackTime=function(e,t){return this.pluginManager_.makePerform(M.bind(this,function(e){return e.playerDidUpdatePlaybackTime(this,t)}))},n.prototype.videoDidCancelSetPlaybackTimeRequest=function(){},n.prototype.videoDidSetPlaybackTime=function(){},n.prototype.seekTo=function(e){return this.video_?(this.isEnded()&&this.pause(),this.video_.seekTo(e)):void 0},n.prototype.duration=function(){var e;return this.video_&&(e=this.video_.metadata())?e.duration:0},n.prototype.bufferDuration=function(){return this.video_.bufferDuration()},n.prototype.setVideoOptions_=function(e){return this.videoOptions_=e},n.prototype.options=function(){return this.options_},n.prototype.videoOptions=function(){return M.clone(this.videoOptions_)},n.prototype.release=function(){return this.pluginManager_.uninstallAllPlugins(),this.setVideo(null),n.__super__.release.apply(this,arguments)},n.prototype.initialVideoAttributes=function(){return this.initialVideoAttributes_},n.prototype.setVideoForElement=function(e,i){var o,r,s,a,l,u,h,p,c;if(e){for(this.originalVideoElement_=e,this.initialVideoAttributes_={},c=e.attributes,h=0,p=c.length;p>h;h++)o=c[h],a=o.name||o.nodeName,this.initialVideoAttributes_[a]=o.nodeValue;return this.setVideoOptions_(t.data(e)),r=e.autoplay,e.removeAttribute("autoplay"),r===!0&&(this.videoOptions_.autoplay="true"),s=e.loop,e.removeAttribute("loop"),s===!0&&(this.videoOptions_.onEnd=n.OnEndAction.Replay),l={showDefaultControls:this.videoOwnership_===z.Partial},u=y(e,this.videoOptions_,l),this.setVideo(u,this.videoOptions_,i)}return this.setVideo(null,{},i)},n.prototype.stop=function(){if(this.videoOwnership_===z.None);else if(!this.isStopped())return this.videoOwnership_!==z.Full&&this.supportsInlinePlayback()&&this.view_.setUserInteractionEnabled(!0),this.videoOwnership_!==z.Full&&this.supportsInlinePlayback()&&this.contentView_.setHidden(!1),M.iPad&&this.videoOwnership_===z.Partial&&h.addCssToElement(this.video_._videoElement(),{width:"1px",height:"1px"}),this.pluginManager_.makePerform(M.bind(this,function(e){return e.playerWillStop(this)})),this.isEnded()||this.isPaused()||this.pause(),this.setPlaybackState_(n.PLAYBACK_STATE.STOPPED),this.video_.seekTo(0),this.view().presentPosterView(),this.pinchGestureRecognizer_&&this.view().removeGestureRecognizer(this.pinchGestureRecognizer_),this.pluginManager_.makePerform(M.bind(this,function(e){return e.playerDidStop(this)})),this.delegate_.playerDidStop(this)},n.prototype.start=function(){var e,t,i,n,o,r,s,a;if(!this.aborted_&&(this.isStopped()||this.isEnded())){if(this.video_.technology()===_.Technology.Flash){if(e={title:"Download Flash plugin",url:"http://get.adobe.com/flashplayer"},!M.flash)return t=new m({title:"Can't play video",description:"You need to install Adobe Flash Player to play this video.",action:e}),this.abortWithAlert(t),void 0;if(!M.supportedFlashVersion)return t=new m({title:"Can't play video",description:"You need to upgrade your Adobe Flash Player to watch this video.",action:e}),this.abortWithAlert(t),void 0}if(this.isEnded()&&this.video_.seekTo(0),this.pluginManager_.makePerform(M.bind(this,function(e){return e.playerWillStart(this)})),this.isYoutube_()&&(this.videoOwnership_===z.None||M.Silk))i=!0,window.open("http://youtube.com/embed/"+this.videoOptions().youtubeId+"?autoplay=1");else if(this.videoOwnership_===z.None)if(M.mobile&&(M.iOS&&M.compareVersions(M.OSVersion,"3")>=0||M.Android&&(M.compareVersions(M.OSVersion,"2.1")>=0||M.Firefox)||M.WindowsPhone&&M.compareVersions(M.OSVersion,"7.5")>=0))M.iOS&&this.video_.setHidden(!1),this.video_._videoElement().play();else{for(n=null,a=this.video_.sources(),r=0,s=a.length;s>r;r++)o=a[r],o.family()===f.Family.Mp4&&(n=o);n&&(this.video_.setSource(n),i=!0,window.open(n.path()))}else this.isYoutube_()&&M.ltIE8&&(this.contentView_.setHidden(!0),this.view().dismissPosterView(),i=!0),this.videoOwnership_!==z.Full&&this.supportsInlinePlayback()&&this.contentView_.setHidden(!0),this.play();return M.touch&&this.videoOwnership_===z.Full&&(this.pinchGestureRecognizer_=new d,this.pinchGestureRecognizer_.handleGesture=M.bind(this,this.didPinchOnPlayer_),this.view().addGestureRecognizer(this.pinchGestureRecognizer_)),this.pluginManager_.makePerform(M.bind(this,function(e){return e.playerDidStart(this)})),this.delegate_.playerDidStart(this),i?this.pluginManager_.makePerform(M.bind(this,function(e){return e.playerDidStartPlaying(this)})):void 0}},n.prototype.viewWillAppear=function(){},n.prototype.viewDidAppear=function(){},n.prototype.isViewLoaded=function(){return M.isDef(this.view_)},n.prototype.viewDidLoad=function(){return n.__super__.viewDidLoad.apply(this,arguments),this.contentView().setFrame(this.view_.bounds()),this.view_.append(this.contentView()),this.pluginManager_.makePerform(M.bind(this,function(e){return e.playerDidLoadView(this)})),this.video_&&this.view_.setVideo(this.video_),M.mobile?void 0:i.listenKeyDown(this.bindedOnKeyDown_)},n.prototype.viewWillUnload=function(){return n.__super__.viewWillUnload.apply(this,arguments),M.mobile?void 0:i.unlistenKeyDown(this.bindedOnKeyDown_)},n.prototype.didPinchOnPlayer_=function(){return this.canExpandView()?this.expandView():void 0},n.prototype.uninstallCurrentKit_=function(){return this.pluginManager_.uninstallAllPlugins()},n.prototype.installKit_=function(e,t){return this.delegate_.requireSkin(e.skin,M.bind(this,function(i){return this.setSkin(i),this.setPlugins(e.plugins.videoPlayer.plugins,t)}))},n.prototype.kit=function(){return this.kit_},n.prototype.setKit=function(e,t){var i;return e?(this.uninstallCurrentKit_(),this.kit_=e,i=e.plugins.videoPlayer,this.options_=this.delegate_.options(i.allowedSettings,i.settings,this.videoOptions()),this.installKit_(e,t)):t?t():void 0},n.prototype.resetVideoAttributes=function(e,t){var i,n,o,r,s,a,l,u,h,p,c;for(r=[],e.removeAttribute("src"),p=e.attributes,a=0,u=p.length;u>a;a++)i=p[a],o=i.name||i.nodeName,r.push(o);for(l=0,h=r.length;h>l;l++)o=r[l],null==t[o]&&e.removeAttribute(o);c=[];for(n in t)s=t[n],e.getAttribute(n)!==s?c.push(e.setAttribute(n,s)):c.push(void 0);return c},n.prototype.setVideo=function(e,t,i){var n,o;return this.video_&&(this.isStopped()||this.stop(),this.resetVideoAttributes(this.video_._videoElement(),this.initialVideoAttributes_),this.initialVideoAttributes_={},this.video_.release(),this.video_=null),e?(this.video_=e,e.isReady()&&this.videoIsReady(e),this.video_.setDelegate(this),e.loadPosterImage(M.bind(this,function(t){var i;return this.video_===e&&(i=this.view().posterView(),i.setBackgroundColor("black"),e.stripVideoElementPoster(),t)?i.setImage(t):void 0})),e=this.video_,n=e.bounds(),e.setAutoresizingMask(h.AutoresizingMask.FlexibleWidth|h.AutoresizingMask.FlexibleHeight),this.view().setVideo(e),o=this.delegate_.kitForName(this.videoOptions().playerKit)||this.delegate_.defaultKit(),this.setKit(o,M.bind(this,function(){return this.isViewLoaded()&&this.view().hasParent()&&this.shouldAutoplay()&&this.video()&&this.start(),i?i():void 0}))):this.video_=null},n.prototype.addPluginView=function(e){return this.contentView().append(e)},n.prototype.isReady=function(){return this.video_.isReady()},n.prototype.play=function(){var e;return this.isPlaying()||this.aborted_?void 0:(e=!1,this.interruptLocks_.length>0?(this.playbackState_===n.PLAYBACK_STATE.INTERRUPTED||(this.setPlaybackState_(n.PLAYBACK_STATE.INTERRUPTED),this.video_.isPaused()||this.video_.pause(),this.pluginManager_.makePerform(M.bind(this,function(e){return e.playerDidInterrupt(this,this.interruptReason())}))),void 0):(this.delegate_.playerWillStartPlaying(this),this.pluginManager_.makePerform(M.bind(this,function(e){return e.playerWillPlay(this)})),this.setPlaybackState_(n.PLAYBACK_STATE.PLAYING),this.video_.isPlaying()||this.video_.play(),this.pluginManager_.makePerform(M.bind(this,function(e){return e.playerDidPlay(this)}))))},n.prototype.isVolumeEnabled=function(){return this.options_.volumeEnable&&!M.mobile},n.prototype.volume=function(){return this.video_?this.video_.volume():.5},n.prototype.setVolume=function(e){return this.isVolumeEnabled()&&(r.standardUserDefaults().set(n.VolumeKey,e),this.video_)?this.video_.setVolume(e):void 0},n.prototype.pauseReason=function(){return this.pauseReason_},n.prototype.pause=function(e){return null==e&&(e=P.userDriven),this.pauseReason_=e,(this.isPlaying()||this.isInterrupted()||this.isEnded())&&(this.setPlaybackState_(n.PLAYBACK_STATE.PAUSED),this.video_.pause(),this.pluginManager_.makePerform(M.bind(this,function(t){return t.playerDidPause(this,e)})),this.delegate_)?this.delegate_.playerDidPause(this):void 0},n.prototype.playbackState=function(){return this.playbackState_},n.prototype.setPlaybackState_=function(e){return this.playbackState_!==e&&(this.playbackState_=e),this.shouldStartVideoFocusTimer()?this.startVideoFocusTimer():(this.invalidateVideoFocusTimer(),this.unfocusFromVideo())},n.prototype.setError_=function(e){return this.error_=e},n.prototype.ownershipError_=function(){return"The player doesn't have the video ownership level to perform the action."},n.prototype.viewCanExitFullWindow=function(){return this.canReduceView()&&this.reduceView(),!1},n.prototype.canReduceView=function(){return this.view().isFullscreen()||this.view().isFullWindow()&&this.delegate_.canExitFullwindow(this)},n.prototype.canExpandView=function(){var e;return e=this._usedVideoElement(),this.options_.fullmodeEnable?M.mobile&&(this.isYoutube_()||!e.webkitSupportsFullscreen||M.Chrome)?!1:M.mobile?this.didLoadMetadataFired_:M.IE6?h.supportsFullWindow()&&!this.view().isFullWindow()&&!this.delegate_.canExitFullwindow(this):h.supportsFullscreen()&&!this.view().isFullscreen()||h.supportsFullWindow()&&!this.view().isFullWindow():!1},n.prototype.viewDidUpdateFrame=function(){return this.pluginManager_.makePerform(M.bind(this,function(e){return e.playerDidResizeView(this)}))},n.prototype.videoWillUnexpectedlyReload=function(){},n.prototype.notifyReduceViewObservers_=function(){var e,t,i,n;for(n=this.reduceViewObservers_,t=0,i=n.length;i>t;t++)e=n[t],e();return this.reduceViewObservers_=[]},n.prototype.viewWillEnterFullWindow=function(){return this.enteringFullwindow_=!0,this.invalidateVideoFocusTimer(),this.pluginManager_.makePerform(M.bind(this,function(e){return e.playerWillEnterFullWindow(this)})),M.IE8?void 0:this.contentView().setHidden(!0)},n.prototype.viewDidEnterFullWindow=function(){return M.IE8||(this.delegate_.canExitFullwindow(this)?this.contentView().setHidden(!1,!0,null,.6):this.contentView().setHidden(!1)),this.enteringFullwindow_=!1,this.pluginManager_.makePerform(M.bind(this,function(e){return e.playerDidEnterFullWindow(this)})),this.shouldStartVideoFocusTimer()?this.startVideoFocusTimer():void 0},n.prototype.viewWillExitFullWindow=function(){return this.exitingFullwindow_=!0,this.invalidateVideoFocusTimer(),this.pluginManager_.makePerform(M.bind(this,function(e){return e.playerWillExitFullWindow(this)}))},n.prototype.viewDidExitFullWindow=function(){return this.unfocusFromVideo(),this.pluginManager_.makePerform(M.bind(this,function(e){return e.playerDidExitFullWindow(this)})),this.shouldStartVideoFocusTimer()&&!this.isMouseInside()&&this.startVideoFocusTimer(),this.exitingFullwindow_=!1,this.notifyReduceViewObservers_()},n.prototype.viewWillEnterFullscreen=function(){return this.enteringFullscreen_=!0,this.invalidateVideoFocusTimer(),this.pluginManager_.makePerform(M.bind(this,function(e){return e.playerWillEnterFullscreen(this)})),this.contentView().setHidden(!0,!0,null,.2),this.video().setHidden(!0,!0,null,.2)},n.prototype.viewDidFailEnteringFullscreen=function(){return this.contentView().setHidden(!1,!0,null,.6),this.video().setHidden(!1,!0,null,.2),this.enteringFullscreen_=!1,this.pluginManager_.makePerform(M.bind(this,function(e){return e.playerDidFailEnteringFullscreen(this)})),this.shouldStartVideoFocusTimer()?this.startVideoFocusTimer():void 0},n.prototype.viewDidEnterFullscreen=function(){return this.contentView().setHidden(!1,!0,null,.6),this.video().setHidden(!1,!0,null,.2),this.enteringFullscreen_=!1,this.pluginManager_.makePerform(M.bind(this,function(e){return e.playerDidEnterFullscreen(this)})),this.shouldStartVideoFocusTimer()?this.startVideoFocusTimer():void 0},n.prototype.viewWillExitFullscreen=function(){return this.exitingFullscreen_=!0,this.contentView().setHidden(!0),this.video().setHidden(!0),this.invalidateVideoFocusTimer(),this.pluginManager_.makePerform(M.bind(this,function(e){return e.playerWillExitFullscreen(this)}))},n.prototype.viewDidExitFullscreen=function(){return this.contentView().setHidden(!1),this.video().setHidden(!1),this.exitingFullscreen_=!1,this.unfocusFromVideo(),this.pluginManager_.makePerform(M.bind(this,function(e){return e.playerDidExitFullscreen(this)
})),this.shouldStartVideoFocusTimer()&&!this.isMouseInside()&&this.startVideoFocusTimer(),this.notifyReduceViewObservers_()},n.prototype.focusOnVideo=function(){return!this.focusedOnVideo_&&(this.invalidateVideoFocusTimer(),this.focusedOnVideo_=!0,this.pluginManager_.makePerform(M.bind(this,function(e){return e.playerDidFocusOnVideo(this)})),this.isMouseInside())?this.view().css({cursor:"none"}):void 0},n.prototype.isFocusedOnVideo=function(){return this.focusedOnVideo_},n.prototype.unfocusFromVideo=function(){return this.focusedOnVideo_?(this.invalidateVideoFocusTimer(),this.focusedOnVideo_=!1,this.pluginManager_.makePerform(M.bind(this,function(e){return e.playerDidUnfocusFromVideo(this)})),this.view().css({cursor:"default"})):void 0},n.prototype.invalidateVideoFocusTimer=function(){return this.videoFocusTimer_?(clearTimeout(this.videoFocusTimer_),this.videoFocusTimer_=null):void 0},n.prototype.shouldStartVideoFocusTimer=function(){return this.isPlaying()||this.isInterrupted()&&this.interruptReason()!==n.InterruptReason.PlayerLostFocus},n.prototype.startVideoFocusTimer=function(){return this.invalidateVideoFocusTimer(),this.videoFocusTimer_=setTimeout(M.bind(this,function(){return this.focusOnVideo()}),4500)},n.prototype.mouseMovedOnPlayerView=function(e,t){var i;return i=t.locationInBrowserWindow(),this.lastMousePosition_&&this.lastMousePosition_.isEqualTo(i)||(this.invalidateVideoFocusTimer(),this.unfocusFromVideo(),this.shouldStartVideoFocusTimer()&&this.startVideoFocusTimer()),this.lastMousePosition_=i},n.prototype.videoWillLoadMetadata=function(){},n.prototype.videoDidLoadMetadata=function(e){var t,i;return this.didLoadMetadataFired_||(this.didLoadMetadataFired_=!0,this.availableQualities_=e.availableQualities(),t=r.standardUserDefaults().get(n.VolumeKey),i=null!=t?t:.5,e.setVolume(i),this.pluginManager_.makePerform(M.bind(this,function(e){return e.playerDidLoadMetadata(this)})),this.pluginManager_.makePerform(M.bind(this,function(e){return e.playerDidChangeFullmodeSupport(this)}))),this.releaseVideoLock()},n.prototype.videoIsReady=function(e){return this.pluginManager_.makePerform(M.bind(this,function(t){return t.playerDidInitializeVideo(this,e)}))},n.prototype.videoDidFailWithError=function(e,t){var i;return this.setError_(t),(this.isPlaying()||this.isInterrupted())&&this.pause(),i=new m({title:"Can't play video",description:t.message,action:t.action}),this.abortWithAlert(i)},n.prototype.videoDidStartPlaying=function(){return this.videoOwnership_!==z.Full&&this.supportsInlinePlayback()&&this.view_.setUserInteractionEnabled(!1),this.releaseVideoLock(),this.setPlaybackState_(n.PLAYBACK_STATE.PLAYING),this.supportsInlinePlayback()&&this.view().dismissPosterView(),this.pluginManager_.makePerform(M.bind(this,function(e){return e.playerDidStartPlaying(this)}))},n.prototype.videoWillPause=function(){},n.prototype.videoDidPause=function(){return this.releaseVideoLock()},n.prototype.videoDidUnexpectedlyPlay=function(){return this.play()},n.prototype.videoDidUnexpectedlyPause=function(){return this.pause(P.Unknown),this.releaseVideoLock()},n.prototype.videoDidEnd=function(){var e;return this.releaseVideoLock(),this.pause(P.PlaybackEnd),M.IE8||this.contentView_.setHidden(!1),e=x.PlaybackEnded,this.setPlaybackState_(n.PLAYBACK_STATE.ENDED),this.pluginManager_.makePerform(M.bind(this,function(t){return t.playerDidEnd(this,e)})),this.options_.onEnd===n.OnEndAction.Stop?this.stop():this.options_.onEnd===n.OnEndAction.Replay&&this.start(),this.delegate_.playerDidEndPlaying(this)},n.prototype.videoDidInterrupt=function(){return this.isPlaying()?this.videoInterruptLock_=this.interrupt(this,n.InterruptReason.NoMediaData):void 0},n.prototype.videoWillUpdateBufferDuration=function(){},n.prototype.videoDidUpdateBufferDuration=function(e,t){return this.pluginManager_.makePerform(M.bind(this,function(e){return e.playerDidUpdateBuffer(this,t)}))},n.prototype.videoWillChangeQuality=function(e,t){return this.pluginManager_.makePerform(M.bind(this,function(e){return e.playerWillChangeQuality(this,t)})),this.qualityInterruptLock_=this.interrupt(this,n.InterruptReason.QualityChange),this.releaseVideoLock()},n.prototype.videoDidUnexpectlyChangeQuality=function(e,t){return this.pluginManager_.makePerform(M.bind(this,function(e){return e.playerDidUnexpectlyChangeQuality(this,t)}))},n.prototype.videoDidChangeQuality=function(e,t){var i;return i=this.qualityInterruptLock_,this.qualityInterruptLock_=null,this.releaseInterruptLock(i),this.pluginManager_.makePerform(M.bind(this,function(e){return e.playerDidChangeQuality(this,t)}))},n.prototype.videoDidUpdatePlaybackTime=function(e,t){return this.lastUpdatedPlaybackTime_=t,this.pluginManager_.makePerform(M.bind(this,function(e){return e.playerDidUpdatePlaybackTime(this,t)}))},n.prototype.videoWillSeek=function(e,t){return this.pluginManager_.makePerform(M.bind(this,function(e){return e.playerWillSeek(this,t)}))},n.prototype.videoDidSeek=function(){return this.pluginManager_.makePerform(M.bind(this,function(e){return e.playerDidSeek(this)}))},n.prototype.videoWillChangeVolume=function(){},n.prototype.videoDidChangeVolume=function(e,t){return this.pluginManager_.makePerform(M.bind(this,function(e){return e.playerDidChangeVolume(this,t)}))},n}(p),S.VideoOwnership=z,S.VideoController=k,F.exports||S});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("sublime/video/video_controller_plugin",["ui/plugin_view_controller","sublime/video/video_controller","core/util","media/media_item"],function(e,t,i,n){var o,r,s,a,l,u;return r=t.VideoController,u=i._,o=n.MediaItemPauseReason,l={},a={},s=function(e){function t(){t.__super__.constructor.apply(this,arguments),this.hiddenOnMouseExit_=!1,this.hideControlsTimer_=null}return __extends(t,e),t.className="VideoControllerPlugin",t.condition={UISupport:r.PluginUISupport.Full},t.prototype.loadDataSettings=function(){return this.player().videoOptions()},t.prototype.setDelegate=function(e){return this.delegate_=e},t.prototype.player=function(){return this.delegate_},t.prototype.api=function(e){return this.delegate_.addAPI(e)},t.prototype.emitAPIEvent=function(){return this.delegate_.emitAPIEvent.apply(this.delegate_,arguments)},t.prototype.viewDidUpdateFrame=function(){return this.delegate_?this.delegate_.pluginDidChangeFrame(this):void 0},t.prototype.viewDidSetHidden=function(e,t){return this.delegate_?this.delegate_.pluginDidChangeFrame(this,t):void 0},t.prototype.setHiddenOnMouseExit=function(e){return this.hiddenOnMouseExit_=e},t.prototype.mouseEnteredPlayerBounds=function(){},t.prototype.contextMenuDidFire=function(){},t.prototype.mouseExitedPlayerBounds=function(){},t.prototype.keyDownWithMouseInsidePlayer=function(){},t.prototype.isMouseInsidePlayer=function(){return!u.touch&&this.player().isMouseInside()},t.prototype.playerDidInitializeVideo=function(){},t.prototype.playerDidChangeVolume=function(){},t.prototype.playerDidResizeView=function(){},t.prototype.canMoveFromCurrentFrame=function(){return!0},t.prototype.playerPluginDidChangeFrame=function(){},t.prototype.playerDidMute=function(){},t.prototype.playerDidUnmute=function(){},t.prototype.playerDidLoadMetadata=function(){},t.prototype.playerWillChangeQuality=function(){},t.prototype.playerDidChangeQuality=function(){},t.prototype.playerDidUnexpectlyChangeQuality=function(){},t.prototype.playerWillStart=function(){},t.prototype.playerDidLoadView=function(){},t.prototype.playerDidStart=function(){},t.prototype.playerWillStop=function(){},t.prototype.playerDidStop=function(){},t.prototype.playerWillPlay=function(){},t.prototype.playerDidPlay=function(){},t.prototype.playerDidPause=function(){},t.prototype.playerDidInterrupt=function(){},t.prototype.playerDidChangeInterruptReason=function(){},t.prototype.playerDidStartPlaying=function(){},t.prototype.playerWillSeek=function(){},t.prototype.playerDidSeek=function(){},t.prototype.playerDidUpdatePlaybackTime=function(){},t.prototype.playerDidUpdateBuffer=function(){},t.prototype.playerDidEnd=function(){},t.prototype.playerWillEnterFullscreen=function(){},t.prototype.playerDidEnterFullscreen=function(){},t.prototype.playerWillExitFullscreen=function(){},t.prototype.playerDidExitFullscreen=function(){},t.prototype.playerDidFocusOnVideo=function(){return this.hideViewAnimated(!0)},t.prototype.playerDidUnfocusFromVideo=function(e){var t;return t=!(e.isPaused()&&e.pauseReason()===o.Unknown),this.showViewAnimated(t)},t.prototype.playerDidChangeFullmodeSupport=function(){},t.prototype.playerWillEnterFullWindow=function(){},t.prototype.playerDidEnterFullWindow=function(){},t.prototype.playerWillExitFullWindow=function(){},t.prototype.playerDidExitFullWindow=function(){},t.prototype.playerWillEnterFullscreen=function(){},t.prototype.playerDidFailEnteringFullscreen=function(){},t.prototype.playerDidEnterFullscreen=function(){},t.prototype.playerWillExitFullscreen=function(){},t.prototype.playerDidExitFullscreen=function(){},t.prototype.showViewAnimated=function(e){return this.view_&&this.view().isHidden()?this.view().setHidden(!1,e):void 0},t.prototype.hideViewAnimated=function(e){return this.view_&&!this.view().isHidden()?this.view().setHidden(!0,e):void 0},t}(e),l.exports=s,l.exports||a});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};sublime_.define("sublime/video/video_view",["ui/content_mode","ui/tracking_area","ui/style","ui/view","ui/image_view","core/util"],function(e,t,i,n,o,r){var s,a,l,u;return u=r._,l={},a={},s=function(r){function s(e){s.__super__.constructor.call(this,"span"),this.id_=e,this.controls_=null,this.delegate_=null,this._element().id="sv_player_"+e}return __extends(s,r),s.className="VideoView",s.prototype.setDelegate=function(e){return this.delegate_=e},s.prototype.setVideo=function(e){return e!==this.video_?(this.video_=e,this.append(e,{index:0}),this.posterView().hasParent()||this.append(this.posterView(),{index:1}),this.posterView().setFrame(this.bounds())):void 0},s.prototype.marginStyle_=function(e,t){var i;return i=u.style(e,"margin-"+t),u.isEmptyString(i)?u.computedStyle(e,"margin-"+t):i},s.prototype.didMoveToRootView=function(){var e;return s.__super__.didMoveToRootView.apply(this,arguments),e=new t(this.bounds(),{trackingInVisibleRect:!0,mouseMovedEnabled:!0}),this.addTrackingArea(e)},s.prototype.didMoveToParent=function(){return s.__super__.didMoveToParent.apply(this,arguments),this.parent().bounds?this.setFrame(this.parent().bounds()):void 0},s.prototype.willRemoveFromRootView=function(){return this.removeAllTrackingAreas()},s.prototype.contextMenu=function(e){return this.delegate_?this.delegate_.contextMenuOnPlayerView(this,e):void 0},s.prototype.mouseEntered=function(e){return this.delegate_?this.delegate_.mouseEnteredPlayerView(this,e):void 0},s.prototype.mouseExited=function(e){return this.delegate_?this.delegate_.mouseExitedPlayerView(this,e):void 0},s.prototype.mouseMoved=function(e){return this.delegate_?this.delegate_.mouseMovedOnPlayerView(this,e):void 0},s.prototype.posterView=function(){return this.posterView_||(this.posterView_=new o,this.posterView_.setAutoresizingMask(n.AutoresizingMask.FlexibleWidth|n.AutoresizingMask.FlexibleHeight),this.posterView_.setContentMode(e.ScaleAspectWidthFit),this.posterView_.css({opacity:.99,"pointer-events":"none",overflow:"hidden"})),this.posterView_},s.prototype.presentPosterView=function(){return this.posterView().setHidden(!1)},s.prototype.dismissPosterView=function(){return this.posterView().setHidden(!0,!0)},s.childrenBaseCss=function(){return i.defaultCss()},s.baseCss=function(){var e;return e={"line-height":"0",background:"black",direction:"ltr",padding:"0","text-align":"center","-webkit-user-select":"none","-moz-user-select":"none"},u.Chrome&&(e.background="rgba(0, 0, 0, 0.99)"),e},s}(n),l.exports=s,l.exports||a}),sublime_.define("sublime/video_manager",["core/util","core/dom"],function(e,t){var i,n,o,r;return r=e._,o={},n={},i=function(){function e(){this.videoElements_=[],this.clonedVideoElements_=[]}return e.className="VideoManager",e.sharedInstance=function(){return this.sharedInstance_||(this.sharedInstance_=new e),this.sharedInstance_},e.prototype.originalElement=function(e){var t;return t=r.indexOf(this.clonedVideoElements_,e),t>=0&&(e=this.videoElements_[t]),e},e.prototype.updatedElement=function(e){var i,n;return r.isString(e)?n=t.elementById(e):t.isNode(e)&&(n=e,this.clonedVideoElements_.length>0&&(i=r.indexOf(this.videoElements_,n),i>=0&&(n=this.clonedVideoElements_[i]))),n},e.prototype.registerClonedVideoElement=function(e,t){var i;return i=r.indexOf(this.videoElements_,e),i>=0?this.clonedVideoElements_[i]=t:(this.videoElements_.push(e),this.clonedVideoElements_.push(t))},e}(),o.exports=i,o.exports||n}),sublime_.define("application",["sublime/api","sublime/sublime_scripts","sublime/license_validator","sublime/default.settings","core/util","core/dom","core/plugin_manager","core/log","core/page","core/url","sublime/stats/stats_sender","sublime/stats/app_load_request"],function(e,t,i,n,o,r,s,a,l,u,h,p){var c,d,_,y,g,f;return c=e.Api,_=e.InternalApi,f=o._,g={},y={},d=function(){function e(){}return e.className="Application",e.prototype.load=function(e,i){var n;return this.config_=e,this.stage=this._stageForVersion(this.config_.version),this.pluginsInfo_={},this.config_.host="//www.npr.org/news/graphics/2012/10/popup-pres",this.debugInfo_={config:this.config_},f.HOST=this.config_.host,this.sublimeScripts_=new t(this.config_.host),this.pluginManager_=new s(this),n="settings",require.setCurrentPath&&require.setCurrentPath(this.modulePath(e.appComponent)),require.addPath&&require.addPath(n,this.licenseComponentPath_()),window.sublime=f.bind(this,this.APIObject_),this.loadAndValidateLicense(n,f.bind(this,function(){return i?i():void 0}))},e.prototype._stageForVersion=function(e){var t;return(t=e.match(/(alpha|beta)/))?t[1]:"stable"},e.prototype.isEmbeddedOnExternalPage=function(){var e,t,i,n,o,r,s;if(!l.embedded)return!1;if(o=u.parse(l.referrerUrl),i=o.host(),!i)return!0;for(t=this.license_.hosts.concat(this.license_.devHosts),r=0,s=t.length;s>r;r++)if(e=t[r],n=RegExp(""+e),n.test(i))return!1;return!0},e.prototype.realtimeStats=function(){return this.settings_.app.stats.settings.realtime},e.prototype.loadAndValidateLicense=function(e,t){return require([e],f.bind(this,function(e){var o,r,s;return this.settings_=e,o=n.app,this.deepExtend(o,e.app),this.settings_.app=o,this.license_=e.license,this.licenseValidator_=new i(this.config_.host,this.config_.version,this.sublimeScripts_.anyToken()),this.licenseType_=this.licenseValidator_.validate(this.license_),this.config_.env=this.licenseValidator_.envForLicenseType(this.licenseType_),this.hostType=this.licenseType_,s=h.sharedInstance(),s.addEndpoint(h.EndpointType.AJAX,"//data.sublimevideo.net/d/"+this.config_.token+".json?v="+this.config_.version),s.addEndpoint(h.EndpointType.GIF,"//data.sublimevideo.net/_.gif?s="+this.config_.token+"&v="+this.config_.version),s.addEndpoint(h.EndpointType.GIF,"//www.npr.org/news/graphics/2012/10/popup-pres/_.gif?s="+this.config_.token+"&v="+this.config_.version),r=new p(this),s.send(r),this.setupStatsDebugInfo(),this.initKitsInfo_(),this.registerAppPlugins_(f.bind(this,function(){return this.exportAPI_(),t?t():void 0}))}))},e.prototype.setupStatsDebugInfo=function(){var e;return e=this.settings_.app.stats.settings,this.debugInfo_.statsEnabled=e.enable,this.debugInfo_.page=l,this.debugInfo_.embeddedOnExternalPage=this.isEmbeddedOnExternalPage()},e.prototype.areScriptsConsistent_=function(e){return e&&2===e.count()&&1===e.uniqueTokens().length},e.prototype.registerAppPlugins_=function(e){return this.pluginManager_.registerPlugins(f.values(this.defaultKitInfo_.plugins),e)},e.prototype.saveKit_=function(e,t){var i,o,r,s;return i=this.deepClone(n),this.deepExtend(i,t),r=this.parseSkinId_(t.skin),o={name:e,plugins:i.plugins,skin:r?r:this.parseSkinId_(n.skin)},this.kitsInfo_[e]=o,this.recursivelyRegisterPlugins_(o),s=o.skin,require.addPath?require.addPath(s.module,this.modulePath(s.file)):void 0},e.prototype.initKitsInfo_=function(){var e,t,i,o,r;e=n,t=this.parseSkinId_(n.skin),this.kitsInfo_={},r=this.settings_.kits;for(o in r)i=r[o],this.saveKit_(o,i);return this.defaultKitInfo_=this.kitsInfo_[this.settings_.defaultKit]},e.prototype.deepClone=function(e){var t,i;t={};for(i in e)t[i]=e[i]&&e[i].constructor&&e[i].constructor===Object?this.deepClone(e[i]):e[i];return t},e.prototype.deepExtend=function(e,t){var i,n;n=[];for(i in t)t[i]&&t[i].constructor&&t[i].constructor===Object?(e[i]=e[i]||{},n.push(this.deepExtend(e[i],t[i]))):n.push(e[i]=t[i]);return n},e.prototype.recursivelyRegisterPlugins_=function(e){var t,i,n,o,r;if(e.plugins){o=e.plugins,r=[];for(i in o)n=o[i],t=this.parsePluginId_(n.id,n),f.extend(n,t),require.addPath&&require.addPath(t.module,this.modulePath(t.file)),r.push(this.recursivelyRegisterPlugins_(n));return r}},e.prototype.parseSkinId_=function(e){var t,i;return e.module?{file:null,module:e.module}:(t=e.id,t?(i=t.split("."),{file:i[0],module:i[1],name:i[2]}):null)},e.prototype.parsePluginId_=function(e,t){var i;return t.module?{module:t.module,file:null,"class":t.module}:(i=e.split("."),{file:i[0],module:i[1],"class":i[2]})},e.prototype.atLeastAnElementWithTagAndClassName_=function(e,t){var i,n,o;if(document.querySelector&&document.querySelector(""+e+"."+t))return!0;for(n=document.getElementsByTagName(e),o=n.length;o--;)if(i=n[o].getAttribute("class")||n[o].getAttribute("className"),i&&i.indexOf(t)>-1)return!0},e.prototype.shouldImportPlugin=function(){return!0},e.prototype.willLoadPlugin=function(){},e.prototype.didLoadPlugin=function(){},e.prototype.requirePluginForElement=function(e,t){var i,n,o,s,a;if(e){n=r.nodeName(e),a=this.defaultKitInfo_.plugins;for(s in a)if(o=a[s],i=o.condition,i&&i.tagName===n)return this.pluginManager_.loadPlugin(o["class"],function(e,i){return t?t(e,i):void 0}),void 0}return 0},e.prototype.isLicenseValid=function(){return this.licenseType_!==i.LicenseType.Invalid},e.prototype.licenseError=function(){return{title:"Invalid license",description:this.licenseValidator_.errorDescription,action:{title:"Learn more &raquo;",url:"http://docs.sublimevideo.net/troubleshooting#not-properly-registered"}}},e.prototype.skinsInfo=function(){return this.skinsInfo_},e.prototype.pluginsInfo=function(){return this.pluginsInfo_},e.prototype.licenseType=function(){return this.licenseType_},e.prototype.license=function(){return this.license_?f.clone(this.license_):void 0},e.prototype.availableKits=function(){return this.kitsInfo_},e.prototype.defaultKit=function(){return this.defaultKitInfo_},e.prototype.config=function(){return this.config_},e.prototype.licenseComponentPath_=function(){return this.config_.host&&this.config_.token?""+this.config_.host+"/s/"+this.config_.token+".js":void 0},e.prototype.modulePath=function(e){return this.config_.host&&this.config_.token?""+this.config_.host+"/c/"+e+"/"+this.config_.components[e]+"/"+e+".js?t="+this.config_.token:void 0},e.prototype.APIObject_=function(e){var t;return t=r.element(e),this.APIObjectForElement_(t)},e.prototype.APIObjectForElement_=function(e){var t,i,n,o;if(e){o=this.pluginManager_.plugins();for(n in o)if(i=o[n],t=i.APIObjectForElement(e))return t}},e.prototype.exportAPI_=function(){return c("load",this,function(){}),c("ready",this,function(e){return e()}),c("version",this,this.config_.version),c("env",this,this.config_.env),c("prepare",this,this.prepare_),c("unprepare",this,this.unprepare_),_("debugInfo",this,this.debugInfo)},e.prototype.debugInfo=function(){return this.debugInfo_},e.prototype.prepare_=function(e,t){var i;return i=r.element(e),this.requirePluginForElement(i,function(e,n){return n?n.prepareElement(i,function(e,i){return t?e||!i?t(null):t(i.API()):void 0}):t?t(null):void 0}),f.undef},e.prototype.unprepare_=function(e){var t;return t=r.element(e),this.requirePluginForElement(t,function(e,i){return i?i.unprepareElement(t):void 0}),f.undef},e}(),g.exports=d,g.exports||y});;sublime_.component('app');})();
